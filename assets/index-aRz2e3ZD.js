(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();function TM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var LA={exports:{}},fg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hC;function UL(){if(hC)return fg;hC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var c in a)c!=="key"&&(s[c]=a[c])}else s=a;return a=s.ref,{$$typeof:n,type:i,key:o,ref:a!==void 0?a:null,props:s}}return fg.Fragment=e,fg.jsx=t,fg.jsxs=t,fg}var dC;function LL(){return dC||(dC=1,LA.exports=UL()),LA.exports}var ee=LL(),IA={exports:{}},Sn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pC;function IL(){if(pC)return Sn;pC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y(j){return j===null||typeof j!="object"?null:(j=g&&j[g]||j["@@iterator"],typeof j=="function"?j:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,T={};function E(j,fe,_e){this.props=j,this.context=fe,this.refs=T,this.updater=_e||_}E.prototype.isReactComponent={},E.prototype.setState=function(j,fe){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,fe,"setState")},E.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function b(){}b.prototype=E.prototype;function R(j,fe,_e){this.props=j,this.context=fe,this.refs=T,this.updater=_e||_}var D=R.prototype=new b;D.constructor=R,A(D,E.prototype),D.isPureReactComponent=!0;var B=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function z(j,fe,_e,Ae,De,ot){return _e=ot.ref,{$$typeof:n,type:j,key:fe,ref:_e!==void 0?_e:null,props:ot}}function I(j,fe){return z(j.type,fe,void 0,void 0,void 0,j.props)}function O(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function P(j){var fe={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(_e){return fe[_e]})}var Y=/\/+/g;function ie(j,fe){return typeof j=="object"&&j!==null&&j.key!=null?P(""+j.key):fe.toString(36)}function se(){}function ue(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(se,se):(j.status="pending",j.then(function(fe){j.status==="pending"&&(j.status="fulfilled",j.value=fe)},function(fe){j.status==="pending"&&(j.status="rejected",j.reason=fe)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function me(j,fe,_e,Ae,De){var ot=typeof j;(ot==="undefined"||ot==="boolean")&&(j=null);var ve=!1;if(j===null)ve=!0;else switch(ot){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(j.$$typeof){case n:case e:ve=!0;break;case m:return ve=j._init,me(ve(j._payload),fe,_e,Ae,De)}}if(ve)return De=De(j),ve=Ae===""?"."+ie(j,0):Ae,B(De)?(_e="",ve!=null&&(_e=ve.replace(Y,"$&/")+"/"),me(De,fe,_e,"",function(bt){return bt})):De!=null&&(O(De)&&(De=I(De,_e+(De.key==null||j&&j.key===De.key?"":(""+De.key).replace(Y,"$&/")+"/")+ve)),fe.push(De)),1;ve=0;var Ne=Ae===""?".":Ae+":";if(B(j))for(var Qe=0;Qe<j.length;Qe++)Ae=j[Qe],ot=Ne+ie(Ae,Qe),ve+=me(Ae,fe,_e,ot,De);else if(Qe=y(j),typeof Qe=="function")for(j=Qe.call(j),Qe=0;!(Ae=j.next()).done;)Ae=Ae.value,ot=Ne+ie(Ae,Qe++),ve+=me(Ae,fe,_e,ot,De);else if(ot==="object"){if(typeof j.then=="function")return me(ue(j),fe,_e,Ae,De);throw fe=String(j),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return ve}function H(j,fe,_e){if(j==null)return j;var Ae=[],De=0;return me(j,Ae,"","",function(ot){return fe.call(_e,ot,De++)}),Ae}function W(j){if(j._status===-1){var fe=j._result;fe=fe(),fe.then(function(_e){(j._status===0||j._status===-1)&&(j._status=1,j._result=_e)},function(_e){(j._status===0||j._status===-1)&&(j._status=2,j._result=_e)}),j._status===-1&&(j._status=0,j._result=fe)}if(j._status===1)return j._result.default;throw j._result}var q=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function ge(){}return Sn.Children={map:H,forEach:function(j,fe,_e){H(j,function(){fe.apply(this,arguments)},_e)},count:function(j){var fe=0;return H(j,function(){fe++}),fe},toArray:function(j){return H(j,function(fe){return fe})||[]},only:function(j){if(!O(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Sn.Component=E,Sn.Fragment=t,Sn.Profiler=a,Sn.PureComponent=R,Sn.StrictMode=i,Sn.Suspense=f,Sn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Sn.__COMPILER_RUNTIME={__proto__:null,c:function(j){return U.H.useMemoCache(j)}},Sn.cache=function(j){return function(){return j.apply(null,arguments)}},Sn.cloneElement=function(j,fe,_e){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var Ae=A({},j.props),De=j.key,ot=void 0;if(fe!=null)for(ve in fe.ref!==void 0&&(ot=void 0),fe.key!==void 0&&(De=""+fe.key),fe)!L.call(fe,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&fe.ref===void 0||(Ae[ve]=fe[ve]);var ve=arguments.length-2;if(ve===1)Ae.children=_e;else if(1<ve){for(var Ne=Array(ve),Qe=0;Qe<ve;Qe++)Ne[Qe]=arguments[Qe+2];Ae.children=Ne}return z(j.type,De,void 0,void 0,ot,Ae)},Sn.createContext=function(j){return j={$$typeof:o,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:s,_context:j},j},Sn.createElement=function(j,fe,_e){var Ae,De={},ot=null;if(fe!=null)for(Ae in fe.key!==void 0&&(ot=""+fe.key),fe)L.call(fe,Ae)&&Ae!=="key"&&Ae!=="__self"&&Ae!=="__source"&&(De[Ae]=fe[Ae]);var ve=arguments.length-2;if(ve===1)De.children=_e;else if(1<ve){for(var Ne=Array(ve),Qe=0;Qe<ve;Qe++)Ne[Qe]=arguments[Qe+2];De.children=Ne}if(j&&j.defaultProps)for(Ae in ve=j.defaultProps,ve)De[Ae]===void 0&&(De[Ae]=ve[Ae]);return z(j,ot,void 0,void 0,null,De)},Sn.createRef=function(){return{current:null}},Sn.forwardRef=function(j){return{$$typeof:c,render:j}},Sn.isValidElement=O,Sn.lazy=function(j){return{$$typeof:m,_payload:{_status:-1,_result:j},_init:W}},Sn.memo=function(j,fe){return{$$typeof:d,type:j,compare:fe===void 0?null:fe}},Sn.startTransition=function(j){var fe=U.T,_e={};U.T=_e;try{var Ae=j(),De=U.S;De!==null&&De(_e,Ae),typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function"&&Ae.then(ge,q)}catch(ot){q(ot)}finally{U.T=fe}},Sn.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Sn.use=function(j){return U.H.use(j)},Sn.useActionState=function(j,fe,_e){return U.H.useActionState(j,fe,_e)},Sn.useCallback=function(j,fe){return U.H.useCallback(j,fe)},Sn.useContext=function(j){return U.H.useContext(j)},Sn.useDebugValue=function(){},Sn.useDeferredValue=function(j,fe){return U.H.useDeferredValue(j,fe)},Sn.useEffect=function(j,fe,_e){var Ae=U.H;if(typeof _e=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ae.useEffect(j,fe)},Sn.useId=function(){return U.H.useId()},Sn.useImperativeHandle=function(j,fe,_e){return U.H.useImperativeHandle(j,fe,_e)},Sn.useInsertionEffect=function(j,fe){return U.H.useInsertionEffect(j,fe)},Sn.useLayoutEffect=function(j,fe){return U.H.useLayoutEffect(j,fe)},Sn.useMemo=function(j,fe){return U.H.useMemo(j,fe)},Sn.useOptimistic=function(j,fe){return U.H.useOptimistic(j,fe)},Sn.useReducer=function(j,fe,_e){return U.H.useReducer(j,fe,_e)},Sn.useRef=function(j){return U.H.useRef(j)},Sn.useState=function(j){return U.H.useState(j)},Sn.useSyncExternalStore=function(j,fe,_e){return U.H.useSyncExternalStore(j,fe,_e)},Sn.useTransition=function(){return U.H.useTransition()},Sn.version="19.1.1",Sn}var mC;function Ip(){return mC||(mC=1,IA.exports=IL()),IA.exports}var G=Ip();const ti=TM(G);var PA={exports:{}},hg={},FA={exports:{}},zA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gC;function PL(){return gC||(gC=1,(function(n){function e(H,W){var q=H.length;H.push(W);e:for(;0<q;){var ge=q-1>>>1,j=H[ge];if(0<a(j,W))H[ge]=W,H[q]=j,q=ge;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var W=H[0],q=H.pop();if(q!==W){H[0]=q;e:for(var ge=0,j=H.length,fe=j>>>1;ge<fe;){var _e=2*(ge+1)-1,Ae=H[_e],De=_e+1,ot=H[De];if(0>a(Ae,q))De<j&&0>a(ot,Ae)?(H[ge]=ot,H[De]=q,ge=De):(H[ge]=Ae,H[_e]=q,ge=_e);else if(De<j&&0>a(ot,q))H[ge]=ot,H[De]=q,ge=De;else break e}}return W}function a(H,W){var q=H.sortIndex-W.sortIndex;return q!==0?q:H.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var f=[],d=[],m=1,g=null,y=3,_=!1,A=!1,T=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function B(H){for(var W=t(d);W!==null;){if(W.callback===null)i(d);else if(W.startTime<=H)i(d),W.sortIndex=W.expirationTime,e(f,W);else break;W=t(d)}}function U(H){if(T=!1,B(H),!A)if(t(f)!==null)A=!0,L||(L=!0,ie());else{var W=t(d);W!==null&&me(U,W.startTime-H)}}var L=!1,z=-1,I=5,O=-1;function P(){return E?!0:!(n.unstable_now()-O<I)}function Y(){if(E=!1,L){var H=n.unstable_now();O=H;var W=!0;try{e:{A=!1,T&&(T=!1,R(z),z=-1),_=!0;var q=y;try{t:{for(B(H),g=t(f);g!==null&&!(g.expirationTime>H&&P());){var ge=g.callback;if(typeof ge=="function"){g.callback=null,y=g.priorityLevel;var j=ge(g.expirationTime<=H);if(H=n.unstable_now(),typeof j=="function"){g.callback=j,B(H),W=!0;break t}g===t(f)&&i(f),B(H)}else i(f);g=t(f)}if(g!==null)W=!0;else{var fe=t(d);fe!==null&&me(U,fe.startTime-H),W=!1}}break e}finally{g=null,y=q,_=!1}W=void 0}}finally{W?ie():L=!1}}}var ie;if(typeof D=="function")ie=function(){D(Y)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ue=se.port2;se.port1.onmessage=Y,ie=function(){ue.postMessage(null)}}else ie=function(){b(Y,0)};function me(H,W){z=b(function(){H(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(H){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var q=y;y=W;try{return H()}finally{y=q}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var q=y;y=H;try{return W()}finally{y=q}},n.unstable_scheduleCallback=function(H,W,q){var ge=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ge+q:ge):q=ge,H){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=q+j,H={id:m++,callback:W,priorityLevel:H,startTime:q,expirationTime:j,sortIndex:-1},q>ge?(H.sortIndex=q,e(d,H),t(f)===null&&H===t(d)&&(T?(R(z),z=-1):T=!0,me(U,q-ge))):(H.sortIndex=j,e(f,H),A||_||(A=!0,L||(L=!0,ie()))),H},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(H){var W=y;return function(){var q=y;y=W;try{return H.apply(this,arguments)}finally{y=q}}}})(zA)),zA}var vC;function FL(){return vC||(vC=1,FA.exports=PL()),FA.exports}var HA={exports:{}},os={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yC;function zL(){if(yC)return os;yC=1;var n=Ip();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(f,d,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:f,containerInfo:d,implementation:m}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return os.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,os.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(f,d,null,m)},os.flushSync=function(f){var d=o.T,m=i.p;try{if(o.T=null,i.p=2,f)return f()}finally{o.T=d,i.p=m,i.d.f()}},os.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},os.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},os.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,g=c(m,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,_=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:_}):m==="script"&&i.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:_,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},os.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},os.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,g=c(m,d.crossOrigin);i.d.L(f,m,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},os.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=c(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},os.requestFormReset=function(f){i.d.r(f)},os.unstable_batchedUpdates=function(f,d){return f(d)},os.useFormState=function(f,d,m){return o.H.useFormState(f,d,m)},os.useFormStatus=function(){return o.H.useHostTransitionStatus()},os.version="19.1.1",os}var xC;function AD(){if(xC)return HA.exports;xC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),HA.exports=zL(),HA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _C;function HL(){if(_C)return hg;_C=1;var n=FL(),e=Ip(),t=AD();function i(r){var l="https://react.dev/errors/"+r;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+r+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function s(r){var l=r,p=r;if(r.alternate)for(;l.return;)l=l.return;else{r=l;do l=r,(l.flags&4098)!==0&&(p=l.return),r=l.return;while(r)}return l.tag===3?p:null}function o(r){if(r.tag===13){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function c(r){if(s(r)!==r)throw Error(i(188))}function f(r){var l=r.alternate;if(!l){if(l=s(r),l===null)throw Error(i(188));return l!==r?null:r}for(var p=r,v=l;;){var S=p.return;if(S===null)break;var C=S.alternate;if(C===null){if(v=S.return,v!==null){p=v;continue}break}if(S.child===C.child){for(C=S.child;C;){if(C===p)return c(S),r;if(C===v)return c(S),l;C=C.sibling}throw Error(i(188))}if(p.return!==v.return)p=S,v=C;else{for(var F=!1,K=S.child;K;){if(K===p){F=!0,p=S,v=C;break}if(K===v){F=!0,v=S,p=C;break}K=K.sibling}if(!F){for(K=C.child;K;){if(K===p){F=!0,p=C,v=S;break}if(K===v){F=!0,v=C,p=S;break}K=K.sibling}if(!F)throw Error(i(189))}}if(p.alternate!==v)throw Error(i(190))}if(p.tag!==3)throw Error(i(188));return p.stateNode.current===p?r:l}function d(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(l=d(r),l!==null)return l;r=r.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),D=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function ie(r){return r===null||typeof r!="object"?null:(r=Y&&r[Y]||r["@@iterator"],typeof r=="function"?r:null)}var se=Symbol.for("react.client.reference");function ue(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===se?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case E:return"Profiler";case T:return"StrictMode";case U:return"Suspense";case L:return"SuspenseList";case O:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case _:return"Portal";case D:return(r.displayName||"Context")+".Provider";case R:return(r._context.displayName||"Context")+".Consumer";case B:var l=r.render;return r=r.displayName,r||(r=l.displayName||l.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case z:return l=r.displayName||null,l!==null?l:ue(r.type)||"Memo";case I:l=r._payload,r=r._init;try{return ue(r(l))}catch{}}return null}var me=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},ge=[],j=-1;function fe(r){return{current:r}}function _e(r){0>j||(r.current=ge[j],ge[j]=null,j--)}function Ae(r,l){j++,ge[j]=r.current,r.current=l}var De=fe(null),ot=fe(null),ve=fe(null),Ne=fe(null);function Qe(r,l){switch(Ae(ve,l),Ae(ot,r),Ae(De,null),l.nodeType){case 9:case 11:r=(r=l.documentElement)&&(r=r.namespaceURI)?HT(r):0;break;default:if(r=l.tagName,l=l.namespaceURI)l=HT(l),r=GT(l,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}_e(De),Ae(De,r)}function bt(){_e(De),_e(ot),_e(ve)}function ct(r){r.memoizedState!==null&&Ae(Ne,r);var l=De.current,p=GT(l,r.type);l!==p&&(Ae(ot,r),Ae(De,p))}function zt(r){ot.current===r&&(_e(De),_e(ot)),Ne.current===r&&(_e(Ne),rg._currentValue=q)}var Xt=Object.prototype.hasOwnProperty,ae=n.unstable_scheduleCallback,Ye=n.unstable_cancelCallback,je=n.unstable_shouldYield,Xe=n.unstable_requestPaint,He=n.unstable_now,gt=n.unstable_getCurrentPriorityLevel,st=n.unstable_ImmediatePriority,rt=n.unstable_UserBlockingPriority,Ot=n.unstable_NormalPriority,Gt=n.unstable_LowPriority,$=n.unstable_IdlePriority,X=n.log,Ee=n.unstable_setDisableYieldValue,Fe=null,ke=null;function Le(r){if(typeof X=="function"&&Ee(r),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(Fe,r)}catch{}}var xt=Math.clz32?Math.clz32:Rt,pt=Math.log,St=Math.LN2;function Rt(r){return r>>>=0,r===0?32:31-(pt(r)/St|0)|0}var nt=256,ut=4194304;function Dt(r){var l=r&42;if(l!==0)return l;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function re(r,l,p){var v=r.pendingLanes;if(v===0)return 0;var S=0,C=r.suspendedLanes,F=r.pingedLanes;r=r.warmLanes;var K=v&134217727;return K!==0?(v=K&~C,v!==0?S=Dt(v):(F&=K,F!==0?S=Dt(F):p||(p=K&~r,p!==0&&(S=Dt(p))))):(K=v&~C,K!==0?S=Dt(K):F!==0?S=Dt(F):p||(p=v&~r,p!==0&&(S=Dt(p)))),S===0?0:l!==0&&l!==S&&(l&C)===0&&(C=S&-S,p=l&-l,C>=p||C===32&&(p&4194048)!==0)?l:S}function Se(r,l){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&l)===0}function tt(r,l){switch(r){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ce(){var r=nt;return nt<<=1,(nt&4194048)===0&&(nt=256),r}function be(){var r=ut;return ut<<=1,(ut&62914560)===0&&(ut=4194304),r}function lt(r){for(var l=[],p=0;31>p;p++)l.push(r);return l}function ft(r,l){r.pendingLanes|=l,l!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function it(r,l,p,v,S,C){var F=r.pendingLanes;r.pendingLanes=p,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=p,r.entangledLanes&=p,r.errorRecoveryDisabledLanes&=p,r.shellSuspendCounter=0;var K=r.entanglements,le=r.expirationTimes,we=r.hiddenUpdates;for(p=F&~p;0<p;){var Je=31-xt(p),at=1<<Je;K[Je]=0,le[Je]=-1;var Ue=we[Je];if(Ue!==null)for(we[Je]=null,Je=0;Je<Ue.length;Je++){var Ie=Ue[Je];Ie!==null&&(Ie.lane&=-536870913)}p&=~at}v!==0&&Ve(r,v,0),C!==0&&S===0&&r.tag!==0&&(r.suspendedLanes|=C&~(F&~l))}function Ve(r,l,p){r.pendingLanes|=l,r.suspendedLanes&=~l;var v=31-xt(l);r.entangledLanes|=l,r.entanglements[v]=r.entanglements[v]|1073741824|p&4194090}function _t(r,l){var p=r.entangledLanes|=l;for(r=r.entanglements;p;){var v=31-xt(p),S=1<<v;S&l|r[v]&l&&(r[v]|=l),p&=~S}}function Mt(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Vt(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function jt(){var r=W.p;return r!==0?r:(r=window.event,r===void 0?32:rC(r.type))}function oi(r,l){var p=W.p;try{return W.p=r,l()}finally{W.p=p}}var cn=Math.random().toString(36).slice(2),Xn="__reactFiber$"+cn,Tn="__reactProps$"+cn,li="__reactContainer$"+cn,Ui="__reactEvents$"+cn,da="__reactListeners$"+cn,ii="__reactHandles$"+cn,Yt="__reactResources$"+cn,Xi="__reactMarker$"+cn;function ai(r){delete r[Xn],delete r[Tn],delete r[Ui],delete r[da],delete r[ii]}function k(r){var l=r[Xn];if(l)return l;for(var p=r.parentNode;p;){if(l=p[li]||p[Xn]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(r=jT(r);r!==null;){if(p=r[Xn])return p;r=jT(r)}return l}r=p,p=r.parentNode}return null}function Z(r){if(r=r[Xn]||r[li]){var l=r.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return r}return null}function pe(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r.stateNode;throw Error(i(33))}function Re(r){var l=r[Yt];return l||(l=r[Yt]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Oe(r){r[Xi]=!0}var Ge=new Set,ht={};function V(r,l){te(r,l),te(r+"Capture",l)}function te(r,l){for(ht[r]=l,r=0;r<l.length;r++)Ge.add(l[r])}var oe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),de={},ne={};function $e(r){return Xt.call(ne,r)?!0:Xt.call(de,r)?!1:oe.test(r)?ne[r]=!0:(de[r]=!0,!1)}function ze(r,l,p){if($e(l))if(p===null)r.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":r.removeAttribute(l);return;case"boolean":var v=l.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){r.removeAttribute(l);return}}r.setAttribute(l,""+p)}}function qe(r,l,p){if(p===null)r.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttribute(l,""+p)}}function Ke(r,l,p,v){if(v===null)r.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(p);return}r.setAttributeNS(l,p,""+v)}}var dt,At;function yt(r){if(dt===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);dt=l&&l[1]||"",At=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dt+r+At}var Ft=!1;function en(r,l){if(!r||Ft)return"";Ft=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(l){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(Ie){var Ue=Ie}Reflect.construct(r,[],at)}else{try{at.call()}catch(Ie){Ue=Ie}r.call(at.prototype)}}else{try{throw Error()}catch(Ie){Ue=Ie}(at=r())&&typeof at.catch=="function"&&at.catch(function(){})}}catch(Ie){if(Ie&&Ue&&typeof Ie.stack=="string")return[Ie.stack,Ue.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=v.DetermineComponentFrameRoot(),F=C[0],K=C[1];if(F&&K){var le=F.split(`
`),we=K.split(`
`);for(S=v=0;v<le.length&&!le[v].includes("DetermineComponentFrameRoot");)v++;for(;S<we.length&&!we[S].includes("DetermineComponentFrameRoot");)S++;if(v===le.length||S===we.length)for(v=le.length-1,S=we.length-1;1<=v&&0<=S&&le[v]!==we[S];)S--;for(;1<=v&&0<=S;v--,S--)if(le[v]!==we[S]){if(v!==1||S!==1)do if(v--,S--,0>S||le[v]!==we[S]){var Je=`
`+le[v].replace(" at new "," at ");return r.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",r.displayName)),Je}while(1<=v&&0<=S);break}}}finally{Ft=!1,Error.prepareStackTrace=p}return(p=r?r.displayName||r.name:"")?yt(p):""}function Wt(r){switch(r.tag){case 26:case 27:case 5:return yt(r.type);case 16:return yt("Lazy");case 13:return yt("Suspense");case 19:return yt("SuspenseList");case 0:case 15:return en(r.type,!1);case 11:return en(r.type.render,!1);case 1:return en(r.type,!0);case 31:return yt("Activity");default:return""}}function xn(r){try{var l="";do l+=Wt(r),r=r.return;while(r);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function Nt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Tt(r){var l=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Nn(r){var l=Tt(r)?"checked":"value",p=Object.getOwnPropertyDescriptor(r.constructor.prototype,l),v=""+r[l];if(!r.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,C=p.set;return Object.defineProperty(r,l,{configurable:!0,get:function(){return S.call(this)},set:function(F){v=""+F,C.call(this,F)}}),Object.defineProperty(r,l,{enumerable:p.enumerable}),{getValue:function(){return v},setValue:function(F){v=""+F},stopTracking:function(){r._valueTracker=null,delete r[l]}}}}function un(r){r._valueTracker||(r._valueTracker=Nn(r))}function qn(r){if(!r)return!1;var l=r._valueTracker;if(!l)return!0;var p=l.getValue(),v="";return r&&(v=Tt(r)?r.checked?"true":"false":r.value),r=v,r!==p?(l.setValue(r),!0):!1}function _n(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ln=/[\n"\\]/g;function fn(r){return r.replace(Ln,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Ht(r,l,p,v,S,C,F,K){r.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?r.type=F:r.removeAttribute("type"),l!=null?F==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+Nt(l)):r.value!==""+Nt(l)&&(r.value=""+Nt(l)):F!=="submit"&&F!=="reset"||r.removeAttribute("value"),l!=null?_i(r,F,Nt(l)):p!=null?_i(r,F,Nt(p)):v!=null&&r.removeAttribute("value"),S==null&&C!=null&&(r.defaultChecked=!!C),S!=null&&(r.checked=S&&typeof S!="function"&&typeof S!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?r.name=""+Nt(K):r.removeAttribute("name")}function Qn(r,l,p,v,S,C,F,K){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(r.type=C),l!=null||p!=null){if(!(C!=="submit"&&C!=="reset"||l!=null))return;p=p!=null?""+Nt(p):"",l=l!=null?""+Nt(l):p,K||l===r.value||(r.value=l),r.defaultValue=l}v=v??S,v=typeof v!="function"&&typeof v!="symbol"&&!!v,r.checked=K?r.checked:!!v,r.defaultChecked=!!v,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(r.name=F)}function _i(r,l,p){l==="number"&&_n(r.ownerDocument)===r||r.defaultValue===""+p||(r.defaultValue=""+p)}function Cn(r,l,p,v){if(r=r.options,l){l={};for(var S=0;S<p.length;S++)l["$"+p[S]]=!0;for(p=0;p<r.length;p++)S=l.hasOwnProperty("$"+r[p].value),r[p].selected!==S&&(r[p].selected=S),S&&v&&(r[p].defaultSelected=!0)}else{for(p=""+Nt(p),l=null,S=0;S<r.length;S++){if(r[S].value===p){r[S].selected=!0,v&&(r[S].defaultSelected=!0);return}l!==null||r[S].disabled||(l=r[S])}l!==null&&(l.selected=!0)}}function pi(r,l,p){if(l!=null&&(l=""+Nt(l),l!==r.value&&(r.value=l),p==null)){r.defaultValue!==l&&(r.defaultValue=l);return}r.defaultValue=p!=null?""+Nt(p):""}function Ol(r,l,p,v){if(l==null){if(v!=null){if(p!=null)throw Error(i(92));if(me(v)){if(1<v.length)throw Error(i(93));v=v[0]}p=v}p==null&&(p=""),l=p}p=Nt(l),r.defaultValue=p,v=r.textContent,v===p&&v!==""&&v!==null&&(r.value=v)}function Zi(r,l){if(l){var p=r.firstChild;if(p&&p===r.lastChild&&p.nodeType===3){p.nodeValue=l;return}}r.textContent=l}var tv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ju(r,l,p){var v=l.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?r.setProperty(l,""):l==="float"?r.cssFloat="":r[l]="":v?r.setProperty(l,p):typeof p!="number"||p===0||tv.has(l)?l==="float"?r.cssFloat=p:r[l]=(""+p).trim():r[l]=p+"px"}function Yu(r,l,p){if(l!=null&&typeof l!="object")throw Error(i(62));if(r=r.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||l!=null&&l.hasOwnProperty(v)||(v.indexOf("--")===0?r.setProperty(v,""):v==="float"?r.cssFloat="":r[v]="");for(var S in l)v=l[S],l.hasOwnProperty(S)&&p[S]!==v&&ju(r,S,v)}else for(var C in l)l.hasOwnProperty(C)&&ju(r,C,l[C])}function Uh(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qu(r){return nv.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Lh=null;function Ih(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Po=null,Ul=null;function $p(r){var l=Z(r);if(l&&(r=l.stateNode)){var p=r[Tn]||null;e:switch(r=l.stateNode,l.type){case"input":if(Ht(r,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),l=p.name,p.type==="radio"&&l!=null){for(p=r;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+fn(""+l)+'"][type="radio"]'),l=0;l<p.length;l++){var v=p[l];if(v!==r&&v.form===r.form){var S=v[Tn]||null;if(!S)throw Error(i(90));Ht(v,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(l=0;l<p.length;l++)v=p[l],v.form===r.form&&qn(v)}break e;case"textarea":pi(r,p.value,p.defaultValue);break e;case"select":l=p.value,l!=null&&Cn(r,!!p.multiple,l,!1)}}}var Ku=!1;function em(r,l,p){if(Ku)return r(l,p);Ku=!0;try{var v=r(l);return v}finally{if(Ku=!1,(Po!==null||Ul!==null)&&(Lr(),Po&&(l=Po,r=Ul,Ul=Po=null,$p(l),r)))for(l=0;l<r.length;l++)$p(r[l])}}function Cc(r,l){var p=r.stateNode;if(p===null)return null;var v=p[Tn]||null;if(v===null)return null;p=v[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(r=r.type,v=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!v;break e;default:r=!1}if(r)return null;if(p&&typeof p!="function")throw Error(i(231,l,typeof p));return p}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wu=!1;if(_r)try{var wc={};Object.defineProperty(wc,"passive",{get:function(){Wu=!0}}),window.addEventListener("test",wc,wc),window.removeEventListener("test",wc,wc)}catch{Wu=!1}var Qr=null,tm=null,Ph=null;function nm(){if(Ph)return Ph;var r,l=tm,p=l.length,v,S="value"in Qr?Qr.value:Qr.textContent,C=S.length;for(r=0;r<p&&l[r]===S[r];r++);var F=p-r;for(v=1;v<=F&&l[p-v]===S[C-v];v++);return Ph=S.slice(r,1<v?1-v:void 0)}function Fo(r){var l=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&l===13&&(r=13)):r=l,r===10&&(r=13),32<=r||r===13?r:0}function Rc(){return!0}function Ju(){return!1}function za(r){function l(p,v,S,C,F){this._reactName=p,this._targetInst=S,this.type=v,this.nativeEvent=C,this.target=F,this.currentTarget=null;for(var K in r)r.hasOwnProperty(K)&&(p=r[K],this[K]=p?p(C):C[K]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Rc:Ju,this.isPropagationStopped=Ju,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Rc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Rc)},persist:function(){},isPersistent:Rc}),l}var zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dc=za(zo),Bc=m({},zo,{view:0,detail:0}),iv=za(Bc),$r,Nc,Oc,Uc=m({},Bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Oc&&(Oc&&r.type==="mousemove"?($r=r.screenX-Oc.screenX,Nc=r.screenY-Oc.screenY):Nc=$r=0,Oc=r),$r)},movementY:function(r){return"movementY"in r?r.movementY:Nc}}),im=za(Uc),av=m({},Uc,{dataTransfer:0}),$b=za(av),pa=m({},Bc,{relatedTarget:0}),Fh=za(pa),sv=m({},zo,{animationName:0,elapsedTime:0,pseudoElement:0}),rv=za(sv),ov=m({},zo,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),lv=za(ov),Zu=m({},zo,{data:0}),zh=za(Zu),cv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function am(r){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(r):(r=fv[r])?!!l[r]:!1}function Qu(){return am}var hv=m({},Bc,{key:function(r){if(r.key){var l=cv[r.key]||r.key;if(l!=="Unidentified")return l}return r.type==="keypress"?(r=Fo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?uv[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qu,charCode:function(r){return r.type==="keypress"?Fo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Fo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),sm=za(hv),rm=m({},Uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hh=za(rm),dv=m({},Bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qu}),om=za(dv),pv=m({},zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),eo=za(pv),lm=m({},Uc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),eA=za(lm),mv=m({},zo,{newState:0,oldState:0}),Ho=za(mv),to=[9,13,27,32],$u=_r&&"CompositionEvent"in window,Ll=null;_r&&"documentMode"in document&&(Ll=document.documentMode);var ef=_r&&"TextEvent"in window&&!Ll,tf=_r&&(!$u||Ll&&8<Ll&&11>=Ll),Go=" ",ma=!1;function nf(r,l){switch(r){case"keyup":return to.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Vo=!1;function af(r,l){switch(r){case"compositionend":return cm(l);case"keypress":return l.which!==32?null:(ma=!0,Go);case"textInput":return r=l.data,r===Go&&ma?null:r;default:return null}}function um(r,l){if(Vo)return r==="compositionend"||!$u&&nf(r,l)?(r=nm(),Ph=tm=Qr=null,Vo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return tf&&l.locale!=="ko"?null:l.data;default:return null}}var Gh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fm(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l==="input"?!!Gh[r.type]:l==="textarea"}function $a(r,l,p,v){Po?Ul?Ul.push(v):Ul=[v]:Po=v,l=py(l,"onChange"),0<l.length&&(p=new Dc("onChange","change",null,p,v),r.push({event:p,listeners:l}))}var Lc=null,Il=null;function gv(r){LT(r,0)}function sf(r){var l=pe(r);if(qn(l))return r}function Vh(r,l){if(r==="change")return l}var kh=!1;if(_r){var Xh;if(_r){var Ic="oninput"in document;if(!Ic){var Pc=document.createElement("div");Pc.setAttribute("oninput","return;"),Ic=typeof Pc.oninput=="function"}Xh=Ic}else Xh=!1;kh=Xh&&(!document.documentMode||9<document.documentMode)}function Si(){Lc&&(Lc.detachEvent("onpropertychange",vv),Il=Lc=null)}function vv(r){if(r.propertyName==="value"&&sf(Il)){var l=[];$a(l,Il,r,Ih(r)),em(gv,l)}}function tA(r,l,p){r==="focusin"?(Si(),Lc=l,Il=p,Lc.attachEvent("onpropertychange",vv)):r==="focusout"&&Si()}function yv(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return sf(Il)}function rf(r,l){if(r==="click")return sf(l)}function ko(r,l){if(r==="input"||r==="change")return sf(l)}function xv(r,l){return r===l&&(r!==0||1/r===1/l)||r!==r&&l!==l}var es=typeof Object.is=="function"?Object.is:xv;function nr(r,l){if(es(r,l))return!0;if(typeof r!="object"||r===null||typeof l!="object"||l===null)return!1;var p=Object.keys(r),v=Object.keys(l);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var S=p[v];if(!Xt.call(l,S)||!es(r[S],l[S]))return!1}return!0}function ts(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function hm(r,l){var p=ts(r);r=0;for(var v;p;){if(p.nodeType===3){if(v=r+p.textContent.length,r<=l&&v>=l)return{node:p,offset:l-r};r=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=ts(p)}}function dm(r,l){return r&&l?r===l?!0:r&&r.nodeType===3?!1:l&&l.nodeType===3?dm(r,l.parentNode):"contains"in r?r.contains(l):r.compareDocumentPosition?!!(r.compareDocumentPosition(l)&16):!1:!1}function pm(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var l=_n(r.document);l instanceof r.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)r=l.contentWindow;else break;l=_n(r.document)}return l}function of(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l&&(l==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||l==="textarea"||r.contentEditable==="true")}var mm=_r&&"documentMode"in document&&11>=document.documentMode,no=null,jh=null,lf=null,Yh=!1;function gm(r,l,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Yh||no==null||no!==_n(v)||(v=no,"selectionStart"in v&&of(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),lf&&nr(lf,v)||(lf=v,v=py(jh,"onSelect"),0<v.length&&(l=new Dc("onSelect","select",null,l,p),r.push({event:l,listeners:v}),l.target=no)))}function ga(r,l){var p={};return p[r.toLowerCase()]=l.toLowerCase(),p["Webkit"+r]="webkit"+l,p["Moz"+r]="moz"+l,p}var Xo={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionrun:ga("Transition","TransitionRun"),transitionstart:ga("Transition","TransitionStart"),transitioncancel:ga("Transition","TransitionCancel"),transitionend:ga("Transition","TransitionEnd")},qh={},_v={};_r&&(_v=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function io(r){if(qh[r])return qh[r];if(!Xo[r])return r;var l=Xo[r],p;for(p in l)if(l.hasOwnProperty(p)&&p in _v)return qh[r]=l[p];return r}var Ha=io("animationend"),vm=io("animationiteration"),ns=io("animationstart"),bv=io("transitionrun"),ao=io("transitionstart"),Fc=io("transitioncancel"),so=io("transitionend"),Kh=new Map,cf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cf.push("scrollEnd");function ra(r,l){Kh.set(r,l),V(l,[r])}var ym=new WeakMap;function va(r,l){if(typeof r=="object"&&r!==null){var p=ym.get(r);return p!==void 0?p:(l={value:r,source:l,stack:xn(l)},ym.set(r,l),l)}return{value:r,source:l,stack:xn(l)}}var Ca=[],Is=0,Wh=0;function uf(){for(var r=Is,l=Wh=Is=0;l<r;){var p=Ca[l];Ca[l++]=null;var v=Ca[l];Ca[l++]=null;var S=Ca[l];Ca[l++]=null;var C=Ca[l];if(Ca[l++]=null,v!==null&&S!==null){var F=v.pending;F===null?S.next=S:(S.next=F.next,F.next=S),v.pending=S}C!==0&&xm(p,S,C)}}function jo(r,l,p,v){Ca[Is++]=r,Ca[Is++]=l,Ca[Is++]=p,Ca[Is++]=v,Wh|=v,r.lanes|=v,r=r.alternate,r!==null&&(r.lanes|=v)}function Jh(r,l,p,v){return jo(r,l,p,v),zc(r)}function ro(r,l){return jo(r,null,null,l),zc(r)}function xm(r,l,p){r.lanes|=p;var v=r.alternate;v!==null&&(v.lanes|=p);for(var S=!1,C=r.return;C!==null;)C.childLanes|=p,v=C.alternate,v!==null&&(v.childLanes|=p),C.tag===22&&(r=C.stateNode,r===null||r._visibility&1||(S=!0)),r=C,C=C.return;return r.tag===3?(C=r.stateNode,S&&l!==null&&(S=31-xt(p),r=C.hiddenUpdates,v=r[S],v===null?r[S]=[l]:v.push(l),l.lane=p|536870912),C):null}function zc(r){if(50<Ur)throw Ur=0,ec=null,Error(i(185));for(var l=r.return;l!==null;)r=l,l=r.return;return r.tag===3?r.stateNode:null}var Yo={};function _m(r,l,p,v){this.tag=r,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(r,l,p,v){return new _m(r,l,p,v)}function ff(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Li(r,l){var p=r.alternate;return p===null?(p=is(r.tag,l,r.key,r.mode),p.elementType=r.elementType,p.type=r.type,p.stateNode=r.stateNode,p.alternate=r,r.alternate=p):(p.pendingProps=l,p.type=r.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=r.flags&65011712,p.childLanes=r.childLanes,p.lanes=r.lanes,p.child=r.child,p.memoizedProps=r.memoizedProps,p.memoizedState=r.memoizedState,p.updateQueue=r.updateQueue,l=r.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=r.sibling,p.index=r.index,p.ref=r.ref,p.refCleanup=r.refCleanup,p}function bm(r,l){r.flags&=65011714;var p=r.alternate;return p===null?(r.childLanes=0,r.lanes=l,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=p.childLanes,r.lanes=p.lanes,r.child=p.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=p.memoizedProps,r.memoizedState=p.memoizedState,r.updateQueue=p.updateQueue,r.type=p.type,l=p.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),r}function oa(r,l,p,v,S,C){var F=0;if(v=r,typeof r=="function")ff(r)&&(F=1);else if(typeof r=="string")F=bL(r,p,De.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case O:return r=is(31,p,l,S),r.elementType=O,r.lanes=C,r;case A:return qo(p.children,S,C,l);case T:F=8,S|=24;break;case E:return r=is(12,p,l,S|2),r.elementType=E,r.lanes=C,r;case U:return r=is(13,p,l,S),r.elementType=U,r.lanes=C,r;case L:return r=is(19,p,l,S),r.elementType=L,r.lanes=C,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:case D:F=10;break e;case R:F=9;break e;case B:F=11;break e;case z:F=14;break e;case I:F=16,v=null;break e}F=29,p=Error(i(130,r===null?"null":typeof r,"")),v=null}return l=is(F,p,l,S),l.elementType=r,l.type=v,l.lanes=C,l}function qo(r,l,p,v){return r=is(7,r,v,l),r.lanes=p,r}function hf(r,l,p){return r=is(6,r,null,l),r.lanes=p,r}function Zh(r,l,p){return l=is(4,r.children!==null?r.children:[],r.key,l),l.lanes=p,l.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},l}var Hc=[],as=0,df=null,Gc=0,ya=[],hs=0,Ko=null,br=1,Ar="";function oo(r,l){Hc[as++]=Gc,Hc[as++]=df,df=r,Gc=l}function Qh(r,l,p){ya[hs++]=br,ya[hs++]=Ar,ya[hs++]=Ko,Ko=r;var v=br;r=Ar;var S=32-xt(v)-1;v&=~(1<<S),p+=1;var C=32-xt(l)+S;if(30<C){var F=S-S%5;C=(v&(1<<F)-1).toString(32),v>>=F,S-=F,br=1<<32-xt(l)+S|p<<S|v,Ar=C+r}else br=1<<C|p<<S|v,Ar=r}function Am(r){r.return!==null&&(oo(r,1),Qh(r,1,0))}function Sm(r){for(;r===df;)df=Hc[--as],Hc[as]=null,Gc=Hc[--as],Hc[as]=null;for(;r===Ko;)Ko=ya[--hs],ya[hs]=null,Ar=ya[--hs],ya[hs]=null,br=ya[--hs],ya[hs]=null}var Ga=null,Ei=null,Gn=!1,Ps=null,ds=!1,$h=Error(i(519));function Wo(r){var l=Error(i(418,""));throw Pl(va(l,r)),$h}function Av(r){var l=r.stateNode,p=r.type,v=r.memoizedProps;switch(l[Xn]=r,l[Tn]=v,p){case"dialog":On("cancel",l),On("close",l);break;case"iframe":case"object":case"embed":On("load",l);break;case"video":case"audio":for(p=0;p<eg.length;p++)On(eg[p],l);break;case"source":On("error",l);break;case"img":case"image":case"link":On("error",l),On("load",l);break;case"details":On("toggle",l);break;case"input":On("invalid",l),Qn(l,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),un(l);break;case"select":On("invalid",l);break;case"textarea":On("invalid",l),Ol(l,v.value,v.defaultValue,v.children),un(l)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||l.textContent===""+p||v.suppressHydrationWarning===!0||zT(l.textContent,p)?(v.popover!=null&&(On("beforetoggle",l),On("toggle",l)),v.onScroll!=null&&On("scroll",l),v.onScrollEnd!=null&&On("scrollend",l),v.onClick!=null&&(l.onclick=my),l=!0):l=!1,l||Wo(r)}function Mm(r){for(Ga=r.return;Ga;)switch(Ga.tag){case 5:case 13:ds=!1;return;case 27:case 3:ds=!0;return;default:Ga=Ga.return}}function ir(r){if(r!==Ga)return!1;if(!Gn)return Mm(r),Gn=!0,!1;var l=r.tag,p;if((p=l!==3&&l!==27)&&((p=l===5)&&(p=r.type,p=!(p!=="form"&&p!=="button")||bA(r.type,r.memoizedProps)),p=!p),p&&Ei&&Wo(r),Mm(r),l===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,l=0;r;){if(r.nodeType===8)if(p=r.data,p==="/$"){if(l===0){Ei=Ao(r.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++;r=r.nextSibling}Ei=null}}else l===27?(l=Ei,hu(r.type)?(r=EA,EA=null,Ei=r):Ei=l):Ei=Ga?Ao(r.stateNode.nextSibling):null;return!0}function Vc(){Ei=Ga=null,Gn=!1}function Kn(){var r=Ps;return r!==null&&(Zt===null?Zt=r:Zt.push.apply(Zt,r),Ps=null),r}function Pl(r){Ps===null?Ps=[r]:Ps.push(r)}var Em=fe(null),Jo=null,lo=null;function Zo(r,l,p){Ae(Em,l._currentValue),l._currentValue=p}function co(r){r._currentValue=Em.current,_e(Em)}function Tm(r,l,p){for(;r!==null;){var v=r.alternate;if((r.childLanes&l)!==l?(r.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),r===p)break;r=r.return}}function pf(r,l,p,v){var S=r.child;for(S!==null&&(S.return=r);S!==null;){var C=S.dependencies;if(C!==null){var F=S.child;C=C.firstContext;e:for(;C!==null;){var K=C;C=S;for(var le=0;le<l.length;le++)if(K.context===l[le]){C.lanes|=p,K=C.alternate,K!==null&&(K.lanes|=p),Tm(C.return,p,r),v||(F=null);break e}C=K.next}}else if(S.tag===18){if(F=S.return,F===null)throw Error(i(341));F.lanes|=p,C=F.alternate,C!==null&&(C.lanes|=p),Tm(F,p,r),F=null}else F=S.child;if(F!==null)F.return=S;else for(F=S;F!==null;){if(F===r){F=null;break}if(S=F.sibling,S!==null){S.return=F.return,F=S;break}F=F.return}S=F}}function Fs(r,l,p,v){r=null;for(var S=l,C=!1;S!==null;){if(!C){if((S.flags&524288)!==0)C=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var F=S.alternate;if(F===null)throw Error(i(387));if(F=F.memoizedProps,F!==null){var K=S.type;es(S.pendingProps.value,F.value)||(r!==null?r.push(K):r=[K])}}else if(S===Ne.current){if(F=S.alternate,F===null)throw Error(i(387));F.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(r!==null?r.push(rg):r=[rg])}S=S.return}r!==null&&pf(l,r,p,v),l.flags|=262144}function mf(r){for(r=r.firstContext;r!==null;){if(!es(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Sr(r){Jo=r,lo=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function wi(r){return ed(Jo,r)}function gf(r,l){return Jo===null&&Sr(r),ed(r,l)}function ed(r,l){var p=l._currentValue;if(l={context:l,memoizedValue:p,next:null},lo===null){if(r===null)throw Error(i(308));lo=l,r.dependencies={lanes:0,firstContext:l},r.flags|=524288}else lo=lo.next=l;return p}var Cm=typeof AbortController<"u"?AbortController:function(){var r=[],l=this.signal={aborted:!1,addEventListener:function(p,v){r.push(v)}};this.abort=function(){l.aborted=!0,r.forEach(function(p){return p()})}},nA=n.unstable_scheduleCallback,Sv=n.unstable_NormalPriority,ji={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function td(){return{controller:new Cm,data:new Map,refCount:0}}function kc(r){r.refCount--,r.refCount===0&&nA(Sv,function(){r.controller.abort()})}var Xc=null,vf=0,pn=0,jc=null;function ps(r,l){if(Xc===null){var p=Xc=[];vf=0,pn=hA(),jc={status:"pending",value:void 0,then:function(v){p.push(v)}}}return vf++,l.then(nd,nd),l}function nd(){if(--vf===0&&Xc!==null){jc!==null&&(jc.status="fulfilled");var r=Xc;Xc=null,pn=0,jc=null;for(var l=0;l<r.length;l++)(0,r[l])()}}function iA(r,l){var p=[],v={status:"pending",value:null,reason:null,then:function(S){p.push(S)}};return r.then(function(){v.status="fulfilled",v.value=l;for(var S=0;S<p.length;S++)(0,p[S])(l)},function(S){for(v.status="rejected",v.reason=S,S=0;S<p.length;S++)(0,p[S])(void 0)}),v}var yf=H.S;H.S=function(r,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&ps(r,l),yf!==null&&yf(r,l)};var zs=fe(null);function Qo(){var r=zs.current;return r!==null?r:hn.pooledCache}function xf(r,l){l===null?Ae(zs,zs.current):Ae(zs,l.pool)}function id(){var r=Qo();return r===null?null:{parent:ji._currentValue,pool:r}}var _f=Error(i(460)),wm=Error(i(474)),ar=Error(i(542)),bf={then:function(){}};function ad(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Yc(){}function sd(r,l,p){switch(p=r[p],p===void 0?r.push(l):p!==l&&(l.then(Yc,Yc),l=p),l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,Mv(r),r;default:if(typeof l.status=="string")l.then(Yc,Yc);else{if(r=hn,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=l,r.status="pending",r.then(function(v){if(l.status==="pending"){var S=l;S.status="fulfilled",S.value=v}},function(v){if(l.status==="pending"){var S=l;S.status="rejected",S.reason=v}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,Mv(r),r}throw Hs=l,_f}}var Hs=null;function Rm(){if(Hs===null)throw Error(i(459));var r=Hs;return Hs=null,r}function Mv(r){if(r===_f||r===ar)throw Error(i(483))}var uo=!1;function Dm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function an(r,l){r=r.updateQueue,l.updateQueue===r&&(l.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Mr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function fo(r,l,p){var v=r.updateQueue;if(v===null)return null;if(v=v.shared,(Wn&2)!==0){var S=v.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),v.pending=l,l=zc(r),xm(r,null,p),l}return jo(r,v,l,p),zc(r)}function Fl(r,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194048)!==0)){var v=l.lanes;v&=r.pendingLanes,p|=v,l.lanes=p,_t(r,p)}}function qc(r,l){var p=r.updateQueue,v=r.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var S=null,C=null;if(p=p.firstBaseUpdate,p!==null){do{var F={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};C===null?S=C=F:C=C.next=F,p=p.next}while(p!==null);C===null?S=C=l:C=C.next=l}else S=C=l;p={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:C,shared:v.shared,callbacks:v.callbacks},r.updateQueue=p;return}r=p.lastBaseUpdate,r===null?p.firstBaseUpdate=l:r.next=l,p.lastBaseUpdate=l}var Bm=!1;function Af(){if(Bm){var r=jc;if(r!==null)throw r}}function Kc(r,l,p,v){Bm=!1;var S=r.updateQueue;uo=!1;var C=S.firstBaseUpdate,F=S.lastBaseUpdate,K=S.shared.pending;if(K!==null){S.shared.pending=null;var le=K,we=le.next;le.next=null,F===null?C=we:F.next=we,F=le;var Je=r.alternate;Je!==null&&(Je=Je.updateQueue,K=Je.lastBaseUpdate,K!==F&&(K===null?Je.firstBaseUpdate=we:K.next=we,Je.lastBaseUpdate=le))}if(C!==null){var at=S.baseState;F=0,Je=we=le=null,K=C;do{var Ue=K.lane&-536870913,Ie=Ue!==K.lane;if(Ie?(Kt&Ue)===Ue:(v&Ue)===Ue){Ue!==0&&Ue===pn&&(Bm=!0),Je!==null&&(Je=Je.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var on=r,tn=K;Ue=l;var xi=p;switch(tn.tag){case 1:if(on=tn.payload,typeof on=="function"){at=on.call(xi,at,Ue);break e}at=on;break e;case 3:on.flags=on.flags&-65537|128;case 0:if(on=tn.payload,Ue=typeof on=="function"?on.call(xi,at,Ue):on,Ue==null)break e;at=m({},at,Ue);break e;case 2:uo=!0}}Ue=K.callback,Ue!==null&&(r.flags|=64,Ie&&(r.flags|=8192),Ie=S.callbacks,Ie===null?S.callbacks=[Ue]:Ie.push(Ue))}else Ie={lane:Ue,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Je===null?(we=Je=Ie,le=at):Je=Je.next=Ie,F|=Ue;if(K=K.next,K===null){if(K=S.shared.pending,K===null)break;Ie=K,K=Ie.next,Ie.next=null,S.lastBaseUpdate=Ie,S.shared.pending=null}}while(!0);Je===null&&(le=at),S.baseState=le,S.firstBaseUpdate=we,S.lastBaseUpdate=Je,C===null&&(S.shared.lanes=0),hr|=F,r.lanes=F,r.memoizedState=at}}function Wc(r,l){if(typeof r!="function")throw Error(i(191,r));r.call(l)}function Ev(r,l){var p=r.callbacks;if(p!==null)for(r.callbacks=null,r=0;r<p.length;r++)Wc(p[r],l)}var Jc=fe(null),rd=fe(0);function Tv(r,l){r=Ys,Ae(rd,r),Ae(Jc,l),Ys=r|l.baseLanes}function Nm(){Ae(rd,Ys),Ae(Jc,Jc.current)}function Sf(){Ys=rd.current,_e(Jc),_e(rd)}var ho=0,mn=null,$n=null,Yi=null,od=!1,$o=!1,Va=!1,Qi=0,Gs=0,xa=null,Cv=0;function Ii(){throw Error(i(321))}function wa(r,l){if(l===null)return!1;for(var p=0;p<l.length&&p<r.length;p++)if(!es(r[p],l[p]))return!1;return!0}function po(r,l,p,v,S,C){return ho=C,mn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=r===null||r.memoizedState===null?gd:Km,Va=!1,C=p(v,S),Va=!1,$o&&(C=Rv(l,p,v,S)),wv(r),C}function wv(r){H.H=Tf;var l=$n!==null&&$n.next!==null;if(ho=0,Yi=$n=mn=null,od=!1,Gs=0,xa=null,l)throw Error(i(300));r===null||la||(r=r.dependencies,r!==null&&mf(r)&&(la=!0))}function Rv(r,l,p,v){mn=r;var S=0;do{if($o&&(xa=null),Gs=0,$o=!1,25<=S)throw Error(i(301));if(S+=1,Yi=$n=null,r.updateQueue!=null){var C=r.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}H.H=ty,C=l(p,v)}while($o);return C}function aA(){var r=H.H,l=r.useState()[0];return l=typeof l.then=="function"?sr(l):l,r=r.useState()[0],($n!==null?$n.memoizedState:null)!==r&&(mn.flags|=1024),l}function Om(){var r=Qi!==0;return Qi=0,r}function ld(r,l,p){l.updateQueue=r.updateQueue,l.flags&=-2053,r.lanes&=~p}function Um(r){if(od){for(r=r.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}od=!1}ho=0,Yi=$n=mn=null,$o=!1,Gs=Qi=0,xa=null}function ka(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yi===null?mn.memoizedState=Yi=r:Yi=Yi.next=r,Yi}function qi(){if($n===null){var r=mn.alternate;r=r!==null?r.memoizedState:null}else r=$n.next;var l=Yi===null?mn.memoizedState:Yi.next;if(l!==null)Yi=l,$n=r;else{if(r===null)throw mn.alternate===null?Error(i(467)):Error(i(310));$n=r,r={memoizedState:$n.memoizedState,baseState:$n.baseState,baseQueue:$n.baseQueue,queue:$n.queue,next:null},Yi===null?mn.memoizedState=Yi=r:Yi=Yi.next=r}return Yi}function el(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sr(r){var l=Gs;return Gs+=1,xa===null&&(xa=[]),r=sd(xa,r,l),l=mn,(Yi===null?l.memoizedState:Yi.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?gd:Km),r}function cd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return sr(r);if(r.$$typeof===D)return wi(r)}throw Error(i(438,String(r)))}function Lm(r){var l=null,p=mn.updateQueue;if(p!==null&&(l=p.memoCache),l==null){var v=mn.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(l={data:v.data.map(function(S){return S.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),p===null&&(p=el(),mn.updateQueue=p),p.memoCache=l,p=l.data[l.index],p===void 0)for(p=l.data[l.index]=Array(r),v=0;v<r;v++)p[v]=P;return l.index++,p}function mo(r,l){return typeof l=="function"?l(r):l}function tl(r){var l=qi();return Im(l,$n,r)}function Im(r,l,p){var v=r.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=p;var S=r.baseQueue,C=v.pending;if(C!==null){if(S!==null){var F=S.next;S.next=C.next,C.next=F}l.baseQueue=S=C,v.pending=null}if(C=r.baseState,S===null)r.memoizedState=C;else{l=S.next;var K=F=null,le=null,we=l,Je=!1;do{var at=we.lane&-536870913;if(at!==we.lane?(Kt&at)===at:(ho&at)===at){var Ue=we.revertLane;if(Ue===0)le!==null&&(le=le.next={lane:0,revertLane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),at===pn&&(Je=!0);else if((ho&Ue)===Ue){we=we.next,Ue===pn&&(Je=!0);continue}else at={lane:0,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},le===null?(K=le=at,F=C):le=le.next=at,mn.lanes|=Ue,hr|=Ue;at=we.action,Va&&p(C,at),C=we.hasEagerState?we.eagerState:p(C,at)}else Ue={lane:at,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},le===null?(K=le=Ue,F=C):le=le.next=Ue,mn.lanes|=at,hr|=at;we=we.next}while(we!==null&&we!==l);if(le===null?F=C:le.next=K,!es(C,r.memoizedState)&&(la=!0,Je&&(p=jc,p!==null)))throw p;r.memoizedState=C,r.baseState=F,r.baseQueue=le,v.lastRenderedState=C}return S===null&&(v.lanes=0),[r.memoizedState,v.dispatch]}function Pm(r){var l=qi(),p=l.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=r;var v=p.dispatch,S=p.pending,C=l.memoizedState;if(S!==null){p.pending=null;var F=S=S.next;do C=r(C,F.action),F=F.next;while(F!==S);es(C,l.memoizedState)||(la=!0),l.memoizedState=C,l.baseQueue===null&&(l.baseState=C),p.lastRenderedState=C}return[C,v]}function Dv(r,l,p){var v=mn,S=qi(),C=Gn;if(C){if(p===void 0)throw Error(i(407));p=p()}else p=l();var F=!es(($n||S).memoizedState,p);F&&(S.memoizedState=p,la=!0),S=S.queue;var K=Nv.bind(null,v,S,r);if($c(2048,8,K,[r]),S.getSnapshot!==l||F||Yi!==null&&Yi.memoizedState.tag&1){if(v.flags|=2048,Qc(9,Mf(),Bv.bind(null,v,S,p,l),null),hn===null)throw Error(i(349));C||(ho&124)!==0||Zc(v,l,p)}return p}function Zc(r,l,p){r.flags|=16384,r={getSnapshot:l,value:p},l=mn.updateQueue,l===null?(l=el(),mn.updateQueue=l,l.stores=[r]):(p=l.stores,p===null?l.stores=[r]:p.push(r))}function Bv(r,l,p,v){l.value=p,l.getSnapshot=v,Ov(l)&&Uv(r)}function Nv(r,l,p){return p(function(){Ov(l)&&Uv(r)})}function Ov(r){var l=r.getSnapshot;r=r.value;try{var p=l();return!es(r,p)}catch{return!0}}function Uv(r){var l=ro(r,2);l!==null&&Ya(l,r,2)}function Fm(r){var l=ka();if(typeof r=="function"){var p=r;if(r=p(),Va){Le(!0);try{p()}finally{Le(!1)}}}return l.memoizedState=l.baseState=r,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:r},l}function Lv(r,l,p,v){return r.baseState=p,Im(r,$n,typeof v=="function"?v:mo)}function sA(r,l,p,v,S){if(md(r))throw Error(i(485));if(r=l.action,r!==null){var C={payload:S,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){C.listeners.push(F)}};H.T!==null?p(!0):C.isTransition=!1,v(C),p=l.pending,p===null?(C.next=l.pending=C,Iv(l,C)):(C.next=p.next,l.pending=p.next=C)}}function Iv(r,l){var p=l.action,v=l.payload,S=r.state;if(l.isTransition){var C=H.T,F={};H.T=F;try{var K=p(S,v),le=H.S;le!==null&&le(F,K),Pv(r,l,K)}catch(we){zm(r,l,we)}finally{H.T=C}}else try{C=p(S,v),Pv(r,l,C)}catch(we){zm(r,l,we)}}function Pv(r,l,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){Fv(r,l,v)},function(v){return zm(r,l,v)}):Fv(r,l,p)}function Fv(r,l,p){l.status="fulfilled",l.value=p,zv(l),r.state=p,l=r.pending,l!==null&&(p=l.next,p===l?r.pending=null:(p=p.next,l.next=p,Iv(r,p)))}function zm(r,l,p){var v=r.pending;if(r.pending=null,v!==null){v=v.next;do l.status="rejected",l.reason=p,zv(l),l=l.next;while(l!==v)}r.action=null}function zv(r){r=r.listeners;for(var l=0;l<r.length;l++)(0,r[l])()}function Hm(r,l){return l}function Hv(r,l){if(Gn){var p=hn.formState;if(p!==null){e:{var v=mn;if(Gn){if(Ei){t:{for(var S=Ei,C=ds;S.nodeType!==8;){if(!C){S=null;break t}if(S=Ao(S.nextSibling),S===null){S=null;break t}}C=S.data,S=C==="F!"||C==="F"?S:null}if(S){Ei=Ao(S.nextSibling),v=S.data==="F!";break e}}Wo(v)}v=!1}v&&(l=p[0])}}return p=ka(),p.memoizedState=p.baseState=l,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hm,lastRenderedState:l},p.queue=v,p=$v.bind(null,mn,v),v.dispatch=p,v=Fm(!1),C=pd.bind(null,mn,!1,v.queue),v=ka(),S={state:l,dispatch:null,action:r,pending:null},v.queue=S,p=sA.bind(null,mn,S,C,p),S.dispatch=p,v.memoizedState=r,[l,p,!1]}function Gv(r){var l=qi();return Vv(l,$n,r)}function Vv(r,l,p){if(l=Im(r,l,Hm)[0],r=tl(mo)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var v=sr(l)}catch(F){throw F===_f?ar:F}else v=l;l=qi();var S=l.queue,C=S.dispatch;return p!==l.memoizedState&&(mn.flags|=2048,Qc(9,Mf(),rA.bind(null,S,p),null)),[v,C,r]}function rA(r,l){r.action=l}function kv(r){var l=qi(),p=$n;if(p!==null)return Vv(l,p,r);qi(),l=l.memoizedState,p=qi();var v=p.queue.dispatch;return p.memoizedState=r,[l,v,!1]}function Qc(r,l,p,v){return r={tag:r,create:p,deps:v,inst:l,next:null},l=mn.updateQueue,l===null&&(l=el(),mn.updateQueue=l),p=l.lastEffect,p===null?l.lastEffect=r.next=r:(v=p.next,p.next=r,r.next=v,l.lastEffect=r),r}function Mf(){return{destroy:void 0,resource:void 0}}function Gm(){return qi().memoizedState}function ud(r,l,p,v){var S=ka();v=v===void 0?null:v,mn.flags|=r,S.memoizedState=Qc(1|l,Mf(),p,v)}function $c(r,l,p,v){var S=qi();v=v===void 0?null:v;var C=S.memoizedState.inst;$n!==null&&v!==null&&wa(v,$n.memoizedState.deps)?S.memoizedState=Qc(l,C,p,v):(mn.flags|=r,S.memoizedState=Qc(1|l,C,p,v))}function Vm(r,l){ud(8390656,8,r,l)}function km(r,l){$c(2048,8,r,l)}function fd(r,l){return $c(4,2,r,l)}function hd(r,l){return $c(4,4,r,l)}function Xv(r,l){if(typeof l=="function"){r=r();var p=l(r);return function(){typeof p=="function"?p():l(null)}}if(l!=null)return r=r(),l.current=r,function(){l.current=null}}function jv(r,l,p){p=p!=null?p.concat([r]):null,$c(4,4,Xv.bind(null,l,r),p)}function Xm(){}function Yv(r,l){var p=qi();l=l===void 0?null:l;var v=p.memoizedState;return l!==null&&wa(l,v[1])?v[0]:(p.memoizedState=[r,l],r)}function jm(r,l){var p=qi();l=l===void 0?null:l;var v=p.memoizedState;if(l!==null&&wa(l,v[1]))return v[0];if(v=r(),Va){Le(!0);try{r()}finally{Le(!1)}}return p.memoizedState=[v,l],v}function dd(r,l,p){return p===void 0||(ho&1073741824)!==0?r.memoizedState=l:(r.memoizedState=p,r=Cd(),mn.lanes|=r,hr|=r,p)}function qv(r,l,p,v){return es(p,l)?p:Jc.current!==null?(r=dd(r,p,v),es(r,l)||(la=!0),r):(ho&42)===0?(la=!0,r.memoizedState=p):(r=Cd(),mn.lanes|=r,hr|=r,l)}function Kv(r,l,p,v,S){var C=W.p;W.p=C!==0&&8>C?C:8;var F=H.T,K={};H.T=K,pd(r,!1,l,p);try{var le=S(),we=H.S;if(we!==null&&we(K,le),le!==null&&typeof le=="object"&&typeof le.then=="function"){var Je=iA(le,v);Ef(r,l,Je,Bi(r))}else Ef(r,l,v,Bi(r))}catch(at){Ef(r,l,{then:function(){},status:"rejected",reason:at},Bi())}finally{W.p=C,H.T=F}}function oA(){}function Ym(r,l,p,v){if(r.tag!==5)throw Error(i(476));var S=Wv(r).queue;Kv(r,S,l,q,p===null?oA:function(){return Jv(r),p(v)})}function Wv(r){var l=r.memoizedState;if(l!==null)return l;l={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:q},next:null};var p={};return l.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:p},next:null},r.memoizedState=l,r=r.alternate,r!==null&&(r.memoizedState=l),l}function Jv(r){var l=Wv(r).next.queue;Ef(r,l,{},Bi())}function qm(){return wi(rg)}function Zv(){return qi().memoizedState}function Qv(){return qi().memoizedState}function lA(r){for(var l=r.return;l!==null;){switch(l.tag){case 24:case 3:var p=Bi();r=Mr(p);var v=fo(l,r,p);v!==null&&(Ya(v,l,p),Fl(v,l,p)),l={cache:td()},r.payload=l;return}l=l.return}}function cA(r,l,p){var v=Bi();p={lane:v,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},md(r)?ey(l,p):(p=Jh(r,l,p,v),p!==null&&(Ya(p,r,v),ms(p,l,v)))}function $v(r,l,p){var v=Bi();Ef(r,l,p,v)}function Ef(r,l,p,v){var S={lane:v,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(md(r))ey(l,S);else{var C=r.alternate;if(r.lanes===0&&(C===null||C.lanes===0)&&(C=l.lastRenderedReducer,C!==null))try{var F=l.lastRenderedState,K=C(F,p);if(S.hasEagerState=!0,S.eagerState=K,es(K,F))return jo(r,l,S,0),hn===null&&uf(),!1}catch{}finally{}if(p=Jh(r,l,S,v),p!==null)return Ya(p,r,v),ms(p,l,v),!0}return!1}function pd(r,l,p,v){if(v={lane:2,revertLane:hA(),action:v,hasEagerState:!1,eagerState:null,next:null},md(r)){if(l)throw Error(i(479))}else l=Jh(r,p,v,2),l!==null&&Ya(l,r,2)}function md(r){var l=r.alternate;return r===mn||l!==null&&l===mn}function ey(r,l){$o=od=!0;var p=r.pending;p===null?l.next=l:(l.next=p.next,p.next=l),r.pending=l}function ms(r,l,p){if((p&4194048)!==0){var v=l.lanes;v&=r.pendingLanes,p|=v,l.lanes=p,_t(r,p)}}var Tf={readContext:wi,use:cd,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useLayoutEffect:Ii,useInsertionEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useSyncExternalStore:Ii,useId:Ii,useHostTransitionStatus:Ii,useFormState:Ii,useActionState:Ii,useOptimistic:Ii,useMemoCache:Ii,useCacheRefresh:Ii},gd={readContext:wi,use:cd,useCallback:function(r,l){return ka().memoizedState=[r,l===void 0?null:l],r},useContext:wi,useEffect:Vm,useImperativeHandle:function(r,l,p){p=p!=null?p.concat([r]):null,ud(4194308,4,Xv.bind(null,l,r),p)},useLayoutEffect:function(r,l){return ud(4194308,4,r,l)},useInsertionEffect:function(r,l){ud(4,2,r,l)},useMemo:function(r,l){var p=ka();l=l===void 0?null:l;var v=r();if(Va){Le(!0);try{r()}finally{Le(!1)}}return p.memoizedState=[v,l],v},useReducer:function(r,l,p){var v=ka();if(p!==void 0){var S=p(l);if(Va){Le(!0);try{p(l)}finally{Le(!1)}}}else S=l;return v.memoizedState=v.baseState=S,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:S},v.queue=r,r=r.dispatch=cA.bind(null,mn,r),[v.memoizedState,r]},useRef:function(r){var l=ka();return r={current:r},l.memoizedState=r},useState:function(r){r=Fm(r);var l=r.queue,p=$v.bind(null,mn,l);return l.dispatch=p,[r.memoizedState,p]},useDebugValue:Xm,useDeferredValue:function(r,l){var p=ka();return dd(p,r,l)},useTransition:function(){var r=Fm(!1);return r=Kv.bind(null,mn,r.queue,!0,!1),ka().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,l,p){var v=mn,S=ka();if(Gn){if(p===void 0)throw Error(i(407));p=p()}else{if(p=l(),hn===null)throw Error(i(349));(Kt&124)!==0||Zc(v,l,p)}S.memoizedState=p;var C={value:p,getSnapshot:l};return S.queue=C,Vm(Nv.bind(null,v,C,r),[r]),v.flags|=2048,Qc(9,Mf(),Bv.bind(null,v,C,p,l),null),p},useId:function(){var r=ka(),l=hn.identifierPrefix;if(Gn){var p=Ar,v=br;p=(v&~(1<<32-xt(v)-1)).toString(32)+p,l=""+l+"R"+p,p=Qi++,0<p&&(l+="H"+p.toString(32)),l+=""}else p=Cv++,l=""+l+"r"+p.toString(32)+"";return r.memoizedState=l},useHostTransitionStatus:qm,useFormState:Hv,useActionState:Hv,useOptimistic:function(r){var l=ka();l.memoizedState=l.baseState=r;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=p,l=pd.bind(null,mn,!0,p),p.dispatch=l,[r,l]},useMemoCache:Lm,useCacheRefresh:function(){return ka().memoizedState=lA.bind(null,mn)}},Km={readContext:wi,use:cd,useCallback:Yv,useContext:wi,useEffect:km,useImperativeHandle:jv,useInsertionEffect:fd,useLayoutEffect:hd,useMemo:jm,useReducer:tl,useRef:Gm,useState:function(){return tl(mo)},useDebugValue:Xm,useDeferredValue:function(r,l){var p=qi();return qv(p,$n.memoizedState,r,l)},useTransition:function(){var r=tl(mo)[0],l=qi().memoizedState;return[typeof r=="boolean"?r:sr(r),l]},useSyncExternalStore:Dv,useId:Zv,useHostTransitionStatus:qm,useFormState:Gv,useActionState:Gv,useOptimistic:function(r,l){var p=qi();return Lv(p,$n,r,l)},useMemoCache:Lm,useCacheRefresh:Qv},ty={readContext:wi,use:cd,useCallback:Yv,useContext:wi,useEffect:km,useImperativeHandle:jv,useInsertionEffect:fd,useLayoutEffect:hd,useMemo:jm,useReducer:Pm,useRef:Gm,useState:function(){return Pm(mo)},useDebugValue:Xm,useDeferredValue:function(r,l){var p=qi();return $n===null?dd(p,r,l):qv(p,$n.memoizedState,r,l)},useTransition:function(){var r=Pm(mo)[0],l=qi().memoizedState;return[typeof r=="boolean"?r:sr(r),l]},useSyncExternalStore:Dv,useId:Zv,useHostTransitionStatus:qm,useFormState:kv,useActionState:kv,useOptimistic:function(r,l){var p=qi();return $n!==null?Lv(p,$n,r,l):(p.baseState=r,[r,p.queue.dispatch])},useMemoCache:Lm,useCacheRefresh:Qv},zl=null,Cf=0;function wf(r){var l=Cf;return Cf+=1,zl===null&&(zl=[]),sd(zl,r,l)}function eu(r,l){l=l.props.ref,r.ref=l!==void 0?l:null}function vd(r,l){throw l.$$typeof===g?Error(i(525)):(r=Object.prototype.toString.call(l),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":r)))}function ny(r){var l=r._init;return l(r._payload)}function iy(r){function l(Me,xe){if(r){var Ce=Me.deletions;Ce===null?(Me.deletions=[xe],Me.flags|=16):Ce.push(xe)}}function p(Me,xe){if(!r)return null;for(;xe!==null;)l(Me,xe),xe=xe.sibling;return null}function v(Me){for(var xe=new Map;Me!==null;)Me.key!==null?xe.set(Me.key,Me):xe.set(Me.index,Me),Me=Me.sibling;return xe}function S(Me,xe){return Me=Li(Me,xe),Me.index=0,Me.sibling=null,Me}function C(Me,xe,Ce){return Me.index=Ce,r?(Ce=Me.alternate,Ce!==null?(Ce=Ce.index,Ce<xe?(Me.flags|=67108866,xe):Ce):(Me.flags|=67108866,xe)):(Me.flags|=1048576,xe)}function F(Me){return r&&Me.alternate===null&&(Me.flags|=67108866),Me}function K(Me,xe,Ce,et){return xe===null||xe.tag!==6?(xe=hf(Ce,Me.mode,et),xe.return=Me,xe):(xe=S(xe,Ce),xe.return=Me,xe)}function le(Me,xe,Ce,et){var Ut=Ce.type;return Ut===A?Je(Me,xe,Ce.props.children,et,Ce.key):xe!==null&&(xe.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===I&&ny(Ut)===xe.type)?(xe=S(xe,Ce.props),eu(xe,Ce),xe.return=Me,xe):(xe=oa(Ce.type,Ce.key,Ce.props,null,Me.mode,et),eu(xe,Ce),xe.return=Me,xe)}function we(Me,xe,Ce,et){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Ce.containerInfo||xe.stateNode.implementation!==Ce.implementation?(xe=Zh(Ce,Me.mode,et),xe.return=Me,xe):(xe=S(xe,Ce.children||[]),xe.return=Me,xe)}function Je(Me,xe,Ce,et,Ut){return xe===null||xe.tag!==7?(xe=qo(Ce,Me.mode,et,Ut),xe.return=Me,xe):(xe=S(xe,Ce),xe.return=Me,xe)}function at(Me,xe,Ce){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return xe=hf(""+xe,Me.mode,Ce),xe.return=Me,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case y:return Ce=oa(xe.type,xe.key,xe.props,null,Me.mode,Ce),eu(Ce,xe),Ce.return=Me,Ce;case _:return xe=Zh(xe,Me.mode,Ce),xe.return=Me,xe;case I:var et=xe._init;return xe=et(xe._payload),at(Me,xe,Ce)}if(me(xe)||ie(xe))return xe=qo(xe,Me.mode,Ce,null),xe.return=Me,xe;if(typeof xe.then=="function")return at(Me,wf(xe),Ce);if(xe.$$typeof===D)return at(Me,gf(Me,xe),Ce);vd(Me,xe)}return null}function Ue(Me,xe,Ce,et){var Ut=xe!==null?xe.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ut!==null?null:K(Me,xe,""+Ce,et);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:return Ce.key===Ut?le(Me,xe,Ce,et):null;case _:return Ce.key===Ut?we(Me,xe,Ce,et):null;case I:return Ut=Ce._init,Ce=Ut(Ce._payload),Ue(Me,xe,Ce,et)}if(me(Ce)||ie(Ce))return Ut!==null?null:Je(Me,xe,Ce,et,null);if(typeof Ce.then=="function")return Ue(Me,xe,wf(Ce),et);if(Ce.$$typeof===D)return Ue(Me,xe,gf(Me,Ce),et);vd(Me,Ce)}return null}function Ie(Me,xe,Ce,et,Ut){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return Me=Me.get(Ce)||null,K(xe,Me,""+et,Ut);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case y:return Me=Me.get(et.key===null?Ce:et.key)||null,le(xe,Me,et,Ut);case _:return Me=Me.get(et.key===null?Ce:et.key)||null,we(xe,Me,et,Ut);case I:var Bn=et._init;return et=Bn(et._payload),Ie(Me,xe,Ce,et,Ut)}if(me(et)||ie(et))return Me=Me.get(Ce)||null,Je(xe,Me,et,Ut,null);if(typeof et.then=="function")return Ie(Me,xe,Ce,wf(et),Ut);if(et.$$typeof===D)return Ie(Me,xe,Ce,gf(xe,et),Ut);vd(xe,et)}return null}function on(Me,xe,Ce,et){for(var Ut=null,Bn=null,qt=xe,nn=xe=0,Ba=null;qt!==null&&nn<Ce.length;nn++){qt.index>nn?(Ba=qt,qt=null):Ba=qt.sibling;var Zn=Ue(Me,qt,Ce[nn],et);if(Zn===null){qt===null&&(qt=Ba);break}r&&qt&&Zn.alternate===null&&l(Me,qt),xe=C(Zn,xe,nn),Bn===null?Ut=Zn:Bn.sibling=Zn,Bn=Zn,qt=Ba}if(nn===Ce.length)return p(Me,qt),Gn&&oo(Me,nn),Ut;if(qt===null){for(;nn<Ce.length;nn++)qt=at(Me,Ce[nn],et),qt!==null&&(xe=C(qt,xe,nn),Bn===null?Ut=qt:Bn.sibling=qt,Bn=qt);return Gn&&oo(Me,nn),Ut}for(qt=v(qt);nn<Ce.length;nn++)Ba=Ie(qt,Me,nn,Ce[nn],et),Ba!==null&&(r&&Ba.alternate!==null&&qt.delete(Ba.key===null?nn:Ba.key),xe=C(Ba,xe,nn),Bn===null?Ut=Ba:Bn.sibling=Ba,Bn=Ba);return r&&qt.forEach(function(vu){return l(Me,vu)}),Gn&&oo(Me,nn),Ut}function tn(Me,xe,Ce,et){if(Ce==null)throw Error(i(151));for(var Ut=null,Bn=null,qt=xe,nn=xe=0,Ba=null,Zn=Ce.next();qt!==null&&!Zn.done;nn++,Zn=Ce.next()){qt.index>nn?(Ba=qt,qt=null):Ba=qt.sibling;var vu=Ue(Me,qt,Zn.value,et);if(vu===null){qt===null&&(qt=Ba);break}r&&qt&&vu.alternate===null&&l(Me,qt),xe=C(vu,xe,nn),Bn===null?Ut=vu:Bn.sibling=vu,Bn=vu,qt=Ba}if(Zn.done)return p(Me,qt),Gn&&oo(Me,nn),Ut;if(qt===null){for(;!Zn.done;nn++,Zn=Ce.next())Zn=at(Me,Zn.value,et),Zn!==null&&(xe=C(Zn,xe,nn),Bn===null?Ut=Zn:Bn.sibling=Zn,Bn=Zn);return Gn&&oo(Me,nn),Ut}for(qt=v(qt);!Zn.done;nn++,Zn=Ce.next())Zn=Ie(qt,Me,nn,Zn.value,et),Zn!==null&&(r&&Zn.alternate!==null&&qt.delete(Zn.key===null?nn:Zn.key),xe=C(Zn,xe,nn),Bn===null?Ut=Zn:Bn.sibling=Zn,Bn=Zn);return r&&qt.forEach(function(OL){return l(Me,OL)}),Gn&&oo(Me,nn),Ut}function xi(Me,xe,Ce,et){if(typeof Ce=="object"&&Ce!==null&&Ce.type===A&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:e:{for(var Ut=Ce.key;xe!==null;){if(xe.key===Ut){if(Ut=Ce.type,Ut===A){if(xe.tag===7){p(Me,xe.sibling),et=S(xe,Ce.props.children),et.return=Me,Me=et;break e}}else if(xe.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===I&&ny(Ut)===xe.type){p(Me,xe.sibling),et=S(xe,Ce.props),eu(et,Ce),et.return=Me,Me=et;break e}p(Me,xe);break}else l(Me,xe);xe=xe.sibling}Ce.type===A?(et=qo(Ce.props.children,Me.mode,et,Ce.key),et.return=Me,Me=et):(et=oa(Ce.type,Ce.key,Ce.props,null,Me.mode,et),eu(et,Ce),et.return=Me,Me=et)}return F(Me);case _:e:{for(Ut=Ce.key;xe!==null;){if(xe.key===Ut)if(xe.tag===4&&xe.stateNode.containerInfo===Ce.containerInfo&&xe.stateNode.implementation===Ce.implementation){p(Me,xe.sibling),et=S(xe,Ce.children||[]),et.return=Me,Me=et;break e}else{p(Me,xe);break}else l(Me,xe);xe=xe.sibling}et=Zh(Ce,Me.mode,et),et.return=Me,Me=et}return F(Me);case I:return Ut=Ce._init,Ce=Ut(Ce._payload),xi(Me,xe,Ce,et)}if(me(Ce))return on(Me,xe,Ce,et);if(ie(Ce)){if(Ut=ie(Ce),typeof Ut!="function")throw Error(i(150));return Ce=Ut.call(Ce),tn(Me,xe,Ce,et)}if(typeof Ce.then=="function")return xi(Me,xe,wf(Ce),et);if(Ce.$$typeof===D)return xi(Me,xe,gf(Me,Ce),et);vd(Me,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,xe!==null&&xe.tag===6?(p(Me,xe.sibling),et=S(xe,Ce),et.return=Me,Me=et):(p(Me,xe),et=hf(Ce,Me.mode,et),et.return=Me,Me=et),F(Me)):p(Me,xe)}return function(Me,xe,Ce,et){try{Cf=0;var Ut=xi(Me,xe,Ce,et);return zl=null,Ut}catch(qt){if(qt===_f||qt===ar)throw qt;var Bn=is(29,qt,null,Me.mode);return Bn.lanes=et,Bn.return=Me,Bn}finally{}}}var Hl=iy(!0),ay=iy(!1),ci=fe(null),rr=null;function nl(r){var l=r.alternate;Ae(Pi,Pi.current&1),Ae(ci,r),rr===null&&(l===null||Jc.current!==null||l.memoizedState!==null)&&(rr=r)}function sy(r){if(r.tag===22){if(Ae(Pi,Pi.current),Ae(ci,r),rr===null){var l=r.alternate;l!==null&&l.memoizedState!==null&&(rr=r)}}else il()}function il(){Ae(Pi,Pi.current),Ae(ci,ci.current)}function Er(r){_e(ci),rr===r&&(rr=null),_e(Pi)}var Pi=fe(0);function go(r){for(var l=r;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||MA(p)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function al(r,l,p,v){l=r.memoizedState,p=p(v,l),p=p==null?l:m({},l,p),r.memoizedState=p,r.lanes===0&&(r.updateQueue.baseState=p)}var Xa={enqueueSetState:function(r,l,p){r=r._reactInternals;var v=Bi(),S=Mr(v);S.payload=l,p!=null&&(S.callback=p),l=fo(r,S,v),l!==null&&(Ya(l,r,v),Fl(l,r,v))},enqueueReplaceState:function(r,l,p){r=r._reactInternals;var v=Bi(),S=Mr(v);S.tag=1,S.payload=l,p!=null&&(S.callback=p),l=fo(r,S,v),l!==null&&(Ya(l,r,v),Fl(l,r,v))},enqueueForceUpdate:function(r,l){r=r._reactInternals;var p=Bi(),v=Mr(p);v.tag=2,l!=null&&(v.callback=l),l=fo(r,v,p),l!==null&&(Ya(l,r,p),Fl(l,r,p))}};function ry(r,l,p,v,S,C,F){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(v,C,F):l.prototype&&l.prototype.isPureReactComponent?!nr(p,v)||!nr(S,C):!0}function oy(r,l,p,v){r=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,v),l.state!==r&&Xa.enqueueReplaceState(l,l.state,null)}function Tr(r,l){var p=l;if("ref"in l){p={};for(var v in l)v!=="ref"&&(p[v]=l[v])}if(r=r.defaultProps){p===l&&(p=m({},p));for(var S in r)p[S]===void 0&&(p[S]=r[S])}return p}var Gl=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Rf(r){Gl(r)}function yd(r){console.error(r)}function ly(r){Gl(r)}function xd(r,l){try{var p=r.onUncaughtError;p(l.value,{componentStack:l.stack})}catch(v){setTimeout(function(){throw v})}}function Vs(r,l,p){try{var v=r.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function _d(r,l,p){return p=Mr(p),p.tag=3,p.payload={element:null},p.callback=function(){xd(r,l)},p}function cy(r){return r=Mr(r),r.tag=3,r}function bd(r,l,p,v){var S=p.type.getDerivedStateFromError;if(typeof S=="function"){var C=v.value;r.payload=function(){return S(C)},r.callback=function(){Vs(l,p,v)}}var F=p.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(r.callback=function(){Vs(l,p,v),typeof S!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var K=v.stack;this.componentDidCatch(v.value,{componentStack:K!==null?K:""})})}function uA(r,l,p,v,S){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(l=p.alternate,l!==null&&Fs(l,p,S,!0),p=ci.current,p!==null){switch(p.tag){case 13:return rr===null?u():p.alternate===null&&bi===0&&(bi=3),p.flags&=-257,p.flags|=65536,p.lanes=S,v===bf?p.flags|=16384:(l=p.updateQueue,l===null?p.updateQueue=new Set([v]):l.add(v),Pe(r,v,S)),!1;case 22:return p.flags|=65536,v===bf?p.flags|=16384:(l=p.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=l):(p=l.retryQueue,p===null?l.retryQueue=new Set([v]):p.add(v)),Pe(r,v,S)),!1}throw Error(i(435,p.tag))}return Pe(r,v,S),u(),!1}if(Gn)return l=ci.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=S,v!==$h&&(r=Error(i(422),{cause:v}),Pl(va(r,p)))):(v!==$h&&(l=Error(i(423),{cause:v}),Pl(va(l,p))),r=r.current.alternate,r.flags|=65536,S&=-S,r.lanes|=S,v=va(v,p),S=_d(r.stateNode,v,S),qc(r,S),bi!==4&&(bi=2)),!1;var C=Error(i(520),{cause:v});if(C=va(C,p),Jn===null?Jn=[C]:Jn.push(C),bi!==4&&(bi=2),l===null)return!0;v=va(v,p),p=l;do{switch(p.tag){case 3:return p.flags|=65536,r=S&-S,p.lanes|=r,r=_d(p.stateNode,v,r),qc(p,r),!1;case 1:if(l=p.type,C=p.stateNode,(p.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ss===null||!Ss.has(C))))return p.flags|=65536,S&=-S,p.lanes|=S,S=cy(S),bd(S,r,p,v),qc(p,S),!1}p=p.return}while(p!==null);return!1}var uy=Error(i(461)),la=!1;function Fi(r,l,p,v){l.child=r===null?ay(l,null,p,v):Hl(l,r.child,p,v)}function ss(r,l,p,v,S){p=p.render;var C=l.ref;if("ref"in v){var F={};for(var K in v)K!=="ref"&&(F[K]=v[K])}else F=v;return Sr(l),v=po(r,l,p,F,C,S),K=Om(),r!==null&&!la?(ld(r,l,S),ca(r,l,S)):(Gn&&K&&Am(l),l.flags|=1,Fi(r,l,v,S),l.child)}function rs(r,l,p,v,S){if(r===null){var C=p.type;return typeof C=="function"&&!ff(C)&&C.defaultProps===void 0&&p.compare===null?(l.tag=15,l.type=C,Wm(r,l,C,v,S)):(r=oa(p.type,null,v,l,l.mode,S),r.ref=l.ref,r.return=l,l.child=r)}if(C=r.child,!Df(r,S)){var F=C.memoizedProps;if(p=p.compare,p=p!==null?p:nr,p(F,v)&&r.ref===l.ref)return ca(r,l,S)}return l.flags|=1,r=Li(C,v),r.ref=l.ref,r.return=l,l.child=r}function Wm(r,l,p,v,S){if(r!==null){var C=r.memoizedProps;if(nr(C,v)&&r.ref===l.ref)if(la=!1,l.pendingProps=v=C,Df(r,S))(r.flags&131072)!==0&&(la=!0);else return l.lanes=r.lanes,ca(r,l,S)}return tu(r,l,p,v,S)}function Vl(r,l,p){var v=l.pendingProps,S=v.children,C=r!==null?r.memoizedState:null;if(v.mode==="hidden"){if((l.flags&128)!==0){if(v=C!==null?C.baseLanes|p:p,r!==null){for(S=l.child=r.child,C=0;S!==null;)C=C|S.lanes|S.childLanes,S=S.sibling;l.childLanes=C&~v}else l.childLanes=0,l.child=null;return kl(r,l,v,p)}if((p&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},r!==null&&xf(l,C!==null?C.cachePool:null),C!==null?Tv(l,C):Nm(),sy(l);else return l.lanes=l.childLanes=536870912,kl(r,l,C!==null?C.baseLanes|p:p,p)}else C!==null?(xf(l,C.cachePool),Tv(l,C),il(),l.memoizedState=null):(r!==null&&xf(l,null),Nm(),il());return Fi(r,l,S,p),l.child}function kl(r,l,p,v){var S=Qo();return S=S===null?null:{parent:ji._currentValue,pool:S},l.memoizedState={baseLanes:p,cachePool:S},r!==null&&xf(l,null),Nm(),sy(l),r!==null&&Fs(r,l,v,!0),null}function Xl(r,l){var p=l.ref;if(p===null)r!==null&&r.ref!==null&&(l.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(i(284));(r===null||r.ref!==p)&&(l.flags|=4194816)}}function tu(r,l,p,v,S){return Sr(l),p=po(r,l,p,v,void 0,S),v=Om(),r!==null&&!la?(ld(r,l,S),ca(r,l,S)):(Gn&&v&&Am(l),l.flags|=1,Fi(r,l,p,S),l.child)}function gs(r,l,p,v,S,C){return Sr(l),l.updateQueue=null,p=Rv(l,v,p,S),wv(r),v=Om(),r!==null&&!la?(ld(r,l,C),ca(r,l,C)):(Gn&&v&&Am(l),l.flags|=1,Fi(r,l,p,C),l.child)}function vs(r,l,p,v,S){if(Sr(l),l.stateNode===null){var C=Yo,F=p.contextType;typeof F=="object"&&F!==null&&(C=wi(F)),C=new p(v,C),l.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Xa,l.stateNode=C,C._reactInternals=l,C=l.stateNode,C.props=v,C.state=l.memoizedState,C.refs={},Dm(l),F=p.contextType,C.context=typeof F=="object"&&F!==null?wi(F):Yo,C.state=l.memoizedState,F=p.getDerivedStateFromProps,typeof F=="function"&&(al(l,p,F,v),C.state=l.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(F=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),F!==C.state&&Xa.enqueueReplaceState(C,C.state,null),Kc(l,v,C,S),Af(),C.state=l.memoizedState),typeof C.componentDidMount=="function"&&(l.flags|=4194308),v=!0}else if(r===null){C=l.stateNode;var K=l.memoizedProps,le=Tr(p,K);C.props=le;var we=C.context,Je=p.contextType;F=Yo,typeof Je=="object"&&Je!==null&&(F=wi(Je));var at=p.getDerivedStateFromProps;Je=typeof at=="function"||typeof C.getSnapshotBeforeUpdate=="function",K=l.pendingProps!==K,Je||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(K||we!==F)&&oy(l,C,v,F),uo=!1;var Ue=l.memoizedState;C.state=Ue,Kc(l,v,C,S),Af(),we=l.memoizedState,K||Ue!==we||uo?(typeof at=="function"&&(al(l,p,at,v),we=l.memoizedState),(le=uo||ry(l,p,le,v,Ue,we,F))?(Je||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(l.flags|=4194308)):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=we),C.props=v,C.state=we,C.context=F,v=le):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{C=l.stateNode,an(r,l),F=l.memoizedProps,Je=Tr(p,F),C.props=Je,at=l.pendingProps,Ue=C.context,we=p.contextType,le=Yo,typeof we=="object"&&we!==null&&(le=wi(we)),K=p.getDerivedStateFromProps,(we=typeof K=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(F!==at||Ue!==le)&&oy(l,C,v,le),uo=!1,Ue=l.memoizedState,C.state=Ue,Kc(l,v,C,S),Af();var Ie=l.memoizedState;F!==at||Ue!==Ie||uo||r!==null&&r.dependencies!==null&&mf(r.dependencies)?(typeof K=="function"&&(al(l,p,K,v),Ie=l.memoizedState),(Je=uo||ry(l,p,Je,v,Ue,Ie,le)||r!==null&&r.dependencies!==null&&mf(r.dependencies))?(we||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(v,Ie,le),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(v,Ie,le)),typeof C.componentDidUpdate=="function"&&(l.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof C.componentDidUpdate!="function"||F===r.memoizedProps&&Ue===r.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===r.memoizedProps&&Ue===r.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=Ie),C.props=v,C.state=Ie,C.context=le,v=Je):(typeof C.componentDidUpdate!="function"||F===r.memoizedProps&&Ue===r.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===r.memoizedProps&&Ue===r.memoizedState||(l.flags|=1024),v=!1)}return C=v,Xl(r,l),v=(l.flags&128)!==0,C||v?(C=l.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:C.render(),l.flags|=1,r!==null&&v?(l.child=Hl(l,r.child,null,S),l.child=Hl(l,null,p,S)):Fi(r,l,p,S),l.memoizedState=C.state,r=l.child):r=ca(r,l,S),r}function sl(r,l,p,v){return Vc(),l.flags|=256,Fi(r,l,p,v),l.child}var or={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lr(r){return{baseLanes:r,cachePool:id()}}function $i(r,l,p){return r=r!==null?r.childLanes&~p:0,l&&(r|=qs),r}function nu(r,l,p){var v=l.pendingProps,S=!1,C=(l.flags&128)!==0,F;if((F=C)||(F=r!==null&&r.memoizedState===null?!1:(Pi.current&2)!==0),F&&(S=!0,l.flags&=-129),F=(l.flags&32)!==0,l.flags&=-33,r===null){if(Gn){if(S?nl(l):il(),Gn){var K=Ei,le;if(le=K){e:{for(le=K,K=ds;le.nodeType!==8;){if(!K){K=null;break e}if(le=Ao(le.nextSibling),le===null){K=null;break e}}K=le}K!==null?(l.memoizedState={dehydrated:K,treeContext:Ko!==null?{id:br,overflow:Ar}:null,retryLane:536870912,hydrationErrors:null},le=is(18,null,null,0),le.stateNode=K,le.return=l,l.child=le,Ga=l,Ei=null,le=!0):le=!1}le||Wo(l)}if(K=l.memoizedState,K!==null&&(K=K.dehydrated,K!==null))return MA(K)?l.lanes=32:l.lanes=536870912,null;Er(l)}return K=v.children,v=v.fallback,S?(il(),S=l.mode,K=jl({mode:"hidden",children:K},S),v=qo(v,S,p,null),K.return=l,v.return=l,K.sibling=v,l.child=K,S=l.child,S.memoizedState=lr(p),S.childLanes=$i(r,F,p),l.memoizedState=or,v):(nl(l),Cr(l,K))}if(le=r.memoizedState,le!==null&&(K=le.dehydrated,K!==null)){if(C)l.flags&256?(nl(l),l.flags&=-257,l=_a(r,l,p)):l.memoizedState!==null?(il(),l.child=r.child,l.flags|=128,l=null):(il(),S=v.fallback,K=l.mode,v=jl({mode:"visible",children:v.children},K),S=qo(S,K,p,null),S.flags|=2,v.return=l,S.return=l,v.sibling=S,l.child=v,Hl(l,r.child,null,p),v=l.child,v.memoizedState=lr(p),v.childLanes=$i(r,F,p),l.memoizedState=or,l=S);else if(nl(l),MA(K)){if(F=K.nextSibling&&K.nextSibling.dataset,F)var we=F.dgst;F=we,v=Error(i(419)),v.stack="",v.digest=F,Pl({value:v,source:null,stack:null}),l=_a(r,l,p)}else if(la||Fs(r,l,p,!1),F=(p&r.childLanes)!==0,la||F){if(F=hn,F!==null&&(v=p&-p,v=(v&42)!==0?1:Mt(v),v=(v&(F.suspendedLanes|p))!==0?0:v,v!==0&&v!==le.retryLane))throw le.retryLane=v,ro(r,v),Ya(F,r,v),uy;K.data==="$?"||u(),l=_a(r,l,p)}else K.data==="$?"?(l.flags|=192,l.child=r.child,l=null):(r=le.treeContext,Ei=Ao(K.nextSibling),Ga=l,Gn=!0,Ps=null,ds=!1,r!==null&&(ya[hs++]=br,ya[hs++]=Ar,ya[hs++]=Ko,br=r.id,Ar=r.overflow,Ko=l),l=Cr(l,v.children),l.flags|=4096);return l}return S?(il(),S=v.fallback,K=l.mode,le=r.child,we=le.sibling,v=Li(le,{mode:"hidden",children:v.children}),v.subtreeFlags=le.subtreeFlags&65011712,we!==null?S=Li(we,S):(S=qo(S,K,p,null),S.flags|=2),S.return=l,v.return=l,v.sibling=S,l.child=v,v=S,S=l.child,K=r.child.memoizedState,K===null?K=lr(p):(le=K.cachePool,le!==null?(we=ji._currentValue,le=le.parent!==we?{parent:we,pool:we}:le):le=id(),K={baseLanes:K.baseLanes|p,cachePool:le}),S.memoizedState=K,S.childLanes=$i(r,F,p),l.memoizedState=or,v):(nl(l),p=r.child,r=p.sibling,p=Li(p,{mode:"visible",children:v.children}),p.return=l,p.sibling=null,r!==null&&(F=l.deletions,F===null?(l.deletions=[r],l.flags|=16):F.push(r)),l.child=p,l.memoizedState=null,p)}function Cr(r,l){return l=jl({mode:"visible",children:l},r.mode),l.return=r,r.child=l}function jl(r,l){return r=is(22,r,null,l),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function _a(r,l,p){return Hl(l,r.child,null,p),r=Cr(l,l.pendingProps.children),r.flags|=2,l.memoizedState=null,r}function ba(r,l,p){r.lanes|=l;var v=r.alternate;v!==null&&(v.lanes|=l),Tm(r.return,l,p)}function In(r,l,p,v,S){var C=r.memoizedState;C===null?r.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:S}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=v,C.tail=p,C.tailMode=S)}function ks(r,l,p){var v=l.pendingProps,S=v.revealOrder,C=v.tail;if(Fi(r,l,v.children,p),v=Pi.current,(v&2)!==0)v=v&1|2,l.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=l.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ba(r,p,l);else if(r.tag===19)ba(r,p,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===l)break e;for(;r.sibling===null;){if(r.return===null||r.return===l)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}v&=1}switch(Ae(Pi,v),S){case"forwards":for(p=l.child,S=null;p!==null;)r=p.alternate,r!==null&&go(r)===null&&(S=p),p=p.sibling;p=S,p===null?(S=l.child,l.child=null):(S=p.sibling,p.sibling=null),In(l,!1,S,p,C);break;case"backwards":for(p=null,S=l.child,l.child=null;S!==null;){if(r=S.alternate,r!==null&&go(r)===null){l.child=S;break}r=S.sibling,S.sibling=p,p=S,S=r}In(l,!0,p,null,C);break;case"together":In(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ca(r,l,p){if(r!==null&&(l.dependencies=r.dependencies),hr|=l.lanes,(p&l.childLanes)===0)if(r!==null){if(Fs(r,l,p,!1),(p&l.childLanes)===0)return null}else return null;if(r!==null&&l.child!==r.child)throw Error(i(153));if(l.child!==null){for(r=l.child,p=Li(r,r.pendingProps),l.child=p,p.return=l;r.sibling!==null;)r=r.sibling,p=p.sibling=Li(r,r.pendingProps),p.return=l;p.sibling=null}return l.child}function Df(r,l){return(r.lanes&l)!==0?!0:(r=r.dependencies,!!(r!==null&&mf(r)))}function Xs(r,l,p){switch(l.tag){case 3:Qe(l,l.stateNode.containerInfo),Zo(l,ji,r.memoizedState.cache),Vc();break;case 27:case 5:ct(l);break;case 4:Qe(l,l.stateNode.containerInfo);break;case 10:Zo(l,l.type,l.memoizedProps.value);break;case 13:var v=l.memoizedState;if(v!==null)return v.dehydrated!==null?(nl(l),l.flags|=128,null):(p&l.child.childLanes)!==0?nu(r,l,p):(nl(l),r=ca(r,l,p),r!==null?r.sibling:null);nl(l);break;case 19:var S=(r.flags&128)!==0;if(v=(p&l.childLanes)!==0,v||(Fs(r,l,p,!1),v=(p&l.childLanes)!==0),S){if(v)return ks(r,l,p);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Ae(Pi,Pi.current),v)break;return null;case 22:case 23:return l.lanes=0,Vl(r,l,p);case 24:Zo(l,ji,r.memoizedState.cache)}return ca(r,l,p)}function Yl(r,l,p){if(r!==null)if(r.memoizedProps!==l.pendingProps)la=!0;else{if(!Df(r,p)&&(l.flags&128)===0)return la=!1,Xs(r,l,p);la=(r.flags&131072)!==0}else la=!1,Gn&&(l.flags&1048576)!==0&&Qh(l,Gc,l.index);switch(l.lanes=0,l.tag){case 16:e:{r=l.pendingProps;var v=l.elementType,S=v._init;if(v=S(v._payload),l.type=v,typeof v=="function")ff(v)?(r=Tr(v,r),l.tag=1,l=vs(null,l,v,r,p)):(l.tag=0,l=tu(null,l,v,r,p));else{if(v!=null){if(S=v.$$typeof,S===B){l.tag=11,l=ss(null,l,v,r,p);break e}else if(S===z){l.tag=14,l=rs(null,l,v,r,p);break e}}throw l=ue(v)||v,Error(i(306,l,""))}}return l;case 0:return tu(r,l,l.type,l.pendingProps,p);case 1:return v=l.type,S=Tr(v,l.pendingProps),vs(r,l,v,S,p);case 3:e:{if(Qe(l,l.stateNode.containerInfo),r===null)throw Error(i(387));v=l.pendingProps;var C=l.memoizedState;S=C.element,an(r,l),Kc(l,v,null,p);var F=l.memoizedState;if(v=F.cache,Zo(l,ji,v),v!==C.cache&&pf(l,[ji],p,!0),Af(),v=F.element,C.isDehydrated)if(C={element:v,isDehydrated:!1,cache:F.cache},l.updateQueue.baseState=C,l.memoizedState=C,l.flags&256){l=sl(r,l,v,p);break e}else if(v!==S){S=va(Error(i(424)),l),Pl(S),l=sl(r,l,v,p);break e}else{switch(r=l.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ei=Ao(r.firstChild),Ga=l,Gn=!0,Ps=null,ds=!0,p=ay(l,null,v,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Vc(),v===S){l=ca(r,l,p);break e}Fi(r,l,v,p)}l=l.child}return l;case 26:return Xl(r,l),r===null?(p=WT(l.type,null,l.pendingProps,null))?l.memoizedState=p:Gn||(p=l.type,r=l.pendingProps,v=gy(ve.current).createElement(p),v[Xn]=l,v[Tn]=r,qa(v,p,r),Oe(v),l.stateNode=v):l.memoizedState=WT(l.type,r.memoizedProps,l.pendingProps,r.memoizedState),null;case 27:return ct(l),r===null&&Gn&&(v=l.stateNode=YT(l.type,l.pendingProps,ve.current),Ga=l,ds=!0,S=Ei,hu(l.type)?(EA=S,Ei=Ao(v.firstChild)):Ei=S),Fi(r,l,l.pendingProps.children,p),Xl(r,l),r===null&&(l.flags|=4194304),l.child;case 5:return r===null&&Gn&&((S=v=Ei)&&(v=lL(v,l.type,l.pendingProps,ds),v!==null?(l.stateNode=v,Ga=l,Ei=Ao(v.firstChild),ds=!1,S=!0):S=!1),S||Wo(l)),ct(l),S=l.type,C=l.pendingProps,F=r!==null?r.memoizedProps:null,v=C.children,bA(S,C)?v=null:F!==null&&bA(S,F)&&(l.flags|=32),l.memoizedState!==null&&(S=po(r,l,aA,null,null,p),rg._currentValue=S),Xl(r,l),Fi(r,l,v,p),l.child;case 6:return r===null&&Gn&&((r=p=Ei)&&(p=cL(p,l.pendingProps,ds),p!==null?(l.stateNode=p,Ga=l,Ei=null,r=!0):r=!1),r||Wo(l)),null;case 13:return nu(r,l,p);case 4:return Qe(l,l.stateNode.containerInfo),v=l.pendingProps,r===null?l.child=Hl(l,null,v,p):Fi(r,l,v,p),l.child;case 11:return ss(r,l,l.type,l.pendingProps,p);case 7:return Fi(r,l,l.pendingProps,p),l.child;case 8:return Fi(r,l,l.pendingProps.children,p),l.child;case 12:return Fi(r,l,l.pendingProps.children,p),l.child;case 10:return v=l.pendingProps,Zo(l,l.type,v.value),Fi(r,l,v.children,p),l.child;case 9:return S=l.type._context,v=l.pendingProps.children,Sr(l),S=wi(S),v=v(S),l.flags|=1,Fi(r,l,v,p),l.child;case 14:return rs(r,l,l.type,l.pendingProps,p);case 15:return Wm(r,l,l.type,l.pendingProps,p);case 19:return ks(r,l,p);case 31:return v=l.pendingProps,p=l.mode,v={mode:v.mode,children:v.children},r===null?(p=jl(v,p),p.ref=l.ref,l.child=p,p.return=l,l=p):(p=Li(r.child,v),p.ref=l.ref,l.child=p,p.return=l,l=p),l;case 22:return Vl(r,l,p);case 24:return Sr(l),v=wi(ji),r===null?(S=Qo(),S===null&&(S=hn,C=td(),S.pooledCache=C,C.refCount++,C!==null&&(S.pooledCacheLanes|=p),S=C),l.memoizedState={parent:v,cache:S},Dm(l),Zo(l,ji,S)):((r.lanes&p)!==0&&(an(r,l),Kc(l,null,null,p),Af()),S=r.memoizedState,C=l.memoizedState,S.parent!==v?(S={parent:v,cache:v},l.memoizedState=S,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=S),Zo(l,ji,v)):(v=C.cache,Zo(l,ji,v),v!==S.cache&&pf(l,[ji],p,!0))),Fi(r,l,l.pendingProps.children,p),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function cr(r){r.flags|=4}function Bf(r,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!eC(l)){if(l=ci.current,l!==null&&((Kt&4194048)===Kt?rr!==null:(Kt&62914560)!==Kt&&(Kt&536870912)===0||l!==rr))throw Hs=bf,wm;r.flags|=8192}}function vo(r,l){l!==null&&(r.flags|=4),r.flags&16384&&(l=r.tag!==22?be():536870912,r.lanes|=l,Fn|=l)}function ql(r,l){if(!Gn)switch(r.tailMode){case"hidden":l=r.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?r.tail=null:p.sibling=null;break;case"collapsed":p=r.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?l||r.tail===null?r.tail=null:r.tail.sibling=null:v.sibling=null}}function mi(r){var l=r.alternate!==null&&r.alternate.child===r.child,p=0,v=0;if(l)for(var S=r.child;S!==null;)p|=S.lanes|S.childLanes,v|=S.subtreeFlags&65011712,v|=S.flags&65011712,S.return=r,S=S.sibling;else for(S=r.child;S!==null;)p|=S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=r,S=S.sibling;return r.subtreeFlags|=v,r.childLanes=p,l}function Jm(r,l,p){var v=l.pendingProps;switch(Sm(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mi(l),null;case 1:return mi(l),null;case 3:return p=l.stateNode,v=null,r!==null&&(v=r.memoizedState.cache),l.memoizedState.cache!==v&&(l.flags|=2048),co(ji),bt(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(r===null||r.child===null)&&(ir(l)?cr(l):r===null||r.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Kn())),mi(l),null;case 26:return p=l.memoizedState,r===null?(cr(l),p!==null?(mi(l),Bf(l,p)):(mi(l),l.flags&=-16777217)):p?p!==r.memoizedState?(cr(l),mi(l),Bf(l,p)):(mi(l),l.flags&=-16777217):(r.memoizedProps!==v&&cr(l),mi(l),l.flags&=-16777217),null;case 27:zt(l),p=ve.current;var S=l.type;if(r!==null&&l.stateNode!=null)r.memoizedProps!==v&&cr(l);else{if(!v){if(l.stateNode===null)throw Error(i(166));return mi(l),null}r=De.current,ir(l)?Av(l):(r=YT(S,v,p),l.stateNode=r,cr(l))}return mi(l),null;case 5:if(zt(l),p=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==v&&cr(l);else{if(!v){if(l.stateNode===null)throw Error(i(166));return mi(l),null}if(r=De.current,ir(l))Av(l);else{switch(S=gy(ve.current),r){case 1:r=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:r=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":r=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":r=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":r=S.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof v.is=="string"?S.createElement("select",{is:v.is}):S.createElement("select"),v.multiple?r.multiple=!0:v.size&&(r.size=v.size);break;default:r=typeof v.is=="string"?S.createElement(p,{is:v.is}):S.createElement(p)}}r[Xn]=l,r[Tn]=v;e:for(S=l.child;S!==null;){if(S.tag===5||S.tag===6)r.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===l)break e;for(;S.sibling===null;){if(S.return===null||S.return===l)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}l.stateNode=r;e:switch(qa(r,p,v),p){case"button":case"input":case"select":case"textarea":r=!!v.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&cr(l)}}return mi(l),l.flags&=-16777217,null;case 6:if(r&&l.stateNode!=null)r.memoizedProps!==v&&cr(l);else{if(typeof v!="string"&&l.stateNode===null)throw Error(i(166));if(r=ve.current,ir(l)){if(r=l.stateNode,p=l.memoizedProps,v=null,S=Ga,S!==null)switch(S.tag){case 27:case 5:v=S.memoizedProps}r[Xn]=l,r=!!(r.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||zT(r.nodeValue,p)),r||Wo(l)}else r=gy(r).createTextNode(v),r[Xn]=l,l.stateNode=r}return mi(l),null;case 13:if(v=l.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(S=ir(l),v!==null&&v.dehydrated!==null){if(r===null){if(!S)throw Error(i(318));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(i(317));S[Xn]=l}else Vc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;mi(l),S=!1}else S=Kn(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=S),S=!0;if(!S)return l.flags&256?(Er(l),l):(Er(l),null)}if(Er(l),(l.flags&128)!==0)return l.lanes=p,l;if(p=v!==null,r=r!==null&&r.memoizedState!==null,p){v=l.child,S=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(S=v.alternate.memoizedState.cachePool.pool);var C=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(C=v.memoizedState.cachePool.pool),C!==S&&(v.flags|=2048)}return p!==r&&p&&(l.child.flags|=8192),vo(l,l.updateQueue),mi(l),null;case 4:return bt(),r===null&&gA(l.stateNode.containerInfo),mi(l),null;case 10:return co(l.type),mi(l),null;case 19:if(_e(Pi),S=l.memoizedState,S===null)return mi(l),null;if(v=(l.flags&128)!==0,C=S.rendering,C===null)if(v)ql(S,!1);else{if(bi!==0||r!==null&&(r.flags&128)!==0)for(r=l.child;r!==null;){if(C=go(r),C!==null){for(l.flags|=128,ql(S,!1),r=C.updateQueue,l.updateQueue=r,vo(l,r),l.subtreeFlags=0,r=p,p=l.child;p!==null;)bm(p,r),p=p.sibling;return Ae(Pi,Pi.current&1|2),l.child}r=r.sibling}S.tail!==null&&He()>Ra&&(l.flags|=128,v=!0,ql(S,!1),l.lanes=4194304)}else{if(!v)if(r=go(C),r!==null){if(l.flags|=128,v=!0,r=r.updateQueue,l.updateQueue=r,vo(l,r),ql(S,!0),S.tail===null&&S.tailMode==="hidden"&&!C.alternate&&!Gn)return mi(l),null}else 2*He()-S.renderingStartTime>Ra&&p!==536870912&&(l.flags|=128,v=!0,ql(S,!1),l.lanes=4194304);S.isBackwards?(C.sibling=l.child,l.child=C):(r=S.last,r!==null?r.sibling=C:l.child=C,S.last=C)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=He(),l.sibling=null,r=Pi.current,Ae(Pi,v?r&1|2:r&1),l):(mi(l),null);case 22:case 23:return Er(l),Sf(),v=l.memoizedState!==null,r!==null?r.memoizedState!==null!==v&&(l.flags|=8192):v&&(l.flags|=8192),v?(p&536870912)!==0&&(l.flags&128)===0&&(mi(l),l.subtreeFlags&6&&(l.flags|=8192)):mi(l),p=l.updateQueue,p!==null&&vo(l,p.retryQueue),p=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(p=r.memoizedState.cachePool.pool),v=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==p&&(l.flags|=2048),r!==null&&_e(zs),null;case 24:return p=null,r!==null&&(p=r.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),co(ji),mi(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function iu(r,l){switch(Sm(l),l.tag){case 1:return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 3:return co(ji),bt(),r=l.flags,(r&65536)!==0&&(r&128)===0?(l.flags=r&-65537|128,l):null;case 26:case 27:case 5:return zt(l),null;case 13:if(Er(l),r=l.memoizedState,r!==null&&r.dehydrated!==null){if(l.alternate===null)throw Error(i(340));Vc()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 19:return _e(Pi),null;case 4:return bt(),null;case 10:return co(l.type),null;case 22:case 23:return Er(l),Sf(),r!==null&&_e(zs),r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 24:return co(ji),null;case 25:return null;default:return null}}function au(r,l){switch(Sm(l),l.tag){case 3:co(ji),bt();break;case 26:case 27:case 5:zt(l);break;case 4:bt();break;case 13:Er(l);break;case 19:_e(Pi);break;case 10:co(l.type);break;case 22:case 23:Er(l),Sf(),r!==null&&_e(zs);break;case 24:co(ji)}}function Kl(r,l){try{var p=l.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var S=v.next;p=S;do{if((p.tag&r)===r){v=void 0;var C=p.create,F=p.inst;v=C(),F.destroy=v}p=p.next}while(p!==S)}}catch(K){ye(l,l.return,K)}}function ys(r,l,p){try{var v=l.updateQueue,S=v!==null?v.lastEffect:null;if(S!==null){var C=S.next;v=C;do{if((v.tag&r)===r){var F=v.inst,K=F.destroy;if(K!==void 0){F.destroy=void 0,S=l;var le=p,we=K;try{we()}catch(Je){ye(S,le,Je)}}}v=v.next}while(v!==C)}}catch(Je){ye(l,l.return,Je)}}function Wl(r){var l=r.updateQueue;if(l!==null){var p=r.stateNode;try{Ev(l,p)}catch(v){ye(r,r.return,v)}}}function yo(r,l,p){p.props=Tr(r.type,r.memoizedProps),p.state=r.memoizedState;try{p.componentWillUnmount()}catch(v){ye(r,l,v)}}function Jl(r,l){try{var p=r.ref;if(p!==null){switch(r.tag){case 26:case 27:case 5:var v=r.stateNode;break;case 30:v=r.stateNode;break;default:v=r.stateNode}typeof p=="function"?r.refCleanup=p(v):p.current=v}}catch(S){ye(r,l,S)}}function wr(r,l){var p=r.ref,v=r.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(S){ye(r,l,S)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(S){ye(r,l,S)}else p.current=null}function su(r){var l=r.type,p=r.memoizedProps,v=r.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(S){ye(r,r.return,S)}}function Nf(r,l,p){try{var v=r.stateNode;iL(v,r.type,p,l),v[Tn]=l}catch(S){ye(r,r.return,S)}}function Of(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&hu(r.type)||r.tag===4}function rl(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Of(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&hu(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ol(r,l,p){var v=r.tag;if(v===5||v===6)r=r.stateNode,l?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(r,l):(l=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,l.appendChild(r),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=my));else if(v!==4&&(v===27&&hu(r.type)&&(p=r.stateNode,l=null),r=r.child,r!==null))for(ol(r,l,p),r=r.sibling;r!==null;)ol(r,l,p),r=r.sibling}function ll(r,l,p){var v=r.tag;if(v===5||v===6)r=r.stateNode,l?p.insertBefore(r,l):p.appendChild(r);else if(v!==4&&(v===27&&hu(r.type)&&(p=r.stateNode),r=r.child,r!==null))for(ll(r,l,p),r=r.sibling;r!==null;)ll(r,l,p),r=r.sibling}function cl(r){var l=r.stateNode,p=r.memoizedProps;try{for(var v=r.type,S=l.attributes;S.length;)l.removeAttributeNode(S[0]);qa(l,v,p),l[Xn]=r,l[Tn]=p}catch(C){ye(r,r.return,C)}}var Rr=!1,gi=!1,ru=!1,xs=typeof WeakSet=="function"?WeakSet:Set,ui=null;function ea(r,l){if(r=r.containerInfo,xA=Ay,r=pm(r),of(r)){if("selectionStart"in r)var p={start:r.selectionStart,end:r.selectionEnd};else e:{p=(p=r.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var S=v.anchorOffset,C=v.focusNode;v=v.focusOffset;try{p.nodeType,C.nodeType}catch{p=null;break e}var F=0,K=-1,le=-1,we=0,Je=0,at=r,Ue=null;t:for(;;){for(var Ie;at!==p||S!==0&&at.nodeType!==3||(K=F+S),at!==C||v!==0&&at.nodeType!==3||(le=F+v),at.nodeType===3&&(F+=at.nodeValue.length),(Ie=at.firstChild)!==null;)Ue=at,at=Ie;for(;;){if(at===r)break t;if(Ue===p&&++we===S&&(K=F),Ue===C&&++Je===v&&(le=F),(Ie=at.nextSibling)!==null)break;at=Ue,Ue=at.parentNode}at=Ie}p=K===-1||le===-1?null:{start:K,end:le}}else p=null}p=p||{start:0,end:0}}else p=null;for(_A={focusedElem:r,selectionRange:p},Ay=!1,ui=l;ui!==null;)if(l=ui,r=l.child,(l.subtreeFlags&1024)!==0&&r!==null)r.return=l,ui=r;else for(;ui!==null;){switch(l=ui,C=l.alternate,r=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&C!==null){r=void 0,p=l,S=C.memoizedProps,C=C.memoizedState,v=p.stateNode;try{var on=Tr(p.type,S,p.elementType===p.type);r=v.getSnapshotBeforeUpdate(on,C),v.__reactInternalSnapshotBeforeUpdate=r}catch(tn){ye(p,p.return,tn)}}break;case 3:if((r&1024)!==0){if(r=l.stateNode.containerInfo,p=r.nodeType,p===9)SA(r);else if(p===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":SA(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=l.sibling,r!==null){r.return=l.return,ui=r;break}ui=l.return}}function xo(r,l,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:ja(r,p),v&4&&Kl(5,p);break;case 1:if(ja(r,p),v&4)if(r=p.stateNode,l===null)try{r.componentDidMount()}catch(F){ye(p,p.return,F)}else{var S=Tr(p.type,l.memoizedProps);l=l.memoizedState;try{r.componentDidUpdate(S,l,r.__reactInternalSnapshotBeforeUpdate)}catch(F){ye(p,p.return,F)}}v&64&&Wl(p),v&512&&Jl(p,p.return);break;case 3:if(ja(r,p),v&64&&(r=p.updateQueue,r!==null)){if(l=null,p.child!==null)switch(p.child.tag){case 27:case 5:l=p.child.stateNode;break;case 1:l=p.child.stateNode}try{Ev(r,l)}catch(F){ye(p,p.return,F)}}break;case 27:l===null&&v&4&&cl(p);case 26:case 5:ja(r,p),l===null&&v&4&&su(p),v&512&&Jl(p,p.return);break;case 12:ja(r,p);break;case 13:ja(r,p),v&4&&ul(r,p),v&64&&(r=p.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(p=Ai.bind(null,p),uL(r,p))));break;case 22:if(v=p.memoizedState!==null||Rr,!v){l=l!==null&&l.memoizedState!==null||gi,S=Rr;var C=gi;Rr=v,(gi=l)&&!C?Dr(r,p,(p.subtreeFlags&8772)!==0):ja(r,p),Rr=S,gi=C}break;case 30:break;default:ja(r,p)}}function bn(r){var l=r.alternate;l!==null&&(r.alternate=null,bn(l)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(l=r.stateNode,l!==null&&ai(l)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Jt=null,Pn=!1;function js(r,l,p){for(p=p.child;p!==null;)Zl(r,l,p),p=p.sibling}function Zl(r,l,p){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(Fe,p)}catch{}switch(p.tag){case 26:gi||wr(p,l),js(r,l,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:gi||wr(p,l);var v=Jt,S=Pn;hu(p.type)&&(Jt=p.stateNode,Pn=!1),js(r,l,p),ng(p.stateNode),Jt=v,Pn=S;break;case 5:gi||wr(p,l);case 6:if(v=Jt,S=Pn,Jt=null,js(r,l,p),Jt=v,Pn=S,Jt!==null)if(Pn)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(p.stateNode)}catch(C){ye(p,l,C)}else try{Jt.removeChild(p.stateNode)}catch(C){ye(p,l,C)}break;case 18:Jt!==null&&(Pn?(r=Jt,XT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,p.stateNode),ug(r)):XT(Jt,p.stateNode));break;case 4:v=Jt,S=Pn,Jt=p.stateNode.containerInfo,Pn=!0,js(r,l,p),Jt=v,Pn=S;break;case 0:case 11:case 14:case 15:gi||ys(2,p,l),gi||ys(4,p,l),js(r,l,p);break;case 1:gi||(wr(p,l),v=p.stateNode,typeof v.componentWillUnmount=="function"&&yo(p,l,v)),js(r,l,p);break;case 21:js(r,l,p);break;case 22:gi=(v=gi)||p.memoizedState!==null,js(r,l,p),gi=v;break;default:js(r,l,p)}}function ul(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ug(r)}catch(p){ye(l,l.return,p)}}function Ad(r){switch(r.tag){case 13:case 19:var l=r.stateNode;return l===null&&(l=r.stateNode=new xs),l;case 22:return r=r.stateNode,l=r._retryCache,l===null&&(l=r._retryCache=new xs),l;default:throw Error(i(435,r.tag))}}function Ql(r,l){var p=Ad(r);l.forEach(function(v){var S=sn.bind(null,r,v);p.has(v)||(p.add(v),v.then(S,S))})}function ua(r,l){var p=l.deletions;if(p!==null)for(var v=0;v<p.length;v++){var S=p[v],C=r,F=l,K=F;e:for(;K!==null;){switch(K.tag){case 27:if(hu(K.type)){Jt=K.stateNode,Pn=!1;break e}break;case 5:Jt=K.stateNode,Pn=!1;break e;case 3:case 4:Jt=K.stateNode.containerInfo,Pn=!0;break e}K=K.return}if(Jt===null)throw Error(i(160));Zl(C,F,S),Jt=null,Pn=!1,C=S.alternate,C!==null&&(C.return=null),S.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)Sd(l,r),l=l.sibling}var ur=null;function Sd(r,l){var p=r.alternate,v=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:ua(l,r),Ri(r),v&4&&(ys(3,r,r.return),Kl(3,r),ys(5,r,r.return));break;case 1:ua(l,r),Ri(r),v&512&&(gi||p===null||wr(p,p.return)),v&64&&Rr&&(r=r.updateQueue,r!==null&&(v=r.callbacks,v!==null&&(p=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var S=ur;if(ua(l,r),Ri(r),v&512&&(gi||p===null||wr(p,p.return)),v&4){var C=p!==null?p.memoizedState:null;if(v=r.memoizedState,p===null)if(v===null)if(r.stateNode===null){e:{v=r.type,p=r.memoizedProps,S=S.ownerDocument||S;t:switch(v){case"title":C=S.getElementsByTagName("title")[0],(!C||C[Xi]||C[Xn]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=S.createElement(v),S.head.insertBefore(C,S.querySelector("head > title"))),qa(C,v,p),C[Xn]=r,Oe(C),v=C;break e;case"link":var F=QT("link","href",S).get(v+(p.href||""));if(F){for(var K=0;K<F.length;K++)if(C=F[K],C.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&C.getAttribute("rel")===(p.rel==null?null:p.rel)&&C.getAttribute("title")===(p.title==null?null:p.title)&&C.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){F.splice(K,1);break t}}C=S.createElement(v),qa(C,v,p),S.head.appendChild(C);break;case"meta":if(F=QT("meta","content",S).get(v+(p.content||""))){for(K=0;K<F.length;K++)if(C=F[K],C.getAttribute("content")===(p.content==null?null:""+p.content)&&C.getAttribute("name")===(p.name==null?null:p.name)&&C.getAttribute("property")===(p.property==null?null:p.property)&&C.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&C.getAttribute("charset")===(p.charSet==null?null:p.charSet)){F.splice(K,1);break t}}C=S.createElement(v),qa(C,v,p),S.head.appendChild(C);break;default:throw Error(i(468,v))}C[Xn]=r,Oe(C),v=C}r.stateNode=v}else $T(S,r.type,r.stateNode);else r.stateNode=ZT(S,v,r.memoizedProps);else C!==v?(C===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):C.count--,v===null?$T(S,r.type,r.stateNode):ZT(S,v,r.memoizedProps)):v===null&&r.stateNode!==null&&Nf(r,r.memoizedProps,p.memoizedProps)}break;case 27:ua(l,r),Ri(r),v&512&&(gi||p===null||wr(p,p.return)),p!==null&&v&4&&Nf(r,r.memoizedProps,p.memoizedProps);break;case 5:if(ua(l,r),Ri(r),v&512&&(gi||p===null||wr(p,p.return)),r.flags&32){S=r.stateNode;try{Zi(S,"")}catch(Ie){ye(r,r.return,Ie)}}v&4&&r.stateNode!=null&&(S=r.memoizedProps,Nf(r,S,p!==null?p.memoizedProps:S)),v&1024&&(ru=!0);break;case 6:if(ua(l,r),Ri(r),v&4){if(r.stateNode===null)throw Error(i(162));v=r.memoizedProps,p=r.stateNode;try{p.nodeValue=v}catch(Ie){ye(r,r.return,Ie)}}break;case 3:if(xy=null,S=ur,ur=vy(l.containerInfo),ua(l,r),ur=S,Ri(r),v&4&&p!==null&&p.memoizedState.isDehydrated)try{ug(l.containerInfo)}catch(Ie){ye(r,r.return,Ie)}ru&&(ru=!1,fl(r));break;case 4:v=ur,ur=vy(r.stateNode.containerInfo),ua(l,r),Ri(r),ur=v;break;case 12:ua(l,r),Ri(r);break;case 13:ua(l,r),Ri(r),r.child.flags&8192&&r.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(si=He()),v&4&&(v=r.updateQueue,v!==null&&(r.updateQueue=null,Ql(r,v)));break;case 22:S=r.memoizedState!==null;var le=p!==null&&p.memoizedState!==null,we=Rr,Je=gi;if(Rr=we||S,gi=Je||le,ua(l,r),gi=Je,Rr=we,Ri(r),v&8192)e:for(l=r.stateNode,l._visibility=S?l._visibility&-2:l._visibility|1,S&&(p===null||le||Rr||gi||_s(r)),p=null,l=r;;){if(l.tag===5||l.tag===26){if(p===null){le=p=l;try{if(C=le.stateNode,S)F=C.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{K=le.stateNode;var at=le.memoizedProps.style,Ue=at!=null&&at.hasOwnProperty("display")?at.display:null;K.style.display=Ue==null||typeof Ue=="boolean"?"":(""+Ue).trim()}}catch(Ie){ye(le,le.return,Ie)}}}else if(l.tag===6){if(p===null){le=l;try{le.stateNode.nodeValue=S?"":le.memoizedProps}catch(Ie){ye(le,le.return,Ie)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break e;for(;l.sibling===null;){if(l.return===null||l.return===r)break e;p===l&&(p=null),l=l.return}p===l&&(p=null),l.sibling.return=l.return,l=l.sibling}v&4&&(v=r.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,Ql(r,p))));break;case 19:ua(l,r),Ri(r),v&4&&(v=r.updateQueue,v!==null&&(r.updateQueue=null,Ql(r,v)));break;case 30:break;case 21:break;default:ua(l,r),Ri(r)}}function Ri(r){var l=r.flags;if(l&2){try{for(var p,v=r.return;v!==null;){if(Of(v)){p=v;break}v=v.return}if(p==null)throw Error(i(160));switch(p.tag){case 27:var S=p.stateNode,C=rl(r);ll(r,C,S);break;case 5:var F=p.stateNode;p.flags&32&&(Zi(F,""),p.flags&=-33);var K=rl(r);ll(r,K,F);break;case 3:case 4:var le=p.stateNode.containerInfo,we=rl(r);ol(r,we,le);break;default:throw Error(i(161))}}catch(Je){ye(r,r.return,Je)}r.flags&=-3}l&4096&&(r.flags&=-4097)}function fl(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var l=r;fl(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),r=r.sibling}}function ja(r,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)xo(r,l.alternate,l),l=l.sibling}function _s(r){for(r=r.child;r!==null;){var l=r;switch(l.tag){case 0:case 11:case 14:case 15:ys(4,l,l.return),_s(l);break;case 1:wr(l,l.return);var p=l.stateNode;typeof p.componentWillUnmount=="function"&&yo(l,l.return,p),_s(l);break;case 27:ng(l.stateNode);case 26:case 5:wr(l,l.return),_s(l);break;case 22:l.memoizedState===null&&_s(l);break;case 30:_s(l);break;default:_s(l)}r=r.sibling}}function Dr(r,l,p){for(p=p&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var v=l.alternate,S=r,C=l,F=C.flags;switch(C.tag){case 0:case 11:case 15:Dr(S,C,p),Kl(4,C);break;case 1:if(Dr(S,C,p),v=C,S=v.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(we){ye(v,v.return,we)}if(v=C,S=v.updateQueue,S!==null){var K=v.stateNode;try{var le=S.shared.hiddenCallbacks;if(le!==null)for(S.shared.hiddenCallbacks=null,S=0;S<le.length;S++)Wc(le[S],K)}catch(we){ye(v,v.return,we)}}p&&F&64&&Wl(C),Jl(C,C.return);break;case 27:cl(C);case 26:case 5:Dr(S,C,p),p&&v===null&&F&4&&su(C),Jl(C,C.return);break;case 12:Dr(S,C,p);break;case 13:Dr(S,C,p),p&&F&4&&ul(S,C);break;case 22:C.memoizedState===null&&Dr(S,C,p),Jl(C,C.return);break;case 30:break;default:Dr(S,C,p)}l=l.sibling}}function Md(r,l){var p=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(p=r.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==p&&(r!=null&&r.refCount++,p!=null&&kc(p))}function Ed(r,l){r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&kc(r))}function fi(r,l,p,v){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Td(r,l,p,v),l=l.sibling}function Td(r,l,p,v){var S=l.flags;switch(l.tag){case 0:case 11:case 15:fi(r,l,p,v),S&2048&&Kl(9,l);break;case 1:fi(r,l,p,v);break;case 3:fi(r,l,p,v),S&2048&&(r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&kc(r)));break;case 12:if(S&2048){fi(r,l,p,v),r=l.stateNode;try{var C=l.memoizedProps,F=C.id,K=C.onPostCommit;typeof K=="function"&&K(F,l.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(le){ye(l,l.return,le)}}else fi(r,l,p,v);break;case 13:fi(r,l,p,v);break;case 23:break;case 22:C=l.stateNode,F=l.alternate,l.memoizedState!==null?C._visibility&2?fi(r,l,p,v):fr(r,l):C._visibility&2?fi(r,l,p,v):(C._visibility|=2,_o(r,l,p,v,(l.subtreeFlags&10256)!==0)),S&2048&&Md(F,l);break;case 24:fi(r,l,p,v),S&2048&&Ed(l.alternate,l);break;default:fi(r,l,p,v)}}function _o(r,l,p,v,S){for(S=S&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var C=r,F=l,K=p,le=v,we=F.flags;switch(F.tag){case 0:case 11:case 15:_o(C,F,K,le,S),Kl(8,F);break;case 23:break;case 22:var Je=F.stateNode;F.memoizedState!==null?Je._visibility&2?_o(C,F,K,le,S):fr(C,F):(Je._visibility|=2,_o(C,F,K,le,S)),S&&we&2048&&Md(F.alternate,F);break;case 24:_o(C,F,K,le,S),S&&we&2048&&Ed(F.alternate,F);break;default:_o(C,F,K,le,S)}l=l.sibling}}function fr(r,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var p=r,v=l,S=v.flags;switch(v.tag){case 22:fr(p,v),S&2048&&Md(v.alternate,v);break;case 24:fr(p,v),S&2048&&Ed(v.alternate,v);break;default:fr(p,v)}l=l.sibling}}var bs=8192;function ou(r){if(r.subtreeFlags&bs)for(r=r.child;r!==null;)fy(r),r=r.sibling}function fy(r){switch(r.tag){case 26:ou(r),r.flags&bs&&r.memoizedState!==null&&SL(ur,r.memoizedState,r.memoizedProps);break;case 5:ou(r);break;case 3:case 4:var l=ur;ur=vy(r.stateNode.containerInfo),ou(r),ur=l;break;case 22:r.memoizedState===null&&(l=r.alternate,l!==null&&l.memoizedState!==null?(l=bs,bs=16777216,ou(r),bs=l):ou(r));break;default:ou(r)}}function hy(r){var l=r.alternate;if(l!==null&&(r=l.child,r!==null)){l.child=null;do l=r.sibling,r.sibling=null,r=l;while(r!==null)}}function vi(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var v=l[p];ui=v,Nr(v,r)}hy(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Zm(r),r=r.sibling}function Zm(r){switch(r.tag){case 0:case 11:case 15:vi(r),r.flags&2048&&ys(9,r,r.return);break;case 3:vi(r);break;case 12:vi(r);break;case 22:var l=r.stateNode;r.memoizedState!==null&&l._visibility&2&&(r.return===null||r.return.tag!==13)?(l._visibility&=-3,Br(r)):vi(r);break;default:vi(r)}}function Br(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var v=l[p];ui=v,Nr(v,r)}hy(r)}for(r=r.child;r!==null;){switch(l=r,l.tag){case 0:case 11:case 15:ys(8,l,l.return),Br(l);break;case 22:p=l.stateNode,p._visibility&2&&(p._visibility&=-3,Br(l));break;default:Br(l)}r=r.sibling}}function Nr(r,l){for(;ui!==null;){var p=ui;switch(p.tag){case 0:case 11:case 15:ys(8,p,l);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:kc(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,ui=v;else e:for(p=r;ui!==null;){v=ui;var S=v.sibling,C=v.return;if(bn(v),v===p){ui=null;break e}if(S!==null){S.return=C,ui=S;break e}ui=C}}}var Di={getCacheForType:function(r){var l=wi(ji),p=l.data.get(r);return p===void 0&&(p=r(),l.data.set(r,p)),p}},Qm=typeof WeakMap=="function"?WeakMap:Map,Wn=0,hn=null,En=null,Kt=0,vn=0,Ti=null,As=!1,lu=!1,cu=!1,Ys=0,bi=0,hr=0,Or=0,$l=0,qs=0,Fn=0,Jn=null,Zt=null,Dn=!1,si=0,Ra=1/0,Ks=null,Ss=null,ta=0,Da=null,hi=null,Ms=0,bo=0,Uf=null,Es=null,Ur=0,ec=null;function Bi(){if((Wn&2)!==0&&Kt!==0)return Kt&-Kt;if(H.T!==null){var r=pn;return r!==0?r:hA()}return jt()}function Cd(){qs===0&&(qs=(Kt&536870912)===0||Gn?ce():536870912);var r=ci.current;return r!==null&&(r.flags|=32),qs}function Ya(r,l,p){(r===hn&&(vn===2||vn===9)||r.cancelPendingCommit!==null)&&(dl(r,0),dr(r,Kt,qs,!1)),ft(r,p),((Wn&2)===0||r!==hn)&&(r===hn&&((Wn&2)===0&&(Or|=p),bi===4&&dr(r,Kt,qs,!1)),gl(r))}function uu(r,l,p){if((Wn&6)!==0)throw Error(i(327));var v=!p&&(l&124)===0&&(l&r.expiredLanes)===0||Se(r,l),S=v?M(r,l):h(r,l,!0),C=v;do{if(S===0){lu&&!v&&dr(r,l,0,!1);break}else{if(p=r.current.alternate,C&&!hl(p)){S=h(r,l,!1),C=!1;continue}if(S===2){if(C=l,r.errorRecoveryDisabledLanes&C)var F=0;else F=r.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){l=F;e:{var K=r;S=Jn;var le=K.current.memoizedState.isDehydrated;if(le&&(dl(K,F).flags|=256),F=h(K,F,!1),F!==2){if(cu&&!le){K.errorRecoveryDisabledLanes|=C,Or|=C,S=4;break e}C=Zt,Zt=S,C!==null&&(Zt===null?Zt=C:Zt.push.apply(Zt,C))}S=F}if(C=!1,S!==2)continue}}if(S===1){dl(r,0),dr(r,l,0,!0);break}e:{switch(v=r,C=S,C){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:dr(v,l,qs,!As);break e;case 2:Zt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(S=si+300-He(),10<S)){if(dr(v,l,qs,!As),re(v,0,!0)!==0)break e;v.timeoutHandle=VT(Lf.bind(null,v,p,Zt,Ks,Dn,l,qs,Or,Fn,As,C,2,-0,0),S);break e}Lf(v,p,Zt,Ks,Dn,l,qs,Or,Fn,As,C,0,-0,0)}}break}while(!0);gl(r)}function Lf(r,l,p,v,S,C,F,K,le,we,Je,at,Ue,Ie){if(r.timeoutHandle=-1,at=l.subtreeFlags,(at&8192||(at&16785408)===16785408)&&(sg={stylesheets:null,count:0,unsuspend:AL},fy(l),at=ML(),at!==null)){r.cancelPendingCommit=at(vt.bind(null,r,l,C,p,v,S,F,K,le,Je,1,Ue,Ie)),dr(r,C,F,!we);return}vt(r,l,C,p,v,S,F,K,le)}function hl(r){for(var l=r;;){var p=l.tag;if((p===0||p===11||p===15)&&l.flags&16384&&(p=l.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var S=p[v],C=S.getSnapshot;S=S.value;try{if(!es(C(),S))return!1}catch{return!1}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function dr(r,l,p,v){l&=~$l,l&=~Or,r.suspendedLanes|=l,r.pingedLanes&=~l,v&&(r.warmLanes|=l),v=r.expirationTimes;for(var S=l;0<S;){var C=31-xt(S),F=1<<C;v[C]=-1,S&=~F}p!==0&&Ve(r,p,l)}function Lr(){return(Wn&6)===0?($m(0),!1):!0}function tc(){if(En!==null){if(vn===0)var r=En.return;else r=En,lo=Jo=null,Um(r),zl=null,Cf=0,r=En;for(;r!==null;)au(r.alternate,r),r=r.return;En=null}}function dl(r,l){var p=r.timeoutHandle;p!==-1&&(r.timeoutHandle=-1,sL(p)),p=r.cancelPendingCommit,p!==null&&(r.cancelPendingCommit=null,p()),tc(),hn=r,En=p=Li(r.current,null),Kt=l,vn=0,Ti=null,As=!1,lu=Se(r,l),cu=!1,Fn=qs=$l=Or=hr=bi=0,Zt=Jn=null,Dn=!1,(l&8)!==0&&(l|=l&32);var v=r.entangledLanes;if(v!==0)for(r=r.entanglements,v&=l;0<v;){var S=31-xt(v),C=1<<S;l|=r[S],v&=~C}return Ys=l,uf(),p}function wd(r,l){mn=null,H.H=Tf,l===_f||l===ar?(l=Rm(),vn=3):l===wm?(l=Rm(),vn=4):vn=l===uy?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Ti=l,En===null&&(bi=1,xd(r,va(l,r.current)))}function fu(){var r=H.H;return H.H=Tf,r===null?Tf:r}function Rd(){var r=H.A;return H.A=Di,r}function u(){bi=4,As||(Kt&4194048)!==Kt&&ci.current!==null||(lu=!0),(hr&134217727)===0&&(Or&134217727)===0||hn===null||dr(hn,Kt,qs,!1)}function h(r,l,p){var v=Wn;Wn|=2;var S=fu(),C=Rd();(hn!==r||Kt!==l)&&(Ks=null,dl(r,l)),l=!1;var F=bi;e:do try{if(vn!==0&&En!==null){var K=En,le=Ti;switch(vn){case 8:tc(),F=6;break e;case 3:case 2:case 9:case 6:ci.current===null&&(l=!0);var we=vn;if(vn=0,Ti=null,he(r,K,le,we),p&&lu){F=0;break e}break;default:we=vn,vn=0,Ti=null,he(r,K,le,we)}}x(),F=bi;break}catch(Je){wd(r,Je)}while(!0);return l&&r.shellSuspendCounter++,lo=Jo=null,Wn=v,H.H=S,H.A=C,En===null&&(hn=null,Kt=0,uf()),F}function x(){for(;En!==null;)N(En)}function M(r,l){var p=Wn;Wn|=2;var v=fu(),S=Rd();hn!==r||Kt!==l?(Ks=null,Ra=He()+500,dl(r,l)):lu=Se(r,l);e:do try{if(vn!==0&&En!==null){l=En;var C=Ti;t:switch(vn){case 1:vn=0,Ti=null,he(r,l,C,1);break;case 2:case 9:if(ad(C)){vn=0,Ti=null,J(l);break}l=function(){vn!==2&&vn!==9||hn!==r||(vn=7),gl(r)},C.then(l,l);break e;case 3:vn=7;break e;case 4:vn=5;break e;case 7:ad(C)?(vn=0,Ti=null,J(l)):(vn=0,Ti=null,he(r,l,C,7));break;case 5:var F=null;switch(En.tag){case 26:F=En.memoizedState;case 5:case 27:var K=En;if(!F||eC(F)){vn=0,Ti=null;var le=K.sibling;if(le!==null)En=le;else{var we=K.return;we!==null?(En=we,Te(we)):En=null}break t}}vn=0,Ti=null,he(r,l,C,5);break;case 6:vn=0,Ti=null,he(r,l,C,6);break;case 8:tc(),bi=6;break e;default:throw Error(i(462))}}w();break}catch(Je){wd(r,Je)}while(!0);return lo=Jo=null,H.H=v,H.A=S,Wn=p,En!==null?0:(hn=null,Kt=0,uf(),bi)}function w(){for(;En!==null&&!je();)N(En)}function N(r){var l=Yl(r.alternate,r,Ys);r.memoizedProps=r.pendingProps,l===null?Te(r):En=l}function J(r){var l=r,p=l.alternate;switch(l.tag){case 15:case 0:l=gs(p,l,l.pendingProps,l.type,void 0,Kt);break;case 11:l=gs(p,l,l.pendingProps,l.type.render,l.ref,Kt);break;case 5:Um(l);default:au(p,l),l=En=bm(l,Ys),l=Yl(p,l,Ys)}r.memoizedProps=r.pendingProps,l===null?Te(r):En=l}function he(r,l,p,v){lo=Jo=null,Um(l),zl=null,Cf=0;var S=l.return;try{if(uA(r,S,l,p,Kt)){bi=1,xd(r,va(p,r.current)),En=null;return}}catch(C){if(S!==null)throw En=S,C;bi=1,xd(r,va(p,r.current)),En=null;return}l.flags&32768?(Gn||v===1?r=!0:lu||(Kt&536870912)!==0?r=!1:(As=r=!0,(v===2||v===9||v===3||v===6)&&(v=ci.current,v!==null&&v.tag===13&&(v.flags|=16384))),We(l,r)):Te(l)}function Te(r){var l=r;do{if((l.flags&32768)!==0){We(l,As);return}r=l.return;var p=Jm(l.alternate,l,Ys);if(p!==null){En=p;return}if(l=l.sibling,l!==null){En=l;return}En=l=r}while(l!==null);bi===0&&(bi=5)}function We(r,l){do{var p=iu(r.alternate,r);if(p!==null){p.flags&=32767,En=p;return}if(p=r.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!l&&(r=r.sibling,r!==null)){En=r;return}En=r=p}while(r!==null);bi=6,En=null}function vt(r,l,p,v,S,C,F,K,le){r.cancelPendingCommit=null;do pl();while(ta!==0);if((Wn&6)!==0)throw Error(i(327));if(l!==null){if(l===r.current)throw Error(i(177));if(C=l.lanes|l.childLanes,C|=Wh,it(r,p,C,F,K,le),r===hn&&(En=hn=null,Kt=0),hi=l,Da=r,Ms=p,bo=C,Uf=S,Es=v,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Vn(Ot,function(){return ml(),null})):(r.callbackNode=null,r.callbackPriority=0),v=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||v){v=H.T,H.T=null,S=W.p,W.p=2,F=Wn,Wn|=4;try{ea(r,l,p)}finally{Wn=F,W.p=S,H.T=v}}ta=1,Ct(),Bt(),dn()}}function Ct(){if(ta===1){ta=0;var r=Da,l=hi,p=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||p){p=H.T,H.T=null;var v=W.p;W.p=2;var S=Wn;Wn|=4;try{Sd(l,r);var C=_A,F=pm(r.containerInfo),K=C.focusedElem,le=C.selectionRange;if(F!==K&&K&&K.ownerDocument&&dm(K.ownerDocument.documentElement,K)){if(le!==null&&of(K)){var we=le.start,Je=le.end;if(Je===void 0&&(Je=we),"selectionStart"in K)K.selectionStart=we,K.selectionEnd=Math.min(Je,K.value.length);else{var at=K.ownerDocument||document,Ue=at&&at.defaultView||window;if(Ue.getSelection){var Ie=Ue.getSelection(),on=K.textContent.length,tn=Math.min(le.start,on),xi=le.end===void 0?tn:Math.min(le.end,on);!Ie.extend&&tn>xi&&(F=xi,xi=tn,tn=F);var Me=hm(K,tn),xe=hm(K,xi);if(Me&&xe&&(Ie.rangeCount!==1||Ie.anchorNode!==Me.node||Ie.anchorOffset!==Me.offset||Ie.focusNode!==xe.node||Ie.focusOffset!==xe.offset)){var Ce=at.createRange();Ce.setStart(Me.node,Me.offset),Ie.removeAllRanges(),tn>xi?(Ie.addRange(Ce),Ie.extend(xe.node,xe.offset)):(Ce.setEnd(xe.node,xe.offset),Ie.addRange(Ce))}}}}for(at=[],Ie=K;Ie=Ie.parentNode;)Ie.nodeType===1&&at.push({element:Ie,left:Ie.scrollLeft,top:Ie.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<at.length;K++){var et=at[K];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}Ay=!!xA,_A=xA=null}finally{Wn=S,W.p=v,H.T=p}}r.current=l,ta=2}}function Bt(){if(ta===2){ta=0;var r=Da,l=hi,p=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||p){p=H.T,H.T=null;var v=W.p;W.p=2;var S=Wn;Wn|=4;try{xo(r,l.alternate,l)}finally{Wn=S,W.p=v,H.T=p}}ta=3}}function dn(){if(ta===4||ta===3){ta=0,Xe();var r=Da,l=hi,p=Ms,v=Es;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?ta=5:(ta=0,hi=Da=null,Ts(r,r.pendingLanes));var S=r.pendingLanes;if(S===0&&(Ss=null),Vt(p),l=l.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(Fe,l,void 0,(l.current.flags&128)===128)}catch{}if(v!==null){l=H.T,S=W.p,W.p=2,H.T=null;try{for(var C=r.onRecoverableError,F=0;F<v.length;F++){var K=v[F];C(K.value,{componentStack:K.stack})}}finally{H.T=l,W.p=S}}(Ms&3)!==0&&pl(),gl(r),S=r.pendingLanes,(p&4194090)!==0&&(S&42)!==0?r===ec?Ur++:(Ur=0,ec=r):Ur=0,$m(0)}}function Ts(r,l){(r.pooledCacheLanes&=l)===0&&(l=r.pooledCache,l!=null&&(r.pooledCache=null,kc(l)))}function pl(r){return Ct(),Bt(),dn(),ml()}function ml(){if(ta!==5)return!1;var r=Da,l=bo;bo=0;var p=Vt(Ms),v=H.T,S=W.p;try{W.p=32>p?32:p,H.T=null,p=Uf,Uf=null;var C=Da,F=Ms;if(ta=0,hi=Da=null,Ms=0,(Wn&6)!==0)throw Error(i(331));var K=Wn;if(Wn|=4,Zm(C.current),Td(C,C.current,F,p),Wn=K,$m(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(Fe,C)}catch{}return!0}finally{W.p=S,H.T=v,Ts(r,l)}}function Be(r,l,p){l=va(p,l),l=_d(r.stateNode,l,2),r=fo(r,l,2),r!==null&&(ft(r,2),gl(r))}function ye(r,l,p){if(r.tag===3)Be(r,r,p);else for(;l!==null;){if(l.tag===3){Be(l,r,p);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Ss===null||!Ss.has(v))){r=va(p,r),p=cy(2),v=fo(l,p,2),v!==null&&(bd(p,v,l,r),ft(v,2),gl(v));break}}l=l.return}}function Pe(r,l,p){var v=r.pingCache;if(v===null){v=r.pingCache=new Qm;var S=new Set;v.set(l,S)}else S=v.get(l),S===void 0&&(S=new Set,v.set(l,S));S.has(p)||(cu=!0,S.add(p),r=mt.bind(null,r,l,p),l.then(r,r))}function mt(r,l,p){var v=r.pingCache;v!==null&&v.delete(l),r.pingedLanes|=r.suspendedLanes&p,r.warmLanes&=~p,hn===r&&(Kt&p)===p&&(bi===4||bi===3&&(Kt&62914560)===Kt&&300>He()-si?(Wn&2)===0&&dl(r,0):$l|=p,Fn===Kt&&(Fn=0)),gl(r)}function kt(r,l){l===0&&(l=be()),r=ro(r,l),r!==null&&(ft(r,l),gl(r))}function Ai(r){var l=r.memoizedState,p=0;l!==null&&(p=l.retryLane),kt(r,p)}function sn(r,l){var p=0;switch(r.tag){case 13:var v=r.stateNode,S=r.memoizedState;S!==null&&(p=S.retryLane);break;case 19:v=r.stateNode;break;case 22:v=r.stateNode._retryCache;break;default:throw Error(i(314))}v!==null&&v.delete(l),kt(r,p)}function Vn(r,l){return ae(r,l)}var zi=null,wn=null,Ir=!1,Dd=!1,fA=!1,If=0;function gl(r){r!==wn&&r.next===null&&(wn===null?zi=wn=r:wn=wn.next=r),Dd=!0,Ir||(Ir=!0,JU())}function $m(r,l){if(!fA&&Dd){fA=!0;do for(var p=!1,v=zi;v!==null;){if(r!==0){var S=v.pendingLanes;if(S===0)var C=0;else{var F=v.suspendedLanes,K=v.pingedLanes;C=(1<<31-xt(42|r)+1)-1,C&=S&~(F&~K),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(p=!0,NT(v,C))}else C=Kt,C=re(v,v===hn?C:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(C&3)===0||Se(v,C)||(p=!0,NT(v,C));v=v.next}while(p);fA=!1}}function WU(){RT()}function RT(){Dd=Ir=!1;var r=0;If!==0&&(aL()&&(r=If),If=0);for(var l=He(),p=null,v=zi;v!==null;){var S=v.next,C=DT(v,l);C===0?(v.next=null,p===null?zi=S:p.next=S,S===null&&(wn=p)):(p=v,(r!==0||(C&3)!==0)&&(Dd=!0)),v=S}$m(r)}function DT(r,l){for(var p=r.suspendedLanes,v=r.pingedLanes,S=r.expirationTimes,C=r.pendingLanes&-62914561;0<C;){var F=31-xt(C),K=1<<F,le=S[F];le===-1?((K&p)===0||(K&v)!==0)&&(S[F]=tt(K,l)):le<=l&&(r.expiredLanes|=K),C&=~K}if(l=hn,p=Kt,p=re(r,r===l?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),v=r.callbackNode,p===0||r===l&&(vn===2||vn===9)||r.cancelPendingCommit!==null)return v!==null&&v!==null&&Ye(v),r.callbackNode=null,r.callbackPriority=0;if((p&3)===0||Se(r,p)){if(l=p&-p,l===r.callbackPriority)return l;switch(v!==null&&Ye(v),Vt(p)){case 2:case 8:p=rt;break;case 32:p=Ot;break;case 268435456:p=$;break;default:p=Ot}return v=BT.bind(null,r),p=ae(p,v),r.callbackPriority=l,r.callbackNode=p,l}return v!==null&&v!==null&&Ye(v),r.callbackPriority=2,r.callbackNode=null,2}function BT(r,l){if(ta!==0&&ta!==5)return r.callbackNode=null,r.callbackPriority=0,null;var p=r.callbackNode;if(pl()&&r.callbackNode!==p)return null;var v=Kt;return v=re(r,r===hn?v:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),v===0?null:(uu(r,v,l),DT(r,He()),r.callbackNode!=null&&r.callbackNode===p?BT.bind(null,r):null)}function NT(r,l){if(pl())return null;uu(r,l,!0)}function JU(){rL(function(){(Wn&6)!==0?ae(st,WU):RT()})}function hA(){return If===0&&(If=ce()),If}function OT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:qu(""+r)}function UT(r,l){var p=l.ownerDocument.createElement("input");return p.name=l.name,p.value=l.value,r.id&&p.setAttribute("form",r.id),l.parentNode.insertBefore(p,l),r=new FormData(r),p.parentNode.removeChild(p),r}function ZU(r,l,p,v,S){if(l==="submit"&&p&&p.stateNode===S){var C=OT((S[Tn]||null).action),F=v.submitter;F&&(l=(l=F[Tn]||null)?OT(l.formAction):F.getAttribute("formAction"),l!==null&&(C=l,F=null));var K=new Dc("action","action",null,v,S);r.push({event:K,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(If!==0){var le=F?UT(S,F):new FormData(S);Ym(p,{pending:!0,data:le,method:S.method,action:C},null,le)}}else typeof C=="function"&&(K.preventDefault(),le=F?UT(S,F):new FormData(S),Ym(p,{pending:!0,data:le,method:S.method,action:C},C,le))},currentTarget:S}]})}}for(var dA=0;dA<cf.length;dA++){var pA=cf[dA],QU=pA.toLowerCase(),$U=pA[0].toUpperCase()+pA.slice(1);ra(QU,"on"+$U)}ra(Ha,"onAnimationEnd"),ra(vm,"onAnimationIteration"),ra(ns,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(bv,"onTransitionRun"),ra(ao,"onTransitionStart"),ra(Fc,"onTransitionCancel"),ra(so,"onTransitionEnd"),te("onMouseEnter",["mouseout","mouseover"]),te("onMouseLeave",["mouseout","mouseover"]),te("onPointerEnter",["pointerout","pointerover"]),te("onPointerLeave",["pointerout","pointerover"]),V("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),V("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),V("onBeforeInput",["compositionend","keypress","textInput","paste"]),V("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),V("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),V("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(eg));function LT(r,l){l=(l&4)!==0;for(var p=0;p<r.length;p++){var v=r[p],S=v.event;v=v.listeners;e:{var C=void 0;if(l)for(var F=v.length-1;0<=F;F--){var K=v[F],le=K.instance,we=K.currentTarget;if(K=K.listener,le!==C&&S.isPropagationStopped())break e;C=K,S.currentTarget=we;try{C(S)}catch(Je){Gl(Je)}S.currentTarget=null,C=le}else for(F=0;F<v.length;F++){if(K=v[F],le=K.instance,we=K.currentTarget,K=K.listener,le!==C&&S.isPropagationStopped())break e;C=K,S.currentTarget=we;try{C(S)}catch(Je){Gl(Je)}S.currentTarget=null,C=le}}}}function On(r,l){var p=l[Ui];p===void 0&&(p=l[Ui]=new Set);var v=r+"__bubble";p.has(v)||(IT(l,r,2,!1),p.add(v))}function mA(r,l,p){var v=0;l&&(v|=4),IT(p,r,v,l)}var dy="_reactListening"+Math.random().toString(36).slice(2);function gA(r){if(!r[dy]){r[dy]=!0,Ge.forEach(function(p){p!=="selectionchange"&&(eL.has(p)||mA(p,!1,r),mA(p,!0,r))});var l=r.nodeType===9?r:r.ownerDocument;l===null||l[dy]||(l[dy]=!0,mA("selectionchange",!1,l))}}function IT(r,l,p,v){switch(rC(l)){case 2:var S=CL;break;case 8:S=wL;break;default:S=DA}p=S.bind(null,l,p,r),S=void 0,!Wu||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),v?S!==void 0?r.addEventListener(l,p,{capture:!0,passive:S}):r.addEventListener(l,p,!0):S!==void 0?r.addEventListener(l,p,{passive:S}):r.addEventListener(l,p,!1)}function vA(r,l,p,v,S){var C=v;if((l&1)===0&&(l&2)===0&&v!==null)e:for(;;){if(v===null)return;var F=v.tag;if(F===3||F===4){var K=v.stateNode.containerInfo;if(K===S)break;if(F===4)for(F=v.return;F!==null;){var le=F.tag;if((le===3||le===4)&&F.stateNode.containerInfo===S)return;F=F.return}for(;K!==null;){if(F=k(K),F===null)return;if(le=F.tag,le===5||le===6||le===26||le===27){v=C=F;continue e}K=K.parentNode}}v=v.return}em(function(){var we=C,Je=Ih(p),at=[];e:{var Ue=Kh.get(r);if(Ue!==void 0){var Ie=Dc,on=r;switch(r){case"keypress":if(Fo(p)===0)break e;case"keydown":case"keyup":Ie=sm;break;case"focusin":on="focus",Ie=Fh;break;case"focusout":on="blur",Ie=Fh;break;case"beforeblur":case"afterblur":Ie=Fh;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=im;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=$b;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=om;break;case Ha:case vm:case ns:Ie=rv;break;case so:Ie=eo;break;case"scroll":case"scrollend":Ie=iv;break;case"wheel":Ie=eA;break;case"copy":case"cut":case"paste":Ie=lv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Hh;break;case"toggle":case"beforetoggle":Ie=Ho}var tn=(l&4)!==0,xi=!tn&&(r==="scroll"||r==="scrollend"),Me=tn?Ue!==null?Ue+"Capture":null:Ue;tn=[];for(var xe=we,Ce;xe!==null;){var et=xe;if(Ce=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||Ce===null||Me===null||(et=Cc(xe,Me),et!=null&&tn.push(tg(xe,et,Ce))),xi)break;xe=xe.return}0<tn.length&&(Ue=new Ie(Ue,on,null,p,Je),at.push({event:Ue,listeners:tn}))}}if((l&7)===0){e:{if(Ue=r==="mouseover"||r==="pointerover",Ie=r==="mouseout"||r==="pointerout",Ue&&p!==Lh&&(on=p.relatedTarget||p.fromElement)&&(k(on)||on[li]))break e;if((Ie||Ue)&&(Ue=Je.window===Je?Je:(Ue=Je.ownerDocument)?Ue.defaultView||Ue.parentWindow:window,Ie?(on=p.relatedTarget||p.toElement,Ie=we,on=on?k(on):null,on!==null&&(xi=s(on),tn=on.tag,on!==xi||tn!==5&&tn!==27&&tn!==6)&&(on=null)):(Ie=null,on=we),Ie!==on)){if(tn=im,et="onMouseLeave",Me="onMouseEnter",xe="mouse",(r==="pointerout"||r==="pointerover")&&(tn=Hh,et="onPointerLeave",Me="onPointerEnter",xe="pointer"),xi=Ie==null?Ue:pe(Ie),Ce=on==null?Ue:pe(on),Ue=new tn(et,xe+"leave",Ie,p,Je),Ue.target=xi,Ue.relatedTarget=Ce,et=null,k(Je)===we&&(tn=new tn(Me,xe+"enter",on,p,Je),tn.target=Ce,tn.relatedTarget=xi,et=tn),xi=et,Ie&&on)t:{for(tn=Ie,Me=on,xe=0,Ce=tn;Ce;Ce=Bd(Ce))xe++;for(Ce=0,et=Me;et;et=Bd(et))Ce++;for(;0<xe-Ce;)tn=Bd(tn),xe--;for(;0<Ce-xe;)Me=Bd(Me),Ce--;for(;xe--;){if(tn===Me||Me!==null&&tn===Me.alternate)break t;tn=Bd(tn),Me=Bd(Me)}tn=null}else tn=null;Ie!==null&&PT(at,Ue,Ie,tn,!1),on!==null&&xi!==null&&PT(at,xi,on,tn,!0)}}e:{if(Ue=we?pe(we):window,Ie=Ue.nodeName&&Ue.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&Ue.type==="file")var Ut=Vh;else if(fm(Ue))if(kh)Ut=ko;else{Ut=yv;var Bn=tA}else Ie=Ue.nodeName,!Ie||Ie.toLowerCase()!=="input"||Ue.type!=="checkbox"&&Ue.type!=="radio"?we&&Uh(we.elementType)&&(Ut=Vh):Ut=rf;if(Ut&&(Ut=Ut(r,we))){$a(at,Ut,p,Je);break e}Bn&&Bn(r,Ue,we),r==="focusout"&&we&&Ue.type==="number"&&we.memoizedProps.value!=null&&_i(Ue,"number",Ue.value)}switch(Bn=we?pe(we):window,r){case"focusin":(fm(Bn)||Bn.contentEditable==="true")&&(no=Bn,jh=we,lf=null);break;case"focusout":lf=jh=no=null;break;case"mousedown":Yh=!0;break;case"contextmenu":case"mouseup":case"dragend":Yh=!1,gm(at,p,Je);break;case"selectionchange":if(mm)break;case"keydown":case"keyup":gm(at,p,Je)}var qt;if($u)e:{switch(r){case"compositionstart":var nn="onCompositionStart";break e;case"compositionend":nn="onCompositionEnd";break e;case"compositionupdate":nn="onCompositionUpdate";break e}nn=void 0}else Vo?nf(r,p)&&(nn="onCompositionEnd"):r==="keydown"&&p.keyCode===229&&(nn="onCompositionStart");nn&&(tf&&p.locale!=="ko"&&(Vo||nn!=="onCompositionStart"?nn==="onCompositionEnd"&&Vo&&(qt=nm()):(Qr=Je,tm="value"in Qr?Qr.value:Qr.textContent,Vo=!0)),Bn=py(we,nn),0<Bn.length&&(nn=new zh(nn,r,null,p,Je),at.push({event:nn,listeners:Bn}),qt?nn.data=qt:(qt=cm(p),qt!==null&&(nn.data=qt)))),(qt=ef?af(r,p):um(r,p))&&(nn=py(we,"onBeforeInput"),0<nn.length&&(Bn=new zh("onBeforeInput","beforeinput",null,p,Je),at.push({event:Bn,listeners:nn}),Bn.data=qt)),ZU(at,r,we,p,Je)}LT(at,l)})}function tg(r,l,p){return{instance:r,listener:l,currentTarget:p}}function py(r,l){for(var p=l+"Capture",v=[];r!==null;){var S=r,C=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||C===null||(S=Cc(r,p),S!=null&&v.unshift(tg(r,S,C)),S=Cc(r,l),S!=null&&v.push(tg(r,S,C))),r.tag===3)return v;r=r.return}return[]}function Bd(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function PT(r,l,p,v,S){for(var C=l._reactName,F=[];p!==null&&p!==v;){var K=p,le=K.alternate,we=K.stateNode;if(K=K.tag,le!==null&&le===v)break;K!==5&&K!==26&&K!==27||we===null||(le=we,S?(we=Cc(p,C),we!=null&&F.unshift(tg(p,we,le))):S||(we=Cc(p,C),we!=null&&F.push(tg(p,we,le)))),p=p.return}F.length!==0&&r.push({event:l,listeners:F})}var tL=/\r\n?/g,nL=/\u0000|\uFFFD/g;function FT(r){return(typeof r=="string"?r:""+r).replace(tL,`
`).replace(nL,"")}function zT(r,l){return l=FT(l),FT(r)===l}function my(){}function yi(r,l,p,v,S,C){switch(p){case"children":typeof v=="string"?l==="body"||l==="textarea"&&v===""||Zi(r,v):(typeof v=="number"||typeof v=="bigint")&&l!=="body"&&Zi(r,""+v);break;case"className":qe(r,"class",v);break;case"tabIndex":qe(r,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":qe(r,p,v);break;case"style":Yu(r,v,C);break;case"data":if(l!=="object"){qe(r,"data",v);break}case"src":case"href":if(v===""&&(l!=="a"||p!=="href")){r.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){r.removeAttribute(p);break}v=qu(""+v),r.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){r.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(p==="formAction"?(l!=="input"&&yi(r,l,"name",S.name,S,null),yi(r,l,"formEncType",S.formEncType,S,null),yi(r,l,"formMethod",S.formMethod,S,null),yi(r,l,"formTarget",S.formTarget,S,null)):(yi(r,l,"encType",S.encType,S,null),yi(r,l,"method",S.method,S,null),yi(r,l,"target",S.target,S,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){r.removeAttribute(p);break}v=qu(""+v),r.setAttribute(p,v);break;case"onClick":v!=null&&(r.onclick=my);break;case"onScroll":v!=null&&On("scroll",r);break;case"onScrollEnd":v!=null&&On("scrollend",r);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(p=v.__html,p!=null){if(S.children!=null)throw Error(i(60));r.innerHTML=p}}break;case"multiple":r.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":r.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){r.removeAttribute("xlink:href");break}p=qu(""+v),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?r.setAttribute(p,""+v):r.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?r.setAttribute(p,""):r.removeAttribute(p);break;case"capture":case"download":v===!0?r.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?r.setAttribute(p,v):r.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?r.setAttribute(p,v):r.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?r.removeAttribute(p):r.setAttribute(p,v);break;case"popover":On("beforetoggle",r),On("toggle",r),ze(r,"popover",v);break;case"xlinkActuate":Ke(r,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Ke(r,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Ke(r,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Ke(r,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Ke(r,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Ke(r,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Ke(r,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Ke(r,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Ke(r,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":ze(r,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Qp.get(p)||p,ze(r,p,v))}}function yA(r,l,p,v,S,C){switch(p){case"style":Yu(r,v,C);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(p=v.__html,p!=null){if(S.children!=null)throw Error(i(60));r.innerHTML=p}}break;case"children":typeof v=="string"?Zi(r,v):(typeof v=="number"||typeof v=="bigint")&&Zi(r,""+v);break;case"onScroll":v!=null&&On("scroll",r);break;case"onScrollEnd":v!=null&&On("scrollend",r);break;case"onClick":v!=null&&(r.onclick=my);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ht.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(S=p.endsWith("Capture"),l=p.slice(2,S?p.length-7:void 0),C=r[Tn]||null,C=C!=null?C[p]:null,typeof C=="function"&&r.removeEventListener(l,C,S),typeof v=="function")){typeof C!="function"&&C!==null&&(p in r?r[p]=null:r.hasAttribute(p)&&r.removeAttribute(p)),r.addEventListener(l,v,S);break e}p in r?r[p]=v:v===!0?r.setAttribute(p,""):ze(r,p,v)}}}function qa(r,l,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":On("error",r),On("load",r);var v=!1,S=!1,C;for(C in p)if(p.hasOwnProperty(C)){var F=p[C];if(F!=null)switch(C){case"src":v=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:yi(r,l,C,F,p,null)}}S&&yi(r,l,"srcSet",p.srcSet,p,null),v&&yi(r,l,"src",p.src,p,null);return;case"input":On("invalid",r);var K=C=F=S=null,le=null,we=null;for(v in p)if(p.hasOwnProperty(v)){var Je=p[v];if(Je!=null)switch(v){case"name":S=Je;break;case"type":F=Je;break;case"checked":le=Je;break;case"defaultChecked":we=Je;break;case"value":C=Je;break;case"defaultValue":K=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(i(137,l));break;default:yi(r,l,v,Je,p,null)}}Qn(r,C,K,le,we,F,S,!1),un(r);return;case"select":On("invalid",r),v=F=C=null;for(S in p)if(p.hasOwnProperty(S)&&(K=p[S],K!=null))switch(S){case"value":C=K;break;case"defaultValue":F=K;break;case"multiple":v=K;default:yi(r,l,S,K,p,null)}l=C,p=F,r.multiple=!!v,l!=null?Cn(r,!!v,l,!1):p!=null&&Cn(r,!!v,p,!0);return;case"textarea":On("invalid",r),C=S=v=null;for(F in p)if(p.hasOwnProperty(F)&&(K=p[F],K!=null))switch(F){case"value":v=K;break;case"defaultValue":S=K;break;case"children":C=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(91));break;default:yi(r,l,F,K,p,null)}Ol(r,v,S,C),un(r);return;case"option":for(le in p)if(p.hasOwnProperty(le)&&(v=p[le],v!=null))switch(le){case"selected":r.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:yi(r,l,le,v,p,null)}return;case"dialog":On("beforetoggle",r),On("toggle",r),On("cancel",r),On("close",r);break;case"iframe":case"object":On("load",r);break;case"video":case"audio":for(v=0;v<eg.length;v++)On(eg[v],r);break;case"image":On("error",r),On("load",r);break;case"details":On("toggle",r);break;case"embed":case"source":case"link":On("error",r),On("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(we in p)if(p.hasOwnProperty(we)&&(v=p[we],v!=null))switch(we){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:yi(r,l,we,v,p,null)}return;default:if(Uh(l)){for(Je in p)p.hasOwnProperty(Je)&&(v=p[Je],v!==void 0&&yA(r,l,Je,v,p,void 0));return}}for(K in p)p.hasOwnProperty(K)&&(v=p[K],v!=null&&yi(r,l,K,v,p,null))}function iL(r,l,p,v){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,C=null,F=null,K=null,le=null,we=null,Je=null;for(Ie in p){var at=p[Ie];if(p.hasOwnProperty(Ie)&&at!=null)switch(Ie){case"checked":break;case"value":break;case"defaultValue":le=at;default:v.hasOwnProperty(Ie)||yi(r,l,Ie,null,v,at)}}for(var Ue in v){var Ie=v[Ue];if(at=p[Ue],v.hasOwnProperty(Ue)&&(Ie!=null||at!=null))switch(Ue){case"type":C=Ie;break;case"name":S=Ie;break;case"checked":we=Ie;break;case"defaultChecked":Je=Ie;break;case"value":F=Ie;break;case"defaultValue":K=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(i(137,l));break;default:Ie!==at&&yi(r,l,Ue,Ie,v,at)}}Ht(r,F,K,le,we,Je,C,S);return;case"select":Ie=F=K=Ue=null;for(C in p)if(le=p[C],p.hasOwnProperty(C)&&le!=null)switch(C){case"value":break;case"multiple":Ie=le;default:v.hasOwnProperty(C)||yi(r,l,C,null,v,le)}for(S in v)if(C=v[S],le=p[S],v.hasOwnProperty(S)&&(C!=null||le!=null))switch(S){case"value":Ue=C;break;case"defaultValue":K=C;break;case"multiple":F=C;default:C!==le&&yi(r,l,S,C,v,le)}l=K,p=F,v=Ie,Ue!=null?Cn(r,!!p,Ue,!1):!!v!=!!p&&(l!=null?Cn(r,!!p,l,!0):Cn(r,!!p,p?[]:"",!1));return;case"textarea":Ie=Ue=null;for(K in p)if(S=p[K],p.hasOwnProperty(K)&&S!=null&&!v.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:yi(r,l,K,null,v,S)}for(F in v)if(S=v[F],C=p[F],v.hasOwnProperty(F)&&(S!=null||C!=null))switch(F){case"value":Ue=S;break;case"defaultValue":Ie=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:S!==C&&yi(r,l,F,S,v,C)}pi(r,Ue,Ie);return;case"option":for(var on in p)if(Ue=p[on],p.hasOwnProperty(on)&&Ue!=null&&!v.hasOwnProperty(on))switch(on){case"selected":r.selected=!1;break;default:yi(r,l,on,null,v,Ue)}for(le in v)if(Ue=v[le],Ie=p[le],v.hasOwnProperty(le)&&Ue!==Ie&&(Ue!=null||Ie!=null))switch(le){case"selected":r.selected=Ue&&typeof Ue!="function"&&typeof Ue!="symbol";break;default:yi(r,l,le,Ue,v,Ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tn in p)Ue=p[tn],p.hasOwnProperty(tn)&&Ue!=null&&!v.hasOwnProperty(tn)&&yi(r,l,tn,null,v,Ue);for(we in v)if(Ue=v[we],Ie=p[we],v.hasOwnProperty(we)&&Ue!==Ie&&(Ue!=null||Ie!=null))switch(we){case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(i(137,l));break;default:yi(r,l,we,Ue,v,Ie)}return;default:if(Uh(l)){for(var xi in p)Ue=p[xi],p.hasOwnProperty(xi)&&Ue!==void 0&&!v.hasOwnProperty(xi)&&yA(r,l,xi,void 0,v,Ue);for(Je in v)Ue=v[Je],Ie=p[Je],!v.hasOwnProperty(Je)||Ue===Ie||Ue===void 0&&Ie===void 0||yA(r,l,Je,Ue,v,Ie);return}}for(var Me in p)Ue=p[Me],p.hasOwnProperty(Me)&&Ue!=null&&!v.hasOwnProperty(Me)&&yi(r,l,Me,null,v,Ue);for(at in v)Ue=v[at],Ie=p[at],!v.hasOwnProperty(at)||Ue===Ie||Ue==null&&Ie==null||yi(r,l,at,Ue,v,Ie)}var xA=null,_A=null;function gy(r){return r.nodeType===9?r:r.ownerDocument}function HT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function GT(r,l){if(r===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&l==="foreignObject"?0:r}function bA(r,l){return r==="textarea"||r==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var AA=null;function aL(){var r=window.event;return r&&r.type==="popstate"?r===AA?!1:(AA=r,!0):(AA=null,!1)}var VT=typeof setTimeout=="function"?setTimeout:void 0,sL=typeof clearTimeout=="function"?clearTimeout:void 0,kT=typeof Promise=="function"?Promise:void 0,rL=typeof queueMicrotask=="function"?queueMicrotask:typeof kT<"u"?function(r){return kT.resolve(null).then(r).catch(oL)}:VT;function oL(r){setTimeout(function(){throw r})}function hu(r){return r==="head"}function XT(r,l){var p=l,v=0,S=0;do{var C=p.nextSibling;if(r.removeChild(p),C&&C.nodeType===8)if(p=C.data,p==="/$"){if(0<v&&8>v){p=v;var F=r.ownerDocument;if(p&1&&ng(F.documentElement),p&2&&ng(F.body),p&4)for(p=F.head,ng(p),F=p.firstChild;F;){var K=F.nextSibling,le=F.nodeName;F[Xi]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&F.rel.toLowerCase()==="stylesheet"||p.removeChild(F),F=K}}if(S===0){r.removeChild(C),ug(l);return}S--}else p==="$"||p==="$?"||p==="$!"?S++:v=p.charCodeAt(0)-48;else v=0;p=C}while(p);ug(l)}function SA(r){var l=r.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var p=l;switch(l=l.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":SA(p),ai(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}r.removeChild(p)}}function lL(r,l,p,v){for(;r.nodeType===1;){var S=p;if(r.nodeName.toLowerCase()!==l.toLowerCase()){if(!v&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(v){if(!r[Xi])switch(l){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(C=r.getAttribute("rel"),C==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(C!==S.rel||r.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||r.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||r.getAttribute("title")!==(S.title==null?null:S.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(C=r.getAttribute("src"),(C!==(S.src==null?null:S.src)||r.getAttribute("type")!==(S.type==null?null:S.type)||r.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&C&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(l==="input"&&r.type==="hidden"){var C=S.name==null?null:""+S.name;if(S.type==="hidden"&&r.getAttribute("name")===C)return r}else return r;if(r=Ao(r.nextSibling),r===null)break}return null}function cL(r,l,p){if(l==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!p||(r=Ao(r.nextSibling),r===null))return null;return r}function MA(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function uL(r,l){var p=r.ownerDocument;if(r.data!=="$?"||p.readyState==="complete")l();else{var v=function(){l(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),r._reactRetry=v}}function Ao(r){for(;r!=null;r=r.nextSibling){var l=r.nodeType;if(l===1||l===3)break;if(l===8){if(l=r.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return r}var EA=null;function jT(r){r=r.previousSibling;for(var l=0;r;){if(r.nodeType===8){var p=r.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return r;l--}else p==="/$"&&l++}r=r.previousSibling}return null}function YT(r,l,p){switch(l=gy(p),r){case"html":if(r=l.documentElement,!r)throw Error(i(452));return r;case"head":if(r=l.head,!r)throw Error(i(453));return r;case"body":if(r=l.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function ng(r){for(var l=r.attributes;l.length;)r.removeAttributeNode(l[0]);ai(r)}var Pr=new Map,qT=new Set;function vy(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var nc=W.d;W.d={f:fL,r:hL,D:dL,C:pL,L:mL,m:gL,X:yL,S:vL,M:xL};function fL(){var r=nc.f(),l=Lr();return r||l}function hL(r){var l=Z(r);l!==null&&l.tag===5&&l.type==="form"?Jv(l):nc.r(r)}var Nd=typeof document>"u"?null:document;function KT(r,l,p){var v=Nd;if(v&&typeof l=="string"&&l){var S=fn(l);S='link[rel="'+r+'"][href="'+S+'"]',typeof p=="string"&&(S+='[crossorigin="'+p+'"]'),qT.has(S)||(qT.add(S),r={rel:r,crossOrigin:p,href:l},v.querySelector(S)===null&&(l=v.createElement("link"),qa(l,"link",r),Oe(l),v.head.appendChild(l)))}}function dL(r){nc.D(r),KT("dns-prefetch",r,null)}function pL(r,l){nc.C(r,l),KT("preconnect",r,l)}function mL(r,l,p){nc.L(r,l,p);var v=Nd;if(v&&r&&l){var S='link[rel="preload"][as="'+fn(l)+'"]';l==="image"&&p&&p.imageSrcSet?(S+='[imagesrcset="'+fn(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(S+='[imagesizes="'+fn(p.imageSizes)+'"]')):S+='[href="'+fn(r)+'"]';var C=S;switch(l){case"style":C=Od(r);break;case"script":C=Ud(r)}Pr.has(C)||(r=m({rel:"preload",href:l==="image"&&p&&p.imageSrcSet?void 0:r,as:l},p),Pr.set(C,r),v.querySelector(S)!==null||l==="style"&&v.querySelector(ig(C))||l==="script"&&v.querySelector(ag(C))||(l=v.createElement("link"),qa(l,"link",r),Oe(l),v.head.appendChild(l)))}}function gL(r,l){nc.m(r,l);var p=Nd;if(p&&r){var v=l&&typeof l.as=="string"?l.as:"script",S='link[rel="modulepreload"][as="'+fn(v)+'"][href="'+fn(r)+'"]',C=S;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Ud(r)}if(!Pr.has(C)&&(r=m({rel:"modulepreload",href:r},l),Pr.set(C,r),p.querySelector(S)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(ag(C)))return}v=p.createElement("link"),qa(v,"link",r),Oe(v),p.head.appendChild(v)}}}function vL(r,l,p){nc.S(r,l,p);var v=Nd;if(v&&r){var S=Re(v).hoistableStyles,C=Od(r);l=l||"default";var F=S.get(C);if(!F){var K={loading:0,preload:null};if(F=v.querySelector(ig(C)))K.loading=5;else{r=m({rel:"stylesheet",href:r,"data-precedence":l},p),(p=Pr.get(C))&&TA(r,p);var le=F=v.createElement("link");Oe(le),qa(le,"link",r),le._p=new Promise(function(we,Je){le.onload=we,le.onerror=Je}),le.addEventListener("load",function(){K.loading|=1}),le.addEventListener("error",function(){K.loading|=2}),K.loading|=4,yy(F,l,v)}F={type:"stylesheet",instance:F,count:1,state:K},S.set(C,F)}}}function yL(r,l){nc.X(r,l);var p=Nd;if(p&&r){var v=Re(p).hoistableScripts,S=Ud(r),C=v.get(S);C||(C=p.querySelector(ag(S)),C||(r=m({src:r,async:!0},l),(l=Pr.get(S))&&CA(r,l),C=p.createElement("script"),Oe(C),qa(C,"link",r),p.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(S,C))}}function xL(r,l){nc.M(r,l);var p=Nd;if(p&&r){var v=Re(p).hoistableScripts,S=Ud(r),C=v.get(S);C||(C=p.querySelector(ag(S)),C||(r=m({src:r,async:!0,type:"module"},l),(l=Pr.get(S))&&CA(r,l),C=p.createElement("script"),Oe(C),qa(C,"link",r),p.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(S,C))}}function WT(r,l,p,v){var S=(S=ve.current)?vy(S):null;if(!S)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(l=Od(p.href),p=Re(S).hoistableStyles,v=p.get(l),v||(v={type:"style",instance:null,count:0,state:null},p.set(l,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){r=Od(p.href);var C=Re(S).hoistableStyles,F=C.get(r);if(F||(S=S.ownerDocument||S,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(r,F),(C=S.querySelector(ig(r)))&&!C._p&&(F.instance=C,F.state.loading=5),Pr.has(r)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Pr.set(r,p),C||_L(S,r,p,F.state))),l&&v===null)throw Error(i(528,""));return F}if(l&&v!==null)throw Error(i(529,""));return null;case"script":return l=p.async,p=p.src,typeof p=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ud(p),p=Re(S).hoistableScripts,v=p.get(l),v||(v={type:"script",instance:null,count:0,state:null},p.set(l,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Od(r){return'href="'+fn(r)+'"'}function ig(r){return'link[rel="stylesheet"]['+r+"]"}function JT(r){return m({},r,{"data-precedence":r.precedence,precedence:null})}function _L(r,l,p,v){r.querySelector('link[rel="preload"][as="style"]['+l+"]")?v.loading=1:(l=r.createElement("link"),v.preload=l,l.addEventListener("load",function(){return v.loading|=1}),l.addEventListener("error",function(){return v.loading|=2}),qa(l,"link",p),Oe(l),r.head.appendChild(l))}function Ud(r){return'[src="'+fn(r)+'"]'}function ag(r){return"script[async]"+r}function ZT(r,l,p){if(l.count++,l.instance===null)switch(l.type){case"style":var v=r.querySelector('style[data-href~="'+fn(p.href)+'"]');if(v)return l.instance=v,Oe(v),v;var S=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(r.ownerDocument||r).createElement("style"),Oe(v),qa(v,"style",S),yy(v,p.precedence,r),l.instance=v;case"stylesheet":S=Od(p.href);var C=r.querySelector(ig(S));if(C)return l.state.loading|=4,l.instance=C,Oe(C),C;v=JT(p),(S=Pr.get(S))&&TA(v,S),C=(r.ownerDocument||r).createElement("link"),Oe(C);var F=C;return F._p=new Promise(function(K,le){F.onload=K,F.onerror=le}),qa(C,"link",v),l.state.loading|=4,yy(C,p.precedence,r),l.instance=C;case"script":return C=Ud(p.src),(S=r.querySelector(ag(C)))?(l.instance=S,Oe(S),S):(v=p,(S=Pr.get(C))&&(v=m({},p),CA(v,S)),r=r.ownerDocument||r,S=r.createElement("script"),Oe(S),qa(S,"link",v),r.head.appendChild(S),l.instance=S);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(v=l.instance,l.state.loading|=4,yy(v,p.precedence,r));return l.instance}function yy(r,l,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=v.length?v[v.length-1]:null,C=S,F=0;F<v.length;F++){var K=v[F];if(K.dataset.precedence===l)C=K;else if(C!==S)break}C?C.parentNode.insertBefore(r,C.nextSibling):(l=p.nodeType===9?p.head:p,l.insertBefore(r,l.firstChild))}function TA(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.title==null&&(r.title=l.title)}function CA(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.integrity==null&&(r.integrity=l.integrity)}var xy=null;function QT(r,l,p){if(xy===null){var v=new Map,S=xy=new Map;S.set(p,v)}else S=xy,v=S.get(p),v||(v=new Map,S.set(p,v));if(v.has(r))return v;for(v.set(r,null),p=p.getElementsByTagName(r),S=0;S<p.length;S++){var C=p[S];if(!(C[Xi]||C[Xn]||r==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var F=C.getAttribute(l)||"";F=r+F;var K=v.get(F);K?K.push(C):v.set(F,[C])}}return v}function $T(r,l,p){r=r.ownerDocument||r,r.head.insertBefore(p,l==="title"?r.querySelector("head > title"):null)}function bL(r,l,p){if(p===1||l.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return r=l.disabled,typeof l.precedence=="string"&&r==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function eC(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var sg=null;function AL(){}function SL(r,l,p){if(sg===null)throw Error(i(475));var v=sg;if(l.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var S=Od(p.href),C=r.querySelector(ig(S));if(C){r=C._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(v.count++,v=_y.bind(v),r.then(v,v)),l.state.loading|=4,l.instance=C,Oe(C);return}C=r.ownerDocument||r,p=JT(p),(S=Pr.get(S))&&TA(p,S),C=C.createElement("link"),Oe(C);var F=C;F._p=new Promise(function(K,le){F.onload=K,F.onerror=le}),qa(C,"link",p),l.instance=C}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(v.count++,l=_y.bind(v),r.addEventListener("load",l),r.addEventListener("error",l))}}function ML(){if(sg===null)throw Error(i(475));var r=sg;return r.stylesheets&&r.count===0&&wA(r,r.stylesheets),0<r.count?function(l){var p=setTimeout(function(){if(r.stylesheets&&wA(r,r.stylesheets),r.unsuspend){var v=r.unsuspend;r.unsuspend=null,v()}},6e4);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(p)}}:null}function _y(){if(this.count--,this.count===0){if(this.stylesheets)wA(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var by=null;function wA(r,l){r.stylesheets=null,r.unsuspend!==null&&(r.count++,by=new Map,l.forEach(EL,r),by=null,_y.call(r))}function EL(r,l){if(!(l.state.loading&4)){var p=by.get(r);if(p)var v=p.get(null);else{p=new Map,by.set(r,p);for(var S=r.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<S.length;C++){var F=S[C];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(p.set(F.dataset.precedence,F),v=F)}v&&p.set(null,v)}S=l.instance,F=S.getAttribute("data-precedence"),C=p.get(F)||v,C===v&&p.set(null,S),p.set(F,S),this.count++,v=_y.bind(this),S.addEventListener("load",v),S.addEventListener("error",v),C?C.parentNode.insertBefore(S,C.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(S,r.firstChild)),l.state.loading|=4}}var rg={$$typeof:D,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function TL(r,l,p,v,S,C,F,K){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lt(0),this.hiddenUpdates=lt(null),this.identifierPrefix=v,this.onUncaughtError=S,this.onCaughtError=C,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function tC(r,l,p,v,S,C,F,K,le,we,Je,at){return r=new TL(r,l,p,F,K,le,we,at),l=1,C===!0&&(l|=24),C=is(3,null,null,l),r.current=C,C.stateNode=r,l=td(),l.refCount++,r.pooledCache=l,l.refCount++,C.memoizedState={element:v,isDehydrated:p,cache:l},Dm(C),r}function nC(r){return r?(r=Yo,r):Yo}function iC(r,l,p,v,S,C){S=nC(S),v.context===null?v.context=S:v.pendingContext=S,v=Mr(l),v.payload={element:p},C=C===void 0?null:C,C!==null&&(v.callback=C),p=fo(r,v,l),p!==null&&(Ya(p,r,l),Fl(p,r,l))}function aC(r,l){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var p=r.retryLane;r.retryLane=p!==0&&p<l?p:l}}function RA(r,l){aC(r,l),(r=r.alternate)&&aC(r,l)}function sC(r){if(r.tag===13){var l=ro(r,67108864);l!==null&&Ya(l,r,67108864),RA(r,67108864)}}var Ay=!0;function CL(r,l,p,v){var S=H.T;H.T=null;var C=W.p;try{W.p=2,DA(r,l,p,v)}finally{W.p=C,H.T=S}}function wL(r,l,p,v){var S=H.T;H.T=null;var C=W.p;try{W.p=8,DA(r,l,p,v)}finally{W.p=C,H.T=S}}function DA(r,l,p,v){if(Ay){var S=BA(v);if(S===null)vA(r,l,v,Sy,p),oC(r,v);else if(DL(S,r,l,p,v))v.stopPropagation();else if(oC(r,v),l&4&&-1<RL.indexOf(r)){for(;S!==null;){var C=Z(S);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var F=Dt(C.pendingLanes);if(F!==0){var K=C;for(K.pendingLanes|=2,K.entangledLanes|=2;F;){var le=1<<31-xt(F);K.entanglements[1]|=le,F&=~le}gl(C),(Wn&6)===0&&(Ra=He()+500,$m(0))}}break;case 13:K=ro(C,2),K!==null&&Ya(K,C,2),Lr(),RA(C,2)}if(C=BA(v),C===null&&vA(r,l,v,Sy,p),C===S)break;S=C}S!==null&&v.stopPropagation()}else vA(r,l,v,null,p)}}function BA(r){return r=Ih(r),NA(r)}var Sy=null;function NA(r){if(Sy=null,r=k(r),r!==null){var l=s(r);if(l===null)r=null;else{var p=l.tag;if(p===13){if(r=o(l),r!==null)return r;r=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;r=null}else l!==r&&(r=null)}}return Sy=r,null}function rC(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gt()){case st:return 2;case rt:return 8;case Ot:case Gt:return 32;case $:return 268435456;default:return 32}default:return 32}}var OA=!1,du=null,pu=null,mu=null,og=new Map,lg=new Map,gu=[],RL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oC(r,l){switch(r){case"focusin":case"focusout":du=null;break;case"dragenter":case"dragleave":pu=null;break;case"mouseover":case"mouseout":mu=null;break;case"pointerover":case"pointerout":og.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":lg.delete(l.pointerId)}}function cg(r,l,p,v,S,C){return r===null||r.nativeEvent!==C?(r={blockedOn:l,domEventName:p,eventSystemFlags:v,nativeEvent:C,targetContainers:[S]},l!==null&&(l=Z(l),l!==null&&sC(l)),r):(r.eventSystemFlags|=v,l=r.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),r)}function DL(r,l,p,v,S){switch(l){case"focusin":return du=cg(du,r,l,p,v,S),!0;case"dragenter":return pu=cg(pu,r,l,p,v,S),!0;case"mouseover":return mu=cg(mu,r,l,p,v,S),!0;case"pointerover":var C=S.pointerId;return og.set(C,cg(og.get(C)||null,r,l,p,v,S)),!0;case"gotpointercapture":return C=S.pointerId,lg.set(C,cg(lg.get(C)||null,r,l,p,v,S)),!0}return!1}function lC(r){var l=k(r.target);if(l!==null){var p=s(l);if(p!==null){if(l=p.tag,l===13){if(l=o(p),l!==null){r.blockedOn=l,oi(r.priority,function(){if(p.tag===13){var v=Bi();v=Mt(v);var S=ro(p,v);S!==null&&Ya(S,p,v),RA(p,v)}});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){r.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}r.blockedOn=null}function My(r){if(r.blockedOn!==null)return!1;for(var l=r.targetContainers;0<l.length;){var p=BA(r.nativeEvent);if(p===null){p=r.nativeEvent;var v=new p.constructor(p.type,p);Lh=v,p.target.dispatchEvent(v),Lh=null}else return l=Z(p),l!==null&&sC(l),r.blockedOn=p,!1;l.shift()}return!0}function cC(r,l,p){My(r)&&p.delete(l)}function BL(){OA=!1,du!==null&&My(du)&&(du=null),pu!==null&&My(pu)&&(pu=null),mu!==null&&My(mu)&&(mu=null),og.forEach(cC),lg.forEach(cC)}function Ey(r,l){r.blockedOn===l&&(r.blockedOn=null,OA||(OA=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,BL)))}var Ty=null;function uC(r){Ty!==r&&(Ty=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ty===r&&(Ty=null);for(var l=0;l<r.length;l+=3){var p=r[l],v=r[l+1],S=r[l+2];if(typeof v!="function"){if(NA(v||p)===null)continue;break}var C=Z(p);C!==null&&(r.splice(l,3),l-=3,Ym(C,{pending:!0,data:S,method:p.method,action:v},v,S))}}))}function ug(r){function l(le){return Ey(le,r)}du!==null&&Ey(du,r),pu!==null&&Ey(pu,r),mu!==null&&Ey(mu,r),og.forEach(l),lg.forEach(l);for(var p=0;p<gu.length;p++){var v=gu[p];v.blockedOn===r&&(v.blockedOn=null)}for(;0<gu.length&&(p=gu[0],p.blockedOn===null);)lC(p),p.blockedOn===null&&gu.shift();if(p=(r.ownerDocument||r).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var S=p[v],C=p[v+1],F=S[Tn]||null;if(typeof C=="function")F||uC(p);else if(F){var K=null;if(C&&C.hasAttribute("formAction")){if(S=C,F=C[Tn]||null)K=F.formAction;else if(NA(S)!==null)continue}else K=F.action;typeof K=="function"?p[v+1]=K:(p.splice(v,3),v-=3),uC(p)}}}function UA(r){this._internalRoot=r}Cy.prototype.render=UA.prototype.render=function(r){var l=this._internalRoot;if(l===null)throw Error(i(409));var p=l.current,v=Bi();iC(p,v,r,l,null,null)},Cy.prototype.unmount=UA.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var l=r.containerInfo;iC(r.current,2,null,r,null,null),Lr(),l[li]=null}};function Cy(r){this._internalRoot=r}Cy.prototype.unstable_scheduleHydration=function(r){if(r){var l=jt();r={blockedOn:null,target:r,priority:l};for(var p=0;p<gu.length&&l!==0&&l<gu[p].priority;p++);gu.splice(p,0,r),p===0&&lC(r)}};var fC=e.version;if(fC!=="19.1.1")throw Error(i(527,fC,"19.1.1"));W.findDOMNode=function(r){var l=r._reactInternals;if(l===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(l),r=r!==null?d(r):null,r=r===null?null:r.stateNode,r};var NL={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wy.isDisabled&&wy.supportsFiber)try{Fe=wy.inject(NL),ke=wy}catch{}}return hg.createRoot=function(r,l){if(!a(r))throw Error(i(299));var p=!1,v="",S=Rf,C=yd,F=ly,K=null;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(S=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(F=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(K=l.unstable_transitionCallbacks)),l=tC(r,1,!1,null,null,p,v,S,C,F,K,null),r[li]=l.current,gA(r),new UA(l)},hg.hydrateRoot=function(r,l,p){if(!a(r))throw Error(i(299));var v=!1,S="",C=Rf,F=yd,K=ly,le=null,we=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(S=p.identifierPrefix),p.onUncaughtError!==void 0&&(C=p.onUncaughtError),p.onCaughtError!==void 0&&(F=p.onCaughtError),p.onRecoverableError!==void 0&&(K=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(le=p.unstable_transitionCallbacks),p.formState!==void 0&&(we=p.formState)),l=tC(r,1,!0,l,p??null,v,S,C,F,K,le,we),l.context=nC(null),p=l.current,v=Bi(),v=Mt(v),S=Mr(v),S.callback=null,fo(p,S,v),p=v,l.current.lanes=p,ft(l,p),gl(l),r[li]=l.current,gA(r),new Cy(l)},hg.version="19.1.1",hg}var bC;function GL(){if(bC)return PA.exports;bC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),PA.exports=HL(),PA.exports}var VL=GL();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var AC="popstate";function kL(n={}){function e(i,a){let{pathname:s,search:o,hash:c}=i.location;return E1("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:t0(a)}return jL(e,t,null,n)}function ki(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Cl(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XL(){return Math.random().toString(36).substring(2,10)}function SC(n,e){return{usr:n.state,key:n.key,idx:e}}function E1(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Pp(e):e,state:t,key:e&&e.key||i||XL()}}function t0({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Pp(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function jL(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:s=!1}=i,o=a.history,c="POP",f=null,d=m();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function m(){return(o.state||{idx:null}).idx}function g(){c="POP";let E=m(),b=E==null?null:E-d;d=E,f&&f({action:c,location:T.location,delta:b})}function y(E,b){c="PUSH";let R=E1(T.location,E,b);d=m()+1;let D=SC(R,d),B=T.createHref(R);try{o.pushState(D,"",B)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;a.location.assign(B)}s&&f&&f({action:c,location:T.location,delta:1})}function _(E,b){c="REPLACE";let R=E1(T.location,E,b);d=m();let D=SC(R,d),B=T.createHref(R);o.replaceState(D,"",B),s&&f&&f({action:c,location:T.location,delta:0})}function A(E){return YL(E)}let T={get action(){return c},get location(){return n(a,o)},listen(E){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(AC,g),f=E,()=>{a.removeEventListener(AC,g),f=null}},createHref(E){return e(a,E)},createURL:A,encodeLocation(E){let b=A(E);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:y,replace:_,go(E){return o.go(E)}};return T}function YL(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ki(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:t0(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function SD(n,e,t="/"){return qL(n,e,t,!1)}function qL(n,e,t,i){let a=typeof e=="string"?Pp(e):e,s=xc(a.pathname||"/",t);if(s==null)return null;let o=MD(n);KL(o);let c=null;for(let f=0;c==null&&f<o.length;++f){let d=sI(s);c=iI(o[f],d,i)}return c}function MD(n,e=[],t=[],i="",a=!1){let s=(o,c,f=a,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(i)&&f)return;ki(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length)}let g=gc([i,m.relativePath]),y=t.concat(m);o.children&&o.children.length>0&&(ki(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),MD(o.children,e,y,g,f)),!(o.path==null&&!o.index)&&e.push({path:g,score:tI(g,o.index),routesMeta:y})};return n.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))s(o,c);else for(let f of ED(o.path))s(o,c,!0,f)}),e}function ED(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return a?[s,""]:[s];let o=ED(i.join("/")),c=[];return c.push(...o.map(f=>f===""?s:[s,f].join("/"))),a&&c.push(...o),c.map(f=>n.startsWith("/")&&f===""?"/":f)}function KL(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:nI(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var WL=/^:[\w-]+$/,JL=3,ZL=2,QL=1,$L=10,eI=-2,MC=n=>n==="*";function tI(n,e){let t=n.split("/"),i=t.length;return t.some(MC)&&(i+=eI),e&&(i+=ZL),t.filter(a=>!MC(a)).reduce((a,s)=>a+(WL.test(s)?JL:s===""?QL:$L),i)}function nI(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function iI(n,e,t=!1){let{routesMeta:i}=n,a={},s="/",o=[];for(let c=0;c<i.length;++c){let f=i[c],d=c===i.length-1,m=s==="/"?e:e.slice(s.length)||"/",g=Wx({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},m),y=f.route;if(!g&&d&&t&&!i[i.length-1].route.index&&(g=Wx({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!g)return null;Object.assign(a,g.params),o.push({params:a,pathname:gc([s,g.pathname]),pathnameBase:cI(gc([s,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(s=gc([s,g.pathnameBase]))}return o}function Wx(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=aI(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:i.reduce((d,{paramName:m,isOptional:g},y)=>{if(m==="*"){let A=c[y]||"";o=s.slice(0,s.length-A.length).replace(/(.)\/+$/,"$1")}const _=c[y];return g&&!_?d[m]=void 0:d[m]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:n}}function aI(n,e=!1,t=!0){Cl(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,f)=>(i.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function sI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cl(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function xc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function rI(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Pp(n):n;return{pathname:t?t.startsWith("/")?t:oI(t,e):e,search:uI(i),hash:fI(a)}}function oI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function GA(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function TD(n){let e=lI(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function CD(n,e,t,i=!1){let a;typeof n=="string"?a=Pp(n):(a={...n},ki(!a.pathname||!a.pathname.includes("?"),GA("?","pathname","search",a)),ki(!a.pathname||!a.pathname.includes("#"),GA("#","pathname","hash",a)),ki(!a.search||!a.search.includes("#"),GA("#","search","hash",a)));let s=n===""||a.pathname==="",o=s?"/":a.pathname,c;if(o==null)c=t;else{let g=e.length-1;if(!i&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),g-=1;a.pathname=y.join("/")}c=g>=0?e[g]:"/"}let f=rI(a,c),d=o&&o!=="/"&&o.endsWith("/"),m=(s||o===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(d||m)&&(f.pathname+="/"),f}var gc=n=>n.join("/").replace(/\/\/+/g,"/"),cI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),uI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,fI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function hI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var wD=["POST","PUT","PATCH","DELETE"];new Set(wD);var dI=["GET",...wD];new Set(dI);var Fp=G.createContext(null);Fp.displayName="DataRouter";var rb=G.createContext(null);rb.displayName="DataRouterState";G.createContext(!1);var RD=G.createContext({isTransitioning:!1});RD.displayName="ViewTransition";var pI=G.createContext(new Map);pI.displayName="Fetchers";var mI=G.createContext(null);mI.displayName="Await";var Bl=G.createContext(null);Bl.displayName="Navigation";var S0=G.createContext(null);S0.displayName="Location";var Ec=G.createContext({outlet:null,matches:[],isDataRoute:!1});Ec.displayName="Route";var CM=G.createContext(null);CM.displayName="RouteError";function gI(n,{relative:e}={}){ki(M0(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=G.useContext(Bl),{hash:a,pathname:s,search:o}=E0(n,{relative:e}),c=s;return t!=="/"&&(c=s==="/"?t:gc([t,s])),i.createHref({pathname:c,search:o,hash:a})}function M0(){return G.useContext(S0)!=null}function Rh(){return ki(M0(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(S0).location}var DD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BD(n){G.useContext(Bl).static||G.useLayoutEffect(n)}function ND(){let{isDataRoute:n}=G.useContext(Ec);return n?RI():vI()}function vI(){ki(M0(),"useNavigate() may be used only in the context of a <Router> component.");let n=G.useContext(Fp),{basename:e,navigator:t}=G.useContext(Bl),{matches:i}=G.useContext(Ec),{pathname:a}=Rh(),s=JSON.stringify(TD(i)),o=G.useRef(!1);return BD(()=>{o.current=!0}),G.useCallback((f,d={})=>{if(Cl(o.current,DD),!o.current)return;if(typeof f=="number"){t.go(f);return}let m=CD(f,JSON.parse(s),a,d.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:gc([e,m.pathname])),(d.replace?t.replace:t.push)(m,d.state,d)},[e,t,s,a,n])}G.createContext(null);function E0(n,{relative:e}={}){let{matches:t}=G.useContext(Ec),{pathname:i}=Rh(),a=JSON.stringify(TD(t));return G.useMemo(()=>CD(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function yI(n,e){return OD(n,e)}function OD(n,e,t,i,a){ki(M0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=G.useContext(Bl),{matches:o}=G.useContext(Ec),c=o[o.length-1],f=c?c.params:{},d=c?c.pathname:"/",m=c?c.pathnameBase:"/",g=c&&c.route;{let R=g&&g.path||"";UD(d,!g||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let y=Rh(),_;if(e){let R=typeof e=="string"?Pp(e):e;ki(m==="/"||R.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${R.pathname}" was given in the \`location\` prop.`),_=R}else _=y;let A=_.pathname||"/",T=A;if(m!=="/"){let R=m.replace(/^\//,"").split("/");T="/"+A.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=SD(n,{pathname:T});Cl(g||E!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Cl(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=SI(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},f,R.params),pathname:gc([m,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?m:gc([m,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),o,t,i,a);return e&&b?G.createElement(S0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},b):b}function xI(){let n=wI(),e=hI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:s},"ErrorBoundary")," or"," ",G.createElement("code",{style:s},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:a},t):null,o)}var _I=G.createElement(xI,null),bI=class extends G.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?G.createElement(Ec.Provider,{value:this.props.routeContext},G.createElement(CM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AI({routeContext:n,match:e,children:t}){let i=G.useContext(Fp);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement(Ec.Provider,{value:n},t)}function SI(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t?.errors;if(o!=null){let d=s.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);ki(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,f=-1;if(t)for(let d=0;d<s.length;d++){let m=s[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=d),m.route.id){let{loaderData:g,errors:y}=t,_=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||_){c=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((d,m,g)=>{let y,_=!1,A=null,T=null;t&&(y=o&&m.route.id?o[m.route.id]:void 0,A=m.route.errorElement||_I,c&&(f<0&&g===0?(UD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,T=null):f===g&&(_=!0,T=m.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,g+1)),b=()=>{let R;return y?R=A:_?R=T:m.route.Component?R=G.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=d,G.createElement(AI,{match:m,routeContext:{outlet:d,matches:E,isDataRoute:t!=null},children:R})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?G.createElement(bI,{location:t.location,revalidation:t.revalidation,component:A,error:y,children:b(),routeContext:{outlet:null,matches:E,isDataRoute:!0},unstable_onError:i}):b()},null)}function wM(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MI(n){let e=G.useContext(Fp);return ki(e,wM(n)),e}function EI(n){let e=G.useContext(rb);return ki(e,wM(n)),e}function TI(n){let e=G.useContext(Ec);return ki(e,wM(n)),e}function RM(n){let e=TI(n),t=e.matches[e.matches.length-1];return ki(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function CI(){return RM("useRouteId")}function wI(){let n=G.useContext(CM),e=EI("useRouteError"),t=RM("useRouteError");return n!==void 0?n:e.errors?.[t]}function RI(){let{router:n}=MI("useNavigate"),e=RM("useNavigate"),t=G.useRef(!1);return BD(()=>{t.current=!0}),G.useCallback(async(a,s={})=>{Cl(t.current,DD),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...s}))},[n,e])}var EC={};function UD(n,e,t){!e&&!EC[n]&&(EC[n]=!0,Cl(!1,t))}G.memo(DI);function DI({routes:n,future:e,state:t,unstable_onError:i}){return OD(n,void 0,t,i,e)}function eh(n){ki(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BI({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:s=!1}){ki(!M0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),c=G.useMemo(()=>({basename:o,navigator:a,static:s,future:{}}),[o,a,s]);typeof t=="string"&&(t=Pp(t));let{pathname:f="/",search:d="",hash:m="",state:g=null,key:y="default"}=t,_=G.useMemo(()=>{let A=xc(f,o);return A==null?null:{location:{pathname:A,search:d,hash:m,state:g,key:y},navigationType:i}},[o,f,d,m,g,y,i]);return Cl(_!=null,`<Router basename="${o}"> is not able to match the URL "${f}${d}${m}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:G.createElement(Bl.Provider,{value:c},G.createElement(S0.Provider,{children:e,value:_}))}function NI({children:n,location:e}){return yI(T1(n),e)}function T1(n,e=[]){let t=[];return G.Children.forEach(n,(i,a)=>{if(!G.isValidElement(i))return;let s=[...e,a];if(i.type===G.Fragment){t.push.apply(t,T1(i.props.children,s));return}ki(i.type===eh,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ki(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=T1(i.props.children,s)),t.push(o)}),t}var Px="get",Fx="application/x-www-form-urlencoded";function ob(n){return n!=null&&typeof n.tagName=="string"}function OI(n){return ob(n)&&n.tagName.toLowerCase()==="button"}function UI(n){return ob(n)&&n.tagName.toLowerCase()==="form"}function LI(n){return ob(n)&&n.tagName.toLowerCase()==="input"}function II(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function PI(n,e){return n.button===0&&(!e||e==="_self")&&!II(n)}var Ry=null;function FI(){if(Ry===null)try{new FormData(document.createElement("form"),0),Ry=!1}catch{Ry=!0}return Ry}var zI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function VA(n){return n!=null&&!zI.has(n)?(Cl(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fx}"`),null):n}function HI(n,e){let t,i,a,s,o;if(UI(n)){let c=n.getAttribute("action");i=c?xc(c,e):null,t=n.getAttribute("method")||Px,a=VA(n.getAttribute("enctype"))||Fx,s=new FormData(n)}else if(OI(n)||LI(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||c.getAttribute("action");if(i=f?xc(f,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Px,a=VA(n.getAttribute("formenctype"))||VA(c.getAttribute("enctype"))||Fx,s=new FormData(c,n),!FI()){let{name:d,type:m,value:g}=n;if(m==="image"){let y=d?`${d}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else d&&s.append(d,g)}}else{if(ob(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Px,i=null,a=Fx,o=n}return s&&a==="text/plain"&&(o=s,s=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function DM(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function GI(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&xc(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function VI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function XI(n,e,t){let i=await Promise.all(n.map(async a=>{let s=e.routes[a.route.id];if(s){let o=await VI(s,t);return o.links?o.links():[]}return[]}));return KI(i.flat(1).filter(kI).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function TC(n,e,t,i,a,s){let o=(f,d)=>t[d]?f.route.id!==t[d].route.id:!0,c=(f,d)=>t[d].pathname!==f.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==f.params["*"];return s==="assets"?e.filter((f,d)=>o(f,d)||c(f,d)):s==="data"?e.filter((f,d)=>{let m=i.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(o(f,d)||c(f,d))return!0;if(f.route.shouldRevalidate){let g=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function jI(n,e,{includeHydrateFallback:t}={}){return YI(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function YI(n){return[...new Set(n)]}function qI(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function KI(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let s=JSON.stringify(qI(a));return t.has(s)||(t.add(s),i.push({key:s,link:a})),i},[])}function LD(){let n=G.useContext(Fp);return DM(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function WI(){let n=G.useContext(rb);return DM(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var BM=G.createContext(void 0);BM.displayName="FrameworkContext";function ID(){let n=G.useContext(BM);return DM(n,"You must render this element inside a <HydratedRouter> element"),n}function JI(n,e){let t=G.useContext(BM),[i,a]=G.useState(!1),[s,o]=G.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:d,onMouseLeave:m,onTouchStart:g}=e,y=G.useRef(null);G.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let T=b=>{b.forEach(R=>{o(R.isIntersecting)})},E=new IntersectionObserver(T,{threshold:.5});return y.current&&E.observe(y.current),()=>{E.disconnect()}}},[n]),G.useEffect(()=>{if(i){let T=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(T)}}},[i]);let _=()=>{a(!0)},A=()=>{a(!1),o(!1)};return t?n!=="intent"?[s,y,{}]:[s,y,{onFocus:dg(c,_),onBlur:dg(f,A),onMouseEnter:dg(d,_),onMouseLeave:dg(m,A),onTouchStart:dg(g,_)}]:[!1,y,{}]}function dg(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function ZI({page:n,...e}){let{router:t}=LD(),i=G.useMemo(()=>SD(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?G.createElement($I,{page:n,matches:i,...e}):null}function QI(n){let{manifest:e,routeModules:t}=ID(),[i,a]=G.useState([]);return G.useEffect(()=>{let s=!1;return XI(n,e,t).then(o=>{s||a(o)}),()=>{s=!0}},[n,e,t]),i}function $I({page:n,matches:e,...t}){let i=Rh(),{manifest:a,routeModules:s}=ID(),{basename:o}=LD(),{loaderData:c,matches:f}=WI(),d=G.useMemo(()=>TC(n,e,f,a,i,"data"),[n,e,f,a,i]),m=G.useMemo(()=>TC(n,e,f,a,i,"assets"),[n,e,f,a,i]),g=G.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let A=new Set,T=!1;if(e.forEach(b=>{let R=a.routes[b.route.id];!R||!R.hasLoader||(!d.some(D=>D.route.id===b.route.id)&&b.route.id in c&&s[b.route.id]?.shouldRevalidate||R.hasClientLoader?T=!0:A.add(b.route.id))}),A.size===0)return[];let E=GI(n,o,"data");return T&&A.size>0&&E.searchParams.set("_routes",e.filter(b=>A.has(b.route.id)).map(b=>b.route.id).join(",")),[E.pathname+E.search]},[o,c,i,a,d,e,n,s]),y=G.useMemo(()=>jI(m,a),[m,a]),_=QI(m);return G.createElement(G.Fragment,null,g.map(A=>G.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),y.map(A=>G.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),_.map(({key:A,link:T})=>G.createElement("link",{key:A,nonce:t.nonce,...T})))}function eP(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var PD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{PD&&(window.__reactRouterVersion="7.9.1")}catch{}function tP({basename:n,children:e,window:t}){let i=G.useRef();i.current==null&&(i.current=kL({window:t,v5Compat:!0}));let a=i.current,[s,o]=G.useState({action:a.action,location:a.location}),c=G.useCallback(f=>{G.startTransition(()=>o(f))},[o]);return G.useLayoutEffect(()=>a.listen(c),[a,c]),G.createElement(BI,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:a})}var FD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tc=G.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:s,replace:o,state:c,target:f,to:d,preventScrollReset:m,viewTransition:g,...y},_){let{basename:A}=G.useContext(Bl),T=typeof d=="string"&&FD.test(d),E,b=!1;if(typeof d=="string"&&T&&(E=d,PD))try{let O=new URL(window.location.href),P=d.startsWith("//")?new URL(O.protocol+d):new URL(d),Y=xc(P.pathname,A);P.origin===O.origin&&Y!=null?d=Y+P.search+P.hash:b=!0}catch{Cl(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=gI(d,{relative:a}),[D,B,U]=JI(i,y),L=sP(d,{replace:o,state:c,target:f,preventScrollReset:m,relative:a,viewTransition:g});function z(O){e&&e(O),O.defaultPrevented||L(O)}let I=G.createElement("a",{...y,...U,href:E||R,onClick:b||s?e:z,ref:eP(_,B),target:f,"data-discover":!T&&t==="render"?"true":void 0});return D&&!T?G.createElement(G.Fragment,null,I,G.createElement(ZI,{page:R})):I});Tc.displayName="Link";var nP=G.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:s,to:o,viewTransition:c,children:f,...d},m){let g=E0(o,{relative:d.relative}),y=Rh(),_=G.useContext(rb),{navigator:A,basename:T}=G.useContext(Bl),E=_!=null&&uP(g)&&c===!0,b=A.encodeLocation?A.encodeLocation(g).pathname:g.pathname,R=y.pathname,D=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;t||(R=R.toLowerCase(),D=D?D.toLowerCase():null,b=b.toLowerCase()),D&&T&&(D=xc(D,T)||D);const B=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let U=R===b||!a&&R.startsWith(b)&&R.charAt(B)==="/",L=D!=null&&(D===b||!a&&D.startsWith(b)&&D.charAt(b.length)==="/"),z={isActive:U,isPending:L,isTransitioning:E},I=U?e:void 0,O;typeof i=="function"?O=i(z):O=[i,U?"active":null,L?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let P=typeof s=="function"?s(z):s;return G.createElement(Tc,{...d,"aria-current":I,className:O,ref:m,style:P,to:o,viewTransition:c},typeof f=="function"?f(z):f)});nP.displayName="NavLink";var iP=G.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:s,method:o=Px,action:c,onSubmit:f,relative:d,preventScrollReset:m,viewTransition:g,...y},_)=>{let A=lP(),T=cP(c,{relative:d}),E=o.toLowerCase()==="get"?"get":"post",b=typeof c=="string"&&FD.test(c),R=D=>{if(f&&f(D),D.defaultPrevented)return;D.preventDefault();let B=D.nativeEvent.submitter,U=B?.getAttribute("formmethod")||o;A(B||D.currentTarget,{fetcherKey:e,method:U,navigate:t,replace:a,state:s,relative:d,preventScrollReset:m,viewTransition:g})};return G.createElement("form",{ref:_,method:E,action:T,onSubmit:i?f:R,...y,"data-discover":!b&&n==="render"?"true":void 0})});iP.displayName="Form";function aP(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zD(n){let e=G.useContext(Fp);return ki(e,aP(n)),e}function sP(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:s,viewTransition:o}={}){let c=ND(),f=Rh(),d=E0(n,{relative:s});return G.useCallback(m=>{if(PI(m,e)){m.preventDefault();let g=t!==void 0?t:t0(f)===t0(d);c(n,{replace:g,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[f,c,d,t,i,e,n,a,s,o])}var rP=0,oP=()=>`__${String(++rP)}__`;function lP(){let{router:n}=zD("useSubmit"),{basename:e}=G.useContext(Bl),t=CI();return G.useCallback(async(i,a={})=>{let{action:s,method:o,encType:c,formData:f,body:d}=HI(i,e);if(a.navigate===!1){let m=a.fetcherKey||oP();await n.fetch(m,t,a.action||s,{preventScrollReset:a.preventScrollReset,formData:f,body:d,formMethod:a.method||o,formEncType:a.encType||c,flushSync:a.flushSync})}else await n.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:f,body:d,formMethod:a.method||o,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function cP(n,{relative:e}={}){let{basename:t}=G.useContext(Bl),i=G.useContext(Ec);ki(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),s={...E0(n||".",{relative:e})},o=Rh();if(n==null){s.search=o.search;let c=new URLSearchParams(s.search),f=c.getAll("index");if(f.some(m=>m==="")){c.delete("index"),f.filter(g=>g).forEach(g=>c.append("index",g));let m=c.toString();s.search=m?`?${m}`:""}}return(!n||n===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:gc([t,s.pathname])),t0(s)}function uP(n,{relative:e}={}){let t=G.useContext(RD);ki(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=zD("useViewTransitionState"),a=E0(n,{relative:e});if(!t.isTransitioning)return!1;let s=xc(t.currentLocation.pathname,i)||t.currentLocation.pathname,o=xc(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Wx(a.pathname,o)!=null||Wx(a.pathname,s)!=null}var Bg=AD();const NM=G.createContext({});function T0(n){const e=G.useRef(null);return e.current===null&&(e.current=n()),e.current}const OM=typeof window<"u",UM=OM?G.useLayoutEffect:G.useEffect,lb=G.createContext(null);function LM(n,e){n.indexOf(e)===-1&&n.push(e)}function IM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const _c=(n,e,t)=>t>e?e:t<n?n:t;let PM=()=>{};const bc={},HD=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function GD(n){return typeof n=="object"&&n!==null}const VD=n=>/^0[^.\s]+$/u.test(n);function FM(n){let e;return()=>(e===void 0&&(e=n()),e)}const qr=n=>n,fP=(n,e)=>t=>e(n(t)),C0=(...n)=>n.reduce(fP),n0=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class zM{constructor(){this.subscriptions=[]}add(e){return LM(this.subscriptions,e),()=>IM(this.subscriptions,e)}notify(e,t,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,t,i);else for(let s=0;s<a;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const bl=n=>n*1e3,Al=n=>n/1e3;function kD(n,e){return e?n*(1e3/e):0}const XD=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,hP=1e-7,dP=12;function pP(n,e,t,i,a){let s,o,c=0;do o=e+(t-e)/2,s=XD(o,i,a)-n,s>0?t=o:e=o;while(Math.abs(s)>hP&&++c<dP);return o}function w0(n,e,t,i){if(n===e&&t===i)return qr;const a=s=>pP(s,0,1,n,t);return s=>s===0||s===1?s:XD(a(s),e,i)}const jD=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,YD=n=>e=>1-n(1-e),qD=w0(.33,1.53,.69,.99),HM=YD(qD),KD=jD(HM),WD=n=>(n*=2)<1?.5*HM(n):.5*(2-Math.pow(2,-10*(n-1))),GM=n=>1-Math.sin(Math.acos(n)),JD=YD(GM),ZD=jD(GM),mP=w0(.42,0,1,1),gP=w0(0,0,.58,1),QD=w0(.42,0,.58,1),vP=n=>Array.isArray(n)&&typeof n[0]!="number",$D=n=>Array.isArray(n)&&typeof n[0]=="number",yP={linear:qr,easeIn:mP,easeInOut:QD,easeOut:gP,circIn:GM,circInOut:ZD,circOut:JD,backIn:HM,backInOut:KD,backOut:qD,anticipate:WD},xP=n=>typeof n=="string",CC=n=>{if($D(n)){PM(n.length===4);const[e,t,i,a]=n;return w0(e,t,i,a)}else if(xP(n))return yP[n];return n},Dy=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function _P(n,e){let t=new Set,i=new Set,a=!1,s=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(m){o.has(m)&&(d.schedule(m),n()),m(c)}const d={schedule:(m,g=!1,y=!1)=>{const A=y&&a?t:i;return g&&o.add(m),A.has(m)||A.add(m),m},cancel:m=>{i.delete(m),o.delete(m)},process:m=>{if(c=m,a){s=!0;return}a=!0,[t,i]=[i,t],t.forEach(f),t.clear(),a=!1,s&&(s=!1,d.process(m))}};return d}const bP=40;function eB(n,e){let t=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Dy.reduce((D,B)=>(D[B]=_P(s),D),{}),{setup:c,read:f,resolveKeyframes:d,preUpdate:m,update:g,preRender:y,render:_,postRender:A}=o,T=()=>{const D=bc.useManualTiming?a.timestamp:performance.now();t=!1,bc.useManualTiming||(a.delta=i?1e3/60:Math.max(Math.min(D-a.timestamp,bP),1)),a.timestamp=D,a.isProcessing=!0,c.process(a),f.process(a),d.process(a),m.process(a),g.process(a),y.process(a),_.process(a),A.process(a),a.isProcessing=!1,t&&e&&(i=!1,n(T))},E=()=>{t=!0,i=!0,a.isProcessing||n(T)};return{schedule:Dy.reduce((D,B)=>{const U=o[B];return D[B]=(L,z=!1,I=!1)=>(t||E(),U.schedule(L,z,I)),D},{}),cancel:D=>{for(let B=0;B<Dy.length;B++)o[Dy[B]].cancel(D)},state:a,steps:o}}const{schedule:Mi,cancel:Ac,state:Ka,steps:kA}=eB(typeof requestAnimationFrame<"u"?requestAnimationFrame:qr,!0);let zx;function AP(){zx=void 0}const $s={now:()=>(zx===void 0&&$s.set(Ka.isProcessing||bc.useManualTiming?Ka.timestamp:performance.now()),zx),set:n=>{zx=n,queueMicrotask(AP)}},tB=n=>e=>typeof e=="string"&&e.startsWith(n),VM=tB("--"),SP=tB("var(--"),kM=n=>SP(n)?MP.test(n.split("/*")[0].trim()):!1,MP=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zp={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},i0={...zp,transform:n=>_c(0,1,n)},By={...zp,default:1},Ig=n=>Math.round(n*1e5)/1e5,XM=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function EP(n){return n==null}const TP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,jM=(n,e)=>t=>!!(typeof t=="string"&&TP.test(t)&&t.startsWith(n)||e&&!EP(t)&&Object.prototype.hasOwnProperty.call(t,e)),nB=(n,e,t)=>i=>{if(typeof i!="string")return i;const[a,s,o,c]=i.match(XM);return{[n]:parseFloat(a),[e]:parseFloat(s),[t]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},CP=n=>_c(0,255,n),XA={...zp,transform:n=>Math.round(CP(n))},oh={test:jM("rgb","red"),parse:nB("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+XA.transform(n)+", "+XA.transform(e)+", "+XA.transform(t)+", "+Ig(i0.transform(i))+")"};function wP(n){let e="",t="",i="",a="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),a=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),a=n.substring(4,5),e+=e,t+=t,i+=i,a+=a),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const C1={test:jM("#"),parse:wP,transform:oh.transform},R0=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),wu=R0("deg"),Sl=R0("%"),ln=R0("px"),RP=R0("vh"),DP=R0("vw"),wC={...Sl,parse:n=>Sl.parse(n)/100,transform:n=>Sl.transform(n*100)},rp={test:jM("hsl","hue"),parse:nB("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Sl.transform(Ig(e))+", "+Sl.transform(Ig(t))+", "+Ig(i0.transform(i))+")"},ha={test:n=>oh.test(n)||C1.test(n)||rp.test(n),parse:n=>oh.test(n)?oh.parse(n):rp.test(n)?rp.parse(n):C1.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?oh.transform(n):rp.transform(n),getAnimatableNone:n=>{const e=ha.parse(n);return e.alpha=0,ha.transform(e)}},BP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function NP(n){return isNaN(n)&&typeof n=="string"&&(n.match(XM)?.length||0)+(n.match(BP)?.length||0)>0}const iB="number",aB="color",OP="var",UP="var(",RC="${}",LP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function a0(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},a=[];let s=0;const c=e.replace(LP,f=>(ha.test(f)?(i.color.push(s),a.push(aB),t.push(ha.parse(f))):f.startsWith(UP)?(i.var.push(s),a.push(OP),t.push(f)):(i.number.push(s),a.push(iB),t.push(parseFloat(f))),++s,RC)).split(RC);return{values:t,split:c,indexes:i,types:a}}function sB(n){return a0(n).values}function rB(n){const{split:e,types:t}=a0(n),i=e.length;return a=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],a[o]!==void 0){const c=t[o];c===iB?s+=Ig(a[o]):c===aB?s+=ha.transform(a[o]):s+=a[o]}return s}}const IP=n=>typeof n=="number"?0:ha.test(n)?ha.getAnimatableNone(n):n;function PP(n){const e=sB(n);return rB(n)(e.map(IP))}const Uu={test:NP,parse:sB,createTransformer:rB,getAnimatableNone:PP};function jA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function FP({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let a=0,s=0,o=0;if(!e)a=s=o=t;else{const c=t<.5?t*(1+e):t+e-t*e,f=2*t-c;a=jA(f,c,n+1/3),s=jA(f,c,n),o=jA(f,c,n-1/3)}return{red:Math.round(a*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function Jx(n,e){return t=>t>0?e:n}const Hi=(n,e,t)=>n+(e-n)*t,YA=(n,e,t)=>{const i=n*n,a=t*(e*e-i)+i;return a<0?0:Math.sqrt(a)},zP=[C1,oh,rp],HP=n=>zP.find(e=>e.test(n));function DC(n){const e=HP(n);if(!e)return!1;let t=e.parse(n);return e===rp&&(t=FP(t)),t}const BC=(n,e)=>{const t=DC(n),i=DC(e);if(!t||!i)return Jx(n,e);const a={...t};return s=>(a.red=YA(t.red,i.red,s),a.green=YA(t.green,i.green,s),a.blue=YA(t.blue,i.blue,s),a.alpha=Hi(t.alpha,i.alpha,s),oh.transform(a))},w1=new Set(["none","hidden"]);function GP(n,e){return w1.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function VP(n,e){return t=>Hi(n,e,t)}function YM(n){return typeof n=="number"?VP:typeof n=="string"?kM(n)?Jx:ha.test(n)?BC:jP:Array.isArray(n)?oB:typeof n=="object"?ha.test(n)?BC:kP:Jx}function oB(n,e){const t=[...n],i=t.length,a=n.map((s,o)=>YM(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=a[o](s);return t}}function kP(n,e){const t={...n,...e},i={};for(const a in t)n[a]!==void 0&&e[a]!==void 0&&(i[a]=YM(n[a])(n[a],e[a]));return a=>{for(const s in i)t[s]=i[s](a);return t}}function XP(n,e){const t=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const s=e.types[a],o=n.indexes[s][i[s]],c=n.values[o]??0;t[a]=c,i[s]++}return t}const jP=(n,e)=>{const t=Uu.createTransformer(e),i=a0(n),a=a0(e);return i.indexes.var.length===a.indexes.var.length&&i.indexes.color.length===a.indexes.color.length&&i.indexes.number.length>=a.indexes.number.length?w1.has(n)&&!a.values.length||w1.has(e)&&!i.values.length?GP(n,e):C0(oB(XP(i,a),a.values),t):Jx(n,e)};function lB(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Hi(n,e,t):YM(n)(n,e)}const YP=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Mi.update(e,t),stop:()=>Ac(e),now:()=>Ka.isProcessing?Ka.timestamp:$s.now()}},cB=(n,e,t=10)=>{let i="";const a=Math.max(Math.round(e/t),2);for(let s=0;s<a;s++)i+=Math.round(n(s/(a-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Zx=2e4;function qM(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Zx;)e+=t,i=n.next(e);return e>=Zx?1/0:e}function qP(n,e=100,t){const i=t({...n,keyframes:[0,e]}),a=Math.min(qM(i),Zx);return{type:"keyframes",ease:s=>i.next(a*s).value/e,duration:Al(a)}}const KP=5;function uB(n,e,t){const i=Math.max(e-KP,0);return kD(t-n(i),e-i)}const Wi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},qA=.001;function WP({duration:n=Wi.duration,bounce:e=Wi.bounce,velocity:t=Wi.velocity,mass:i=Wi.mass}){let a,s,o=1-e;o=_c(Wi.minDamping,Wi.maxDamping,o),n=_c(Wi.minDuration,Wi.maxDuration,Al(n)),o<1?(a=d=>{const m=d*o,g=m*n,y=m-t,_=R1(d,o),A=Math.exp(-g);return qA-y/_*A},s=d=>{const g=d*o*n,y=g*t+t,_=Math.pow(o,2)*Math.pow(d,2)*n,A=Math.exp(-g),T=R1(Math.pow(d,2),o);return(-a(d)+qA>0?-1:1)*((y-_)*A)/T}):(a=d=>{const m=Math.exp(-d*n),g=(d-t)*n+1;return-qA+m*g},s=d=>{const m=Math.exp(-d*n),g=(t-d)*(n*n);return m*g});const c=5/n,f=ZP(a,s,c);if(n=bl(n),isNaN(f))return{stiffness:Wi.stiffness,damping:Wi.damping,duration:n};{const d=Math.pow(f,2)*i;return{stiffness:d,damping:o*2*Math.sqrt(i*d),duration:n}}}const JP=12;function ZP(n,e,t){let i=t;for(let a=1;a<JP;a++)i=i-n(i)/e(i);return i}function R1(n,e){return n*Math.sqrt(1-e*e)}const QP=["duration","bounce"],$P=["stiffness","damping","mass"];function NC(n,e){return e.some(t=>n[t]!==void 0)}function e4(n){let e={velocity:Wi.velocity,stiffness:Wi.stiffness,damping:Wi.damping,mass:Wi.mass,isResolvedFromDuration:!1,...n};if(!NC(n,$P)&&NC(n,QP))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),a=i*i,s=2*_c(.05,1,1-(n.bounce||0))*Math.sqrt(a);e={...e,mass:Wi.mass,stiffness:a,damping:s}}else{const t=WP(n);e={...e,...t,mass:Wi.mass},e.isResolvedFromDuration=!0}return e}function Qx(n=Wi.visualDuration,e=Wi.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:a}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],c={done:!1,value:s},{stiffness:f,damping:d,mass:m,duration:g,velocity:y,isResolvedFromDuration:_}=e4({...t,velocity:-Al(t.velocity||0)}),A=y||0,T=d/(2*Math.sqrt(f*m)),E=o-s,b=Al(Math.sqrt(f/m)),R=Math.abs(E)<5;i||(i=R?Wi.restSpeed.granular:Wi.restSpeed.default),a||(a=R?Wi.restDelta.granular:Wi.restDelta.default);let D;if(T<1){const U=R1(b,T);D=L=>{const z=Math.exp(-T*b*L);return o-z*((A+T*b*E)/U*Math.sin(U*L)+E*Math.cos(U*L))}}else if(T===1)D=U=>o-Math.exp(-b*U)*(E+(A+b*E)*U);else{const U=b*Math.sqrt(T*T-1);D=L=>{const z=Math.exp(-T*b*L),I=Math.min(U*L,300);return o-z*((A+T*b*E)*Math.sinh(I)+U*E*Math.cosh(I))/U}}const B={calculatedDuration:_&&g||null,next:U=>{const L=D(U);if(_)c.done=U>=g;else{let z=U===0?A:0;T<1&&(z=U===0?bl(A):uB(D,U,L));const I=Math.abs(z)<=i,O=Math.abs(o-L)<=a;c.done=I&&O}return c.value=c.done?o:L,c},toString:()=>{const U=Math.min(qM(B),Zx),L=cB(z=>B.next(U*z).value,U,30);return U+"ms "+L},toTransition:()=>{}};return B}Qx.applyToOptions=n=>{const e=qP(n,100,Qx);return n.ease=e.ease,n.duration=bl(e.duration),n.type="keyframes",n};function D1({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:s=500,modifyTarget:o,min:c,max:f,restDelta:d=.5,restSpeed:m}){const g=n[0],y={done:!1,value:g},_=I=>c!==void 0&&I<c||f!==void 0&&I>f,A=I=>c===void 0?f:f===void 0||Math.abs(c-I)<Math.abs(f-I)?c:f;let T=t*e;const E=g+T,b=o===void 0?E:o(E);b!==E&&(T=b-g);const R=I=>-T*Math.exp(-I/i),D=I=>b+R(I),B=I=>{const O=R(I),P=D(I);y.done=Math.abs(O)<=d,y.value=y.done?b:P};let U,L;const z=I=>{_(y.value)&&(U=I,L=Qx({keyframes:[y.value,A(y.value)],velocity:uB(D,I,y.value),damping:a,stiffness:s,restDelta:d,restSpeed:m}))};return z(0),{calculatedDuration:null,next:I=>{let O=!1;return!L&&U===void 0&&(O=!0,B(I),z(I)),U!==void 0&&I>=U?L.next(I-U):(!O&&B(I),y)}}}function t4(n,e,t){const i=[],a=t||bc.mix||lB,s=n.length-1;for(let o=0;o<s;o++){let c=a(n[o],n[o+1]);if(e){const f=Array.isArray(e)?e[o]||qr:e;c=C0(f,c)}i.push(c)}return i}function fB(n,e,{clamp:t=!0,ease:i,mixer:a}={}){const s=n.length;if(PM(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=t4(e,i,a),f=c.length,d=m=>{if(o&&m<n[0])return e[0];let g=0;if(f>1)for(;g<n.length-2&&!(m<n[g+1]);g++);const y=n0(n[g],n[g+1],m);return c[g](y)};return t?m=>d(_c(n[0],n[s-1],m)):d}function n4(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const a=n0(0,e,i);n.push(Hi(t,1,a))}}function i4(n){const e=[0];return n4(e,n.length-1),e}function a4(n,e){return n.map(t=>t*e)}function s4(n,e){return n.map(()=>e||QD).splice(0,n.length-1)}function Pg({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const a=vP(i)?i.map(CC):CC(i),s={done:!1,value:e[0]},o=a4(t&&t.length===e.length?t:i4(e),n),c=fB(o,e,{ease:Array.isArray(a)?a:s4(e,a)});return{calculatedDuration:n,next:f=>(s.value=c(f),s.done=f>=n,s)}}const r4=n=>n!==null;function KM(n,{repeat:e,repeatType:t="loop"},i,a=1){const s=n.filter(r4),c=a<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!c||i===void 0?s[c]:i}const o4={decay:D1,inertia:D1,tween:Pg,keyframes:Pg,spring:Qx};function hB(n){typeof n.type=="string"&&(n.type=o4[n.type])}class WM{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const l4=n=>n/100;class cb extends WM{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==$s.now()&&this.tick($s.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;hB(e);const{type:t=Pg,repeat:i=0,repeatDelay:a=0,repeatType:s,velocity:o=0}=e;let{keyframes:c}=e;const f=t||Pg;f!==Pg&&typeof c[0]!="number"&&(this.mixKeyframes=C0(l4,lB(c[0],c[1])),c=[0,100]);const d=f({...e,keyframes:c});s==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=qM(d));const{calculatedDuration:m}=d;this.calculatedDuration=m,this.resolvedDuration=m+a,this.totalDuration=this.resolvedDuration*(i+1)-a,this.generator=d}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:a,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return i.next(0);const{delay:d=0,keyframes:m,repeat:g,repeatType:y,repeatDelay:_,type:A,onUpdate:T,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const b=this.currentTime-d*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?b<0:b>a;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let D=this.currentTime,B=i;if(g){const I=Math.min(this.currentTime,a)/c;let O=Math.floor(I),P=I%1;!P&&I>=1&&(P=1),P===1&&O--,O=Math.min(O,g+1),!!(O%2)&&(y==="reverse"?(P=1-P,_&&(P-=_/c)):y==="mirror"&&(B=o)),D=_c(0,1,P)*c}const U=R?{done:!1,value:m[0]}:B.next(D);s&&(U.value=s(U.value));let{done:L}=U;!R&&f!==null&&(L=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return z&&A!==D1&&(U.value=KM(m,this.options,E,this.speed)),T&&T(U.value),z&&this.finish(),U}then(e,t){return this.finished.then(e,t)}get duration(){return Al(this.calculatedDuration)}get time(){return Al(this.currentTime)}set time(e){e=bl(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime($s.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Al(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=YP,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime($s.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function c4(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const lh=n=>n*180/Math.PI,B1=n=>{const e=lh(Math.atan2(n[1],n[0]));return N1(e)},u4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:B1,rotateZ:B1,skewX:n=>lh(Math.atan(n[1])),skewY:n=>lh(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},N1=n=>(n=n%360,n<0&&(n+=360),n),OC=B1,UC=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),LC=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),f4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:UC,scaleY:LC,scale:n=>(UC(n)+LC(n))/2,rotateX:n=>N1(lh(Math.atan2(n[6],n[5]))),rotateY:n=>N1(lh(Math.atan2(-n[2],n[0]))),rotateZ:OC,rotate:OC,skewX:n=>lh(Math.atan(n[4])),skewY:n=>lh(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function O1(n){return n.includes("scale")?1:0}function U1(n,e){if(!n||n==="none")return O1(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,a;if(t)i=f4,a=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=u4,a=c}if(!a)return O1(e);const s=i[e],o=a[1].split(",").map(d4);return typeof s=="function"?s(o):o[s]}const h4=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return U1(t,e)};function d4(n){return parseFloat(n.trim())}const Hp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gp=new Set(Hp),IC=n=>n===zp||n===ln,p4=new Set(["x","y","z"]),m4=Hp.filter(n=>!p4.has(n));function g4(n){const e=[];return m4.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const gh={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>U1(e,"x"),y:(n,{transform:e})=>U1(e,"y")};gh.translateX=gh.x;gh.translateY=gh.y;const vh=new Set;let L1=!1,I1=!1,P1=!1;function dB(){if(I1){const n=Array.from(vh).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const a=g4(i);a.length&&(t.set(i,a),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const a=t.get(i);a&&a.forEach(([s,o])=>{i.getValue(s)?.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}I1=!1,L1=!1,vh.forEach(n=>n.complete(P1)),vh.clear()}function pB(){vh.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(I1=!0)})}function v4(){P1=!0,pB(),dB(),P1=!1}class JM{constructor(e,t,i,a,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=a,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(vh.add(this),L1||(L1=!0,Mi.read(pB),Mi.resolveKeyframes(dB))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:a}=this;if(e[0]===null){const s=a?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&t){const c=i.readValue(t,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),a&&s===void 0&&a.set(e[0])}c4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),vh.delete(this)}cancel(){this.state==="scheduled"&&(vh.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const y4=n=>n.startsWith("--");function x4(n,e,t){y4(e)?n.style.setProperty(e,t):n.style[e]=t}const _4=FM(()=>window.ScrollTimeline!==void 0),b4={};function A4(n,e){const t=FM(n);return()=>b4[e]??t()}const mB=A4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ng=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,PC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ng([0,.65,.55,1]),circOut:Ng([.55,0,1,.45]),backIn:Ng([.31,.01,.66,-.59]),backOut:Ng([.33,1.53,.69,.99])};function gB(n,e){if(n)return typeof n=="function"?mB()?cB(n,e):"ease-out":$D(n)?Ng(n):Array.isArray(n)?n.map(t=>gB(t,e)||PC.easeOut):PC[n]}function S4(n,e,t,{delay:i=0,duration:a=300,repeat:s=0,repeatType:o="loop",ease:c="easeOut",times:f}={},d=void 0){const m={[e]:t};f&&(m.offset=f);const g=gB(c,a);Array.isArray(g)&&(m.easing=g);const y={delay:i,duration:a,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(y.pseudoElement=d),n.animate(m,y)}function vB(n){return typeof n=="function"&&"applyToOptions"in n}function M4({type:n,...e}){return vB(n)&&mB()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class E4 extends WM{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:a,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,PM(typeof e.type!="string");const d=M4(e);this.animation=S4(t,i,a,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const m=KM(a,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):x4(t,i,m),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Al(Number(e))}get time(){return Al(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=bl(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&_4()?(this.animation.timeline=e,qr):t(this)}}const yB={anticipate:WD,backInOut:KD,circInOut:ZD};function T4(n){return n in yB}function C4(n){typeof n.ease=="string"&&T4(n.ease)&&(n.ease=yB[n.ease])}const FC=10;class w4 extends E4{constructor(e){C4(e),hB(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:a,element:s,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new cb({...o,autoplay:!1}),f=bl(this.finishedTime??this.time);t.setWithVelocity(c.sample(f-FC).value,c.sample(f).value,FC),c.stop()}}const zC=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Uu.test(n)||n==="0")&&!n.startsWith("url("));function R4(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function D4(n,e,t,i){const a=n[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=zC(a,e),c=zC(s,e);return!o||!c?!1:R4(n)||(t==="spring"||vB(t))&&i}function F1(n){n.duration=0,n.type}const B4=new Set(["opacity","clipPath","filter","transform"]),N4=FM(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function O4(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:a,damping:s,type:o}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=e.owner.getProps();return N4()&&t&&B4.has(t)&&(t!=="transform"||!d)&&!f&&!i&&a!=="mirror"&&s!==0&&o!=="inertia"}const U4=40;class L4 extends WM{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:a=0,repeatDelay:s=0,repeatType:o="loop",keyframes:c,name:f,motionValue:d,element:m,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=$s.now();const y={autoplay:e,delay:t,type:i,repeat:a,repeatDelay:s,repeatType:o,name:f,motionValue:d,element:m,...g},_=m?.KeyframeResolver||JM;this.keyframeResolver=new _(c,(A,T,E)=>this.onKeyframesResolved(A,T,y,!E),f,d,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,a){this.keyframeResolver=void 0;const{name:s,type:o,velocity:c,delay:f,isHandoff:d,onUpdate:m}=i;this.resolvedAt=$s.now(),D4(e,s,o,c)||((bc.instantAnimations||!f)&&m?.(KM(e,i,t)),e[0]=e[e.length-1],F1(i),i.repeat=0);const y={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>U4?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},_=!d&&O4(y)?new w4({...y,element:y.motionValue.owner.current}):new cb(y);_.finished.then(()=>this.notifyFinished()).catch(qr),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),v4()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const I4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function P4(n){const e=I4.exec(n);if(!e)return[,];const[,t,i,a]=e;return[`--${t??i}`,a]}function xB(n,e,t=1){const[i,a]=P4(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return HD(o)?parseFloat(o):o}return kM(a)?xB(a,e,t+1):a}function ZM(n,e){return n?.[e]??n?.default??n}const _B=new Set(["width","height","top","left","right","bottom",...Hp]),F4={test:n=>n==="auto",parse:n=>n},bB=n=>e=>e.test(n),AB=[zp,ln,Sl,wu,DP,RP,F4],HC=n=>AB.find(bB(n));function z4(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||VD(n):!0}const H4=new Set(["brightness","contrast","saturate","opacity"]);function G4(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(XM)||[];if(!i)return n;const a=t.replace(i,"");let s=H4.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+a+")"}const V4=/\b([a-z-]*)\(.*?\)/gu,z1={...Uu,getAnimatableNone:n=>{const e=n.match(V4);return e?e.map(G4).join(" "):n}},GC={...zp,transform:Math.round},k4={rotate:wu,rotateX:wu,rotateY:wu,rotateZ:wu,scale:By,scaleX:By,scaleY:By,scaleZ:By,skew:wu,skewX:wu,skewY:wu,distance:ln,translateX:ln,translateY:ln,translateZ:ln,x:ln,y:ln,z:ln,perspective:ln,transformPerspective:ln,opacity:i0,originX:wC,originY:wC,originZ:ln},QM={borderWidth:ln,borderTopWidth:ln,borderRightWidth:ln,borderBottomWidth:ln,borderLeftWidth:ln,borderRadius:ln,radius:ln,borderTopLeftRadius:ln,borderTopRightRadius:ln,borderBottomRightRadius:ln,borderBottomLeftRadius:ln,width:ln,maxWidth:ln,height:ln,maxHeight:ln,top:ln,right:ln,bottom:ln,left:ln,padding:ln,paddingTop:ln,paddingRight:ln,paddingBottom:ln,paddingLeft:ln,margin:ln,marginTop:ln,marginRight:ln,marginBottom:ln,marginLeft:ln,backgroundPositionX:ln,backgroundPositionY:ln,...k4,zIndex:GC,fillOpacity:i0,strokeOpacity:i0,numOctaves:GC},X4={...QM,color:ha,backgroundColor:ha,outlineColor:ha,fill:ha,stroke:ha,borderColor:ha,borderTopColor:ha,borderRightColor:ha,borderBottomColor:ha,borderLeftColor:ha,filter:z1,WebkitFilter:z1},SB=n=>X4[n];function MB(n,e){let t=SB(n);return t!==z1&&(t=Uu),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const j4=new Set(["auto","none","0"]);function Y4(n,e,t){let i=0,a;for(;i<n.length&&!a;){const s=n[i];typeof s=="string"&&!j4.has(s)&&a0(s).values.length&&(a=n[i]),i++}if(a&&t)for(const s of e)n[s]=MB(t,a)}class q4 extends JM{constructor(e,t,i,a,s){super(e,t,i,a,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),kM(d))){const m=xB(d,t.current);m!==void 0&&(e[f]=m),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!_B.has(i)||e.length!==2)return;const[a,s]=e,o=HC(a),c=HC(s);if(o!==c)if(IC(o)&&IC(c))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else gh[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let a=0;a<e.length;a++)(e[a]===null||z4(e[a]))&&i.push(a);i.length&&Y4(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=gh[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const a=t[t.length-1];a!==void 0&&e.getValue(i,a).jump(a,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const a=e.getValue(t);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=gh[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,f])=>{e.getValue(c).set(f)}),this.resolveNoneKeyframes()}}function K4(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const a=t?.[n]??i.querySelectorAll(n);return a?Array.from(a):[]}return Array.from(n)}const EB=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function TB(n){return GD(n)&&"offsetHeight"in n}const VC=30,W4=n=>!isNaN(parseFloat(n)),Fg={current:void 0};class J4{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const a=$s.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=$s.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=W4(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new zM);const i=this.events[e].add(t);return e==="change"?()=>{i(),Mi.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Fg.current&&Fg.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=$s.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>VC)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,VC);return kD(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bh(n,e){return new J4(n,e)}const{schedule:$M}=eB(queueMicrotask,!1),Co={x:!1,y:!1};function CB(){return Co.x||Co.y}function Z4(n){return n==="x"||n==="y"?Co[n]?null:(Co[n]=!0,()=>{Co[n]=!1}):Co.x||Co.y?null:(Co.x=Co.y=!0,()=>{Co.x=Co.y=!1})}function wB(n,e){const t=K4(n),i=new AbortController,a={passive:!0,...e,signal:i.signal};return[t,a,()=>i.abort()]}function kC(n){return!(n.pointerType==="touch"||CB())}function Q4(n,e,t={}){const[i,a,s]=wB(n,t),o=c=>{if(!kC(c))return;const{target:f}=c,d=e(f,c);if(typeof d!="function"||!f)return;const m=g=>{kC(g)&&(d(g),f.removeEventListener("pointerleave",m))};f.addEventListener("pointerleave",m,a)};return i.forEach(c=>{c.addEventListener("pointerenter",o,a)}),s}const RB=(n,e)=>e?n===e?!0:RB(n,e.parentElement):!1,eE=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,$4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function eF(n){return $4.has(n.tagName)||n.tabIndex!==-1}const Hx=new WeakSet;function XC(n){return e=>{e.key==="Enter"&&n(e)}}function KA(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const tF=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=XC(()=>{if(Hx.has(t))return;KA(t,"down");const a=XC(()=>{KA(t,"up")}),s=()=>KA(t,"cancel");t.addEventListener("keyup",a,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function jC(n){return eE(n)&&!CB()}function nF(n,e,t={}){const[i,a,s]=wB(n,t),o=c=>{const f=c.currentTarget;if(!jC(c))return;Hx.add(f);const d=e(f,c),m=(_,A)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),Hx.has(f)&&Hx.delete(f),jC(_)&&typeof d=="function"&&d(_,{success:A})},g=_=>{m(_,f===window||f===document||t.useGlobalTarget||RB(f,_.target))},y=_=>{m(_,!1)};window.addEventListener("pointerup",g,a),window.addEventListener("pointercancel",y,a)};return i.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",o,a),TB(c)&&(c.addEventListener("focus",d=>tF(d,a)),!eF(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),s}function DB(n){return GD(n)&&"ownerSVGElement"in n}function iF(n){return DB(n)&&n.tagName==="svg"}function aF(...n){const e=!Array.isArray(n[0]),t=e?0:-1,i=n[0+t],a=n[1+t],s=n[2+t],o=n[3+t],c=fB(a,s,o);return e?c(i):c}const Ua=n=>!!(n&&n.getVelocity);function sF(n,e,t){const i=n.get();let a=null,s=i,o;const c=typeof i=="string"?i.replace(/[\d.-]/g,""):void 0,f=()=>{a&&(a.stop(),a=null)},d=()=>{f(),a=new cb({keyframes:[qC(n.get()),qC(s)],velocity:n.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:o})};if(n.attach((m,g)=>(s=m,o=y=>g(YC(y,c)),Mi.postRender(d),n.get()),f),Ua(e)){const m=e.on("change",y=>n.set(YC(y,c))),g=n.on("destroy",m);return()=>{m(),g()}}return f}function YC(n,e){return e?n+e:n}function qC(n){return typeof n=="number"?n:parseFloat(n)}const rF=[...AB,ha,Uu],oF=n=>rF.find(bB(n)),D0=G.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function KC(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function lF(...n){return e=>{let t=!1;const i=n.map(a=>{const s=KC(a,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let a=0;a<i.length;a++){const s=i[a];typeof s=="function"?s():KC(n[a],null)}}}}function cF(...n){return G.useCallback(lF(...n),n)}class uF extends G.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,a=TB(i)&&i.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=a-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function fF({children:n,isPresent:e,anchorX:t,root:i}){const a=G.useId(),s=G.useRef(null),o=G.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=G.useContext(D0),f=cF(s,n?.ref);return G.useInsertionEffect(()=>{const{width:d,height:m,top:g,left:y,right:_}=o.current;if(e||!s.current||!d||!m)return;const A=t==="left"?`left: ${y}`:`right: ${_}`;s.current.dataset.motionPopId=a;const T=document.createElement("style");c&&(T.nonce=c);const E=i??document.head;return E.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${m}px !important;
            ${A}px !important;
            top: ${g}px !important;
          }
        `),()=>{E.contains(T)&&E.removeChild(T)}},[e]),ee.jsx(uF,{isPresent:e,childRef:s,sizeRef:o,children:G.cloneElement(n,{ref:f})})}const hF=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:a,presenceAffectsLayout:s,mode:o,anchorX:c,root:f})=>{const d=T0(dF),m=G.useId();let g=!0,y=G.useMemo(()=>(g=!1,{id:m,initial:e,isPresent:t,custom:a,onExitComplete:_=>{d.set(_,!0);for(const A of d.values())if(!A)return;i&&i()},register:_=>(d.set(_,!1),()=>d.delete(_))}),[t,d,i]);return s&&g&&(y={...y}),G.useMemo(()=>{d.forEach((_,A)=>d.set(A,!1))},[t]),G.useEffect(()=>{!t&&!d.size&&i&&i()},[t]),o==="popLayout"&&(n=ee.jsx(fF,{isPresent:t,anchorX:c,root:f,children:n})),ee.jsx(lb.Provider,{value:y,children:n})};function dF(){return new Map}function BB(n=!0){const e=G.useContext(lb);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:a}=e,s=G.useId();G.useEffect(()=>{if(n)return a(s)},[n]);const o=G.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const Ny=n=>n.key||"";function WC(n){const e=[];return G.Children.forEach(n,t=>{G.isValidElement(t)&&e.push(t)}),e}const xp=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:s="sync",propagate:o=!1,anchorX:c="left",root:f})=>{const[d,m]=BB(o),g=G.useMemo(()=>WC(n),[n]),y=o&&!d?[]:g.map(Ny),_=G.useRef(!0),A=G.useRef(g),T=T0(()=>new Map),[E,b]=G.useState(g),[R,D]=G.useState(g);UM(()=>{_.current=!1,A.current=g;for(let L=0;L<R.length;L++){const z=Ny(R[L]);y.includes(z)?T.delete(z):T.get(z)!==!0&&T.set(z,!1)}},[R,y.length,y.join("-")]);const B=[];if(g!==E){let L=[...g];for(let z=0;z<R.length;z++){const I=R[z],O=Ny(I);y.includes(O)||(L.splice(z,0,I),B.push(I))}return s==="wait"&&B.length&&(L=B),D(WC(L)),b(g),null}const{forceRender:U}=G.useContext(NM);return ee.jsx(ee.Fragment,{children:R.map(L=>{const z=Ny(L),I=o&&!d?!1:g===R||y.includes(z),O=()=>{if(T.has(z))T.set(z,!0);else return;let P=!0;T.forEach(Y=>{Y||(P=!1)}),P&&(U?.(),D(A.current),o&&m?.(),i&&i())};return ee.jsx(hF,{isPresent:I,initial:!_.current||t?void 0:!1,custom:e,presenceAffectsLayout:a,mode:s,root:f,onExitComplete:I?void 0:O,anchorX:c,children:L},z)})})},NB=G.createContext({strict:!1}),JC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_p={};for(const n in JC)_p[n]={isEnabled:e=>JC[n].some(t=>!!e[t])};function pF(n){for(const e in n)_p[e]={..._p[e],...n[e]}}const mF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $x(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||mF.has(n)}let OB=n=>!$x(n);function gF(n){typeof n=="function"&&(OB=e=>e.startsWith("on")?!$x(e):n(e))}try{gF(require("@emotion/is-prop-valid").default)}catch{}function vF(n,e,t){const i={};for(const a in n)a==="values"&&typeof n.values=="object"||(OB(a)||t===!0&&$x(a)||!e&&!$x(a)||n.draggable&&a.startsWith("onDrag"))&&(i[a]=n[a]);return i}const ub=G.createContext({});function fb(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function s0(n){return typeof n=="string"||Array.isArray(n)}const tE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nE=["initial",...tE];function hb(n){return fb(n.animate)||nE.some(e=>s0(n[e]))}function UB(n){return!!(hb(n)||n.variants)}function yF(n,e){if(hb(n)){const{initial:t,animate:i}=n;return{initial:t===!1||s0(t)?t:void 0,animate:s0(i)?i:void 0}}return n.inherit!==!1?e:{}}function xF(n){const{initial:e,animate:t}=yF(n,G.useContext(ub));return G.useMemo(()=>({initial:e,animate:t}),[ZC(e),ZC(t)])}function ZC(n){return Array.isArray(n)?n.join(" "):n}const r0={};function _F(n){for(const e in n)r0[e]=n[e],VM(e)&&(r0[e].isCSSVariable=!0)}function LB(n,{layout:e,layoutId:t}){return Gp.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!r0[n]||n==="opacity")}const bF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},AF=Hp.length;function SF(n,e,t){let i="",a=!0;for(let s=0;s<AF;s++){const o=Hp[s],c=n[o];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(o.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||t){const d=EB(c,QM[o]);if(!f){a=!1;const m=bF[o]||o;i+=`${m}(${d}) `}t&&(e[o]=d)}}return i=i.trim(),t?i=t(e,a?"":i):a&&(i="none"),i}function iE(n,e,t){const{style:i,vars:a,transformOrigin:s}=n;let o=!1,c=!1;for(const f in e){const d=e[f];if(Gp.has(f)){o=!0;continue}else if(VM(f)){a[f]=d;continue}else{const m=EB(d,QM[f]);f.startsWith("origin")?(c=!0,s[f]=m):i[f]=m}}if(e.transform||(o||t?i.transform=SF(e,n.transform,t):i.transform&&(i.transform="none")),c){const{originX:f="50%",originY:d="50%",originZ:m=0}=s;i.transformOrigin=`${f} ${d} ${m}`}}const aE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function IB(n,e,t){for(const i in e)!Ua(e[i])&&!LB(i,t)&&(n[i]=e[i])}function MF({transformTemplate:n},e){return G.useMemo(()=>{const t=aE();return iE(t,e,n),Object.assign({},t.vars,t.style)},[e])}function EF(n,e){const t=n.style||{},i={};return IB(i,t,n),Object.assign(i,MF(n,e)),i}function TF(n,e){const t={},i=EF(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const CF={offset:"stroke-dashoffset",array:"stroke-dasharray"},wF={offset:"strokeDashoffset",array:"strokeDasharray"};function RF(n,e,t=1,i=0,a=!0){n.pathLength=1;const s=a?CF:wF;n[s.offset]=ln.transform(-i);const o=ln.transform(e),c=ln.transform(t);n[s.array]=`${o} ${c}`}function PB(n,{attrX:e,attrY:t,attrScale:i,pathLength:a,pathSpacing:s=1,pathOffset:o=0,...c},f,d,m){if(iE(n,c,d),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:y}=n;g.transform&&(y.transform=g.transform,delete g.transform),(y.transform||g.transformOrigin)&&(y.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),y.transform&&(y.transformBox=m?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),i!==void 0&&(g.scale=i),a!==void 0&&RF(g,a,s,o,!1)}const FB=()=>({...aE(),attrs:{}}),zB=n=>typeof n=="string"&&n.toLowerCase()==="svg";function DF(n,e,t,i){const a=G.useMemo(()=>{const s=FB();return PB(s,e,zB(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};IB(s,n.style,n),a.style={...s,...a.style}}return a}const BF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sE(n){return typeof n!="string"||n.includes("-")?!1:!!(BF.indexOf(n)>-1||/[A-Z]/u.test(n))}function NF(n,e,t,{latestValues:i},a,s=!1){const c=(sE(n)?DF:TF)(e,i,a,n),f=vF(e,typeof n=="string",s),d=n!==G.Fragment?{...f,...c,ref:t}:{},{children:m}=e,g=G.useMemo(()=>Ua(m)?m.get():m,[m]);return G.createElement(n,{...d,children:g})}function QC(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function rE(n,e,t,i){if(typeof e=="function"){const[a,s]=QC(i);e=e(t!==void 0?t:n.custom,a,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[a,s]=QC(i);e=e(t!==void 0?t:n.custom,a,s)}return e}function Gx(n){return Ua(n)?n.get():n}function OF({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,a){return{latestValues:UF(t,i,a,n),renderState:e()}}function UF(n,e,t,i){const a={},s=i(n,{});for(const y in s)a[y]=Gx(s[y]);let{initial:o,animate:c}=n;const f=hb(n),d=UB(n);e&&d&&!f&&n.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let m=t?t.initial===!1:!1;m=m||o===!1;const g=m?c:o;if(g&&typeof g!="boolean"&&!fb(g)){const y=Array.isArray(g)?g:[g];for(let _=0;_<y.length;_++){const A=rE(n,y[_]);if(A){const{transitionEnd:T,transition:E,...b}=A;for(const R in b){let D=b[R];if(Array.isArray(D)){const B=m?D.length-1:0;D=D[B]}D!==null&&(a[R]=D)}for(const R in T)a[R]=T[R]}}}return a}const HB=n=>(e,t)=>{const i=G.useContext(ub),a=G.useContext(lb),s=()=>OF(n,e,i,a);return t?s():T0(s)};function oE(n,e,t){const{style:i}=n,a={};for(const s in i)(Ua(i[s])||e.style&&Ua(e.style[s])||LB(s,n)||t?.getValue(s)?.liveStyle!==void 0)&&(a[s]=i[s]);return a}const LF=HB({scrapeMotionValuesFromProps:oE,createRenderState:aE});function GB(n,e,t){const i=oE(n,e,t);for(const a in n)if(Ua(n[a])||Ua(e[a])){const s=Hp.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;i[s]=n[a]}return i}const IF=HB({scrapeMotionValuesFromProps:GB,createRenderState:FB}),PF=Symbol.for("motionComponentSymbol");function op(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function FF(n,e,t){return G.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):op(t)&&(t.current=i))},[e])}const lE=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),zF="framerAppearId",VB="data-"+lE(zF),kB=G.createContext({});function HF(n,e,t,i,a){const{visualElement:s}=G.useContext(ub),o=G.useContext(NB),c=G.useContext(lb),f=G.useContext(D0).reducedMotion,d=G.useRef(null);i=i||o.renderer,!d.current&&i&&(d.current=i(n,{visualState:e,parent:s,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const m=d.current,g=G.useContext(kB);m&&!m.projection&&a&&(m.type==="html"||m.type==="svg")&&GF(d.current,t,a,g);const y=G.useRef(!1);G.useInsertionEffect(()=>{m&&y.current&&m.update(t,c)});const _=t[VB],A=G.useRef(!!_&&!window.MotionHandoffIsComplete?.(_)&&window.MotionHasOptimisedAnimation?.(_));return UM(()=>{m&&(y.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),A.current&&m.animationState&&m.animationState.animateChanges())}),G.useEffect(()=>{m&&(!A.current&&m.animationState&&m.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(_)}),A.current=!1),m.enteringChildren=void 0)}),m}function GF(n,e,t,i){const{layoutId:a,layout:s,drag:o,dragConstraints:c,layoutScroll:f,layoutRoot:d,layoutCrossfade:m}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:XB(n.parent)),n.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:!!o||c&&op(c),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:m,layoutScroll:f,layoutRoot:d})}function XB(n){if(n)return n.options.allowProjection!==!1?n.projection:XB(n.parent)}function WA(n,{forwardMotionProps:e=!1}={},t,i){t&&pF(t);const a=sE(n)?IF:LF;function s(c,f){let d;const m={...G.useContext(D0),...c,layoutId:VF(c)},{isStatic:g}=m,y=xF(c),_=a(c,g);if(!g&&OM){kF();const A=XF(m);d=A.MeasureLayout,y.visualElement=HF(n,_,m,i,A.ProjectionNode)}return ee.jsxs(ub.Provider,{value:y,children:[d&&y.visualElement?ee.jsx(d,{visualElement:y.visualElement,...m}):null,NF(n,c,FF(_,y.visualElement,f),_,g,e)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=G.forwardRef(s);return o[PF]=n,o}function VF({layoutId:n}){const e=G.useContext(NM).id;return e&&n!==void 0?e+"-"+n:n}function kF(n,e){G.useContext(NB).strict}function XF(n){const{drag:e,layout:t}=_p;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function jF(n,e){if(typeof Proxy>"u")return WA;const t=new Map,i=(s,o)=>WA(s,o,n,e),a=(s,o)=>i(s,o);return new Proxy(a,{get:(s,o)=>o==="create"?i:(t.has(o)||t.set(o,WA(o,void 0,n,e)),t.get(o))})}function jB({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function YF({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function qF(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function JA(n){return n===void 0||n===1}function H1({scale:n,scaleX:e,scaleY:t}){return!JA(n)||!JA(e)||!JA(t)}function th(n){return H1(n)||YB(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function YB(n){return $C(n.x)||$C(n.y)}function $C(n){return n&&n!=="0%"}function e_(n,e,t){const i=n-t,a=e*i;return t+a}function ew(n,e,t,i,a){return a!==void 0&&(n=e_(n,a,i)),e_(n,t,i)+e}function G1(n,e=0,t=1,i,a){n.min=ew(n.min,e,t,i,a),n.max=ew(n.max,e,t,i,a)}function qB(n,{x:e,y:t}){G1(n.x,e.translate,e.scale,e.originPoint),G1(n.y,t.translate,t.scale,t.originPoint)}const tw=.999999999999,nw=1.0000000000001;function KF(n,e,t,i=!1){const a=t.length;if(!a)return;e.x=e.y=1;let s,o;for(let c=0;c<a;c++){s=t[c],o=s.projectionDelta;const{visualElement:f}=s.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&cp(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,qB(n,o)),i&&th(s.latestValues)&&cp(n,s.latestValues))}e.x<nw&&e.x>tw&&(e.x=1),e.y<nw&&e.y>tw&&(e.y=1)}function lp(n,e){n.min=n.min+e,n.max=n.max+e}function iw(n,e,t,i,a=.5){const s=Hi(n.min,n.max,a);G1(n,e,t,s,i)}function cp(n,e){iw(n.x,e.x,e.scaleX,e.scale,e.originX),iw(n.y,e.y,e.scaleY,e.scale,e.originY)}function KB(n,e){return jB(qF(n.getBoundingClientRect(),e))}function WF(n,e,t){const i=KB(n,t),{scroll:a}=e;return a&&(lp(i.x,a.offset.x),lp(i.y,a.offset.y)),i}const aw=()=>({translate:0,scale:1,origin:0,originPoint:0}),up=()=>({x:aw(),y:aw()}),sw=()=>({min:0,max:0}),ia=()=>({x:sw(),y:sw()}),V1={current:null},WB={current:!1};function JF(){if(WB.current=!0,!!OM)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>V1.current=n.matches;n.addEventListener("change",e),e()}else V1.current=!1}const ZF=new WeakMap;function QF(n,e,t){for(const i in e){const a=e[i],s=t[i];if(Ua(a))n.addValue(i,a);else if(Ua(s))n.addValue(i,bh(a,{owner:n}));else if(s!==a)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=n.getStaticValue(i);n.addValue(i,bh(o!==void 0?o:a,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const rw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $F{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:a,blockInitialAnimation:s,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=JM,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=$s.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Mi.render(this.render,!1,!0))};const{latestValues:f,renderState:d}=o;this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=c,this.blockInitialAnimation=!!s,this.isControllingVariants=hb(t),this.isVariantNode=UB(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in g){const _=g[y];f[y]!==void 0&&Ua(_)&&_.set(f[y])}}mount(e){this.current=e,ZF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),WB.current||JF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:V1.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ac(this.notifyUpdate),Ac(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Gp.has(e);i&&this.onBindTransform&&this.onBindTransform();const a=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Mi.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{a(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in _p){const t=_p[e];if(!t)continue;const{isEnabled:i,Feature:a}=t;if(!this.features[e]&&a&&i(this.props)&&(this.features[e]=new a(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ia()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<rw.length;i++){const a=rw[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const s="on"+a,o=e[s];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=QF(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=bh(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(HD(i)||VD(i))?i=parseFloat(i):!oF(i)&&Uu.test(t)&&(i=MB(e,t)),this.setBaseTarget(e,Ua(i)?i.get():i)),Ua(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const s=rE(this.props,t,this.presenceContext?.custom);s&&(i=s[e])}if(t&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Ua(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new zM),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){$M.render(this.render)}}class JB extends $F{constructor(){super(...arguments),this.KeyframeResolver=q4}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ua(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function ZB(n,{style:e,vars:t},i,a){const s=n.style;let o;for(o in e)s[o]=e[o];a?.applyProjectionStyles(s,i);for(o in t)s.setProperty(o,t[o])}function ez(n){return window.getComputedStyle(n)}class tz extends JB{constructor(){super(...arguments),this.type="html",this.renderInstance=ZB}readValueFromInstance(e,t){if(Gp.has(t))return this.projection?.isProjecting?O1(t):h4(e,t);{const i=ez(e),a=(VM(t)?i.getPropertyValue(t):i[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return KB(e,t)}build(e,t,i){iE(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return oE(e,t,i)}}const QB=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nz(n,e,t,i){ZB(n,e,void 0,i);for(const a in e.attrs)n.setAttribute(QB.has(a)?a:lE(a),e.attrs[a])}class iz extends JB{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ia}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Gp.has(t)){const i=SB(t);return i&&i.default||0}return t=QB.has(t)?t:lE(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return GB(e,t,i)}build(e,t,i){PB(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,a){nz(e,t,i,a)}mount(e){this.isSVGTag=zB(e.tagName),super.mount(e)}}const az=(n,e)=>sE(n)?new iz(e):new tz(e,{allowProjection:n!==G.Fragment});function dp(n,e,t){const i=n.getProps();return rE(i,e,t!==void 0?t:i.custom,n)}const k1=n=>Array.isArray(n);function sz(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,bh(t))}function rz(n){return k1(n)?n[n.length-1]||0:n}function oz(n,e){const t=dp(n,e);let{transitionEnd:i={},transition:a={},...s}=t||{};s={...s,...i};for(const o in s){const c=rz(s[o]);sz(n,o,c)}}function lz(n){return!!(Ua(n)&&n.add)}function X1(n,e){const t=n.getValue("willChange");if(lz(t))return t.add(e);if(!t&&bc.WillChange){const i=new bc.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function $B(n){return n.props[VB]}const cz=n=>n!==null;function uz(n,{repeat:e,repeatType:t="loop"},i){const a=n.filter(cz),s=e&&t!=="loop"&&e%2===1?0:a.length-1;return a[s]}const fz={type:"spring",stiffness:500,damping:25,restSpeed:10},hz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),dz={type:"keyframes",duration:.8},pz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mz=(n,{keyframes:e})=>e.length>2?dz:Gp.has(n)?n.startsWith("scale")?hz(e[1]):fz:pz;function gz({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:a,repeat:s,repeatType:o,repeatDelay:c,from:f,elapsed:d,...m}){return!!Object.keys(m).length}const cE=(n,e,t,i={},a,s)=>o=>{const c=ZM(i,n)||{},f=c.delay||i.delay||0;let{elapsed:d=0}=i;d=d-bl(f);const m={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:y=>{e.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:s?void 0:a};gz(c)||Object.assign(m,mz(n,m)),m.duration&&(m.duration=bl(m.duration)),m.repeatDelay&&(m.repeatDelay=bl(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(F1(m),m.delay===0&&(g=!0)),(bc.instantAnimations||bc.skipAnimations)&&(g=!0,F1(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,g&&!s&&e.get()!==void 0){const y=uz(m.keyframes,c);if(y!==void 0){Mi.update(()=>{m.onUpdate(y),m.onComplete()});return}}return c.isSync?new cb(m):new L4(m)};function vz({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function e3(n,e,{delay:t=0,transitionOverride:i,type:a}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...c}=e;i&&(s=i);const f=[],d=a&&n.animationState&&n.animationState.getState()[a];for(const m in c){const g=n.getValue(m,n.latestValues[m]??null),y=c[m];if(y===void 0||d&&vz(d,m))continue;const _={delay:t,...ZM(s||{},m)},A=g.get();if(A!==void 0&&!g.isAnimating&&!Array.isArray(y)&&y===A&&!_.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const b=$B(n);if(b){const R=window.MotionHandoffAnimation(b,m,Mi);R!==null&&(_.startTime=R,T=!0)}}X1(n,m),g.start(cE(m,g,y,n.shouldReduceMotion&&_B.has(m)?{type:!1}:_,n,T));const E=g.animation;E&&f.push(E)}return o&&Promise.all(f).then(()=>{Mi.update(()=>{o&&oz(n,o)})}),f}function t3(n,e,t,i=0,a=1){const s=Array.from(n).sort((d,m)=>d.sortNodePosition(m)).indexOf(e),o=n.size,c=(o-1)*i;return typeof t=="function"?t(s,o):a===1?s*i:c-s*i}function j1(n,e,t={}){const i=dp(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:a=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(a=t.transitionOverride);const s=i?()=>Promise.all(e3(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:m,staggerDirection:g}=a;return yz(n,e,f,d,m,g,t)}:()=>Promise.resolve(),{when:c}=a;if(c){const[f,d]=c==="beforeChildren"?[s,o]:[o,s];return f().then(()=>d())}else return Promise.all([s(),o(t.delay)])}function yz(n,e,t=0,i=0,a=0,s=1,o){const c=[];for(const f of n.variantChildren)f.notify("AnimationStart",e),c.push(j1(f,e,{...o,delay:t+(typeof i=="function"?0:i)+t3(n.variantChildren,f,i,a,s)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(c)}function xz(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const a=e.map(s=>j1(n,s,t));i=Promise.all(a)}else if(typeof e=="string")i=j1(n,e,t);else{const a=typeof e=="function"?dp(n,e,t.custom):e;i=Promise.all(e3(n,a,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function n3(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const _z=nE.length;function i3(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?i3(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<_z;t++){const i=nE[t],a=n.props[i];(s0(a)||a===!1)&&(e[i]=a)}return e}const bz=[...tE].reverse(),Az=tE.length;function Sz(n){return e=>Promise.all(e.map(({animation:t,options:i})=>xz(n,t,i)))}function Mz(n){let e=Sz(n),t=ow(),i=!0;const a=f=>(d,m)=>{const g=dp(n,m,f==="exit"?n.presenceContext?.custom:void 0);if(g){const{transition:y,transitionEnd:_,...A}=g;d={...d,...A,..._}}return d};function s(f){e=f(n)}function o(f){const{props:d}=n,m=i3(n.parent)||{},g=[],y=new Set;let _={},A=1/0;for(let E=0;E<Az;E++){const b=bz[E],R=t[b],D=d[b]!==void 0?d[b]:m[b],B=s0(D),U=b===f?R.isActive:null;U===!1&&(A=E);let L=D===m[b]&&D!==d[b]&&B;if(L&&i&&n.manuallyAnimateOnMount&&(L=!1),R.protectedKeys={..._},!R.isActive&&U===null||!D&&!R.prevProp||fb(D)||typeof D=="boolean")continue;const z=Ez(R.prevProp,D);let I=z||b===f&&R.isActive&&!L&&B||E>A&&B,O=!1;const P=Array.isArray(D)?D:[D];let Y=P.reduce(a(b),{});U===!1&&(Y={});const{prevResolvedValues:ie={}}=R,se={...ie,...Y},ue=W=>{I=!0,y.has(W)&&(O=!0,y.delete(W)),R.needsAnimating[W]=!0;const q=n.getValue(W);q&&(q.liveStyle=!1)};for(const W in se){const q=Y[W],ge=ie[W];if(_.hasOwnProperty(W))continue;let j=!1;k1(q)&&k1(ge)?j=!n3(q,ge):j=q!==ge,j?q!=null?ue(W):y.add(W):q!==void 0&&y.has(W)?ue(W):R.protectedKeys[W]=!0}R.prevProp=D,R.prevResolvedValues=Y,R.isActive&&(_={..._,...Y}),i&&n.blockInitialAnimation&&(I=!1);const me=L&&z;I&&(!me||O)&&g.push(...P.map(W=>{const q={type:b};if(typeof W=="string"&&i&&!me&&n.manuallyAnimateOnMount&&n.parent){const{parent:ge}=n,j=dp(ge,W);if(ge.enteringChildren&&j){const{delayChildren:fe}=j.transition||{};q.delay=t3(ge.enteringChildren,n,fe)}}return{animation:W,options:q}}))}if(y.size){const E={};if(typeof d.initial!="boolean"){const b=dp(n,Array.isArray(d.initial)?d.initial[0]:d.initial);b&&b.transition&&(E.transition=b.transition)}y.forEach(b=>{const R=n.getBaseTarget(b),D=n.getValue(b);D&&(D.liveStyle=!0),E[b]=R??null}),g.push({animation:E})}let T=!!g.length;return i&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(T=!1),i=!1,T?e(g):Promise.resolve()}function c(f,d){if(t[f].isActive===d)return Promise.resolve();n.variantChildren?.forEach(g=>g.animationState?.setActive(f,d)),t[f].isActive=d;const m=o(f);for(const g in t)t[g].protectedKeys={};return m}return{animateChanges:o,setActive:c,setAnimateFunction:s,getState:()=>t,reset:()=>{t=ow(),i=!0}}}function Ez(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!n3(e,n):!1}function Pf(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ow(){return{animate:Pf(!0),whileInView:Pf(),whileHover:Pf(),whileTap:Pf(),whileDrag:Pf(),whileFocus:Pf(),exit:Pf()}}class Hu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Tz extends Hu{constructor(e){super(e),e.animationState||(e.animationState=Mz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();fb(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Cz=0;class wz extends Hu{constructor(){super(...arguments),this.id=Cz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const a=this.node.animationState.setActive("exit",!e);t&&!e&&a.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Rz={animation:{Feature:Tz},exit:{Feature:wz}};function o0(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function B0(n){return{point:{x:n.pageX,y:n.pageY}}}const Dz=n=>e=>eE(e)&&n(e,B0(e));function zg(n,e,t,i){return o0(n,e,Dz(t),i)}const a3=1e-4,Bz=1-a3,Nz=1+a3,s3=.01,Oz=0-s3,Uz=0+s3;function Bs(n){return n.max-n.min}function Lz(n,e,t){return Math.abs(n-e)<=t}function lw(n,e,t,i=.5){n.origin=i,n.originPoint=Hi(e.min,e.max,n.origin),n.scale=Bs(t)/Bs(e),n.translate=Hi(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Bz&&n.scale<=Nz||isNaN(n.scale))&&(n.scale=1),(n.translate>=Oz&&n.translate<=Uz||isNaN(n.translate))&&(n.translate=0)}function Hg(n,e,t,i){lw(n.x,e.x,t.x,i?i.originX:void 0),lw(n.y,e.y,t.y,i?i.originY:void 0)}function cw(n,e,t){n.min=t.min+e.min,n.max=n.min+Bs(e)}function Iz(n,e,t){cw(n.x,e.x,t.x),cw(n.y,e.y,t.y)}function uw(n,e,t){n.min=e.min-t.min,n.max=n.min+Bs(e)}function Gg(n,e,t){uw(n.x,e.x,t.x),uw(n.y,e.y,t.y)}function Hr(n){return[n("x"),n("y")]}const r3=({current:n})=>n?n.ownerDocument.defaultView:null,fw=(n,e)=>Math.abs(n-e);function Pz(n,e){const t=fw(n.x,e.x),i=fw(n.y,e.y);return Math.sqrt(t**2+i**2)}class o3{constructor(e,t,{transformPagePoint:i,contextWindow:a=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=QA(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,A=Pz(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!A)return;const{point:T}=y,{timestamp:E}=Ka;this.history.push({...T,timestamp:E});const{onStart:b,onMove:R}=this.handlers;_||(b&&b(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,y)},this.handlePointerMove=(y,_)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=ZA(_,this.transformPagePoint),Mi.update(this.updatePoint,!0)},this.handlePointerUp=(y,_)=>{this.end();const{onEnd:A,onSessionEnd:T,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=QA(y.type==="pointercancel"?this.lastMoveEventInfo:ZA(_,this.transformPagePoint),this.history);this.startEvent&&A&&A(y,b),T&&T(y,b)},!eE(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=a||window;const c=B0(e),f=ZA(c,this.transformPagePoint),{point:d}=f,{timestamp:m}=Ka;this.history=[{...d,timestamp:m}];const{onSessionStart:g}=t;g&&g(e,QA(f,this.history)),this.removeListeners=C0(zg(this.contextWindow,"pointermove",this.handlePointerMove),zg(this.contextWindow,"pointerup",this.handlePointerUp),zg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ac(this.updatePoint)}}function ZA(n,e){return e?{point:e(n.point)}:n}function hw(n,e){return{x:n.x-e.x,y:n.y-e.y}}function QA({point:n},e){return{point:n,delta:hw(n,l3(e)),offset:hw(n,Fz(e)),velocity:zz(e,.1)}}function Fz(n){return n[0]}function l3(n){return n[n.length-1]}function zz(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const a=l3(n);for(;t>=0&&(i=n[t],!(a.timestamp-i.timestamp>bl(e)));)t--;if(!i)return{x:0,y:0};const s=Al(a.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(a.x-i.x)/s,y:(a.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Hz(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Hi(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Hi(t,n,i.max):Math.min(n,t)),n}function dw(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Gz(n,{top:e,left:t,bottom:i,right:a}){return{x:dw(n.x,t,a),y:dw(n.y,e,i)}}function pw(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function Vz(n,e){return{x:pw(n.x,e.x),y:pw(n.y,e.y)}}function kz(n,e){let t=.5;const i=Bs(n),a=Bs(e);return a>i?t=n0(e.min,e.max-i,n.min):i>a&&(t=n0(n.min,n.max-a,e.min)),_c(0,1,t)}function Xz(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Y1=.35;function jz(n=Y1){return n===!1?n=0:n===!0&&(n=Y1),{x:mw(n,"left","right"),y:mw(n,"top","bottom")}}function mw(n,e,t){return{min:gw(n,e),max:gw(n,t)}}function gw(n,e){return typeof n=="number"?n:n[e]||0}const Yz=new WeakMap;class qz{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ia(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(B0(g).point)},o=(g,y)=>{const{drag:_,dragPropagation:A,onDragStart:T}=this.getProps();if(_&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Z4(_),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Hr(b=>{let R=this.getAxisMotionValue(b).get()||0;if(Sl.test(R)){const{projection:D}=this.visualElement;if(D&&D.layout){const B=D.layout.layoutBox[b];B&&(R=Bs(B)*(parseFloat(R)/100))}}this.originPoint[b]=R}),T&&Mi.postRender(()=>T(g,y)),X1(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y;const{dragPropagation:_,dragDirectionLock:A,onDirectionLock:T,onDrag:E}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:b}=y;if(A&&this.currentDirection===null){this.currentDirection=Kz(b),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",y.point,b),this.updateAxis("y",y.point,b),this.visualElement.render(),E&&E(g,y)},f=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y,this.stop(g,y),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Hr(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new o3(e,{onSessionStart:s,onStart:o,onMove:c,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:i,contextWindow:r3(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,a=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!a||!i)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&Mi.postRender(()=>c(i,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:a}=this.getProps();if(!i||!Oy(e,a,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=Hz(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&op(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=Gz(i.layoutBox,e):this.constraints=!1,this.elastic=jz(t),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Hr(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Xz(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!op(e))return!1;const i=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const s=WF(i,a.root,this.visualElement.getTransformPagePoint());let o=Vz(a.layout.layoutBox,s);if(t){const c=t(YF(o));this.hasMutatedConstraints=!!c,c&&(o=jB(c))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:a,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},d=Hr(m=>{if(!Oy(m,t,this.currentDirection))return;let g=f&&f[m]||{};o&&(g={min:0,max:0});const y=a?200:1e6,_=a?40:1e7,A={type:"inertia",velocity:i?e[m]:0,bounceStiffness:y,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(m,A)});return Promise.all(d).then(c)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return X1(this.visualElement,e),i.start(cE(e,i,0,t,this.visualElement,!1))}stopAnimation(){Hr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Hr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),a=i[t];return a||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Hr(t=>{const{drag:i}=this.getProps();if(!Oy(t,i,this.currentDirection))return;const{projection:a}=this.visualElement,s=this.getAxisMotionValue(t);if(a&&a.layout){const{min:o,max:c}=a.layout.layoutBox[t];s.set(e[t]-Hi(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!op(t)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Hr(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const f=c.get();a[o]=kz({min:f,max:f},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Hr(o=>{if(!Oy(o,e,null))return;const c=this.getAxisMotionValue(o),{min:f,max:d}=this.constraints[o];c.set(Hi(f,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;Yz.set(this.visualElement,this);const e=this.visualElement.current,t=zg(e,"pointerdown",f=>{const{drag:d,dragListener:m=!0}=this.getProps();d&&m&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();op(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,s=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Mi.read(i);const o=o0(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(Hr(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=f[m].translate,g.set(g.get()+f[m].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:s=!1,dragElastic:o=Y1,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:a,dragConstraints:s,dragElastic:o,dragMomentum:c}}}function Oy(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Kz(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Wz extends Hu{constructor(e){super(e),this.removeGroupControls=qr,this.removeListeners=qr,this.controls=new qz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qr}unmount(){this.removeGroupControls(),this.removeListeners()}}const vw=n=>(e,t)=>{n&&Mi.postRender(()=>n(e,t))};class Jz extends Hu{constructor(){super(...arguments),this.removePointerDownListener=qr}onPointerDown(e){this.session=new o3(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:r3(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:vw(e),onStart:vw(t),onMove:i,onEnd:(s,o)=>{delete this.session,a&&Mi.postRender(()=>a(s,o))}}}mount(){this.removePointerDownListener=zg(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Vx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yw(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const pg={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ln.test(n))n=parseFloat(n);else return n;const t=yw(n,e.target.x),i=yw(n,e.target.y);return`${t}% ${i}%`}},Zz={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,a=Uu.parse(n);if(a.length>5)return i;const s=Uu.createTransformer(n),o=typeof a[0]!="number"?1:0,c=t.x.scale*e.x,f=t.y.scale*e.y;a[0+o]/=c,a[1+o]/=f;const d=Hi(c,f,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),s(a)}};let $A=!1;class Qz extends G.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:a}=this.props,{projection:s}=e;_F($z),s&&(t.group&&t.group.add(s),i&&i.register&&a&&i.register(s),$A&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Vx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:a,isPresent:s}=this.props,{projection:o}=i;return o&&(o.isPresent=s,$A=!0,a||e.layoutDependency!==t||t===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Mi.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),$M.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:a}=e;$A=!0,a&&(a.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function c3(n){const[e,t]=BB(),i=G.useContext(NM);return ee.jsx(Qz,{...n,layoutGroup:i,switchLayoutGroup:G.useContext(kB),isPresent:e,safeToRemove:t})}const $z={borderRadius:{...pg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pg,borderTopRightRadius:pg,borderBottomLeftRadius:pg,borderBottomRightRadius:pg,boxShadow:Zz};function eH(n,e,t){const i=Ua(n)?n:bh(n);return i.start(cE("",i,e,t)),i.animation}const tH=(n,e)=>n.depth-e.depth;class nH{constructor(){this.children=[],this.isDirty=!1}add(e){LM(this.children,e),this.isDirty=!0}remove(e){IM(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(tH),this.isDirty=!1,this.children.forEach(e)}}function iH(n,e){const t=$s.now(),i=({timestamp:a})=>{const s=a-t;s>=e&&(Ac(i),n(s-e))};return Mi.setup(i,!0),()=>Ac(i)}const u3=["TopLeft","TopRight","BottomLeft","BottomRight"],aH=u3.length,xw=n=>typeof n=="string"?parseFloat(n):n,_w=n=>typeof n=="number"||ln.test(n);function sH(n,e,t,i,a,s){a?(n.opacity=Hi(0,t.opacity??1,rH(i)),n.opacityExit=Hi(e.opacity??1,0,oH(i))):s&&(n.opacity=Hi(e.opacity??1,t.opacity??1,i));for(let o=0;o<aH;o++){const c=`border${u3[o]}Radius`;let f=bw(e,c),d=bw(t,c);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||_w(f)===_w(d)?(n[c]=Math.max(Hi(xw(f),xw(d),i),0),(Sl.test(d)||Sl.test(f))&&(n[c]+="%")):n[c]=d}(e.rotate||t.rotate)&&(n.rotate=Hi(e.rotate||0,t.rotate||0,i))}function bw(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const rH=f3(0,.5,JD),oH=f3(.5,.95,qr);function f3(n,e,t){return i=>i<n?0:i>e?1:t(n0(n,e,i))}function Aw(n,e){n.min=e.min,n.max=e.max}function Fr(n,e){Aw(n.x,e.x),Aw(n.y,e.y)}function Sw(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function Mw(n,e,t,i,a){return n-=e,n=e_(n,1/t,i),a!==void 0&&(n=e_(n,1/a,i)),n}function lH(n,e=0,t=1,i=.5,a,s=n,o=n){if(Sl.test(e)&&(e=parseFloat(e),e=Hi(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=Hi(s.min,s.max,i);n===s&&(c-=e),n.min=Mw(n.min,e,t,c,a),n.max=Mw(n.max,e,t,c,a)}function Ew(n,e,[t,i,a],s,o){lH(n,e[t],e[i],e[a],e.scale,s,o)}const cH=["x","scaleX","originX"],uH=["y","scaleY","originY"];function Tw(n,e,t,i){Ew(n.x,e,cH,t?t.x:void 0,i?i.x:void 0),Ew(n.y,e,uH,t?t.y:void 0,i?i.y:void 0)}function Cw(n){return n.translate===0&&n.scale===1}function h3(n){return Cw(n.x)&&Cw(n.y)}function ww(n,e){return n.min===e.min&&n.max===e.max}function fH(n,e){return ww(n.x,e.x)&&ww(n.y,e.y)}function Rw(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function d3(n,e){return Rw(n.x,e.x)&&Rw(n.y,e.y)}function Dw(n){return Bs(n.x)/Bs(n.y)}function Bw(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class hH{constructor(){this.members=[]}add(e){LM(this.members,e),e.scheduleRender()}remove(e){if(IM(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(a=>e===a);if(t===0)return!1;let i;for(let a=t;a>=0;a--){const s=this.members[a];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dH(n,e,t){let i="";const a=n.x.translate/e.x,s=n.y.translate/e.y,o=t?.z||0;if((a||s||o)&&(i=`translate3d(${a}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:m,rotateX:g,rotateY:y,skewX:_,skewY:A}=t;d&&(i=`perspective(${d}px) ${i}`),m&&(i+=`rotate(${m}deg) `),g&&(i+=`rotateX(${g}deg) `),y&&(i+=`rotateY(${y}deg) `),_&&(i+=`skewX(${_}deg) `),A&&(i+=`skewY(${A}deg) `)}const c=n.x.scale*e.x,f=n.y.scale*e.y;return(c!==1||f!==1)&&(i+=`scale(${c}, ${f})`),i||"none"}const eS=["","X","Y","Z"],pH=1e3;let mH=0;function tS(n,e,t,i){const{latestValues:a}=e;a[n]&&(t[n]=a[n],e.setStaticValue(n,0),i&&(i[n]=0))}function p3(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=$B(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:a,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Mi,!(a||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&p3(i)}function m3({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(o={},c=e?.()){this.id=mH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(yH),this.nodes.forEach(AH),this.nodes.forEach(SH),this.nodes.forEach(xH)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new nH)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new zM),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const f=this.eventHandlers.get(o);f&&f.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=DB(o)&&!iF(o),this.instance=o;const{layoutId:c,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),n){let m,g=0;const y=()=>this.root.updateBlockedByResize=!1;Mi.read(()=>{g=window.innerWidth}),n(o,()=>{const _=window.innerWidth;_!==g&&(g=_,this.root.updateBlockedByResize=!0,m&&m(),m=iH(y,250),Vx.hasAnimatedSinceResize&&(Vx.hasAnimatedSinceResize=!1,this.nodes.forEach(Uw)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||f)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g,hasRelativeLayoutChanged:y,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||d.getDefaultTransition()||wH,{onLayoutAnimationStart:T,onLayoutAnimationComplete:E}=d.getProps(),b=!this.targetLayout||!d3(this.targetLayout,_),R=!g&&y;if(this.options.layoutRoot||this.resumeFrom||R||g&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const D={...ZM(A,"layout"),onPlay:T,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D),this.setAnimationOrigin(m,R)}else g||Uw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ac(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(MH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&p3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Nw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ow);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(bH),this.nodes.forEach(gH),this.nodes.forEach(vH)):this.nodes.forEach(Ow),this.clearAllSnapshots();const c=$s.now();Ka.delta=_c(0,1e3/60,c-Ka.timestamp),Ka.timestamp=c,Ka.isProcessing=!0,kA.update.process(Ka),kA.preRender.process(Ka),kA.render.process(Ka),Ka.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,$M.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_H),this.sharedNodes.forEach(EH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Mi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Mi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Bs(this.snapshot.measuredBox.x)&&!Bs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ia(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!h3(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,m=d!==this.prevTransformTemplateValue;o&&this.instance&&(c||th(this.latestValues)||m)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return o&&(f=this.removeTransform(f)),RH(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ia();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(DH))){const{scroll:d}=this.root;d&&(lp(c.x,d.offset.x),lp(c.y,d.offset.y))}return c}removeElementScroll(o){const c=ia();if(Fr(c,o),this.scroll?.wasRoot)return c;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:m,options:g}=d;d!==this.root&&m&&g.layoutScroll&&(m.wasRoot&&Fr(c,o),lp(c.x,m.offset.x),lp(c.y,m.offset.y))}return c}applyTransform(o,c=!1){const f=ia();Fr(f,o);for(let d=0;d<this.path.length;d++){const m=this.path[d];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&cp(f,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),th(m.latestValues)&&cp(f,m.latestValues)}return th(this.latestValues)&&cp(f,this.latestValues),f}removeTransform(o){const c=ia();Fr(c,o);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!th(d.latestValues))continue;H1(d.latestValues)&&d.updateSnapshot();const m=ia(),g=d.measurePageBox();Fr(m,g),Tw(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,m)}return th(this.latestValues)&&Tw(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ka.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(o||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:g}=this.options;if(!(!this.layout||!(m||g))){if(this.resolvedRelativeTargetAt=Ka.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ia(),this.relativeTargetOrigin=ia(),Gg(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Fr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ia(),this.targetWithTransforms=ia()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Iz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fr(this.target,this.layout.layoutBox),qB(this.target,this.targetDelta)):Fr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ia(),this.relativeTargetOrigin=ia(),Gg(this.relativeTargetOrigin,this.target,y.target),Fr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||H1(this.parent.latestValues)||YB(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Ka.timestamp&&(f=!1),f)return;const{layout:d,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||m))return;Fr(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;KF(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ia());const{target:_}=o;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Sw(this.prevProjectionDelta.x,this.projectionDelta.x),Sw(this.prevProjectionDelta.y,this.projectionDelta.y)),Hg(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!Bw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Bw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=up(),this.projectionDelta=up(),this.projectionDeltaWithTransform=up()}setAnimationOrigin(o,c=!1){const f=this.snapshot,d=f?f.latestValues:{},m={...this.latestValues},g=up();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=ia(),_=f?f.source:void 0,A=this.layout?this.layout.source:void 0,T=_!==A,E=this.getStack(),b=!E||E.members.length<=1,R=!!(T&&!b&&this.options.crossfade===!0&&!this.path.some(CH));this.animationProgress=0;let D;this.mixTargetDelta=B=>{const U=B/1e3;Lw(g.x,o.x,U),Lw(g.y,o.y,U),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gg(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),TH(this.relativeTarget,this.relativeTargetOrigin,y,U),D&&fH(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=ia()),Fr(D,this.relativeTarget)),T&&(this.animationValues=m,sH(m,d,this.latestValues,U,R,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ac(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Mi.update(()=>{Vx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=bh(0)),this.currentAnimation=eH(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pH),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:f,layout:d,latestValues:m}=o;if(!(!c||!f||!d)){if(this!==o&&this.layout&&d&&g3(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||ia();const g=Bs(this.layout.layoutBox.x);f.x.min=o.target.x.min,f.x.max=f.x.min+g;const y=Bs(this.layout.layoutBox.y);f.y.min=o.target.y.min,f.y.max=f.y.min+y}Fr(c,f),cp(c,m),Hg(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new hH),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:f}=o;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const d={};f.z&&tS("z",o,d,this.animationValues);for(let m=0;m<eS.length;m++)tS(`rotate${eS[m]}`,o,d,this.animationValues),tS(`skew${eS[m]}`,o,d,this.animationValues);o.render();for(const m in d)o.setStaticValue(m,d[m]),this.animationValues&&(this.animationValues[m]=d[m]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Gx(c?.pointerEvents)||"",o.transform=f?f(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Gx(c?.pointerEvents)||""),this.hasProjected&&!th(this.latestValues)&&(o.transform=f?f({},""):"none",this.hasProjected=!1);return}o.visibility="";const m=d.animationValues||d.latestValues;this.applyTransformsToTarget();let g=dH(this.projectionDeltaWithTransform,this.treeScale,m);f&&(g=f(m,g)),o.transform=g;const{x:y,y:_}=this.projectionDelta;o.transformOrigin=`${y.origin*100}% ${_.origin*100}% 0`,d.animationValues?o.opacity=d===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:o.opacity=d===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const A in r0){if(m[A]===void 0)continue;const{correct:T,applyTo:E,isCSSVariable:b}=r0[A],R=g==="none"?m[A]:T(m[A],d);if(E){const D=E.length;for(let B=0;B<D;B++)o[E[B]]=R}else b?this.options.visualElement.renderState.vars[A]=R:o[A]=R}this.options.layoutId&&(o.pointerEvents=d===this?Gx(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(Nw),this.root.sharedNodes.clear()}}}function gH(n){n.updateLayout()}function vH(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:a}=n.options,s=e.source!==n.layout.source;a==="size"?Hr(m=>{const g=s?e.measuredBox[m]:e.layoutBox[m],y=Bs(g);g.min=t[m].min,g.max=g.min+y}):g3(a,e.layoutBox,t)&&Hr(m=>{const g=s?e.measuredBox[m]:e.layoutBox[m],y=Bs(t[m]);g.max=g.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[m].max=n.relativeTarget[m].min+y)});const o=up();Hg(o,t,e.layoutBox);const c=up();s?Hg(c,n.applyTransform(i,!0),e.measuredBox):Hg(c,t,e.layoutBox);const f=!h3(o);let d=!1;if(!n.resumeFrom){const m=n.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:g,layout:y}=m;if(g&&y){const _=ia();Gg(_,e.layoutBox,g.layoutBox);const A=ia();Gg(A,t,y.layoutBox),d3(_,A)||(d=!0),m.options.layoutRoot&&(n.relativeTarget=A,n.relativeTargetOrigin=_,n.relativeParent=m)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function yH(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function xH(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function _H(n){n.clearSnapshot()}function Nw(n){n.clearMeasurements()}function Ow(n){n.isLayoutDirty=!1}function bH(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Uw(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function AH(n){n.resolveTargetDelta()}function SH(n){n.calcProjection()}function MH(n){n.resetSkewAndRotation()}function EH(n){n.removeLeadSnapshot()}function Lw(n,e,t){n.translate=Hi(e.translate,0,t),n.scale=Hi(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Iw(n,e,t,i){n.min=Hi(e.min,t.min,i),n.max=Hi(e.max,t.max,i)}function TH(n,e,t,i){Iw(n.x,e.x,t.x,i),Iw(n.y,e.y,t.y,i)}function CH(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const wH={duration:.45,ease:[.4,0,.1,1]},Pw=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Fw=Pw("applewebkit/")&&!Pw("chrome/")?Math.round:qr;function zw(n){n.min=Fw(n.min),n.max=Fw(n.max)}function RH(n){zw(n.x),zw(n.y)}function g3(n,e,t){return n==="position"||n==="preserve-aspect"&&!Lz(Dw(e),Dw(t),.2)}function DH(n){return n!==n.root&&n.scroll?.wasRoot}const BH=m3({attachResizeListener:(n,e)=>o0(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nS={current:void 0},v3=m3({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!nS.current){const n=new BH({});n.mount(window),n.setOptions({layoutScroll:!0}),nS.current=n}return nS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),NH={pan:{Feature:Jz},drag:{Feature:Wz,ProjectionNode:v3,MeasureLayout:c3}};function Hw(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const a="onHover"+t,s=i[a];s&&Mi.postRender(()=>s(e,B0(e)))}class OH extends Hu{mount(){const{current:e}=this.node;e&&(this.unmount=Q4(e,(t,i)=>(Hw(this.node,i,"Start"),a=>Hw(this.node,a,"End"))))}unmount(){}}class UH extends Hu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=C0(o0(this.node.current,"focus",()=>this.onFocus()),o0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Gw(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const a="onTap"+(t==="End"?"":t),s=i[a];s&&Mi.postRender(()=>s(e,B0(e)))}class LH extends Hu{mount(){const{current:e}=this.node;e&&(this.unmount=nF(e,(t,i)=>(Gw(this.node,i,"Start"),(a,{success:s})=>Gw(this.node,a,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const q1=new WeakMap,iS=new WeakMap,IH=n=>{const e=q1.get(n.target);e&&e(n)},PH=n=>{n.forEach(IH)};function FH({root:n,...e}){const t=n||document;iS.has(t)||iS.set(t,{});const i=iS.get(t),a=JSON.stringify(e);return i[a]||(i[a]=new IntersectionObserver(PH,{root:n,...e})),i[a]}function zH(n,e,t){const i=FH(e);return q1.set(n,t),i.observe(n),()=>{q1.delete(n),i.unobserve(n)}}const HH={some:0,all:1};class GH extends Hu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:a="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:HH[a]},c=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),y=d?m:g;y&&y(f)};return zH(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(VH(e,t))&&this.startObserver()}unmount(){}}function VH({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const kH={inView:{Feature:GH},tap:{Feature:LH},focus:{Feature:UH},hover:{Feature:OH}},XH={layout:{ProjectionNode:v3,MeasureLayout:c3}},jH={...Rz,...kH,...NH,...XH},Ns=jF(jH,az);function t_(n){const e=T0(()=>bh(n)),{isStatic:t}=G.useContext(D0);if(t){const[,i]=G.useState(n);G.useEffect(()=>e.on("change",i),[])}return e}function y3(n,e){const t=t_(e()),i=()=>t.set(e());return i(),UM(()=>{const a=()=>Mi.preRender(i,!1,!0),s=n.map(o=>o.on("change",a));return()=>{s.forEach(o=>o()),Ac(i)}}),t}function YH(n){Fg.current=[],n();const e=y3(Fg.current,n);return Fg.current=void 0,e}function l0(n,e,t,i){if(typeof n=="function")return YH(n);const a=typeof e=="function"?e:aF(e,t,i);return Array.isArray(n)?Vw(n,a):Vw([n],([s])=>a(s))}function Vw(n,e){const t=T0(()=>[]);return y3(n,()=>{t.length=0;const i=n.length;for(let a=0;a<i;a++)t[a]=n[a].get();return e(t)})}function kw(n,e={}){const{isStatic:t}=G.useContext(D0),i=()=>Ua(n)?n.get():n;if(t)return l0(i);const a=t_(i());return G.useInsertionEffect(()=>sF(a,n,e),[a,JSON.stringify(e)]),a}function x3(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=x3(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function qH(){for(var n,e,t=0,i="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=x3(n))&&(i&&(i+=" "),i+=e);return i}const uE="-",KH=n=>{const e=JH(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:o=>{const c=o.split(uE);return c[0]===""&&c.length!==1&&c.shift(),_3(c,e)||WH(o)},getConflictingClassGroupIds:(o,c)=>{const f=t[o]||[];return c&&i[o]?[...f,...i[o]]:f}}},_3=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),a=i?_3(n.slice(1),i):void 0;if(a)return a;if(e.validators.length===0)return;const s=n.join(uE);return e.validators.find(({validator:o})=>o(s))?.classGroupId},Xw=/^\[(.+)\]$/,WH=n=>{if(Xw.test(n)){const e=Xw.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},JH=n=>{const{theme:e,classGroups:t}=n,i={nextPart:new Map,validators:[]};for(const a in t)K1(t[a],i,a,e);return i},K1=(n,e,t,i)=>{n.forEach(a=>{if(typeof a=="string"){const s=a===""?e:jw(e,a);s.classGroupId=t;return}if(typeof a=="function"){if(ZH(a)){K1(a(i),e,t,i);return}e.validators.push({validator:a,classGroupId:t});return}Object.entries(a).forEach(([s,o])=>{K1(o,jw(e,s),t,i)})})},jw=(n,e)=>{let t=n;return e.split(uE).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},ZH=n=>n.isThemeGetter,QH=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const a=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,i=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=i.get(s))!==void 0)return a(s,o),o},set(s,o){t.has(s)?t.set(s,o):a(s,o)}}},W1="!",J1=":",$H=J1.length,eG=n=>{const{prefix:e,experimentalParseClassName:t}=n;let i=a=>{const s=[];let o=0,c=0,f=0,d;for(let A=0;A<a.length;A++){let T=a[A];if(o===0&&c===0){if(T===J1){s.push(a.slice(f,A)),f=A+$H;continue}if(T==="/"){d=A;continue}}T==="["?o++:T==="]"?o--:T==="("?c++:T===")"&&c--}const m=s.length===0?a:a.substring(f),g=tG(m),y=g!==m,_=d&&d>f?d-f:void 0;return{modifiers:s,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:_}};if(e){const a=e+J1,s=i;i=o=>o.startsWith(a)?s(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(t){const a=i;i=s=>t({className:s,parseClassName:a})}return i},tG=n=>n.endsWith(W1)?n.substring(0,n.length-1):n.startsWith(W1)?n.substring(1):n,nG=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const a=[];let s=[];return i.forEach(o=>{o[0]==="["||e[o]?(a.push(...s.sort(),o),s=[]):s.push(o)}),a.push(...s.sort()),a}},iG=n=>({cache:QH(n.cacheSize),parseClassName:eG(n),sortModifiers:nG(n),...KH(n)}),aG=/\s+/,sG=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:a,sortModifiers:s}=e,o=[],c=n.trim().split(aG);let f="";for(let d=c.length-1;d>=0;d-=1){const m=c[d],{isExternal:g,modifiers:y,hasImportantModifier:_,baseClassName:A,maybePostfixModifierPosition:T}=t(m);if(g){f=m+(f.length>0?" "+f:f);continue}let E=!!T,b=i(E?A.substring(0,T):A);if(!b){if(!E){f=m+(f.length>0?" "+f:f);continue}if(b=i(A),!b){f=m+(f.length>0?" "+f:f);continue}E=!1}const R=s(y).join(":"),D=_?R+W1:R,B=D+b;if(o.includes(B))continue;o.push(B);const U=a(b,E);for(let L=0;L<U.length;++L){const z=U[L];o.push(D+z)}f=m+(f.length>0?" "+f:f)}return f};function rG(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=b3(e))&&(i&&(i+=" "),i+=t);return i}const b3=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=b3(n[i]))&&(t&&(t+=" "),t+=e);return t};function oG(n,...e){let t,i,a,s=o;function o(f){const d=e.reduce((m,g)=>g(m),n());return t=iG(d),i=t.cache.get,a=t.cache.set,s=c,c(f)}function c(f){const d=i(f);if(d)return d;const m=sG(f,t);return a(f,m),m}return function(){return s(rG.apply(null,arguments))}}const Aa=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},A3=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,S3=/^\((?:(\w[\w-]*):)?(.+)\)$/i,lG=/^\d+\/\d+$/,cG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,hG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ld=n=>lG.test(n),Rn=n=>!!n&&!Number.isNaN(Number(n)),yu=n=>!!n&&Number.isInteger(Number(n)),aS=n=>n.endsWith("%")&&Rn(n.slice(0,-1)),ic=n=>cG.test(n),pG=()=>!0,mG=n=>uG.test(n)&&!fG.test(n),M3=()=>!1,gG=n=>hG.test(n),vG=n=>dG.test(n),yG=n=>!Lt(n)&&!It(n),xG=n=>Vp(n,C3,M3),Lt=n=>A3.test(n),Ff=n=>Vp(n,w3,mG),sS=n=>Vp(n,MG,Rn),Yw=n=>Vp(n,E3,M3),_G=n=>Vp(n,T3,vG),Uy=n=>Vp(n,R3,gG),It=n=>S3.test(n),mg=n=>kp(n,w3),bG=n=>kp(n,EG),qw=n=>kp(n,E3),AG=n=>kp(n,C3),SG=n=>kp(n,T3),Ly=n=>kp(n,R3,!0),Vp=(n,e,t)=>{const i=A3.exec(n);return i?i[1]?e(i[1]):t(i[2]):!1},kp=(n,e,t=!1)=>{const i=S3.exec(n);return i?i[1]?e(i[1]):t:!1},E3=n=>n==="position"||n==="percentage",T3=n=>n==="image"||n==="url",C3=n=>n==="length"||n==="size"||n==="bg-size",w3=n=>n==="length",MG=n=>n==="number",EG=n=>n==="family-name",R3=n=>n==="shadow",TG=()=>{const n=Aa("color"),e=Aa("font"),t=Aa("text"),i=Aa("font-weight"),a=Aa("tracking"),s=Aa("leading"),o=Aa("breakpoint"),c=Aa("container"),f=Aa("spacing"),d=Aa("radius"),m=Aa("shadow"),g=Aa("inset-shadow"),y=Aa("text-shadow"),_=Aa("drop-shadow"),A=Aa("blur"),T=Aa("perspective"),E=Aa("aspect"),b=Aa("ease"),R=Aa("animate"),D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],U=()=>[...B(),It,Lt],L=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto","contain","none"],I=()=>[It,Lt,f],O=()=>[Ld,"full","auto",...I()],P=()=>[yu,"none","subgrid",It,Lt],Y=()=>["auto",{span:["full",yu,It,Lt]},yu,It,Lt],ie=()=>[yu,"auto",It,Lt],se=()=>["auto","min","max","fr",It,Lt],ue=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],me=()=>["start","end","center","stretch","center-safe","end-safe"],H=()=>["auto",...I()],W=()=>[Ld,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],q=()=>[n,It,Lt],ge=()=>[...B(),qw,Yw,{position:[It,Lt]}],j=()=>["no-repeat",{repeat:["","x","y","space","round"]}],fe=()=>["auto","cover","contain",AG,xG,{size:[It,Lt]}],_e=()=>[aS,mg,Ff],Ae=()=>["","none","full",d,It,Lt],De=()=>["",Rn,mg,Ff],ot=()=>["solid","dashed","dotted","double"],ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ne=()=>[Rn,aS,qw,Yw],Qe=()=>["","none",A,It,Lt],bt=()=>["none",Rn,It,Lt],ct=()=>["none",Rn,It,Lt],zt=()=>[Rn,It,Lt],Xt=()=>[Ld,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ic],breakpoint:[ic],color:[pG],container:[ic],"drop-shadow":[ic],ease:["in","out","in-out"],font:[yG],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ic],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ic],shadow:[ic],spacing:["px",Rn],text:[ic],"text-shadow":[ic],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ld,Lt,It,E]}],container:["container"],columns:[{columns:[Rn,Lt,It,c]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:U()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[yu,"auto",It,Lt]}],basis:[{basis:[Ld,"full","auto",c,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Rn,Ld,"auto","initial","none",Lt]}],grow:[{grow:["",Rn,It,Lt]}],shrink:[{shrink:["",Rn,It,Lt]}],order:[{order:[yu,"first","last","none",It,Lt]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":se()}],"auto-rows":[{"auto-rows":se()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...ue(),"normal"]}],"justify-items":[{"justify-items":[...me(),"normal"]}],"justify-self":[{"justify-self":["auto",...me()]}],"align-content":[{content:["normal",...ue()]}],"align-items":[{items:[...me(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...me(),{baseline:["","last"]}]}],"place-content":[{"place-content":ue()}],"place-items":[{"place-items":[...me(),"baseline"]}],"place-self":[{"place-self":["auto",...me()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:H()}],mx:[{mx:H()}],my:[{my:H()}],ms:[{ms:H()}],me:[{me:H()}],mt:[{mt:H()}],mr:[{mr:H()}],mb:[{mb:H()}],ml:[{ml:H()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:W()}],w:[{w:[c,"screen",...W()]}],"min-w":[{"min-w":[c,"screen","none",...W()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[o]},...W()]}],h:[{h:["screen","lh",...W()]}],"min-h":[{"min-h":["screen","lh","none",...W()]}],"max-h":[{"max-h":["screen","lh",...W()]}],"font-size":[{text:["base",t,mg,Ff]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,It,sS]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",aS,Lt]}],"font-family":[{font:[bG,Lt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,It,Lt]}],"line-clamp":[{"line-clamp":[Rn,"none",It,sS]}],leading:[{leading:[s,...I()]}],"list-image":[{"list-image":["none",It,Lt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",It,Lt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ot(),"wavy"]}],"text-decoration-thickness":[{decoration:[Rn,"from-font","auto",It,Ff]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[Rn,"auto",It,Lt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",It,Lt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",It,Lt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ge()}],"bg-repeat":[{bg:j()}],"bg-size":[{bg:fe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},yu,It,Lt],radial:["",It,Lt],conic:[yu,It,Lt]},SG,_G]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:_e()}],"gradient-via-pos":[{via:_e()}],"gradient-to-pos":[{to:_e()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:Ae()}],"rounded-s":[{"rounded-s":Ae()}],"rounded-e":[{"rounded-e":Ae()}],"rounded-t":[{"rounded-t":Ae()}],"rounded-r":[{"rounded-r":Ae()}],"rounded-b":[{"rounded-b":Ae()}],"rounded-l":[{"rounded-l":Ae()}],"rounded-ss":[{"rounded-ss":Ae()}],"rounded-se":[{"rounded-se":Ae()}],"rounded-ee":[{"rounded-ee":Ae()}],"rounded-es":[{"rounded-es":Ae()}],"rounded-tl":[{"rounded-tl":Ae()}],"rounded-tr":[{"rounded-tr":Ae()}],"rounded-br":[{"rounded-br":Ae()}],"rounded-bl":[{"rounded-bl":Ae()}],"border-w":[{border:De()}],"border-w-x":[{"border-x":De()}],"border-w-y":[{"border-y":De()}],"border-w-s":[{"border-s":De()}],"border-w-e":[{"border-e":De()}],"border-w-t":[{"border-t":De()}],"border-w-r":[{"border-r":De()}],"border-w-b":[{"border-b":De()}],"border-w-l":[{"border-l":De()}],"divide-x":[{"divide-x":De()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":De()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ot(),"hidden","none"]}],"divide-style":[{divide:[...ot(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...ot(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Rn,It,Lt]}],"outline-w":[{outline:["",Rn,mg,Ff]}],"outline-color":[{outline:q()}],shadow:[{shadow:["","none",m,Ly,Uy]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",g,Ly,Uy]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:De()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[Rn,Ff]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":De()}],"inset-ring-color":[{"inset-ring":q()}],"text-shadow":[{"text-shadow":["none",y,Ly,Uy]}],"text-shadow-color":[{"text-shadow":q()}],opacity:[{opacity:[Rn,It,Lt]}],"mix-blend":[{"mix-blend":[...ve(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ve()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Rn]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ne()}],"mask-image-linear-from-color":[{"mask-linear-from":q()}],"mask-image-linear-to-color":[{"mask-linear-to":q()}],"mask-image-t-from-pos":[{"mask-t-from":Ne()}],"mask-image-t-to-pos":[{"mask-t-to":Ne()}],"mask-image-t-from-color":[{"mask-t-from":q()}],"mask-image-t-to-color":[{"mask-t-to":q()}],"mask-image-r-from-pos":[{"mask-r-from":Ne()}],"mask-image-r-to-pos":[{"mask-r-to":Ne()}],"mask-image-r-from-color":[{"mask-r-from":q()}],"mask-image-r-to-color":[{"mask-r-to":q()}],"mask-image-b-from-pos":[{"mask-b-from":Ne()}],"mask-image-b-to-pos":[{"mask-b-to":Ne()}],"mask-image-b-from-color":[{"mask-b-from":q()}],"mask-image-b-to-color":[{"mask-b-to":q()}],"mask-image-l-from-pos":[{"mask-l-from":Ne()}],"mask-image-l-to-pos":[{"mask-l-to":Ne()}],"mask-image-l-from-color":[{"mask-l-from":q()}],"mask-image-l-to-color":[{"mask-l-to":q()}],"mask-image-x-from-pos":[{"mask-x-from":Ne()}],"mask-image-x-to-pos":[{"mask-x-to":Ne()}],"mask-image-x-from-color":[{"mask-x-from":q()}],"mask-image-x-to-color":[{"mask-x-to":q()}],"mask-image-y-from-pos":[{"mask-y-from":Ne()}],"mask-image-y-to-pos":[{"mask-y-to":Ne()}],"mask-image-y-from-color":[{"mask-y-from":q()}],"mask-image-y-to-color":[{"mask-y-to":q()}],"mask-image-radial":[{"mask-radial":[It,Lt]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ne()}],"mask-image-radial-from-color":[{"mask-radial-from":q()}],"mask-image-radial-to-color":[{"mask-radial-to":q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":B()}],"mask-image-conic-pos":[{"mask-conic":[Rn]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ne()}],"mask-image-conic-from-color":[{"mask-conic-from":q()}],"mask-image-conic-to-color":[{"mask-conic-to":q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ge()}],"mask-repeat":[{mask:j()}],"mask-size":[{mask:fe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",It,Lt]}],filter:[{filter:["","none",It,Lt]}],blur:[{blur:Qe()}],brightness:[{brightness:[Rn,It,Lt]}],contrast:[{contrast:[Rn,It,Lt]}],"drop-shadow":[{"drop-shadow":["","none",_,Ly,Uy]}],"drop-shadow-color":[{"drop-shadow":q()}],grayscale:[{grayscale:["",Rn,It,Lt]}],"hue-rotate":[{"hue-rotate":[Rn,It,Lt]}],invert:[{invert:["",Rn,It,Lt]}],saturate:[{saturate:[Rn,It,Lt]}],sepia:[{sepia:["",Rn,It,Lt]}],"backdrop-filter":[{"backdrop-filter":["","none",It,Lt]}],"backdrop-blur":[{"backdrop-blur":Qe()}],"backdrop-brightness":[{"backdrop-brightness":[Rn,It,Lt]}],"backdrop-contrast":[{"backdrop-contrast":[Rn,It,Lt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Rn,It,Lt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Rn,It,Lt]}],"backdrop-invert":[{"backdrop-invert":["",Rn,It,Lt]}],"backdrop-opacity":[{"backdrop-opacity":[Rn,It,Lt]}],"backdrop-saturate":[{"backdrop-saturate":[Rn,It,Lt]}],"backdrop-sepia":[{"backdrop-sepia":["",Rn,It,Lt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",It,Lt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Rn,"initial",It,Lt]}],ease:[{ease:["linear","initial",b,It,Lt]}],delay:[{delay:[Rn,It,Lt]}],animate:[{animate:["none",R,It,Lt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[T,It,Lt]}],"perspective-origin":[{"perspective-origin":U()}],rotate:[{rotate:bt()}],"rotate-x":[{"rotate-x":bt()}],"rotate-y":[{"rotate-y":bt()}],"rotate-z":[{"rotate-z":bt()}],scale:[{scale:ct()}],"scale-x":[{"scale-x":ct()}],"scale-y":[{"scale-y":ct()}],"scale-z":[{"scale-z":ct()}],"scale-3d":["scale-3d"],skew:[{skew:zt()}],"skew-x":[{"skew-x":zt()}],"skew-y":[{"skew-y":zt()}],transform:[{transform:[It,Lt,"","none","gpu","cpu"]}],"transform-origin":[{origin:U()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Xt()}],"translate-x":[{"translate-x":Xt()}],"translate-y":[{"translate-y":Xt()}],"translate-z":[{"translate-z":Xt()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",It,Lt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",It,Lt]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[Rn,mg,Ff,sS]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},CG=oG(TG);function jr(...n){return CG(qH(n))}const wG=({className:n,children:e})=>ee.jsx("div",{className:jr("grid md:auto-rows-[18rem] grid-cols-1 md:grid-cols-3 gap-4 max-w-7xl mx-auto ",n),children:e}),RG=({className:n,title:e,description:t,header:i})=>{const a=s=>{const o=s.currentTarget.getBoundingClientRect(),c=s.clientX-o.left,f=s.clientY-o.top;s.currentTarget.style.setProperty("--mouse-x",`${c}px`),s.currentTarget.style.setProperty("--mouse-y",`${f}px`)};return ee.jsxs("div",{className:jr("row-span-1 rounded-xl group/bento hover:shadow-xl transition duration-200 shadow-input dark:shadow-none p-4 dark:bg-black dark:border-white/[0.2] bg-white border border-transparent justify-between flex flex-col space-y-4 h-full","relative overflow-hidden",n),onMouseMove:a,style:{"--mouse-x":"0px","--mouse-y":"0px"},children:[ee.jsx("div",{className:`\r
          pointer-events-none \r
          absolute \r
          -inset-px \r
          rounded-xl \r
          opacity-0 \r
          transition \r
          duration-300 \r
          group-hover/bento:opacity-100\r
        `,style:{background:"radial-gradient(400px circle at var(--mouse-x) var(--mouse-y), rgba(0, 224, 184, 0.15), transparent 80%)"}}),ee.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[ee.jsx("div",{className:"w-full h-36 rounded-xl overflow-hidden",children:i}),ee.jsxs("div",{className:"group-hover/bento:translate-x-2 transition duration-200 mt-auto",children:[ee.jsx("div",{className:"font-sans font-bold text-neutral-600 dark:text-neutral-200 mb-2 mt-2",children:e}),ee.jsx("div",{className:"font-sans font-normal text-neutral-600 text-xs dark:text-neutral-300",children:t})]})]})]})},DG="/Interface-Foundryy/assets/3d-efektli-card-sayfasi-CS-Lg6HD.png",BG="/Interface-Foundryy/assets/product-configurator-page-DkTK4VPX.png",NG="/Interface-Foundryy/assets/ai-page-DLEeAPxI.png",OG="/Interface-Foundryy/assets/shopping-cart-page-C51r4n80.png",UG="/Interface-Foundryy/assets/kanban-sayfasi-D6pjxmhV.png",LG=[{title:"3D Efektli Kart",description:"Fare hareketini takip eden derinlik (parallax) etkili kartlar.",header:ee.jsx("img",{src:DG,alt:"3D Kart nizleme",className:"object-cover w-full h-full rounded-xl"}),className:"md:col-span-1",link:"/component/3d-card"},{title:"Dinamik Alveri Sepeti",description:"React Context ve Framer Motion ile akc bir sepet deneyimi.",header:ee.jsx("img",{src:OG,alt:"Alveri Sepeti nizleme",className:"object-cover w-full h-full rounded-xl"}),className:"md:col-span-1",link:"/component/shopping-cart"},{title:"Dinamik Kanban Panosu",description:"Grevleri ve kolonlar srkleyip brakarak yeniden sralayn.",header:ee.jsx("img",{src:UG,alt:"Kanban Panosu nizleme",className:"object-cover w-full h-full rounded-xl"}),className:"md:col-span-1",link:"/component/kanban-board"},{title:"nteraktif rn Konfigratr",description:"React Three Fiber ile 3D modelin renklerini canl deitirin.",header:ee.jsx("img",{src:BG,alt:"rn Konfigratr nizleme",className:"object-cover w-full h-full rounded-xl"}),className:"md:col-span-2",link:"/component/product-configurator"},{title:"AI Destekli Arama",description:"Google Gemini API'si ile doal dil anlamsal arama.",header:ee.jsx("img",{src:NG,alt:"AI Arama nizleme",className:"object-cover w-full h-full rounded-xl"}),className:"md:col-span-1",link:"/component/ai-search"}];function IG(){return ee.jsxs("div",{className:"min-h-screen p-4 overflow-hidden bg-black md:p-8",children:[ee.jsxs(Ns.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeInOut"},className:"mb-12 text-center",children:[ee.jsx("h1",{className:"py-4 text-4xl font-bold text-transparent md:text-6xl bg-clip-text bg-gradient-to-b from-neutral-50 to-neutral-400",children:"Interface Foundry"}),ee.jsx("p",{className:"max-w-2xl mx-auto mt-2 text-lg text-neutral-300",children:"Fikirlerin interaktif deneyimlere dnt yer. Bu benim yaayan bileen ktphanem."})]}),ee.jsx(wG,{children:LG.map((n,e)=>ee.jsx(Tc,{to:n.link,className:n.className,style:{pointerEvents:n.link==="#"?"none":"auto",cursor:n.link==="#"?"default":"pointer"},children:ee.jsx(RG,{title:n.title,description:n.description,header:n.header,className:"h-full"})},e))})]})}var D3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Kw=ti.createContext&&ti.createContext(D3),PG=["attr","size","title"];function FG(n,e){if(n==null)return{};var t=zG(n,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function zG(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function n_(){return n_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},n_.apply(this,arguments)}function Ww(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function i_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ww(Object(t),!0).forEach(function(i){HG(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ww(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function HG(n,e,t){return e=GG(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GG(n){var e=VG(n,"string");return typeof e=="symbol"?e:e+""}function VG(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function B3(n){return n&&n.map((e,t)=>ti.createElement(e.tag,i_({key:t},e.attr),B3(e.child)))}function Wr(n){return e=>ti.createElement(kG,n_({attr:i_({},n.attr)},e),B3(n.child))}function kG(n){var e=t=>{var{attr:i,size:a,title:s}=n,o=FG(n,PG),c=a||t.size||"1em",f;return t.className&&(f=t.className),n.className&&(f=(f?f+" ":"")+n.className),ti.createElement("svg",n_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:f,style:i_(i_({color:n.color||t.color},t.style),n.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&ti.createElement("title",null,s),n.children)};return Kw!==void 0?ti.createElement(Kw.Consumer,null,t=>e(t)):e(D3)}function N0(n){return Wr({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.71.243l-.12 2.71a.18.18 0 00.29.15l1.06-.8.9.7a.18.18 0 00.28-.14l-.1-2.76 1.33-.1a1.2 1.2 0 011.279 1.2v21.596a1.2 1.2 0 01-1.26 1.2l-16.096-.72a1.2 1.2 0 01-1.15-1.16l-.75-19.797a1.2 1.2 0 011.13-1.27L16.7.222zM13.64 9.3c0 .47 3.16.24 3.59-.08 0-3.2-1.72-4.89-4.859-4.89-3.15 0-4.899 1.72-4.899 4.29 0 4.45 5.999 4.53 5.999 6.959 0 .7-.32 1.1-1.05 1.1-.96 0-1.35-.49-1.3-2.16 0-.36-3.649-.48-3.769 0-.27 4.03 2.23 5.2 5.099 5.2 2.79 0 4.969-1.49 4.969-4.18 0-4.77-6.099-4.64-6.099-6.999 0-.97.72-1.1 1.13-1.1.45 0 1.25.07 1.19 1.87z"},child:[]}]})(n)}const XG=({tabs:n,containerClassName:e,activeTabClassName:t,tabClassName:i,contentClassName:a})=>{const[s,o]=G.useState(n[0]),[c,f]=G.useState(n),d=m=>{const g=[...n],y=g.splice(m,1);g.unshift(y[0]),f(g),o(g[0])};return ee.jsxs(ee.Fragment,{children:[ee.jsx("div",{className:jr("relative flex flex-row items-center justify-center [perspective:1000px] overflow-auto sm:overflow-visible no-visible-scrollbar max-w-full w-full",e),children:n.map((m,g)=>ee.jsxs("button",{onClick:()=>{d(g)},className:jr("relative px-4 py-2 rounded-full",i),style:{transformStyle:"preserve-3d"},children:[s.value===m.value&&ee.jsx(Ns.div,{layoutId:"clickedbutton",transition:{type:"spring",bounce:.3,duration:.6},className:jr("absolute inset-0 bg-gray-800 dark:bg-zinc-800 rounded-full",t)}),ee.jsx("span",{className:"relative block text-white",children:m.title})]},m.title))}),ee.jsx("div",{className:jr("mt-16",a),children:s.content})]})},N3=G.createContext(void 0),fE=({children:n,className:e,containerClassName:t})=>{const i=G.useRef(null),a=t_(0),s=t_(0),o=kw(a,{stiffness:300,damping:30}),c=kw(s,{stiffness:300,damping:30}),f=l0(c,[-.5,.5],["17.5deg","-17.5deg"]),d=l0(o,[-.5,.5],["-17.5deg","17.5deg"]),m=_=>{if(!i.current)return;const{left:A,top:T,width:E,height:b}=i.current.getBoundingClientRect(),R=(_.clientX-A)/E-.5,D=(_.clientY-T)/b-.5;a.set(R),s.set(D)},g=()=>{a.set(0),s.set(0)},y={rotateX:f,rotateY:d};return ee.jsx(N3.Provider,{value:y,children:ee.jsx(Ns.div,{ref:i,onMouseMove:m,onMouseLeave:g,style:{perspective:"1000px",rotateX:f,rotateY:d},className:jr("flex items-center justify-center",t),children:ee.jsx("div",{style:{transformStyle:"preserve-3d"},className:jr("relative flex items-center justify-center",e),children:n})})})},hE=({children:n,className:e})=>ee.jsx("div",{className:jr("h-96 w-96 [transform-style:preserve-3d] [&>*]:[transform-style:preserve-3d]",e),children:n}),Zs=({as:n="div",children:e,className:t,translateX:i=0,translateY:a=0,translateZ:s=0,rotateX:o=0,rotateY:c=0,rotateZ:f=0,...d})=>{const{rotateX:m,rotateY:g}=G.useContext(N3),y=l0(g,[-10,10],[i,-i]),_=l0(m,[-10,10],[-a,a]),A=Ns[n];return ee.jsx(A,{style:{translateX:y,translateY:_,translateZ:s,rotateX:o,rotateY:c,rotateZ:f},transition:{type:"spring",stiffness:400,damping:20},className:jr(t),...d,children:e})};function jG(){return ee.jsx(fE,{className:"inter-var",children:ee.jsxs(hE,{className:"relative group/card dark:hover:shadow-2xl dark:hover:shadow-emerald-500/[0.1] dark:bg-black dark:border-white/[0.2] border-black/[0.1] w-auto sm:w-[30rem] h-auto rounded-xl p-6 border",children:[ee.jsx(Zs,{translateZ:"50",className:"text-xl font-bold text-neutral-600 dark:text-white",children:"Component Genesis"}),ee.jsx(Zs,{as:"p",translateZ:"60",className:"text-neutral-500 text-sm max-w-sm mt-2 dark:text-neutral-300",children:"Bu kartn zerine gelin ve etkileimli 3D efektini grn. Bileenlerimi burada sergiliyorum!"}),ee.jsx(Zs,{translateZ:"100",className:"w-full mt-4",children:ee.jsx("img",{src:"https://images.unsplash.com/photo-1710831784406-bcf54889c3fb?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",height:"1000",width:"1000",className:"h-60 w-full object-cover rounded-xl group-hover/card:shadow-xl",alt:"thumbnail"})}),ee.jsxs("div",{className:"flex justify-between items-center mt-20",children:[ee.jsx(Zs,{translateZ:20,as:"button",className:"px-4 py-2 rounded-xl text-xs font-normal dark:text-white",children:"Hemen Deneyin "}),ee.jsx(Zs,{translateZ:20,as:"button",className:"px-4 py-2 rounded-xl bg-black dark:bg-white dark:text-black text-white text-xs font-bold",children:"Daha Fazla Bilgi"})]})]})})}function YG(n){return Wr({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function qG(n){return Wr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(n)}function KG(n){return Wr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(n)}function Jw(n){return Wr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M239.1 6.3l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V129.3c0-20-12.4-37.9-31.1-44.9l-208-78C262 2.2 250 2.2 239.1 6.3zM256 68.4l192 72v1.1l-192 78-192-78v-1.1l192-72zm32 356V275.5l160-65v133.9l-160 80z"},child:[]}]})(n)}function WG(n){return Wr({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function JG(n){return Wr({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(n)}function ZG(n){return Wr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(n)}function O3(n){return Wr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}function U3(n){return Wr({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(n)}function QG(n){return Wr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(n)}function Zw(n){return Wr({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}function $G(){return ee.jsx(fE,{className:"inter-var",children:ee.jsxs(hE,{className:"relative group/card dark:hover:shadow-2xl dark:hover:shadow-cyan-500/[0.1] dark:bg-black dark:border-white/[0.2] border-black/[0.1] w-auto sm:w-[30rem] h-auto rounded-xl p-6 border",children:[ee.jsx(Zs,{translateZ:"50",className:"text-xl font-bold text-neutral-600 dark:text-white",children:"Jane Doe"}),ee.jsx(Zs,{as:"p",translateZ:"60",className:"text-neutral-500 text-sm max-w-sm mt-1 dark:text-neutral-400",children:"Frontend Gelitirici & UI Merakls"}),ee.jsx(Zs,{translateZ:"100",className:"w-full mt-4",children:ee.jsx("img",{src:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=1888&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",height:"1000",width:"1000",className:"h-60 w-full object-cover rounded-xl group-hover/card:shadow-xl",alt:"Profil fotoraf"})}),ee.jsxs("div",{className:"flex justify-between items-center mt-20",children:[ee.jsxs(Zs,{translateZ:20,className:"flex space-x-4",children:[ee.jsx("a",{href:"#",title:"GitHub",children:ee.jsx(YG,{className:"text-neutral-400 hover:text-white transition-colors text-2xl"})}),ee.jsx("a",{href:"#",title:"LinkedIn",children:ee.jsx(qG,{className:"text-neutral-400 hover:text-white transition-colors text-2xl"})}),ee.jsx("a",{href:"#",title:"Twitter",children:ee.jsx(KG,{className:"text-neutral-400 hover:text-white transition-colors text-2xl"})})]}),ee.jsx(Zs,{translateZ:20,as:"button",className:"px-4 py-2 rounded-xl bg-black dark:bg-white dark:text-black text-white text-xs font-bold",children:"letiime Ge"})]})]})})}function e6(){return ee.jsx(fE,{className:"inter-var",children:ee.jsxs(hE,{className:"relative group/card dark:hover:shadow-2xl dark:hover:shadow-violet-500/[0.1] dark:bg-black dark:border-white/[0.2] border-black/[0.1] w-auto sm:w-[30rem] h-auto rounded-xl p-6 border",children:[ee.jsx(Zs,{translateZ:"80",className:"w-full",children:ee.jsx("img",{src:"https://images.unsplash.com/photo-1507238691740-187a5b1d37b8?q=80&w=1955&auto=format&fit=crop&ixlib-rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",height:"1000",width:"1000",className:"h-72 w-full object-cover rounded-xl group-hover/card:shadow-xl",alt:"Albm kapa"})}),ee.jsxs("div",{className:"mt-8",children:[ee.jsx(Zs,{translateZ:"40",className:"text-xl font-bold text-neutral-600 dark:text-white",children:"Cyber Dreams"}),ee.jsx(Zs,{as:"p",translateZ:"50",className:"text-neutral-500 text-sm max-w-sm mt-1 dark:text-neutral-400",children:"Synthwave Collective"})]}),ee.jsx("div",{className:"flex justify-end items-center mt-10",children:ee.jsx(Zs,{translateZ:60,as:"button",className:"px-6 py-2 rounded-xl bg-gradient-to-br from-violet-500 to-purple-600 text-white text-sm font-bold",children:"imdi Dinle"})})]})})}function t6(){const n="/Interface-Foundryy/storybook/?path=/docs/ui-bileenleri-3d-kart--docs",e=[{title:"3D Kart (Varsaylan)",value:"default-3d-card",content:ee.jsx("div",{className:"w-full h-full relative flex items-center justify-center rounded-2xl p-4 md:p-10 bg-gradient-to-br from-gray-800 to-gray-900",children:ee.jsx(jG,{})})},{title:"3D Kart (Profil)",value:"profile-card",content:ee.jsx("div",{className:"w-full h-full relative flex items-center justify-center rounded-2xl p-4 md:p-10 bg-gradient-to-br from-gray-800 to-gray-900",children:ee.jsx($G,{})})},{title:"3D Kart (Albm)",value:"album-card",content:ee.jsx("div",{className:"w-full h-full relative flex items-center justify-center rounded-2xl p-4 md:p-10 bg-gradient-to-br from-gray-800 to-gray-900",children:ee.jsx(e6,{})})}];return ee.jsxs("div",{className:"relative min-h-screen w-full bg-black flex flex-col items-center justify-center p-4 py-24 sm:py-32 overflow-x-hidden",children:[ee.jsx(Tc,{to:"/",className:"absolute top-6 left-6 md:top-8 md:left-8 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors z-20",children:" Ana Sayfa"}),ee.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"absolute top-6 right-6 md:top-8 md:right-8 flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors z-20",title:"Storybook'u A",children:[ee.jsx(N0,{className:"text-pink-500 text-xl"}),ee.jsx("span",{className:"hidden sm:inline",children:"Storybook"})]}),ee.jsxs("div",{className:"text-center mb-12 px-4",children:[ee.jsx("h1",{className:"text-4xl font-bold text-white",children:"Bileen Vitrini"}),ee.jsx("p",{className:"text-neutral-400 mt-2",children:"Gelitirdiim bileenleri ve varyasyonlarn buradan inceleyebilirsiniz."})]}),ee.jsx("div",{className:"relative flex flex-col w-full max-w-5xl items-center justify-start",children:ee.jsx(XG,{tabs:e})})]})}var rS={exports:{}},ac={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function n6(){return Qw||(Qw=1,ac.ConcurrentRoot=1,ac.ContinuousEventPriority=8,ac.DefaultEventPriority=32,ac.DiscreteEventPriority=2,ac.IdleEventPriority=268435456,ac.LegacyRoot=0,ac.NoEventPriority=0),ac}var $w;function i6(){return $w||($w=1,rS.exports=n6()),rS.exports}var kx=i6();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const O0="180",nh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ih={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},L3=0,Z1=1,I3=2,a6=3,P3=0,db=1,Vg=2,wo=3,wl=0,Os=1,kr=2,Ml=0,yh=1,Q1=2,$1=3,eM=4,F3=5,Du=100,z3=101,H3=102,G3=103,V3=104,k3=200,X3=201,j3=202,Y3=203,a_=204,s_=205,q3=206,K3=207,W3=208,J3=209,Z3=210,Q3=211,$3=212,eN=213,tN=214,r_=0,o_=1,l_=2,Ah=3,c_=4,u_=5,f_=6,h_=7,U0=0,nN=1,iN=2,El=0,aN=1,sN=2,rN=3,dE=4,oN=5,lN=6,cN=7,tM="attached",uN="detached",Lu=300,Rl=301,Iu=302,bp=303,c0=304,Xp=306,Pu=1e3,aa=1001,Ap=1002,Ia=1003,pb=1004,s6=1004,ch=1005,r6=1005,ni=1006,pp=1007,o6=1007,Yr=1008,nM=1008,Us=1009,mb=1010,gb=1011,Sp=1012,L0=1013,Dl=1014,Vi=1015,La=1016,vb=1017,yb=1018,Mp=1020,pE=35902,mE=35899,gE=1021,vE=1022,sa=1023,Ep=1026,Tp=1027,I0=1028,P0=1029,yE=1030,xb=1031,l6=1032,_b=1033,kg=33776,Xg=33777,jg=33778,Yg=33779,d_=35840,p_=35841,m_=35842,g_=35843,v_=36196,y_=37492,x_=37496,__=37808,b_=37809,A_=37810,S_=37811,M_=37812,E_=37813,T_=37814,C_=37815,w_=37816,R_=37817,D_=37818,B_=37819,N_=37820,O_=37821,U_=36492,L_=36494,I_=36495,P_=36283,F_=36284,z_=36285,H_=36286,fN=2200,hN=2201,dN=2202,Cp=2300,wp=2301,Xx=2302,uh=2400,fh=2401,u0=2402,bb=2500,xE=2501,pN=0,_E=1,G_=2,mN=3200,gN=3201,c6=3202,u6=3203,Gu=0,vN=1,dc="",Wa="srgb",No="srgb-linear",f0="linear",di="srgb",f6=0,ah=7680,h6=7681,d6=7682,p6=7683,m6=34055,g6=34056,v6=5386,y6=512,x6=513,_6=514,b6=515,A6=516,S6=517,M6=518,iM=519,yN=512,xN=513,_N=514,bE=515,bN=516,AN=517,SN=518,MN=519,h0=35044,E6=35048,T6=35040,C6=35045,w6=35049,R6=35041,D6=35046,B6=35050,N6=35042,O6="100",aM="300 es",vr=2e3,Rp=2001,U6={COMPUTE:"compute",RENDER:"render"},L6={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},I6={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let Nl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const a=i[e];if(a!==void 0){const s=a.indexOf(t);s!==-1&&a.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const a=i.slice(0);for(let s=0,o=a.length;s<o;s++)a[s].call(this,e);e.target=null}}};const ls=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let eR=1234567;const xh=Math.PI/180,Dp=180/Math.PI;function yr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ls[n&255]+ls[n>>8&255]+ls[n>>16&255]+ls[n>>24&255]+"-"+ls[e&255]+ls[e>>8&255]+"-"+ls[e>>16&15|64]+ls[e>>24&255]+"-"+ls[t&63|128]+ls[t>>8&255]+"-"+ls[t>>16&255]+ls[t>>24&255]+ls[i&255]+ls[i>>8&255]+ls[i>>16&255]+ls[i>>24&255]).toLowerCase()}function rn(n,e,t){return Math.max(e,Math.min(t,n))}function AE(n,e){return(n%e+e)%e}function P6(n,e,t,i,a){return i+(n-e)*(a-i)/(t-e)}function F6(n,e,t){return n!==e?(t-n)/(e-n):0}function qg(n,e,t){return(1-t)*n+t*e}function z6(n,e,t,i){return qg(n,e,1-Math.exp(-t*i))}function H6(n,e=1){return e-Math.abs(AE(n,e*2)-e)}function G6(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function V6(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function k6(n,e){return n+Math.floor(Math.random()*(e-n+1))}function X6(n,e){return n+Math.random()*(e-n)}function j6(n){return n*(.5-Math.random())}function Y6(n){n!==void 0&&(eR=n);let e=eR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function q6(n){return n*xh}function K6(n){return n*Dp}function W6(n){return(n&n-1)===0&&n!==0}function J6(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Z6(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Q6(n,e,t,i,a){const s=Math.cos,o=Math.sin,c=s(t/2),f=o(t/2),d=s((e+i)/2),m=o((e+i)/2),g=s((e-i)/2),y=o((e-i)/2),_=s((i-e)/2),A=o((i-e)/2);switch(a){case"XYX":n.set(c*m,f*g,f*y,c*d);break;case"YZY":n.set(f*y,c*m,f*g,c*d);break;case"ZXZ":n.set(f*g,f*y,c*m,c*d);break;case"XZX":n.set(c*m,f*A,f*_,c*d);break;case"YXY":n.set(f*_,c*m,f*A,c*d);break;case"ZYZ":n.set(f*A,f*_,c*m,c*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function Ds(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function An(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const EN={DEG2RAD:xh,RAD2DEG:Dp,generateUUID:yr,clamp:rn,euclideanModulo:AE,mapLinear:P6,inverseLerp:F6,lerp:qg,damp:z6,pingpong:H6,smoothstep:G6,smootherstep:V6,randInt:k6,randFloat:X6,randFloatSpread:j6,seededRandom:Y6,degToRad:q6,radToDeg:K6,isPowerOfTwo:W6,ceilPowerOfTwo:J6,floorPowerOfTwo:Z6,setQuaternionFromProperEuler:Q6,normalize:An,denormalize:Ds};class Ze{constructor(e=0,t=0){Ze.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6],this.y=a[1]*t+a[4]*i+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=rn(this.x,e.x,t.x),this.y=rn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=rn(this.x,e,t),this.y=rn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(rn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(rn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),a=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*a+e.x,this.y=s*a+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Pa{constructor(e=0,t=0,i=0,a=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=a}static slerpFlat(e,t,i,a,s,o,c){let f=i[a+0],d=i[a+1],m=i[a+2],g=i[a+3];const y=s[o+0],_=s[o+1],A=s[o+2],T=s[o+3];if(c===0){e[t+0]=f,e[t+1]=d,e[t+2]=m,e[t+3]=g;return}if(c===1){e[t+0]=y,e[t+1]=_,e[t+2]=A,e[t+3]=T;return}if(g!==T||f!==y||d!==_||m!==A){let E=1-c;const b=f*y+d*_+m*A+g*T,R=b>=0?1:-1,D=1-b*b;if(D>Number.EPSILON){const U=Math.sqrt(D),L=Math.atan2(U,b*R);E=Math.sin(E*L)/U,c=Math.sin(c*L)/U}const B=c*R;if(f=f*E+y*B,d=d*E+_*B,m=m*E+A*B,g=g*E+T*B,E===1-c){const U=1/Math.sqrt(f*f+d*d+m*m+g*g);f*=U,d*=U,m*=U,g*=U}}e[t]=f,e[t+1]=d,e[t+2]=m,e[t+3]=g}static multiplyQuaternionsFlat(e,t,i,a,s,o){const c=i[a],f=i[a+1],d=i[a+2],m=i[a+3],g=s[o],y=s[o+1],_=s[o+2],A=s[o+3];return e[t]=c*A+m*g+f*_-d*y,e[t+1]=f*A+m*y+d*g-c*_,e[t+2]=d*A+m*_+c*y-f*g,e[t+3]=m*A-c*g-f*y-d*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,a){return this._x=e,this._y=t,this._z=i,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,a=e._y,s=e._z,o=e._order,c=Math.cos,f=Math.sin,d=c(i/2),m=c(a/2),g=c(s/2),y=f(i/2),_=f(a/2),A=f(s/2);switch(o){case"XYZ":this._x=y*m*g+d*_*A,this._y=d*_*g-y*m*A,this._z=d*m*A+y*_*g,this._w=d*m*g-y*_*A;break;case"YXZ":this._x=y*m*g+d*_*A,this._y=d*_*g-y*m*A,this._z=d*m*A-y*_*g,this._w=d*m*g+y*_*A;break;case"ZXY":this._x=y*m*g-d*_*A,this._y=d*_*g+y*m*A,this._z=d*m*A+y*_*g,this._w=d*m*g-y*_*A;break;case"ZYX":this._x=y*m*g-d*_*A,this._y=d*_*g+y*m*A,this._z=d*m*A-y*_*g,this._w=d*m*g+y*_*A;break;case"YZX":this._x=y*m*g+d*_*A,this._y=d*_*g+y*m*A,this._z=d*m*A-y*_*g,this._w=d*m*g-y*_*A;break;case"XZY":this._x=y*m*g-d*_*A,this._y=d*_*g-y*m*A,this._z=d*m*A+y*_*g,this._w=d*m*g+y*_*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,a=Math.sin(i);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],a=t[4],s=t[8],o=t[1],c=t[5],f=t[9],d=t[2],m=t[6],g=t[10],y=i+c+g;if(y>0){const _=.5/Math.sqrt(y+1);this._w=.25/_,this._x=(m-f)*_,this._y=(s-d)*_,this._z=(o-a)*_}else if(i>c&&i>g){const _=2*Math.sqrt(1+i-c-g);this._w=(m-f)/_,this._x=.25*_,this._y=(a+o)/_,this._z=(s+d)/_}else if(c>g){const _=2*Math.sqrt(1+c-i-g);this._w=(s-d)/_,this._x=(a+o)/_,this._y=.25*_,this._z=(f+m)/_}else{const _=2*Math.sqrt(1+g-i-c);this._w=(o-a)/_,this._x=(s+d)/_,this._y=(f+m)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(rn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const a=Math.min(1,t/i);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,a=e._y,s=e._z,o=e._w,c=t._x,f=t._y,d=t._z,m=t._w;return this._x=i*m+o*c+a*d-s*f,this._y=a*m+o*f+s*c-i*d,this._z=s*m+o*d+i*f-a*c,this._w=o*m-i*c-a*f-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,a=this._y,s=this._z,o=this._w;let c=o*e._w+i*e._x+a*e._y+s*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=o,this._x=i,this._y=a,this._z=s,this;const f=1-c*c;if(f<=Number.EPSILON){const _=1-t;return this._w=_*o+t*this._w,this._x=_*i+t*this._x,this._y=_*a+t*this._y,this._z=_*s+t*this._z,this.normalize(),this}const d=Math.sqrt(f),m=Math.atan2(d,c),g=Math.sin((1-t)*m)/d,y=Math.sin(t*m)/d;return this._w=o*g+this._w*y,this._x=i*g+this._x*y,this._y=a*g+this._y*y,this._z=s*g+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),a=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(a*Math.sin(e),a*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Q{constructor(e=0,t=0,i=0){Q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(tR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(tR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,a=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*a,this.y=s[1]*t+s[4]*i+s[7]*a,this.z=s[2]*t+s[5]*i+s[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*a+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*a+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*a+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*a+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,a=this.z,s=e.x,o=e.y,c=e.z,f=e.w,d=2*(o*a-c*i),m=2*(c*t-s*a),g=2*(s*i-o*t);return this.x=t+f*d+o*g-c*m,this.y=i+f*m+c*d-s*g,this.z=a+f*g+s*m-o*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,a=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*a,this.y=s[1]*t+s[5]*i+s[9]*a,this.z=s[2]*t+s[6]*i+s[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=rn(this.x,e.x,t.x),this.y=rn(this.y,e.y,t.y),this.z=rn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=rn(this.x,e,t),this.y=rn(this.y,e,t),this.z=rn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(rn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,a=e.y,s=e.z,o=t.x,c=t.y,f=t.z;return this.x=a*f-s*c,this.y=s*o-i*f,this.z=i*c-a*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return oS.copy(this).projectOnVector(e),this.sub(oS)}reflect(e){return this.sub(oS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(rn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,a=this.z-e.z;return t*t+i*i+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const a=Math.sin(t)*e;return this.x=a*Math.sin(i),this.y=Math.cos(t)*e,this.z=a*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=a,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const oS=new Q,tR=new Pa;class yn{constructor(e,t,i,a,s,o,c,f,d){yn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,a,s,o,c,f,d)}set(e,t,i,a,s,o,c,f,d){const m=this.elements;return m[0]=e,m[1]=a,m[2]=c,m[3]=t,m[4]=s,m[5]=f,m[6]=i,m[7]=o,m[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,s=this.elements,o=i[0],c=i[3],f=i[6],d=i[1],m=i[4],g=i[7],y=i[2],_=i[5],A=i[8],T=a[0],E=a[3],b=a[6],R=a[1],D=a[4],B=a[7],U=a[2],L=a[5],z=a[8];return s[0]=o*T+c*R+f*U,s[3]=o*E+c*D+f*L,s[6]=o*b+c*B+f*z,s[1]=d*T+m*R+g*U,s[4]=d*E+m*D+g*L,s[7]=d*b+m*B+g*z,s[2]=y*T+_*R+A*U,s[5]=y*E+_*D+A*L,s[8]=y*b+_*B+A*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],a=e[2],s=e[3],o=e[4],c=e[5],f=e[6],d=e[7],m=e[8];return t*o*m-t*c*d-i*s*m+i*c*f+a*s*d-a*o*f}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],s=e[3],o=e[4],c=e[5],f=e[6],d=e[7],m=e[8],g=m*o-c*d,y=c*f-m*s,_=d*s-o*f,A=t*g+i*y+a*_;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/A;return e[0]=g*T,e[1]=(a*d-m*i)*T,e[2]=(c*i-a*o)*T,e[3]=y*T,e[4]=(m*t-a*f)*T,e[5]=(a*s-c*t)*T,e[6]=_*T,e[7]=(i*f-d*t)*T,e[8]=(o*t-i*s)*T,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,a,s,o,c){const f=Math.cos(s),d=Math.sin(s);return this.set(i*f,i*d,-i*(f*o+d*c)+o+e,-a*d,a*f,-a*(-d*o+f*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(lS.makeScale(e,t)),this}rotate(e){return this.premultiply(lS.makeRotation(-e)),this}translate(e,t){return this.premultiply(lS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<9;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const lS=new yn;function TN(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const $6={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function fp(n,e){return new $6[n](e)}function d0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function CN(){const n=d0("canvas");return n.style.display="block",n}const nR={};function p0(n){n in nR||(nR[n]=!0,console.warn(n))}function e5(n,e,t){return new Promise(function(i,a){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:a();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}const iR=new yn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),aR=new yn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function t5(){const n={enabled:!0,workingColorSpace:No,spaces:{},convert:function(a,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===di&&(a.r=vc(a.r),a.g=vc(a.g),a.b=vc(a.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(a.applyMatrix3(this.spaces[s].toXYZ),a.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===di&&(a.r=mp(a.r),a.g=mp(a.g),a.b=mp(a.b))),a},workingToColorSpace:function(a,s){return this.convert(a,this.workingColorSpace,s)},colorSpaceToWorking:function(a,s){return this.convert(a,s,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===dc?f0:this.spaces[a].transfer},getToneMappingMode:function(a){return this.spaces[a].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(a,s=this.workingColorSpace){return a.fromArray(this.spaces[s].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,s,o){return a.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,s){return p0("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(a,s)},toWorkingColorSpace:function(a,s){return p0("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(a,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[No]:{primaries:e,whitePoint:i,transfer:f0,toXYZ:iR,fromXYZ:aR,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Wa},outputColorSpaceConfig:{drawingBufferColorSpace:Wa}},[Wa]:{primaries:e,whitePoint:i,transfer:di,toXYZ:iR,fromXYZ:aR,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Wa}}}),n}const zn=t5();function vc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function mp(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Id;class wN{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Id===void 0&&(Id=d0("canvas")),Id.width=e.width,Id.height=e.height;const a=Id.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),i=Id}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=d0("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const a=i.getImageData(0,0,e.width,e.height),s=a.data;for(let o=0;o<s.length;o++)s[o]=vc(s[o]/255)*255;return i.putImageData(a,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(vc(t[i]/255)*255):t[i]=vc(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let n5=0;class Bu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:n5++}),this.uuid=yr(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},a=this.data;if(a!==null){let s;if(Array.isArray(a)){s=[];for(let o=0,c=a.length;o<c;o++)a[o].isDataTexture?s.push(cS(a[o].image)):s.push(cS(a[o]))}else s=cS(a);i.url=s}return t||(e.images[this.uuid]=i),i}}function cS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?wN.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let i5=0;const uS=new Q;class ri extends Nl{constructor(e=ri.DEFAULT_IMAGE,t=ri.DEFAULT_MAPPING,i=aa,a=aa,s=ni,o=Yr,c=sa,f=Us,d=ri.DEFAULT_ANISOTROPY,m=dc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:i5++}),this.uuid=yr(),this.name="",this.source=new Bu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=a,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=f,this.offset=new Ze(0,0),this.repeat=new Ze(1,1),this.center=new Ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(uS).x}get height(){return this.source.getSize(uS).y}get depth(){return this.source.getSize(uS).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}a&&i&&a.isVector2&&i.isVector2||a&&i&&a.isVector3&&i.isVector3||a&&i&&a.isMatrix3&&i.isMatrix3?a.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Lu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Pu:e.x=e.x-Math.floor(e.x);break;case aa:e.x=e.x<0?0:1;break;case Ap:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Pu:e.y=e.y-Math.floor(e.y);break;case aa:e.y=e.y<0?0:1;break;case Ap:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ri.DEFAULT_IMAGE=null;ri.DEFAULT_MAPPING=Lu;ri.DEFAULT_ANISOTROPY=1;class jn{constructor(e=0,t=0,i=0,a=1){jn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,a){return this.x=e,this.y=t,this.z=i,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*a+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*a+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*a+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*a+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,a,s;const f=e.elements,d=f[0],m=f[4],g=f[8],y=f[1],_=f[5],A=f[9],T=f[2],E=f[6],b=f[10];if(Math.abs(m-y)<.01&&Math.abs(g-T)<.01&&Math.abs(A-E)<.01){if(Math.abs(m+y)<.1&&Math.abs(g+T)<.1&&Math.abs(A+E)<.1&&Math.abs(d+_+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(d+1)/2,B=(_+1)/2,U=(b+1)/2,L=(m+y)/4,z=(g+T)/4,I=(A+E)/4;return D>B&&D>U?D<.01?(i=0,a=.707106781,s=.707106781):(i=Math.sqrt(D),a=L/i,s=z/i):B>U?B<.01?(i=.707106781,a=0,s=.707106781):(a=Math.sqrt(B),i=L/a,s=I/a):U<.01?(i=.707106781,a=.707106781,s=0):(s=Math.sqrt(U),i=z/s,a=I/s),this.set(i,a,s,t),this}let R=Math.sqrt((E-A)*(E-A)+(g-T)*(g-T)+(y-m)*(y-m));return Math.abs(R)<.001&&(R=1),this.x=(E-A)/R,this.y=(g-T)/R,this.z=(y-m)/R,this.w=Math.acos((d+_+b-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=rn(this.x,e.x,t.x),this.y=rn(this.y,e.y,t.y),this.z=rn(this.z,e.z,t.z),this.w=rn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=rn(this.x,e,t),this.y=rn(this.y,e,t),this.z=rn(this.z,e,t),this.w=rn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(rn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class SE extends Nl{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ni,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new jn(0,0,e,t),this.scissorTest=!1,this.viewport=new jn(0,0,e,t);const a={width:e,height:t,depth:i.depth},s=new ri(a);this.textures=[];const o=i.count;for(let c=0;c<o;c++)this.textures[c]=s.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:ni,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let a=0,s=this.textures.length;a<s;a++)this.textures[a].image.width=e,this.textures[a].image.height=t,this.textures[a].image.depth=i,this.textures[a].isArrayTexture=this.textures[a].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const a=Object.assign({},e.textures[t].image);this.textures[t].source=new Bu(a)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Kr extends SE{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Ab extends ri{constructor(e=null,t=1,i=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=Ia,this.minFilter=Ia,this.wrapR=aa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class a5 extends Kr{constructor(e=1,t=1,i=1,a={}){super(e,t,a),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Ab(null,e,t,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class Sb extends ri{constructor(e=null,t=1,i=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=Ia,this.minFilter=Ia,this.wrapR=aa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class s5 extends Kr{constructor(e=1,t=1,i=1,a={}){super(e,t,a),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Sb(null,e,t,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class Ja{constructor(e=new Q(1/0,1/0,1/0),t=new Q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(So.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(So.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=So.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,c=s.count;o<c;o++)e.isMesh===!0?e.getVertexPosition(o,So):So.fromBufferAttribute(s,o),So.applyMatrix4(e.matrixWorld),this.expandByPoint(So);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Iy.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Iy.copy(i.boundingBox)),Iy.applyMatrix4(e.matrixWorld),this.union(Iy)}const a=e.children;for(let s=0,o=a.length;s<o;s++)this.expandByObject(a[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,So),So.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(gg),Py.subVectors(this.max,gg),Pd.subVectors(e.a,gg),Fd.subVectors(e.b,gg),zd.subVectors(e.c,gg),xu.subVectors(Fd,Pd),_u.subVectors(zd,Fd),zf.subVectors(Pd,zd);let t=[0,-xu.z,xu.y,0,-_u.z,_u.y,0,-zf.z,zf.y,xu.z,0,-xu.x,_u.z,0,-_u.x,zf.z,0,-zf.x,-xu.y,xu.x,0,-_u.y,_u.x,0,-zf.y,zf.x,0];return!fS(t,Pd,Fd,zd,Py)||(t=[1,0,0,0,1,0,0,0,1],!fS(t,Pd,Fd,zd,Py))?!1:(Fy.crossVectors(xu,_u),t=[Fy.x,Fy.y,Fy.z],fS(t,Pd,Fd,zd,Py))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,So).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(So).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(sc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),sc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),sc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),sc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),sc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),sc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),sc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),sc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(sc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const sc=[new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q],So=new Q,Iy=new Ja,Pd=new Q,Fd=new Q,zd=new Q,xu=new Q,_u=new Q,zf=new Q,gg=new Q,Py=new Q,Fy=new Q,Hf=new Q;function fS(n,e,t,i,a){for(let s=0,o=n.length-3;s<=o;s+=3){Hf.fromArray(n,s);const c=a.x*Math.abs(Hf.x)+a.y*Math.abs(Hf.y)+a.z*Math.abs(Hf.z),f=e.dot(Hf),d=t.dot(Hf),m=i.dot(Hf);if(Math.max(-Math.max(f,d,m),Math.min(f,d,m))>c)return!1}return!0}const r5=new Ja,vg=new Q,hS=new Q;class Fa{constructor(e=new Q,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):r5.setFromPoints(e).getCenter(i);let a=0;for(let s=0,o=e.length;s<o;s++)a=Math.max(a,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;vg.subVectors(e,this.center);const t=vg.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),a=(i-this.radius)*.5;this.center.addScaledVector(vg,a/i),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(hS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(vg.copy(e.center).add(hS)),this.expandByPoint(vg.copy(e.center).sub(hS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const rc=new Q,dS=new Q,zy=new Q,bu=new Q,pS=new Q,Hy=new Q,mS=new Q;class Dh{constructor(e=new Q,t=new Q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,rc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=rc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(rc.copy(this.origin).addScaledVector(this.direction,t),rc.distanceToSquared(e))}distanceSqToSegment(e,t,i,a){dS.copy(e).add(t).multiplyScalar(.5),zy.copy(t).sub(e).normalize(),bu.copy(this.origin).sub(dS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(zy),c=bu.dot(this.direction),f=-bu.dot(zy),d=bu.lengthSq(),m=Math.abs(1-o*o);let g,y,_,A;if(m>0)if(g=o*f-c,y=o*c-f,A=s*m,g>=0)if(y>=-A)if(y<=A){const T=1/m;g*=T,y*=T,_=g*(g+o*y+2*c)+y*(o*g+y+2*f)+d}else y=s,g=Math.max(0,-(o*y+c)),_=-g*g+y*(y+2*f)+d;else y=-s,g=Math.max(0,-(o*y+c)),_=-g*g+y*(y+2*f)+d;else y<=-A?(g=Math.max(0,-(-o*s+c)),y=g>0?-s:Math.min(Math.max(-s,-f),s),_=-g*g+y*(y+2*f)+d):y<=A?(g=0,y=Math.min(Math.max(-s,-f),s),_=y*(y+2*f)+d):(g=Math.max(0,-(o*s+c)),y=g>0?s:Math.min(Math.max(-s,-f),s),_=-g*g+y*(y+2*f)+d);else y=o>0?-s:s,g=Math.max(0,-(o*y+c)),_=-g*g+y*(y+2*f)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,g),a&&a.copy(dS).addScaledVector(zy,y),_}intersectSphere(e,t){rc.subVectors(e.center,this.origin);const i=rc.dot(this.direction),a=rc.dot(rc)-i*i,s=e.radius*e.radius;if(a>s)return null;const o=Math.sqrt(s-a),c=i-o,f=i+o;return f<0?null:c<0?this.at(f,t):this.at(c,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,a,s,o,c,f;const d=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,y=this.origin;return d>=0?(i=(e.min.x-y.x)*d,a=(e.max.x-y.x)*d):(i=(e.max.x-y.x)*d,a=(e.min.x-y.x)*d),m>=0?(s=(e.min.y-y.y)*m,o=(e.max.y-y.y)*m):(s=(e.max.y-y.y)*m,o=(e.min.y-y.y)*m),i>o||s>a||((s>i||isNaN(i))&&(i=s),(o<a||isNaN(a))&&(a=o),g>=0?(c=(e.min.z-y.z)*g,f=(e.max.z-y.z)*g):(c=(e.max.z-y.z)*g,f=(e.min.z-y.z)*g),i>f||c>a)||((c>i||i!==i)&&(i=c),(f<a||a!==a)&&(a=f),a<0)?null:this.at(i>=0?i:a,t)}intersectsBox(e){return this.intersectBox(e,rc)!==null}intersectTriangle(e,t,i,a,s){pS.subVectors(t,e),Hy.subVectors(i,e),mS.crossVectors(pS,Hy);let o=this.direction.dot(mS),c;if(o>0){if(a)return null;c=1}else if(o<0)c=-1,o=-o;else return null;bu.subVectors(this.origin,e);const f=c*this.direction.dot(Hy.crossVectors(bu,Hy));if(f<0)return null;const d=c*this.direction.dot(pS.cross(bu));if(d<0||f+d>o)return null;const m=-c*bu.dot(mS);return m<0?null:this.at(m/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class $t{constructor(e,t,i,a,s,o,c,f,d,m,g,y,_,A,T,E){$t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,a,s,o,c,f,d,m,g,y,_,A,T,E)}set(e,t,i,a,s,o,c,f,d,m,g,y,_,A,T,E){const b=this.elements;return b[0]=e,b[4]=t,b[8]=i,b[12]=a,b[1]=s,b[5]=o,b[9]=c,b[13]=f,b[2]=d,b[6]=m,b[10]=g,b[14]=y,b[3]=_,b[7]=A,b[11]=T,b[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new $t().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,a=1/Hd.setFromMatrixColumn(e,0).length(),s=1/Hd.setFromMatrixColumn(e,1).length(),o=1/Hd.setFromMatrixColumn(e,2).length();return t[0]=i[0]*a,t[1]=i[1]*a,t[2]=i[2]*a,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,a=e.y,s=e.z,o=Math.cos(i),c=Math.sin(i),f=Math.cos(a),d=Math.sin(a),m=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const y=o*m,_=o*g,A=c*m,T=c*g;t[0]=f*m,t[4]=-f*g,t[8]=d,t[1]=_+A*d,t[5]=y-T*d,t[9]=-c*f,t[2]=T-y*d,t[6]=A+_*d,t[10]=o*f}else if(e.order==="YXZ"){const y=f*m,_=f*g,A=d*m,T=d*g;t[0]=y+T*c,t[4]=A*c-_,t[8]=o*d,t[1]=o*g,t[5]=o*m,t[9]=-c,t[2]=_*c-A,t[6]=T+y*c,t[10]=o*f}else if(e.order==="ZXY"){const y=f*m,_=f*g,A=d*m,T=d*g;t[0]=y-T*c,t[4]=-o*g,t[8]=A+_*c,t[1]=_+A*c,t[5]=o*m,t[9]=T-y*c,t[2]=-o*d,t[6]=c,t[10]=o*f}else if(e.order==="ZYX"){const y=o*m,_=o*g,A=c*m,T=c*g;t[0]=f*m,t[4]=A*d-_,t[8]=y*d+T,t[1]=f*g,t[5]=T*d+y,t[9]=_*d-A,t[2]=-d,t[6]=c*f,t[10]=o*f}else if(e.order==="YZX"){const y=o*f,_=o*d,A=c*f,T=c*d;t[0]=f*m,t[4]=T-y*g,t[8]=A*g+_,t[1]=g,t[5]=o*m,t[9]=-c*m,t[2]=-d*m,t[6]=_*g+A,t[10]=y-T*g}else if(e.order==="XZY"){const y=o*f,_=o*d,A=c*f,T=c*d;t[0]=f*m,t[4]=-g,t[8]=d*m,t[1]=y*g+T,t[5]=o*m,t[9]=_*g-A,t[2]=A*g-_,t[6]=c*m,t[10]=T*g+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(o5,e,l5)}lookAt(e,t,i){const a=this.elements;return pr.subVectors(e,t),pr.lengthSq()===0&&(pr.z=1),pr.normalize(),Au.crossVectors(i,pr),Au.lengthSq()===0&&(Math.abs(i.z)===1?pr.x+=1e-4:pr.z+=1e-4,pr.normalize(),Au.crossVectors(i,pr)),Au.normalize(),Gy.crossVectors(pr,Au),a[0]=Au.x,a[4]=Gy.x,a[8]=pr.x,a[1]=Au.y,a[5]=Gy.y,a[9]=pr.y,a[2]=Au.z,a[6]=Gy.z,a[10]=pr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,s=this.elements,o=i[0],c=i[4],f=i[8],d=i[12],m=i[1],g=i[5],y=i[9],_=i[13],A=i[2],T=i[6],E=i[10],b=i[14],R=i[3],D=i[7],B=i[11],U=i[15],L=a[0],z=a[4],I=a[8],O=a[12],P=a[1],Y=a[5],ie=a[9],se=a[13],ue=a[2],me=a[6],H=a[10],W=a[14],q=a[3],ge=a[7],j=a[11],fe=a[15];return s[0]=o*L+c*P+f*ue+d*q,s[4]=o*z+c*Y+f*me+d*ge,s[8]=o*I+c*ie+f*H+d*j,s[12]=o*O+c*se+f*W+d*fe,s[1]=m*L+g*P+y*ue+_*q,s[5]=m*z+g*Y+y*me+_*ge,s[9]=m*I+g*ie+y*H+_*j,s[13]=m*O+g*se+y*W+_*fe,s[2]=A*L+T*P+E*ue+b*q,s[6]=A*z+T*Y+E*me+b*ge,s[10]=A*I+T*ie+E*H+b*j,s[14]=A*O+T*se+E*W+b*fe,s[3]=R*L+D*P+B*ue+U*q,s[7]=R*z+D*Y+B*me+U*ge,s[11]=R*I+D*ie+B*H+U*j,s[15]=R*O+D*se+B*W+U*fe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],a=e[8],s=e[12],o=e[1],c=e[5],f=e[9],d=e[13],m=e[2],g=e[6],y=e[10],_=e[14],A=e[3],T=e[7],E=e[11],b=e[15];return A*(+s*f*g-a*d*g-s*c*y+i*d*y+a*c*_-i*f*_)+T*(+t*f*_-t*d*y+s*o*y-a*o*_+a*d*m-s*f*m)+E*(+t*d*g-t*c*_-s*o*g+i*o*_+s*c*m-i*d*m)+b*(-a*c*m-t*f*g+t*c*y+a*o*g-i*o*y+i*f*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=t,a[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],s=e[3],o=e[4],c=e[5],f=e[6],d=e[7],m=e[8],g=e[9],y=e[10],_=e[11],A=e[12],T=e[13],E=e[14],b=e[15],R=g*E*d-T*y*d+T*f*_-c*E*_-g*f*b+c*y*b,D=A*y*d-m*E*d-A*f*_+o*E*_+m*f*b-o*y*b,B=m*T*d-A*g*d+A*c*_-o*T*_-m*c*b+o*g*b,U=A*g*f-m*T*f-A*c*y+o*T*y+m*c*E-o*g*E,L=t*R+i*D+a*B+s*U;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/L;return e[0]=R*z,e[1]=(T*y*s-g*E*s-T*a*_+i*E*_+g*a*b-i*y*b)*z,e[2]=(c*E*s-T*f*s+T*a*d-i*E*d-c*a*b+i*f*b)*z,e[3]=(g*f*s-c*y*s-g*a*d+i*y*d+c*a*_-i*f*_)*z,e[4]=D*z,e[5]=(m*E*s-A*y*s+A*a*_-t*E*_-m*a*b+t*y*b)*z,e[6]=(A*f*s-o*E*s-A*a*d+t*E*d+o*a*b-t*f*b)*z,e[7]=(o*y*s-m*f*s+m*a*d-t*y*d-o*a*_+t*f*_)*z,e[8]=B*z,e[9]=(A*g*s-m*T*s-A*i*_+t*T*_+m*i*b-t*g*b)*z,e[10]=(o*T*s-A*c*s+A*i*d-t*T*d-o*i*b+t*c*b)*z,e[11]=(m*c*s-o*g*s-m*i*d+t*g*d+o*i*_-t*c*_)*z,e[12]=U*z,e[13]=(m*T*a-A*g*a+A*i*y-t*T*y-m*i*E+t*g*E)*z,e[14]=(A*c*a-o*T*a-A*i*f+t*T*f+o*i*E-t*c*E)*z,e[15]=(o*g*a-m*c*a+m*i*f-t*g*f-o*i*y+t*c*y)*z,this}scale(e){const t=this.elements,i=e.x,a=e.y,s=e.z;return t[0]*=i,t[4]*=a,t[8]*=s,t[1]*=i,t[5]*=a,t[9]*=s,t[2]*=i,t[6]*=a,t[10]*=s,t[3]*=i,t[7]*=a,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,a))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),a=Math.sin(t),s=1-i,o=e.x,c=e.y,f=e.z,d=s*o,m=s*c;return this.set(d*o+i,d*c-a*f,d*f+a*c,0,d*c+a*f,m*c+i,m*f-a*o,0,d*f-a*c,m*f+a*o,s*f*f+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,a,s,o){return this.set(1,i,s,0,e,1,o,0,t,a,1,0,0,0,0,1),this}compose(e,t,i){const a=this.elements,s=t._x,o=t._y,c=t._z,f=t._w,d=s+s,m=o+o,g=c+c,y=s*d,_=s*m,A=s*g,T=o*m,E=o*g,b=c*g,R=f*d,D=f*m,B=f*g,U=i.x,L=i.y,z=i.z;return a[0]=(1-(T+b))*U,a[1]=(_+B)*U,a[2]=(A-D)*U,a[3]=0,a[4]=(_-B)*L,a[5]=(1-(y+b))*L,a[6]=(E+R)*L,a[7]=0,a[8]=(A+D)*z,a[9]=(E-R)*z,a[10]=(1-(y+T))*z,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,t,i){const a=this.elements;let s=Hd.set(a[0],a[1],a[2]).length();const o=Hd.set(a[4],a[5],a[6]).length(),c=Hd.set(a[8],a[9],a[10]).length();this.determinant()<0&&(s=-s),e.x=a[12],e.y=a[13],e.z=a[14],Mo.copy(this);const d=1/s,m=1/o,g=1/c;return Mo.elements[0]*=d,Mo.elements[1]*=d,Mo.elements[2]*=d,Mo.elements[4]*=m,Mo.elements[5]*=m,Mo.elements[6]*=m,Mo.elements[8]*=g,Mo.elements[9]*=g,Mo.elements[10]*=g,t.setFromRotationMatrix(Mo),i.x=s,i.y=o,i.z=c,this}makePerspective(e,t,i,a,s,o,c=vr,f=!1){const d=this.elements,m=2*s/(t-e),g=2*s/(i-a),y=(t+e)/(t-e),_=(i+a)/(i-a);let A,T;if(f)A=s/(o-s),T=o*s/(o-s);else if(c===vr)A=-(o+s)/(o-s),T=-2*o*s/(o-s);else if(c===Rp)A=-o/(o-s),T=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return d[0]=m,d[4]=0,d[8]=y,d[12]=0,d[1]=0,d[5]=g,d[9]=_,d[13]=0,d[2]=0,d[6]=0,d[10]=A,d[14]=T,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(e,t,i,a,s,o,c=vr,f=!1){const d=this.elements,m=2/(t-e),g=2/(i-a),y=-(t+e)/(t-e),_=-(i+a)/(i-a);let A,T;if(f)A=1/(o-s),T=o/(o-s);else if(c===vr)A=-2/(o-s),T=-(o+s)/(o-s);else if(c===Rp)A=-1/(o-s),T=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return d[0]=m,d[4]=0,d[8]=0,d[12]=y,d[1]=0,d[5]=g,d[9]=0,d[13]=_,d[2]=0,d[6]=0,d[10]=A,d[14]=T,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<16;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Hd=new Q,Mo=new $t,o5=new Q(0,0,0),l5=new Q(1,1,1),Au=new Q,Gy=new Q,pr=new Q,sR=new $t,rR=new Pa;class xr{constructor(e=0,t=0,i=0,a=xr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,a=this._order){return this._x=e,this._y=t,this._z=i,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const a=e.elements,s=a[0],o=a[4],c=a[8],f=a[1],d=a[5],m=a[9],g=a[2],y=a[6],_=a[10];switch(t){case"XYZ":this._y=Math.asin(rn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,_),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(y,d),this._z=0);break;case"YXZ":this._x=Math.asin(-rn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(c,_),this._z=Math.atan2(f,d)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(rn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(f,s));break;case"ZYX":this._y=Math.asin(-rn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(y,_),this._z=Math.atan2(f,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(rn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-m,d),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(c,_));break;case"XZY":this._z=Math.asin(-rn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(y,d),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-m,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return sR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(sR,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return rR.setFromEuler(this),this.setFromQuaternion(rR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}xr.DEFAULT_ORDER="XYZ";class Bp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let c5=0;const oR=new Q,Gd=new Pa,oc=new $t,Vy=new Q,yg=new Q,u5=new Q,f5=new Pa,lR=new Q(1,0,0),cR=new Q(0,1,0),uR=new Q(0,0,1),fR={type:"added"},h5={type:"removed"},Vd={type:"childadded",child:null},gS={type:"childremoved",child:null};class Hn extends Nl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:c5++}),this.uuid=yr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Hn.DEFAULT_UP.clone();const e=new Q,t=new xr,i=new Pa,a=new Q(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new $t},normalMatrix:{value:new yn}}),this.matrix=new $t,this.matrixWorld=new $t,this.matrixAutoUpdate=Hn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Bp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Gd.setFromAxisAngle(e,t),this.quaternion.multiply(Gd),this}rotateOnWorldAxis(e,t){return Gd.setFromAxisAngle(e,t),this.quaternion.premultiply(Gd),this}rotateX(e){return this.rotateOnAxis(lR,e)}rotateY(e){return this.rotateOnAxis(cR,e)}rotateZ(e){return this.rotateOnAxis(uR,e)}translateOnAxis(e,t){return oR.copy(e).applyQuaternion(this.quaternion),this.position.add(oR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(lR,e)}translateY(e){return this.translateOnAxis(cR,e)}translateZ(e){return this.translateOnAxis(uR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(oc.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Vy.copy(e):Vy.set(e,t,i);const a=this.parent;this.updateWorldMatrix(!0,!1),yg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?oc.lookAt(yg,Vy,this.up):oc.lookAt(Vy,yg,this.up),this.quaternion.setFromRotationMatrix(oc),a&&(oc.extractRotation(a.matrixWorld),Gd.setFromRotationMatrix(oc),this.quaternion.premultiply(Gd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(fR),Vd.child=e,this.dispatchEvent(Vd),Vd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(h5),gS.child=e,this.dispatchEvent(gS),gS.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),oc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),oc.multiply(e.parent.matrixWorld)),e.applyMatrix4(oc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(fR),Vd.child=e,this.dispatchEvent(Vd),Vd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,a=this.children.length;i<a;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yg,e,u5),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yg,f5,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(c=>({...c,boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(c=>({...c})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(e),a.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function s(c,f){return c[f.uuid]===void 0&&(c[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=s(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const f=c.shapes;if(Array.isArray(f))for(let d=0,m=f.length;d<m;d++){const g=f[d];s(e.shapes,g)}else s(e.shapes,f)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let f=0,d=this.material.length;f<d;f++)c.push(s(e.materials,this.material[f]));a.material=c}else a.material=s(e.materials,this.material);if(this.children.length>0){a.children=[];for(let c=0;c<this.children.length;c++)a.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let c=0;c<this.animations.length;c++){const f=this.animations[c];a.animations.push(s(e.animations,f))}}if(t){const c=o(e.geometries),f=o(e.materials),d=o(e.textures),m=o(e.images),g=o(e.shapes),y=o(e.skeletons),_=o(e.animations),A=o(e.nodes);c.length>0&&(i.geometries=c),f.length>0&&(i.materials=f),d.length>0&&(i.textures=d),m.length>0&&(i.images=m),g.length>0&&(i.shapes=g),y.length>0&&(i.skeletons=y),_.length>0&&(i.animations=_),A.length>0&&(i.nodes=A)}return i.object=a,i;function o(c){const f=[];for(const d in c){const m=c[d];delete m.metadata,f.push(m)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const a=e.children[i];this.add(a.clone())}return this}}Hn.DEFAULT_UP=new Q(0,1,0);Hn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Eo=new Q,lc=new Q,vS=new Q,cc=new Q,kd=new Q,Xd=new Q,hR=new Q,yS=new Q,xS=new Q,_S=new Q,bS=new jn,AS=new jn,SS=new jn;class Qs{constructor(e=new Q,t=new Q,i=new Q){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,a){a.subVectors(i,t),Eo.subVectors(e,t),a.cross(Eo);const s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}static getBarycoord(e,t,i,a,s){Eo.subVectors(a,t),lc.subVectors(i,t),vS.subVectors(e,t);const o=Eo.dot(Eo),c=Eo.dot(lc),f=Eo.dot(vS),d=lc.dot(lc),m=lc.dot(vS),g=o*d-c*c;if(g===0)return s.set(0,0,0),null;const y=1/g,_=(d*f-c*m)*y,A=(o*m-c*f)*y;return s.set(1-_-A,A,_)}static containsPoint(e,t,i,a){return this.getBarycoord(e,t,i,a,cc)===null?!1:cc.x>=0&&cc.y>=0&&cc.x+cc.y<=1}static getInterpolation(e,t,i,a,s,o,c,f){return this.getBarycoord(e,t,i,a,cc)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(s,cc.x),f.addScaledVector(o,cc.y),f.addScaledVector(c,cc.z),f)}static getInterpolatedAttribute(e,t,i,a,s,o){return bS.setScalar(0),AS.setScalar(0),SS.setScalar(0),bS.fromBufferAttribute(e,t),AS.fromBufferAttribute(e,i),SS.fromBufferAttribute(e,a),o.setScalar(0),o.addScaledVector(bS,s.x),o.addScaledVector(AS,s.y),o.addScaledVector(SS,s.z),o}static isFrontFacing(e,t,i,a){return Eo.subVectors(i,t),lc.subVectors(e,t),Eo.cross(lc).dot(a)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,a){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,t,i,a){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Eo.subVectors(this.c,this.b),lc.subVectors(this.a,this.b),Eo.cross(lc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Qs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Qs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,a,s){return Qs.getInterpolation(e,this.a,this.b,this.c,t,i,a,s)}containsPoint(e){return Qs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Qs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,a=this.b,s=this.c;let o,c;kd.subVectors(a,i),Xd.subVectors(s,i),yS.subVectors(e,i);const f=kd.dot(yS),d=Xd.dot(yS);if(f<=0&&d<=0)return t.copy(i);xS.subVectors(e,a);const m=kd.dot(xS),g=Xd.dot(xS);if(m>=0&&g<=m)return t.copy(a);const y=f*g-m*d;if(y<=0&&f>=0&&m<=0)return o=f/(f-m),t.copy(i).addScaledVector(kd,o);_S.subVectors(e,s);const _=kd.dot(_S),A=Xd.dot(_S);if(A>=0&&_<=A)return t.copy(s);const T=_*d-f*A;if(T<=0&&d>=0&&A<=0)return c=d/(d-A),t.copy(i).addScaledVector(Xd,c);const E=m*A-_*g;if(E<=0&&g-m>=0&&_-A>=0)return hR.subVectors(s,a),c=(g-m)/(g-m+(_-A)),t.copy(a).addScaledVector(hR,c);const b=1/(E+T+y);return o=T*b,c=y*b,t.copy(i).addScaledVector(kd,o).addScaledVector(Xd,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const RN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Su={h:0,s:0,l:0},ky={h:0,s:0,l:0};function MS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Et{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const a=e;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Wa){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,zn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,a=zn.workingColorSpace){return this.r=e,this.g=t,this.b=i,zn.colorSpaceToWorking(this,a),this}setHSL(e,t,i,a=zn.workingColorSpace){if(e=AE(e,1),t=rn(t,0,1),i=rn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=MS(o,s,e+1/3),this.g=MS(o,s,e),this.b=MS(o,s,e-1/3)}return zn.colorSpaceToWorking(this,a),this}setStyle(e,t=Wa){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=a[1],c=a[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=a[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Wa){const i=RN[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=vc(e.r),this.g=vc(e.g),this.b=vc(e.b),this}copyLinearToSRGB(e){return this.r=mp(e.r),this.g=mp(e.g),this.b=mp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Wa){return zn.workingToColorSpace(cs.copy(this),e),Math.round(rn(cs.r*255,0,255))*65536+Math.round(rn(cs.g*255,0,255))*256+Math.round(rn(cs.b*255,0,255))}getHexString(e=Wa){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=zn.workingColorSpace){zn.workingToColorSpace(cs.copy(this),t);const i=cs.r,a=cs.g,s=cs.b,o=Math.max(i,a,s),c=Math.min(i,a,s);let f,d;const m=(c+o)/2;if(c===o)f=0,d=0;else{const g=o-c;switch(d=m<=.5?g/(o+c):g/(2-o-c),o){case i:f=(a-s)/g+(a<s?6:0);break;case a:f=(s-i)/g+2;break;case s:f=(i-a)/g+4;break}f/=6}return e.h=f,e.s=d,e.l=m,e}getRGB(e,t=zn.workingColorSpace){return zn.workingToColorSpace(cs.copy(this),t),e.r=cs.r,e.g=cs.g,e.b=cs.b,e}getStyle(e=Wa){zn.workingToColorSpace(cs.copy(this),e);const t=cs.r,i=cs.g,a=cs.b;return e!==Wa?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(a*255)})`}offsetHSL(e,t,i){return this.getHSL(Su),this.setHSL(Su.h+e,Su.s+t,Su.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Su),e.getHSL(ky);const i=qg(Su.h,ky.h,t),a=qg(Su.s,ky.s,t),s=qg(Su.l,ky.l,t);return this.setHSL(i,a,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,a=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*a,this.g=s[1]*t+s[4]*i+s[7]*a,this.b=s[2]*t+s[5]*i+s[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const cs=new Et;Et.NAMES=RN;let d5=0;class Ma extends Nl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:d5++}),this.uuid=yr(),this.name="",this.type="Material",this.blending=yh,this.side=wl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=a_,this.blendDst=s_,this.blendEquation=Du,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Et(0,0,0),this.blendAlpha=0,this.depthFunc=Ah,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=iM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ah,this.stencilZFail=ah,this.stencilZPass=ah,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(i):a&&a.isVector3&&i&&i.isVector3?a.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==yh&&(i.blending=this.blending),this.side!==wl&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==a_&&(i.blendSrc=this.blendSrc),this.blendDst!==s_&&(i.blendDst=this.blendDst),this.blendEquation!==Du&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ah&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==iM&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ah&&(i.stencilFail=this.stencilFail),this.stencilZFail!==ah&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==ah&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function a(s){const o=[];for(const c in s){const f=s[c];delete f.metadata,o.push(f)}return o}if(t){const s=a(e.textures),o=a(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const a=t.length;i=new Array(a);for(let s=0;s!==a;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class er extends Ma{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xr,this.combine=U0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const pc=p5();function p5(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),a=new Uint32Array(512);for(let f=0;f<256;++f){const d=f-127;d<-27?(i[f]=0,i[f|256]=32768,a[f]=24,a[f|256]=24):d<-14?(i[f]=1024>>-d-14,i[f|256]=1024>>-d-14|32768,a[f]=-d-1,a[f|256]=-d-1):d<=15?(i[f]=d+15<<10,i[f|256]=d+15<<10|32768,a[f]=13,a[f|256]=13):d<128?(i[f]=31744,i[f|256]=64512,a[f]=24,a[f|256]=24):(i[f]=31744,i[f|256]=64512,a[f]=13,a[f|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),c=new Uint32Array(64);for(let f=1;f<1024;++f){let d=f<<13,m=0;for(;(d&8388608)===0;)d<<=1,m-=8388608;d&=-8388609,m+=947912704,s[f]=d|m}for(let f=1024;f<2048;++f)s[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)o[f]=f<<23;o[31]=1199570944,o[32]=2147483648;for(let f=33;f<63;++f)o[f]=2147483648+(f-32<<23);o[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(c[f]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:a,mantissaTable:s,exponentTable:o,offsetTable:c}}function Js(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=rn(n,-65504,65504),pc.floatView[0]=n;const e=pc.uint32View[0],t=e>>23&511;return pc.baseTable[t]+((e&8388607)>>pc.shiftTable[t])}function Og(n){const e=n>>10;return pc.uint32View[0]=pc.mantissaTable[pc.offsetTable[e]+(n&1023)]+pc.exponentTable[e],pc.floatView[0]}class hh{static toHalfFloat(e){return Js(e)}static fromHalfFloat(e){return Og(e)}}const fa=new Q,Xy=new Ze;let m5=0;class Yn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:m5++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=h0,this.updateRanges=[],this.gpuType=Vi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let a=0,s=this.itemSize;a<s;a++)this.array[e+a]=t.array[i+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Xy.fromBufferAttribute(this,t),Xy.applyMatrix3(e),this.setXY(t,Xy.x,Xy.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)fa.fromBufferAttribute(this,t),fa.applyMatrix3(e),this.setXYZ(t,fa.x,fa.y,fa.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)fa.fromBufferAttribute(this,t),fa.applyMatrix4(e),this.setXYZ(t,fa.x,fa.y,fa.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)fa.fromBufferAttribute(this,t),fa.applyNormalMatrix(e),this.setXYZ(t,fa.x,fa.y,fa.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)fa.fromBufferAttribute(this,t),fa.transformDirection(e),this.setXYZ(t,fa.x,fa.y,fa.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ds(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=An(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ds(t,this.array)),t}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ds(t,this.array)),t}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ds(t,this.array)),t}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ds(t,this.array)),t}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,a){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array),a=An(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this}setXYZW(e,t,i,a,s){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array),a=An(a,this.array),s=An(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==h0&&(e.usage=this.usage),e}}class g5 extends Yn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class v5 extends Yn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class y5 extends Yn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class x5 extends Yn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class ME extends Yn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class _5 extends Yn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class EE extends Yn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class b5 extends Yn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Og(this.array[e*this.itemSize]);return this.normalized&&(t=Ds(t,this.array)),t}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize]=Js(t),this}getY(e){let t=Og(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ds(t,this.array)),t}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+1]=Js(t),this}getZ(e){let t=Og(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ds(t,this.array)),t}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+2]=Js(t),this}getW(e){let t=Og(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ds(t,this.array)),t}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+3]=Js(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array)),this.array[e+0]=Js(t),this.array[e+1]=Js(i),this}setXYZ(e,t,i,a){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array),a=An(a,this.array)),this.array[e+0]=Js(t),this.array[e+1]=Js(i),this.array[e+2]=Js(a),this}setXYZW(e,t,i,a,s){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array),a=An(a,this.array),s=An(s,this.array)),this.array[e+0]=Js(t),this.array[e+1]=Js(i),this.array[e+2]=Js(a),this.array[e+3]=Js(s),this}}class Pt extends Yn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let A5=0;const zr=new $t,ES=new Hn,jd=new Q,mr=new Ja,xg=new Ja,Na=new Q;class gn extends Nl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:A5++}),this.uuid=yr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(TN(e)?EE:ME)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new yn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return zr.makeRotationFromQuaternion(e),this.applyMatrix4(zr),this}rotateX(e){return zr.makeRotationX(e),this.applyMatrix4(zr),this}rotateY(e){return zr.makeRotationY(e),this.applyMatrix4(zr),this}rotateZ(e){return zr.makeRotationZ(e),this.applyMatrix4(zr),this}translate(e,t,i){return zr.makeTranslation(e,t,i),this.applyMatrix4(zr),this}scale(e,t,i){return zr.makeScale(e,t,i),this.applyMatrix4(zr),this}lookAt(e){return ES.lookAt(e),ES.updateMatrix(),this.applyMatrix4(ES.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(jd).negate(),this.translate(jd.x,jd.y,jd.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let a=0,s=e.length;a<s;a++){const o=e[a];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Pt(i,3))}else{const i=Math.min(e.length,t.count);for(let a=0;a<i;a++){const s=e[a];t.setXYZ(a,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ja);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Q(-1/0,-1/0,-1/0),new Q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,a=t.length;i<a;i++){const s=t[i];mr.setFromBufferAttribute(s),this.morphTargetsRelative?(Na.addVectors(this.boundingBox.min,mr.min),this.boundingBox.expandByPoint(Na),Na.addVectors(this.boundingBox.max,mr.max),this.boundingBox.expandByPoint(Na)):(this.boundingBox.expandByPoint(mr.min),this.boundingBox.expandByPoint(mr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Q,1/0);return}if(e){const i=this.boundingSphere.center;if(mr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const c=t[s];xg.setFromBufferAttribute(c),this.morphTargetsRelative?(Na.addVectors(mr.min,xg.min),mr.expandByPoint(Na),Na.addVectors(mr.max,xg.max),mr.expandByPoint(Na)):(mr.expandByPoint(xg.min),mr.expandByPoint(xg.max))}mr.getCenter(i);let a=0;for(let s=0,o=e.count;s<o;s++)Na.fromBufferAttribute(e,s),a=Math.max(a,i.distanceToSquared(Na));if(t)for(let s=0,o=t.length;s<o;s++){const c=t[s],f=this.morphTargetsRelative;for(let d=0,m=c.count;d<m;d++)Na.fromBufferAttribute(c,d),f&&(jd.fromBufferAttribute(e,d),Na.add(jd)),a=Math.max(a,i.distanceToSquared(Na))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,a=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Yn(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),c=[],f=[];for(let I=0;I<i.count;I++)c[I]=new Q,f[I]=new Q;const d=new Q,m=new Q,g=new Q,y=new Ze,_=new Ze,A=new Ze,T=new Q,E=new Q;function b(I,O,P){d.fromBufferAttribute(i,I),m.fromBufferAttribute(i,O),g.fromBufferAttribute(i,P),y.fromBufferAttribute(s,I),_.fromBufferAttribute(s,O),A.fromBufferAttribute(s,P),m.sub(d),g.sub(d),_.sub(y),A.sub(y);const Y=1/(_.x*A.y-A.x*_.y);isFinite(Y)&&(T.copy(m).multiplyScalar(A.y).addScaledVector(g,-_.y).multiplyScalar(Y),E.copy(g).multiplyScalar(_.x).addScaledVector(m,-A.x).multiplyScalar(Y),c[I].add(T),c[O].add(T),c[P].add(T),f[I].add(E),f[O].add(E),f[P].add(E))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let I=0,O=R.length;I<O;++I){const P=R[I],Y=P.start,ie=P.count;for(let se=Y,ue=Y+ie;se<ue;se+=3)b(e.getX(se+0),e.getX(se+1),e.getX(se+2))}const D=new Q,B=new Q,U=new Q,L=new Q;function z(I){U.fromBufferAttribute(a,I),L.copy(U);const O=c[I];D.copy(O),D.sub(U.multiplyScalar(U.dot(O))).normalize(),B.crossVectors(L,O);const Y=B.dot(f[I])<0?-1:1;o.setXYZW(I,D.x,D.y,D.z,Y)}for(let I=0,O=R.length;I<O;++I){const P=R[I],Y=P.start,ie=P.count;for(let se=Y,ue=Y+ie;se<ue;se+=3)z(e.getX(se+0)),z(e.getX(se+1)),z(e.getX(se+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Yn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let y=0,_=i.count;y<_;y++)i.setXYZ(y,0,0,0);const a=new Q,s=new Q,o=new Q,c=new Q,f=new Q,d=new Q,m=new Q,g=new Q;if(e)for(let y=0,_=e.count;y<_;y+=3){const A=e.getX(y+0),T=e.getX(y+1),E=e.getX(y+2);a.fromBufferAttribute(t,A),s.fromBufferAttribute(t,T),o.fromBufferAttribute(t,E),m.subVectors(o,s),g.subVectors(a,s),m.cross(g),c.fromBufferAttribute(i,A),f.fromBufferAttribute(i,T),d.fromBufferAttribute(i,E),c.add(m),f.add(m),d.add(m),i.setXYZ(A,c.x,c.y,c.z),i.setXYZ(T,f.x,f.y,f.z),i.setXYZ(E,d.x,d.y,d.z)}else for(let y=0,_=t.count;y<_;y+=3)a.fromBufferAttribute(t,y+0),s.fromBufferAttribute(t,y+1),o.fromBufferAttribute(t,y+2),m.subVectors(o,s),g.subVectors(a,s),m.cross(g),i.setXYZ(y+0,m.x,m.y,m.z),i.setXYZ(y+1,m.x,m.y,m.z),i.setXYZ(y+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Na.fromBufferAttribute(e,t),Na.normalize(),e.setXYZ(t,Na.x,Na.y,Na.z)}toNonIndexed(){function e(c,f){const d=c.array,m=c.itemSize,g=c.normalized,y=new d.constructor(f.length*m);let _=0,A=0;for(let T=0,E=f.length;T<E;T++){c.isInterleavedBufferAttribute?_=f[T]*c.data.stride+c.offset:_=f[T]*m;for(let b=0;b<m;b++)y[A++]=d[_++]}return new Yn(y,m,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gn,i=this.index.array,a=this.attributes;for(const c in a){const f=a[c],d=e(f,i);t.setAttribute(c,d)}const s=this.morphAttributes;for(const c in s){const f=[],d=s[c];for(let m=0,g=d.length;m<g;m++){const y=d[m],_=e(y,i);f.push(_)}t.morphAttributes[c]=f}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let c=0,f=o.length;c<f;c++){const d=o[c];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const d in f)f[d]!==void 0&&(e[d]=f[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const f in i){const d=i[f];e.data.attributes[f]=d.toJSON(e.data)}const a={};let s=!1;for(const f in this.morphAttributes){const d=this.morphAttributes[f],m=[];for(let g=0,y=d.length;g<y;g++){const _=d[g];m.push(_.toJSON(e.data))}m.length>0&&(a[f]=m,s=!0)}s&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere=c.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const a=e.attributes;for(const d in a){const m=a[d];this.setAttribute(d,m.clone(t))}const s=e.morphAttributes;for(const d in s){const m=[],g=s[d];for(let y=0,_=g.length;y<_;y++)m.push(g[y].clone(t));this.morphAttributes[d]=m}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,m=o.length;d<m;d++){const g=o[d];this.addGroup(g.start,g.count,g.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const dR=new $t,Gf=new Dh,jy=new Fa,pR=new Q,Yy=new Q,qy=new Q,Ky=new Q,TS=new Q,Wy=new Q,mR=new Q,Jy=new Q;class Oi extends Hn{constructor(e=new gn,t=new er){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const c=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}getVertexPosition(e,t){const i=this.geometry,a=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(a,e);const c=this.morphTargetInfluences;if(s&&c){Wy.set(0,0,0);for(let f=0,d=s.length;f<d;f++){const m=c[f],g=s[f];m!==0&&(TS.fromBufferAttribute(g,e),o?Wy.addScaledVector(TS,m):Wy.addScaledVector(TS.sub(t),m))}t.add(Wy)}return t}raycast(e,t){const i=this.geometry,a=this.material,s=this.matrixWorld;a!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),jy.copy(i.boundingSphere),jy.applyMatrix4(s),Gf.copy(e.ray).recast(e.near),!(jy.containsPoint(Gf.origin)===!1&&(Gf.intersectSphere(jy,pR)===null||Gf.origin.distanceToSquared(pR)>(e.far-e.near)**2))&&(dR.copy(s).invert(),Gf.copy(e.ray).applyMatrix4(dR),!(i.boundingBox!==null&&Gf.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Gf)))}_computeIntersections(e,t,i){let a;const s=this.geometry,o=this.material,c=s.index,f=s.attributes.position,d=s.attributes.uv,m=s.attributes.uv1,g=s.attributes.normal,y=s.groups,_=s.drawRange;if(c!==null)if(Array.isArray(o))for(let A=0,T=y.length;A<T;A++){const E=y[A],b=o[E.materialIndex],R=Math.max(E.start,_.start),D=Math.min(c.count,Math.min(E.start+E.count,_.start+_.count));for(let B=R,U=D;B<U;B+=3){const L=c.getX(B),z=c.getX(B+1),I=c.getX(B+2);a=Zy(this,b,e,i,d,m,g,L,z,I),a&&(a.faceIndex=Math.floor(B/3),a.face.materialIndex=E.materialIndex,t.push(a))}}else{const A=Math.max(0,_.start),T=Math.min(c.count,_.start+_.count);for(let E=A,b=T;E<b;E+=3){const R=c.getX(E),D=c.getX(E+1),B=c.getX(E+2);a=Zy(this,o,e,i,d,m,g,R,D,B),a&&(a.faceIndex=Math.floor(E/3),t.push(a))}}else if(f!==void 0)if(Array.isArray(o))for(let A=0,T=y.length;A<T;A++){const E=y[A],b=o[E.materialIndex],R=Math.max(E.start,_.start),D=Math.min(f.count,Math.min(E.start+E.count,_.start+_.count));for(let B=R,U=D;B<U;B+=3){const L=B,z=B+1,I=B+2;a=Zy(this,b,e,i,d,m,g,L,z,I),a&&(a.faceIndex=Math.floor(B/3),a.face.materialIndex=E.materialIndex,t.push(a))}}else{const A=Math.max(0,_.start),T=Math.min(f.count,_.start+_.count);for(let E=A,b=T;E<b;E+=3){const R=E,D=E+1,B=E+2;a=Zy(this,o,e,i,d,m,g,R,D,B),a&&(a.faceIndex=Math.floor(E/3),t.push(a))}}}}function S5(n,e,t,i,a,s,o,c){let f;if(e.side===Os?f=i.intersectTriangle(o,s,a,!0,c):f=i.intersectTriangle(a,s,o,e.side===wl,c),f===null)return null;Jy.copy(c),Jy.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(Jy);return d<t.near||d>t.far?null:{distance:d,point:Jy.clone(),object:n}}function Zy(n,e,t,i,a,s,o,c,f,d){n.getVertexPosition(c,Yy),n.getVertexPosition(f,qy),n.getVertexPosition(d,Ky);const m=S5(n,e,t,i,Yy,qy,Ky,mR);if(m){const g=new Q;Qs.getBarycoord(mR,Yy,qy,Ky,g),a&&(m.uv=Qs.getInterpolatedAttribute(a,c,f,d,g,new Ze)),s&&(m.uv1=Qs.getInterpolatedAttribute(s,c,f,d,g,new Ze)),o&&(m.normal=Qs.getInterpolatedAttribute(o,c,f,d,g,new Q),m.normal.dot(i.direction)>0&&m.normal.multiplyScalar(-1));const y={a:c,b:f,c:d,normal:new Q,materialIndex:0};Qs.getNormal(Yy,qy,Ky,y.normal),m.face=y,m.barycoord=g}return m}class Bh extends gn{constructor(e=1,t=1,i=1,a=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:a,heightSegments:s,depthSegments:o};const c=this;a=Math.floor(a),s=Math.floor(s),o=Math.floor(o);const f=[],d=[],m=[],g=[];let y=0,_=0;A("z","y","x",-1,-1,i,t,e,o,s,0),A("z","y","x",1,-1,i,t,-e,o,s,1),A("x","z","y",1,1,e,i,t,a,o,2),A("x","z","y",1,-1,e,i,-t,a,o,3),A("x","y","z",1,-1,e,t,i,a,s,4),A("x","y","z",-1,-1,e,t,-i,a,s,5),this.setIndex(f),this.setAttribute("position",new Pt(d,3)),this.setAttribute("normal",new Pt(m,3)),this.setAttribute("uv",new Pt(g,2));function A(T,E,b,R,D,B,U,L,z,I,O){const P=B/z,Y=U/I,ie=B/2,se=U/2,ue=L/2,me=z+1,H=I+1;let W=0,q=0;const ge=new Q;for(let j=0;j<H;j++){const fe=j*Y-se;for(let _e=0;_e<me;_e++){const Ae=_e*P-ie;ge[T]=Ae*R,ge[E]=fe*D,ge[b]=ue,d.push(ge.x,ge.y,ge.z),ge[T]=0,ge[E]=0,ge[b]=L>0?1:-1,m.push(ge.x,ge.y,ge.z),g.push(_e/z),g.push(1-j/I),W+=1}}for(let j=0;j<I;j++)for(let fe=0;fe<z;fe++){const _e=y+fe+me*j,Ae=y+fe+me*(j+1),De=y+(fe+1)+me*(j+1),ot=y+(fe+1)+me*j;f.push(_e,Ae,ot),f.push(Ae,De,ot),q+=6}c.addGroup(_,q,O),_+=q,y+=W}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Np(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const a=n[t][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=a.clone():Array.isArray(a)?e[t][i]=a.slice():e[t][i]=a}}return e}function ws(n){const e={};for(let t=0;t<n.length;t++){const i=Np(n[t]);for(const a in i)e[a]=i[a]}return e}function M5(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function DN(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:zn.workingColorSpace}const BN={clone:Np,merge:ws};var E5=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,T5=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class tr extends Ma{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=E5,this.fragmentShader=T5,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Np(e.uniforms),this.uniformsGroups=M5(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const a in this.uniforms){const o=this.uniforms[a].value;o&&o.isTexture?t.uniforms[a]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[a]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[a]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[a]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[a]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[a]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[a]={type:"m4",value:o.toArray()}:t.uniforms[a]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const a in this.extensions)this.extensions[a]===!0&&(i[a]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Mb extends Hn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new $t,this.projectionMatrix=new $t,this.projectionMatrixInverse=new $t,this.coordinateSystem=vr,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Mu=new Q,gR=new Ze,vR=new Ze;class Ji extends Mb{constructor(e=50,t=1,i=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=a,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Dp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(xh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Dp*2*Math.atan(Math.tan(xh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Mu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Mu.x,Mu.y).multiplyScalar(-e/Mu.z),Mu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Mu.x,Mu.y).multiplyScalar(-e/Mu.z)}getViewSize(e,t){return this.getViewBounds(e,gR,vR),t.subVectors(vR,gR)}setViewOffset(e,t,i,a,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(xh*.5*this.fov)/this.zoom,i=2*t,a=this.aspect*i,s=-.5*a;const o=this.view;if(this.view!==null&&this.view.enabled){const f=o.fullWidth,d=o.fullHeight;s+=o.offsetX*a/f,t-=o.offsetY*i/d,a*=o.width/f,i*=o.height/d}const c=this.filmOffset;c!==0&&(s+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+a,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Yd=-90,qd=1;class NN extends Hn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new Ji(Yd,qd,e,t);a.layers=this.layers,this.add(a);const s=new Ji(Yd,qd,e,t);s.layers=this.layers,this.add(s);const o=new Ji(Yd,qd,e,t);o.layers=this.layers,this.add(o);const c=new Ji(Yd,qd,e,t);c.layers=this.layers,this.add(c);const f=new Ji(Yd,qd,e,t);f.layers=this.layers,this.add(f);const d=new Ji(Yd,qd,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,a,s,o,c,f]=t;for(const d of t)this.remove(d);if(e===vr)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===Rp)i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,c,f,d,m]=this.children,g=e.getRenderTarget(),y=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),A=e.xr.enabled;e.xr.enabled=!1;const T=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,a),e.render(t,s),e.setRenderTarget(i,1,a),e.render(t,o),e.setRenderTarget(i,2,a),e.render(t,c),e.setRenderTarget(i,3,a),e.render(t,f),e.setRenderTarget(i,4,a),e.render(t,d),i.texture.generateMipmaps=T,e.setRenderTarget(i,5,a),e.render(t,m),e.setRenderTarget(g,y,_),e.xr.enabled=A,i.texture.needsPMREMUpdate=!0}}class F0 extends ri{constructor(e=[],t=Rl,i,a,s,o,c,f,d,m){super(e,t,i,a,s,o,c,f,d,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class TE extends Kr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},a=[i,i,i,i,i,i];this.texture=new F0(a),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Bh(5,5,5),s=new tr({name:"CubemapFromEquirect",uniforms:Np(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Os,blending:Ml});s.uniforms.tEquirect.value=t;const o=new Oi(a,s),c=t.minFilter;return t.minFilter===Yr&&(t.minFilter=ni),new NN(1,10,this).update(e,o),t.minFilter=c,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,a=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,a);e.setRenderTarget(s)}}class mc extends Hn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const C5={type:"move"};class jx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new mc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new mc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new mc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let a=null,s=null,o=null;const c=this._targetRay,f=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){o=!0;for(const T of e.hand.values()){const E=t.getJointPose(T,i),b=this._getHandJoint(d,T);E!==null&&(b.matrix.fromArray(E.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=E.radius),b.visible=E!==null}const m=d.joints["index-finger-tip"],g=d.joints["thumb-tip"],y=m.position.distanceTo(g.position),_=.02,A=.005;d.inputState.pinching&&y>_+A?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&y<=_-A&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(f.matrix.fromArray(s.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,s.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(s.linearVelocity)):f.hasLinearVelocity=!1,s.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(s.angularVelocity)):f.hasAngularVelocity=!1));c!==null&&(a=t.getPose(e.targetRaySpace,i),a===null&&s!==null&&(a=s),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(C5)))}return c!==null&&(c.visible=a!==null),f!==null&&(f.visible=s!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new mc;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Eb{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Et(e),this.density=t}clone(){return new Eb(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Tb{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Et(e),this.near=t,this.far=i}clone(){return new Tb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class z0 extends Hn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new xr,this.environmentIntensity=1,this.environmentRotation=new xr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class H0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=h0,this.updateRanges=[],this.version=0,this.uuid=yr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let a=0,s=this.stride;a<s;a++)this.array[e+a]=t.array[i+a];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=yr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=yr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Cs=new Q;class Fu{constructor(e,t,i,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Cs.fromBufferAttribute(this,t),Cs.applyMatrix4(e),this.setXYZ(t,Cs.x,Cs.y,Cs.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Cs.fromBufferAttribute(this,t),Cs.applyNormalMatrix(e),this.setXYZ(t,Cs.x,Cs.y,Cs.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Cs.fromBufferAttribute(this,t),Cs.transformDirection(e),this.setXYZ(t,Cs.x,Cs.y,Cs.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ds(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=An(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ds(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ds(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ds(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ds(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),i=An(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),i=An(i,this.array),a=An(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=a,this}setXYZW(e,t,i,a,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),i=An(i,this.array),a=An(a,this.array),s=An(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=a,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[a+s])}return new Yn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Fu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[a+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class CE extends Ma{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Et(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Kd;const _g=new Q,Wd=new Q,Jd=new Q,Zd=new Ze,bg=new Ze,ON=new $t,Qy=new Q,Ag=new Q,$y=new Q,yR=new Ze,CS=new Ze,xR=new Ze;class UN extends Hn{constructor(e=new CE){if(super(),this.isSprite=!0,this.type="Sprite",Kd===void 0){Kd=new gn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new H0(t,5);Kd.setIndex([0,1,2,0,2,3]),Kd.setAttribute("position",new Fu(i,3,0,!1)),Kd.setAttribute("uv",new Fu(i,2,3,!1))}this.geometry=Kd,this.material=e,this.center=new Ze(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Wd.setFromMatrixScale(this.matrixWorld),ON.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Jd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Wd.multiplyScalar(-Jd.z);const i=this.material.rotation;let a,s;i!==0&&(s=Math.cos(i),a=Math.sin(i));const o=this.center;ex(Qy.set(-.5,-.5,0),Jd,o,Wd,a,s),ex(Ag.set(.5,-.5,0),Jd,o,Wd,a,s),ex($y.set(.5,.5,0),Jd,o,Wd,a,s),yR.set(0,0),CS.set(1,0),xR.set(1,1);let c=e.ray.intersectTriangle(Qy,Ag,$y,!1,_g);if(c===null&&(ex(Ag.set(-.5,.5,0),Jd,o,Wd,a,s),CS.set(0,1),c=e.ray.intersectTriangle(Qy,$y,Ag,!1,_g),c===null))return;const f=e.ray.origin.distanceTo(_g);f<e.near||f>e.far||t.push({distance:f,point:_g.clone(),uv:Qs.getInterpolation(_g,Qy,Ag,$y,yR,CS,xR,new Ze),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function ex(n,e,t,i,a,s){Zd.subVectors(n,t).addScalar(.5).multiply(i),a!==void 0?(bg.x=s*Zd.x-a*Zd.y,bg.y=a*Zd.x+s*Zd.y):bg.copy(Zd),n.copy(e),n.x+=bg.x,n.y+=bg.y,n.applyMatrix4(ON)}const tx=new Q,_R=new Q;class LN extends Hn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,a=t.length;i<a;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const a=this.levels;let s;for(s=0;s<a.length&&!(t<a[s].distance);s++);return a.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const a=t.splice(i,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,a;for(i=1,a=t.length;i<a;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){tx.setFromMatrixPosition(this.matrixWorld);const a=e.ray.origin.distanceTo(tx);this.getObjectForDistance(a).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){tx.setFromMatrixPosition(e.matrixWorld),_R.setFromMatrixPosition(this.matrixWorld);const i=tx.distanceTo(_R)/e.zoom;t[0].object.visible=!0;let a,s;for(a=1,s=t.length;a<s;a++){let o=t[a].distance;if(t[a].object.visible&&(o-=o*t[a].hysteresis),i>=o)t[a-1].object.visible=!1,t[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<s;a++)t[a].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let a=0,s=i.length;a<s;a++){const o=i[a];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const bR=new Q,AR=new jn,SR=new jn,w5=new Q,MR=new $t,nx=new Q,wS=new Fa,ER=new $t,RS=new Dh;class wE extends Oi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=tM,this.bindMatrix=new $t,this.bindMatrixInverse=new $t,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ja),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,nx),this.boundingBox.expandByPoint(nx)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Fa),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,nx),this.boundingSphere.expandByPoint(nx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,a=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),wS.copy(this.boundingSphere),wS.applyMatrix4(a),e.ray.intersectsSphere(wS)!==!1&&(ER.copy(a).invert(),RS.copy(e.ray).applyMatrix4(ER),!(this.boundingBox!==null&&RS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,RS)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new jn,t=this.geometry.attributes.skinWeight;for(let i=0,a=t.count;i<a;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===tM?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===uN?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,a=this.geometry;AR.fromBufferAttribute(a.attributes.skinIndex,e),SR.fromBufferAttribute(a.attributes.skinWeight,e),bR.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=SR.getComponent(s);if(o!==0){const c=AR.getComponent(s);MR.multiplyMatrices(i.bones[c].matrixWorld,i.boneInverses[c]),t.addScaledVector(w5.copy(bR).applyMatrix4(MR),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Cb extends Hn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Bo extends ri{constructor(e=null,t=1,i=1,a,s,o,c,f,d=Ia,m=Ia,g,y){super(null,o,c,f,d,m,a,s,g,y),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const TR=new $t,R5=new $t;class G0{constructor(e=[],t=[]){this.uuid=yr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new $t)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new $t;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,a=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const c=e[s]?e[s].matrixWorld:R5;TR.multiplyMatrices(c,t[s]),TR.toArray(i,s*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new G0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Bo(t,e,e,sa,Vi);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const a=this.bones[t];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,a=e.bones.length;i<a;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Cb),this.bones.push(o),this.boneInverses.push(new $t().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let a=0,s=t.length;a<s;a++){const o=t[a];e.bones.push(o.uuid);const c=i[a];e.boneInverses.push(c.toArray())}return e}}class Sh extends Yn{constructor(e,t,i,a=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Qd=new $t,CR=new $t,ix=[],wR=new Ja,D5=new $t,Sg=new Oi,Mg=new Fa;class RE extends Oi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Sh(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<i;a++)this.setMatrixAt(a,D5)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ja),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Qd),wR.copy(e.boundingBox).applyMatrix4(Qd),this.boundingBox.union(wR)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Fa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Qd),Mg.copy(e.boundingSphere).applyMatrix4(Qd),this.boundingSphere.union(Mg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,a=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let c=0;c<i.length;c++)i[c]=a[o+c]}raycast(e,t){const i=this.matrixWorld,a=this.count;if(Sg.geometry=this.geometry,Sg.material=this.material,Sg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Mg.copy(this.boundingSphere),Mg.applyMatrix4(i),e.ray.intersectsSphere(Mg)!==!1))for(let s=0;s<a;s++){this.getMatrixAt(s,Qd),CR.multiplyMatrices(i,Qd),Sg.matrixWorld=CR,Sg.raycast(e,ix);for(let o=0,c=ix.length;o<c;o++){const f=ix[o];f.instanceId=s,f.object=this,t.push(f)}ix.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Sh(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,a=i.length+1;this.morphTexture===null&&(this.morphTexture=new Bo(new Float32Array(a*this.count),a,this.count,I0,Vi));const s=this.morphTexture.source.data.data;let o=0;for(let d=0;d<i.length;d++)o+=i[d];const c=this.geometry.morphTargetsRelative?1:1-o,f=a*e;s[f]=c,s.set(i,f+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const DS=new Q,B5=new Q,N5=new yn;class hc{constructor(e=new Q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,a){return this.normal.set(e,t,i),this.constant=a,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const a=DS.subVectors(i,t).cross(B5.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(DS),a=this.normal.dot(i);if(a===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/a;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||N5.getNormalMatrix(e),a=this.coplanarPoint(DS).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Vf=new Fa,O5=new Ze(.5,.5),ax=new Q;class jp{constructor(e=new hc,t=new hc,i=new hc,a=new hc,s=new hc,o=new hc){this.planes=[e,t,i,a,s,o]}set(e,t,i,a,s,o){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(i),c[3].copy(a),c[4].copy(s),c[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=vr,i=!1){const a=this.planes,s=e.elements,o=s[0],c=s[1],f=s[2],d=s[3],m=s[4],g=s[5],y=s[6],_=s[7],A=s[8],T=s[9],E=s[10],b=s[11],R=s[12],D=s[13],B=s[14],U=s[15];if(a[0].setComponents(d-o,_-m,b-A,U-R).normalize(),a[1].setComponents(d+o,_+m,b+A,U+R).normalize(),a[2].setComponents(d+c,_+g,b+T,U+D).normalize(),a[3].setComponents(d-c,_-g,b-T,U-D).normalize(),i)a[4].setComponents(f,y,E,B).normalize(),a[5].setComponents(d-f,_-y,b-E,U-B).normalize();else if(a[4].setComponents(d-f,_-y,b-E,U-B).normalize(),t===vr)a[5].setComponents(d+f,_+y,b+E,U+B).normalize();else if(t===Rp)a[5].setComponents(f,y,E,B).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Vf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Vf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Vf)}intersectsSprite(e){Vf.center.set(0,0,0);const t=O5.distanceTo(e.center);return Vf.radius=.7071067811865476+t,Vf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Vf)}intersectsSphere(e){const t=this.planes,i=e.center,a=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<a)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const a=t[i];if(ax.x=a.normal.x>0?e.max.x:e.min.x,ax.y=a.normal.y>0?e.max.y:e.min.y,ax.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(ax)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const vl=new $t,yl=new jp;class wb{constructor(){this.coordinateSystem=vr}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(vl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),yl.setFromProjectionMatrix(vl,a.coordinateSystem,a.reversedDepth),yl.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(vl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),yl.setFromProjectionMatrix(vl,a.coordinateSystem,a.reversedDepth),yl.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(vl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),yl.setFromProjectionMatrix(vl,a.coordinateSystem,a.reversedDepth),yl.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(vl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),yl.setFromProjectionMatrix(vl,a.coordinateSystem,a.reversedDepth),yl.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(vl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),yl.setFromProjectionMatrix(vl,a.coordinateSystem,a.reversedDepth),yl.containsPoint(e))return!0}return!1}clone(){return new wb}}function BS(n,e){return n-e}function U5(n,e){return n.z-e.z}function L5(n,e){return e.z-n.z}class I5{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,a){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const c=s[this.index];o.push(c),this.index++,c.start=e,c.count=t,c.z=i,c.index=a}reset(){this.list.length=0,this.index=0}}const Ws=new $t,P5=new Et(1,1,1),RR=new jp,F5=new wb,sx=new Ja,kf=new Fa,Eg=new Q,DR=new Q,z5=new Q,NS=new I5,us=new Oi,rx=[];function H5(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const a=n.count;for(let s=0;s<a;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Xf(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class IN extends Oi{constructor(e,t,i=t*2,a){super(new gn,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Bo(t,e,e,sa,Vi);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Bo(t,e,e,P0,Dl);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Bo(t,e,e,sa,Vi);i.colorSpace=zn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:c,itemSize:f,normalized:d}=o,m=new c.constructor(i*f),g=new Yn(m,f,d);t.setAttribute(s,g)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(a):new Uint16Array(a);t.setIndex(new Yn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const a=e.getAttribute(i),s=t.getAttribute(i);if(a.itemSize!==s.itemSize||a.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ja);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,a=t.length;i<a;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Ws),this.getBoundingBoxAt(s,sx).applyMatrix4(Ws),e.union(sx)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fa);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,a=t.length;i<a;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Ws),this.getBoundingSphereAt(s,kf).applyMatrix4(Ws),e.union(kf)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(BS),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=i):(a=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Ws.identity().toArray(s.image.data,a*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(P5.toArray(o.image.data,a*4),o.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=i===-1?o.count:i),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let f;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(BS),f=this._availableGeometryIds.shift(),s[f]=a):(f=this._geometryCount,this._geometryCount++,s.push(a)),this.setGeometryAt(f,e),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,f}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,a=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),c=this._geometryInfo[e];if(a&&o.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const f=c.vertexStart,d=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const m in i.attributes){const g=t.getAttribute(m),y=i.getAttribute(m);H5(g,y,f);const _=g.itemSize;for(let A=g.count,T=d;A<T;A++){const E=f+A;for(let b=0;b<_;b++)y.setComponent(E,b,0)}y.needsUpdate=!0,y.addUpdateRange(f*_,d*_)}if(a){const m=c.indexStart,g=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let y=0;y<o.count;y++)s.setX(m+y,f+o.getX(y));for(let y=o.count,_=g;y<_;y++)s.setX(m+y,f);s.needsUpdate=!0,s.addUpdateRange(m,c.reservedIndexCount)}return c.start=a?c.indexStart:c.vertexStart,c.count=a?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let a=0,s=i.length;a<s;a++)i[a].active&&i[a].geometryIndex===e&&this.deleteInstance(a);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,a=i.map((o,c)=>c).sort((o,c)=>i[o].vertexStart-i[c].vertexStart),s=this.geometry;for(let o=0,c=i.length;o<c;o++){const f=a[o],d=i[f];if(d.active!==!1){if(s.index!==null){if(d.indexStart!==t){const{indexStart:m,vertexStart:g,reservedIndexCount:y}=d,_=s.index,A=_.array,T=e-g;for(let E=m;E<m+y;E++)A[E]=A[E]+T;_.array.copyWithin(t,m,m+y),_.addUpdateRange(t,y),d.indexStart=t}t+=d.reservedIndexCount}if(d.vertexStart!==e){const{vertexStart:m,reservedVertexCount:g}=d,y=s.attributes;for(const _ in y){const A=y[_],{array:T,itemSize:E}=A;T.copyWithin(e*E,m*E,(m+g)*E),A.addUpdateRange(e*E,g*E)}d.vertexStart=e}e+=d.reservedVertexCount,d.start=s.index?d.indexStart:d.vertexStart,this._nextIndexStart=s.index?d.indexStart+d.reservedIndexCount:0,this._nextVertexStart=d.vertexStart+d.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[e];if(a.boundingBox===null){const s=new Ja,o=i.index,c=i.attributes.position;for(let f=a.start,d=a.start+a.count;f<d;f++){let m=f;o&&(m=o.getX(m)),s.expandByPoint(Eg.fromBufferAttribute(c,m))}a.boundingBox=s}return t.copy(a.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[e];if(a.boundingSphere===null){const s=new Fa;this.getBoundingBoxAt(e,sx),sx.getCenter(s.center);const o=i.index,c=i.attributes.position;let f=0;for(let d=a.start,m=a.start+a.count;d<m;d++){let g=d;o&&(g=o.getX(g)),Eg.fromBufferAttribute(c,g),f=Math.max(f,s.center.distanceToSquared(Eg))}s.radius=Math.sqrt(f),a.boundingSphere=s}return t.copy(a.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,a=this._matricesTexture.image.data;return t.toArray(a,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(BS);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const a=new Int32Array(e),s=new Int32Array(e);Xf(this._multiDrawCounts,a),Xf(this._multiDrawStarts,s),this._multiDrawCounts=a,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,c=this._matricesTexture,f=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Xf(o.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),Xf(c.image.data,this._matricesTexture.image.data),f&&(f.dispose(),this._initColorsTexture(),Xf(f.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...i.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(f=>f.indexStart+f.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new gn,this._initializeGeometry(s));const o=this.geometry;s.index&&Xf(s.index.array,o.index.array);for(const c in s.attributes)Xf(s.attributes[c].array,o.attributes[c].array)}raycast(e,t){const i=this._instanceInfo,a=this._geometryInfo,s=this.matrixWorld,o=this.geometry;us.material=this.material,us.geometry.index=o.index,us.geometry.attributes=o.attributes,us.geometry.boundingBox===null&&(us.geometry.boundingBox=new Ja),us.geometry.boundingSphere===null&&(us.geometry.boundingSphere=new Fa);for(let c=0,f=i.length;c<f;c++){if(!i[c].visible||!i[c].active)continue;const d=i[c].geometryIndex,m=a[d];us.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(c,us.matrixWorld).premultiply(s),this.getBoundingBoxAt(d,us.geometry.boundingBox),this.getBoundingSphereAt(d,us.geometry.boundingSphere),us.raycast(e,rx);for(let g=0,y=rx.length;g<y;g++){const _=rx[g];_.object=this,_.batchId=c,t.push(_)}rx.length=0}us.material=null,us.geometry.index=null,us.geometry.attributes={},us.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,a,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=a.getIndex(),c=o===null?1:o.array.BYTES_PER_ELEMENT,f=this._instanceInfo,d=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,y=this.perObjectFrustumCulled,_=this._indirectTexture,A=_.image.data,T=i.isArrayCamera?F5:RR;y&&!i.isArrayCamera&&(Ws.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),RR.setFromProjectionMatrix(Ws,i.coordinateSystem,i.reversedDepth));let E=0;if(this.sortObjects){Ws.copy(this.matrixWorld).invert(),Eg.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Ws),DR.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Ws);for(let D=0,B=f.length;D<B;D++)if(f[D].visible&&f[D].active){const U=f[D].geometryIndex;this.getMatrixAt(D,Ws),this.getBoundingSphereAt(U,kf).applyMatrix4(Ws);let L=!1;if(y&&(L=!T.intersectsSphere(kf,i)),!L){const z=g[U],I=z5.subVectors(kf.center,Eg).dot(DR);NS.push(z.start,z.count,I,D)}}const b=NS.list,R=this.customSort;R===null?b.sort(s.transparent?L5:U5):R.call(this,b,i);for(let D=0,B=b.length;D<B;D++){const U=b[D];d[E]=U.start*c,m[E]=U.count,A[E]=U.index,E++}NS.reset()}else for(let b=0,R=f.length;b<R;b++)if(f[b].visible&&f[b].active){const D=f[b].geometryIndex;let B=!1;if(y&&(this.getMatrixAt(b,Ws),this.getBoundingSphereAt(D,kf).applyMatrix4(Ws),B=!T.intersectsSphere(kf,i)),!B){const U=g[D];d[E]=U.start*c,m[E]=U.count,A[E]=b,E++}}_.needsUpdate=!0,this._multiDrawCount=E,this._visibilityChanged=!1}onBeforeShadow(e,t,i,a,s,o){this.onBeforeRender(e,null,a,s,o)}}class fs extends Ma{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Et(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const V_=new Q,k_=new Q,BR=new $t,Tg=new Dh,ox=new Fa,OS=new Q,NR=new Q;class Sc extends Hn{constructor(e=new gn,t=new fs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let a=1,s=t.count;a<s;a++)V_.fromBufferAttribute(t,a-1),k_.fromBufferAttribute(t,a),i[a]=i[a-1],i[a]+=V_.distanceTo(k_);e.setAttribute("lineDistance",new Pt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,a=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ox.copy(i.boundingSphere),ox.applyMatrix4(a),ox.radius+=s,e.ray.intersectsSphere(ox)===!1)return;BR.copy(a).invert(),Tg.copy(e.ray).applyMatrix4(BR);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,d=this.isLineSegments?2:1,m=i.index,y=i.attributes.position;if(m!==null){const _=Math.max(0,o.start),A=Math.min(m.count,o.start+o.count);for(let T=_,E=A-1;T<E;T+=d){const b=m.getX(T),R=m.getX(T+1),D=lx(this,e,Tg,f,b,R,T);D&&t.push(D)}if(this.isLineLoop){const T=m.getX(A-1),E=m.getX(_),b=lx(this,e,Tg,f,T,E,A-1);b&&t.push(b)}}else{const _=Math.max(0,o.start),A=Math.min(y.count,o.start+o.count);for(let T=_,E=A-1;T<E;T+=d){const b=lx(this,e,Tg,f,T,T+1,T);b&&t.push(b)}if(this.isLineLoop){const T=lx(this,e,Tg,f,A-1,_,A-1);T&&t.push(T)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const c=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function lx(n,e,t,i,a,s,o){const c=n.geometry.attributes.position;if(V_.fromBufferAttribute(c,a),k_.fromBufferAttribute(c,s),t.distanceSqToSegment(V_,k_,OS,NR)>i)return;OS.applyMatrix4(n.matrixWorld);const d=e.ray.origin.distanceTo(OS);if(!(d<e.near||d>e.far))return{distance:d,point:NR.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const OR=new Q,UR=new Q;class Lo extends Sc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let a=0,s=t.count;a<s;a+=2)OR.fromBufferAttribute(t,a),UR.fromBufferAttribute(t,a+1),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+OR.distanceTo(UR);e.setAttribute("lineDistance",new Pt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class DE extends Sc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Rb extends Ma{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Et(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const LR=new $t,sM=new Dh,cx=new Fa,ux=new Q;class BE extends Hn{constructor(e=new gn,t=new Rb){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,a=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),cx.copy(i.boundingSphere),cx.applyMatrix4(a),cx.radius+=s,e.ray.intersectsSphere(cx)===!1)return;LR.copy(a).invert(),sM.copy(e.ray).applyMatrix4(LR);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,d=i.index,g=i.attributes.position;if(d!==null){const y=Math.max(0,o.start),_=Math.min(d.count,o.start+o.count);for(let A=y,T=_;A<T;A++){const E=d.getX(A);ux.fromBufferAttribute(g,E),IR(ux,E,f,a,e,t,this)}}else{const y=Math.max(0,o.start),_=Math.min(g.count,o.start+o.count);for(let A=y,T=_;A<T;A++)ux.fromBufferAttribute(g,A),IR(ux,A,f,a,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const c=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function IR(n,e,t,i,a,s,o){const c=sM.distanceSqToPoint(n);if(c<t){const f=new Q;sM.closestPointToPoint(n,f),f.applyMatrix4(i);const d=a.ray.origin.distanceTo(f);if(d<a.near||d>a.far)return;s.push({distance:d,distanceToRay:Math.sqrt(c),point:f,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class PN extends ri{constructor(e,t,i,a,s=ni,o=ni,c,f,d){super(e,t,i,a,s,o,c,f,d),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const m=this;function g(){m.needsUpdate=!0,m._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class G5 extends PN{constructor(e,t,i,a,s,o,c,f){super({},e,t,i,a,s,o,c,f),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class V5 extends ri{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ia,this.minFilter=Ia,this.generateMipmaps=!1,this.needsUpdate=!0}}class Db extends ri{constructor(e,t,i,a,s,o,c,f,d,m,g,y){super(null,o,c,f,d,m,a,s,g,y),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class k5 extends Db{constructor(e,t,i,a,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=aa,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class X5 extends Db{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Rl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class j5 extends ri{constructor(e,t,i,a,s,o,c,f,d){super(e,t,i,a,s,o,c,f,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class NE extends ri{constructor(e,t,i=Dl,a,s,o,c=Ia,f=Ia,d,m=Ep,g=1){if(m!==Ep&&m!==Tp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const y={width:e,height:t,depth:g};super(y,a,s,o,c,f,m,i,d),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Bu(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class OE extends ri{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Bb extends gn{constructor(e=1,t=1,i=4,a=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:a,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),a=Math.max(3,Math.floor(a)),s=Math.max(1,Math.floor(s));const o=[],c=[],f=[],d=[],m=t/2,g=Math.PI/2*e,y=t,_=2*g+y,A=i*2+s,T=a+1,E=new Q,b=new Q;for(let R=0;R<=A;R++){let D=0,B=0,U=0,L=0;if(R<=i){const O=R/i,P=O*Math.PI/2;B=-m-e*Math.cos(P),U=e*Math.sin(P),L=-e*Math.cos(P),D=O*g}else if(R<=i+s){const O=(R-i)/s;B=-m+O*t,U=e,L=0,D=g+O*y}else{const O=(R-i-s)/i,P=O*Math.PI/2;B=m+e*Math.sin(P),U=e*Math.cos(P),L=e*Math.sin(P),D=g+y+O*g}const z=Math.max(0,Math.min(1,D/_));let I=0;R===0?I=.5/a:R===A&&(I=-.5/a);for(let O=0;O<=a;O++){const P=O/a,Y=P*Math.PI*2,ie=Math.sin(Y),se=Math.cos(Y);b.x=-U*se,b.y=B,b.z=U*ie,c.push(b.x,b.y,b.z),E.set(-U*se,L,U*ie),E.normalize(),f.push(E.x,E.y,E.z),d.push(P+I,z)}if(R>0){const O=(R-1)*T;for(let P=0;P<a;P++){const Y=O+P,ie=O+P+1,se=R*T+P,ue=R*T+P+1;o.push(Y,ie,se),o.push(ie,ue,se)}}}this.setIndex(o),this.setAttribute("position",new Pt(c,3)),this.setAttribute("normal",new Pt(f,3)),this.setAttribute("uv",new Pt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bb(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Nb extends gn{constructor(e=1,t=32,i=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:a},t=Math.max(3,t);const s=[],o=[],c=[],f=[],d=new Q,m=new Ze;o.push(0,0,0),c.push(0,0,1),f.push(.5,.5);for(let g=0,y=3;g<=t;g++,y+=3){const _=i+g/t*a;d.x=e*Math.cos(_),d.y=e*Math.sin(_),o.push(d.x,d.y,d.z),c.push(0,0,1),m.x=(o[y]/e+1)/2,m.y=(o[y+1]/e+1)/2,f.push(m.x,m.y)}for(let g=1;g<=t;g++)s.push(g,g+1,0);this.setIndex(s),this.setAttribute("position",new Pt(o,3)),this.setAttribute("normal",new Pt(c,3)),this.setAttribute("uv",new Pt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class V0 extends gn{constructor(e=1,t=1,i=1,a=32,s=1,o=!1,c=0,f=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:a,heightSegments:s,openEnded:o,thetaStart:c,thetaLength:f};const d=this;a=Math.floor(a),s=Math.floor(s);const m=[],g=[],y=[],_=[];let A=0;const T=[],E=i/2;let b=0;R(),o===!1&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(m),this.setAttribute("position",new Pt(g,3)),this.setAttribute("normal",new Pt(y,3)),this.setAttribute("uv",new Pt(_,2));function R(){const B=new Q,U=new Q;let L=0;const z=(t-e)/i;for(let I=0;I<=s;I++){const O=[],P=I/s,Y=P*(t-e)+e;for(let ie=0;ie<=a;ie++){const se=ie/a,ue=se*f+c,me=Math.sin(ue),H=Math.cos(ue);U.x=Y*me,U.y=-P*i+E,U.z=Y*H,g.push(U.x,U.y,U.z),B.set(me,z,H).normalize(),y.push(B.x,B.y,B.z),_.push(se,1-P),O.push(A++)}T.push(O)}for(let I=0;I<a;I++)for(let O=0;O<s;O++){const P=T[O][I],Y=T[O+1][I],ie=T[O+1][I+1],se=T[O][I+1];(e>0||O!==0)&&(m.push(P,Y,se),L+=3),(t>0||O!==s-1)&&(m.push(Y,ie,se),L+=3)}d.addGroup(b,L,0),b+=L}function D(B){const U=A,L=new Ze,z=new Q;let I=0;const O=B===!0?e:t,P=B===!0?1:-1;for(let ie=1;ie<=a;ie++)g.push(0,E*P,0),y.push(0,P,0),_.push(.5,.5),A++;const Y=A;for(let ie=0;ie<=a;ie++){const ue=ie/a*f+c,me=Math.cos(ue),H=Math.sin(ue);z.x=O*H,z.y=E*P,z.z=O*me,g.push(z.x,z.y,z.z),y.push(0,P,0),L.x=me*.5+.5,L.y=H*.5*P+.5,_.push(L.x,L.y),A++}for(let ie=0;ie<a;ie++){const se=U+ie,ue=Y+ie;B===!0?m.push(ue,ue+1,se):m.push(ue+1,ue,se),I+=3}d.addGroup(b,I,B===!0?1:2),b+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new V0(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class k0 extends V0{constructor(e=1,t=1,i=32,a=1,s=!1,o=0,c=Math.PI*2){super(0,e,t,i,a,s,o,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:c}}static fromJSON(e){return new k0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Vu extends gn{constructor(e=[],t=[],i=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:a};const s=[],o=[];c(a),d(i),m(),this.setAttribute("position",new Pt(s,3)),this.setAttribute("normal",new Pt(s.slice(),3)),this.setAttribute("uv",new Pt(o,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function c(R){const D=new Q,B=new Q,U=new Q;for(let L=0;L<t.length;L+=3)_(t[L+0],D),_(t[L+1],B),_(t[L+2],U),f(D,B,U,R)}function f(R,D,B,U){const L=U+1,z=[];for(let I=0;I<=L;I++){z[I]=[];const O=R.clone().lerp(B,I/L),P=D.clone().lerp(B,I/L),Y=L-I;for(let ie=0;ie<=Y;ie++)ie===0&&I===L?z[I][ie]=O:z[I][ie]=O.clone().lerp(P,ie/Y)}for(let I=0;I<L;I++)for(let O=0;O<2*(L-I)-1;O++){const P=Math.floor(O/2);O%2===0?(y(z[I][P+1]),y(z[I+1][P]),y(z[I][P])):(y(z[I][P+1]),y(z[I+1][P+1]),y(z[I+1][P]))}}function d(R){const D=new Q;for(let B=0;B<s.length;B+=3)D.x=s[B+0],D.y=s[B+1],D.z=s[B+2],D.normalize().multiplyScalar(R),s[B+0]=D.x,s[B+1]=D.y,s[B+2]=D.z}function m(){const R=new Q;for(let D=0;D<s.length;D+=3){R.x=s[D+0],R.y=s[D+1],R.z=s[D+2];const B=E(R)/2/Math.PI+.5,U=b(R)/Math.PI+.5;o.push(B,1-U)}A(),g()}function g(){for(let R=0;R<o.length;R+=6){const D=o[R+0],B=o[R+2],U=o[R+4],L=Math.max(D,B,U),z=Math.min(D,B,U);L>.9&&z<.1&&(D<.2&&(o[R+0]+=1),B<.2&&(o[R+2]+=1),U<.2&&(o[R+4]+=1))}}function y(R){s.push(R.x,R.y,R.z)}function _(R,D){const B=R*3;D.x=e[B+0],D.y=e[B+1],D.z=e[B+2]}function A(){const R=new Q,D=new Q,B=new Q,U=new Q,L=new Ze,z=new Ze,I=new Ze;for(let O=0,P=0;O<s.length;O+=9,P+=6){R.set(s[O+0],s[O+1],s[O+2]),D.set(s[O+3],s[O+4],s[O+5]),B.set(s[O+6],s[O+7],s[O+8]),L.set(o[P+0],o[P+1]),z.set(o[P+2],o[P+3]),I.set(o[P+4],o[P+5]),U.copy(R).add(D).add(B).divideScalar(3);const Y=E(U);T(L,P+0,R,Y),T(z,P+2,D,Y),T(I,P+4,B,Y)}}function T(R,D,B,U){U<0&&R.x===1&&(o[D]=R.x-1),B.x===0&&B.z===0&&(o[D]=U/2/Math.PI+.5)}function E(R){return Math.atan2(R.z,-R.x)}function b(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vu(e.vertices,e.indices,e.radius,e.details)}}class Ob extends Vu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,a=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-i,0,-a,i,0,a,-i,0,a,i,-a,-i,0,-a,i,0,a,-i,0,a,i,0,-i,0,-a,i,0,-a,-i,0,a,i,0,a],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ob(e.radius,e.detail)}}const fx=new Q,hx=new Q,US=new Q,dx=new Qs;class FN extends gn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const a=Math.pow(10,4),s=Math.cos(xh*t),o=e.getIndex(),c=e.getAttribute("position"),f=o?o.count:c.count,d=[0,0,0],m=["a","b","c"],g=new Array(3),y={},_=[];for(let A=0;A<f;A+=3){o?(d[0]=o.getX(A),d[1]=o.getX(A+1),d[2]=o.getX(A+2)):(d[0]=A,d[1]=A+1,d[2]=A+2);const{a:T,b:E,c:b}=dx;if(T.fromBufferAttribute(c,d[0]),E.fromBufferAttribute(c,d[1]),b.fromBufferAttribute(c,d[2]),dx.getNormal(US),g[0]=`${Math.round(T.x*a)},${Math.round(T.y*a)},${Math.round(T.z*a)}`,g[1]=`${Math.round(E.x*a)},${Math.round(E.y*a)},${Math.round(E.z*a)}`,g[2]=`${Math.round(b.x*a)},${Math.round(b.y*a)},${Math.round(b.z*a)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let R=0;R<3;R++){const D=(R+1)%3,B=g[R],U=g[D],L=dx[m[R]],z=dx[m[D]],I=`${B}_${U}`,O=`${U}_${B}`;O in y&&y[O]?(US.dot(y[O].normal)<=s&&(_.push(L.x,L.y,L.z),_.push(z.x,z.y,z.z)),y[O]=null):I in y||(y[I]={index0:d[R],index1:d[D],normal:US.clone()})}}for(const A in y)if(y[A]){const{index0:T,index1:E}=y[A];fx.fromBufferAttribute(c,T),hx.fromBufferAttribute(c,E),_.push(fx.x,fx.y,fx.z),_.push(hx.x,hx.y,hx.z)}this.setAttribute("position",new Pt(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Io{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,a=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(a),t.push(s),a=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let a=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let c=0,f=s-1,d;for(;c<=f;)if(a=Math.floor(c+(f-c)/2),d=i[a]-o,d<0)c=a+1;else if(d>0)f=a-1;else{f=a;break}if(a=f,i[a]===o)return a/(s-1);const m=i[a],y=i[a+1]-m,_=(o-m)/y;return(a+_)/(s-1)}getTangent(e,t){let a=e-1e-4,s=e+1e-4;a<0&&(a=0),s>1&&(s=1);const o=this.getPoint(a),c=this.getPoint(s),f=t||(o.isVector2?new Ze:new Q);return f.copy(c).sub(o).normalize(),f}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new Q,a=[],s=[],o=[],c=new Q,f=new $t;for(let _=0;_<=e;_++){const A=_/e;a[_]=this.getTangentAt(A,new Q)}s[0]=new Q,o[0]=new Q;let d=Number.MAX_VALUE;const m=Math.abs(a[0].x),g=Math.abs(a[0].y),y=Math.abs(a[0].z);m<=d&&(d=m,i.set(1,0,0)),g<=d&&(d=g,i.set(0,1,0)),y<=d&&i.set(0,0,1),c.crossVectors(a[0],i).normalize(),s[0].crossVectors(a[0],c),o[0].crossVectors(a[0],s[0]);for(let _=1;_<=e;_++){if(s[_]=s[_-1].clone(),o[_]=o[_-1].clone(),c.crossVectors(a[_-1],a[_]),c.length()>Number.EPSILON){c.normalize();const A=Math.acos(rn(a[_-1].dot(a[_]),-1,1));s[_].applyMatrix4(f.makeRotationAxis(c,A))}o[_].crossVectors(a[_],s[_])}if(t===!0){let _=Math.acos(rn(s[0].dot(s[e]),-1,1));_/=e,a[0].dot(c.crossVectors(s[0],s[e]))>0&&(_=-_);for(let A=1;A<=e;A++)s[A].applyMatrix4(f.makeRotationAxis(a[A],_*A)),o[A].crossVectors(a[A],s[A])}return{tangents:a,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ub extends Io{constructor(e=0,t=0,i=1,a=1,s=0,o=Math.PI*2,c=!1,f=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=a,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=c,this.aRotation=f}getPoint(e,t=new Ze){const i=t,a=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=a;for(;s>a;)s-=a;s<Number.EPSILON&&(o?s=0:s=a),this.aClockwise===!0&&!o&&(s===a?s=-a:s=s-a);const c=this.aStartAngle+e*s;let f=this.aX+this.xRadius*Math.cos(c),d=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),y=f-this.aX,_=d-this.aY;f=y*m-_*g+this.aX,d=y*g+_*m+this.aY}return i.set(f,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class zN extends Ub{constructor(e,t,i,a,s,o){super(e,t,i,i,a,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function UE(){let n=0,e=0,t=0,i=0;function a(s,o,c,f){n=s,e=c,t=-3*s+3*o-2*c-f,i=2*s-2*o+c+f}return{initCatmullRom:function(s,o,c,f,d){a(o,c,d*(c-s),d*(f-o))},initNonuniformCatmullRom:function(s,o,c,f,d,m,g){let y=(o-s)/d-(c-s)/(d+m)+(c-o)/m,_=(c-o)/m-(f-o)/(m+g)+(f-c)/g;y*=m,_*=m,a(o,c,y,_)},calc:function(s){const o=s*s,c=o*s;return n+e*s+t*o+i*c}}}const px=new Q,LS=new UE,IS=new UE,PS=new UE;class HN extends Io{constructor(e=[],t=!1,i="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=a}getPoint(e,t=new Q){const i=t,a=this.points,s=a.length,o=(s-(this.closed?0:1))*e;let c=Math.floor(o),f=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/s)+1)*s:f===0&&c===s-1&&(c=s-2,f=1);let d,m;this.closed||c>0?d=a[(c-1)%s]:(px.subVectors(a[0],a[1]).add(a[0]),d=px);const g=a[c%s],y=a[(c+1)%s];if(this.closed||c+2<s?m=a[(c+2)%s]:(px.subVectors(a[s-1],a[s-2]).add(a[s-1]),m=px),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let A=Math.pow(d.distanceToSquared(g),_),T=Math.pow(g.distanceToSquared(y),_),E=Math.pow(y.distanceToSquared(m),_);T<1e-4&&(T=1),A<1e-4&&(A=T),E<1e-4&&(E=T),LS.initNonuniformCatmullRom(d.x,g.x,y.x,m.x,A,T,E),IS.initNonuniformCatmullRom(d.y,g.y,y.y,m.y,A,T,E),PS.initNonuniformCatmullRom(d.z,g.z,y.z,m.z,A,T,E)}else this.curveType==="catmullrom"&&(LS.initCatmullRom(d.x,g.x,y.x,m.x,this.tension),IS.initCatmullRom(d.y,g.y,y.y,m.y,this.tension),PS.initCatmullRom(d.z,g.z,y.z,m.z,this.tension));return i.set(LS.calc(f),IS.calc(f),PS.calc(f)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(new Q().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function PR(n,e,t,i,a){const s=(i-e)*.5,o=(a-t)*.5,c=n*n,f=n*c;return(2*t-2*i+s+o)*f+(-3*t+3*i-2*s-o)*c+s*n+t}function Y5(n,e){const t=1-n;return t*t*e}function q5(n,e){return 2*(1-n)*n*e}function K5(n,e){return n*n*e}function Kg(n,e,t,i){return Y5(n,e)+q5(n,t)+K5(n,i)}function W5(n,e){const t=1-n;return t*t*t*e}function J5(n,e){const t=1-n;return 3*t*t*n*e}function Z5(n,e){return 3*(1-n)*n*n*e}function Q5(n,e){return n*n*n*e}function Wg(n,e,t,i,a){return W5(n,e)+J5(n,t)+Z5(n,i)+Q5(n,a)}class LE extends Io{constructor(e=new Ze,t=new Ze,i=new Ze,a=new Ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=a}getPoint(e,t=new Ze){const i=t,a=this.v0,s=this.v1,o=this.v2,c=this.v3;return i.set(Wg(e,a.x,s.x,o.x,c.x),Wg(e,a.y,s.y,o.y,c.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class GN extends Io{constructor(e=new Q,t=new Q,i=new Q,a=new Q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=a}getPoint(e,t=new Q){const i=t,a=this.v0,s=this.v1,o=this.v2,c=this.v3;return i.set(Wg(e,a.x,s.x,o.x,c.x),Wg(e,a.y,s.y,o.y,c.y),Wg(e,a.z,s.z,o.z,c.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class IE extends Io{constructor(e=new Ze,t=new Ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ze){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ze){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class VN extends Io{constructor(e=new Q,t=new Q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Q){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Q){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PE extends Io{constructor(e=new Ze,t=new Ze,i=new Ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ze){const i=t,a=this.v0,s=this.v1,o=this.v2;return i.set(Kg(e,a.x,s.x,o.x),Kg(e,a.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class FE extends Io{constructor(e=new Q,t=new Q,i=new Q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Q){const i=t,a=this.v0,s=this.v1,o=this.v2;return i.set(Kg(e,a.x,s.x,o.x),Kg(e,a.y,s.y,o.y),Kg(e,a.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zE extends Io{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ze){const i=t,a=this.points,s=(a.length-1)*e,o=Math.floor(s),c=s-o,f=a[o===0?o:o-1],d=a[o],m=a[o>a.length-2?a.length-1:o+1],g=a[o>a.length-3?a.length-1:o+2];return i.set(PR(c,f.x,d.x,m.x,g.x),PR(c,f.y,d.y,m.y,g.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const a=this.points[t];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(new Ze().fromArray(a))}return this}}var X_=Object.freeze({__proto__:null,ArcCurve:zN,CatmullRomCurve3:HN,CubicBezierCurve:LE,CubicBezierCurve3:GN,EllipseCurve:Ub,LineCurve:IE,LineCurve3:VN,QuadraticBezierCurve:PE,QuadraticBezierCurve3:FE,SplineCurve:zE});class kN extends Io{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new X_[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),a=this.getCurveLengths();let s=0;for(;s<a.length;){if(a[s]>=i){const o=a[s]-i,c=this.curves[s],f=c.getLength(),d=f===0?0:1-o/f;return c.getPointAt(d,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,a=this.curves.length;i<a;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let a=0,s=this.curves;a<s.length;a++){const o=s[a],c=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,f=o.getPoints(c);for(let d=0;d<f.length;d++){const m=f[d];i&&i.equals(m)||(t.push(m),i=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const a=e.curves[t];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const a=this.curves[t];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const a=e.curves[t];this.curves.push(new X_[a.type]().fromJSON(a))}return this}}class j_ extends kN{constructor(e){super(),this.type="Path",this.currentPoint=new Ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new IE(this.currentPoint.clone(),new Ze(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,a){const s=new PE(this.currentPoint.clone(),new Ze(e,t),new Ze(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}bezierCurveTo(e,t,i,a,s,o){const c=new LE(this.currentPoint.clone(),new Ze(e,t),new Ze(i,a),new Ze(s,o));return this.curves.push(c),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new zE(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,a,s,o){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(e+c,t+f,i,a,s,o),this}absarc(e,t,i,a,s,o){return this.absellipse(e,t,i,i,a,s,o),this}ellipse(e,t,i,a,s,o,c,f){const d=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+d,t+m,i,a,s,o,c,f),this}absellipse(e,t,i,a,s,o,c,f){const d=new Ub(e,t,i,a,s,o,c,f);if(this.curves.length>0){const g=d.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(d);const m=d.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class _h extends j_{constructor(e){super(e),this.uuid=yr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,a=this.holes.length;i<a;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const a=e.holes[t];this.holes.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const a=this.holes[t];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const a=e.holes[t];this.holes.push(new j_().fromJSON(a))}return this}}function $5(n,e,t=2){const i=e&&e.length,a=i?e[0]*t:n.length;let s=XN(n,0,a,t,!0);const o=[];if(!s||s.next===s.prev)return o;let c,f,d;if(i&&(s=a8(n,e,s,t)),n.length>80*t){c=1/0,f=1/0;let m=-1/0,g=-1/0;for(let y=t;y<a;y+=t){const _=n[y],A=n[y+1];_<c&&(c=_),A<f&&(f=A),_>m&&(m=_),A>g&&(g=A)}d=Math.max(m-c,g-f),d=d!==0?32767/d:0}return m0(s,o,t,c,f,d,0),o}function XN(n,e,t,i,a){let s;if(a===m8(n,e,t,i)>0)for(let o=e;o<t;o+=i)s=FR(o/i|0,n[o],n[o+1],s);else for(let o=t-i;o>=e;o-=i)s=FR(o/i|0,n[o],n[o+1],s);return s&&Op(s,s.next)&&(v0(s),s=s.next),s}function Mh(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Op(t,t.next)||Gi(t.prev,t,t.next)===0)){if(v0(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function m0(n,e,t,i,a,s,o){if(!n)return;!o&&s&&c8(n,i,a,s);let c=n;for(;n.prev!==n.next;){const f=n.prev,d=n.next;if(s?t8(n,i,a,s):e8(n)){e.push(f.i,n.i,d.i),v0(n),n=d.next,c=d.next;continue}if(n=d,n===c){o?o===1?(n=n8(Mh(n),e),m0(n,e,t,i,a,s,2)):o===2&&i8(n,e,t,i,a,s):m0(Mh(n),e,t,i,a,s,1);break}}}function e8(n){const e=n.prev,t=n,i=n.next;if(Gi(e,t,i)>=0)return!1;const a=e.x,s=t.x,o=i.x,c=e.y,f=t.y,d=i.y,m=Math.min(a,s,o),g=Math.min(c,f,d),y=Math.max(a,s,o),_=Math.max(c,f,d);let A=i.next;for(;A!==e;){if(A.x>=m&&A.x<=y&&A.y>=g&&A.y<=_&&Ug(a,c,s,f,o,d,A.x,A.y)&&Gi(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function t8(n,e,t,i){const a=n.prev,s=n,o=n.next;if(Gi(a,s,o)>=0)return!1;const c=a.x,f=s.x,d=o.x,m=a.y,g=s.y,y=o.y,_=Math.min(c,f,d),A=Math.min(m,g,y),T=Math.max(c,f,d),E=Math.max(m,g,y),b=rM(_,A,e,t,i),R=rM(T,E,e,t,i);let D=n.prevZ,B=n.nextZ;for(;D&&D.z>=b&&B&&B.z<=R;){if(D.x>=_&&D.x<=T&&D.y>=A&&D.y<=E&&D!==a&&D!==o&&Ug(c,m,f,g,d,y,D.x,D.y)&&Gi(D.prev,D,D.next)>=0||(D=D.prevZ,B.x>=_&&B.x<=T&&B.y>=A&&B.y<=E&&B!==a&&B!==o&&Ug(c,m,f,g,d,y,B.x,B.y)&&Gi(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;D&&D.z>=b;){if(D.x>=_&&D.x<=T&&D.y>=A&&D.y<=E&&D!==a&&D!==o&&Ug(c,m,f,g,d,y,D.x,D.y)&&Gi(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;B&&B.z<=R;){if(B.x>=_&&B.x<=T&&B.y>=A&&B.y<=E&&B!==a&&B!==o&&Ug(c,m,f,g,d,y,B.x,B.y)&&Gi(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function n8(n,e){let t=n;do{const i=t.prev,a=t.next.next;!Op(i,a)&&YN(i,t,t.next,a)&&g0(i,a)&&g0(a,i)&&(e.push(i.i,t.i,a.i),v0(t),v0(t.next),t=n=a),t=t.next}while(t!==n);return Mh(t)}function i8(n,e,t,i,a,s){let o=n;do{let c=o.next.next;for(;c!==o.prev;){if(o.i!==c.i&&h8(o,c)){let f=qN(o,c);o=Mh(o,o.next),f=Mh(f,f.next),m0(o,e,t,i,a,s,0),m0(f,e,t,i,a,s,0);return}c=c.next}o=o.next}while(o!==n)}function a8(n,e,t,i){const a=[];for(let s=0,o=e.length;s<o;s++){const c=e[s]*i,f=s<o-1?e[s+1]*i:n.length,d=XN(n,c,f,i,!1);d===d.next&&(d.steiner=!0),a.push(f8(d))}a.sort(s8);for(let s=0;s<a.length;s++)t=r8(a[s],t);return t}function s8(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),a=(e.next.y-e.y)/(e.next.x-e.x);t=i-a}return t}function r8(n,e){const t=o8(n,e);if(!t)return e;const i=qN(t,n);return Mh(i,i.next),Mh(t,t.next)}function o8(n,e){let t=e;const i=n.x,a=n.y;let s=-1/0,o;if(Op(n,t))return t;do{if(Op(n,t.next))return t.next;if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const g=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=i&&g>s&&(s=g,o=t.x<t.next.x?t:t.next,g===i))return o}t=t.next}while(t!==e);if(!o)return null;const c=o,f=o.x,d=o.y;let m=1/0;t=o;do{if(i>=t.x&&t.x>=f&&i!==t.x&&jN(a<d?i:s,a,f,d,a<d?s:i,a,t.x,t.y)){const g=Math.abs(a-t.y)/(i-t.x);g0(t,n)&&(g<m||g===m&&(t.x>o.x||t.x===o.x&&l8(o,t)))&&(o=t,m=g)}t=t.next}while(t!==c);return o}function l8(n,e){return Gi(n.prev,n,e.prev)<0&&Gi(e.next,n,n.next)<0}function c8(n,e,t,i){let a=n;do a.z===0&&(a.z=rM(a.x,a.y,e,t,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==n);a.prevZ.nextZ=null,a.prevZ=null,u8(a)}function u8(n){let e,t=1;do{let i=n,a;n=null;let s=null;for(e=0;i;){e++;let o=i,c=0;for(let d=0;d<t&&(c++,o=o.nextZ,!!o);d++);let f=t;for(;c>0||f>0&&o;)c!==0&&(f===0||!o||i.z<=o.z)?(a=i,i=i.nextZ,c--):(a=o,o=o.nextZ,f--),s?s.nextZ=a:n=a,a.prevZ=s,s=a;i=o}s.nextZ=null,t*=2}while(e>1);return n}function rM(n,e,t,i,a){return n=(n-t)*a|0,e=(e-i)*a|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function f8(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function jN(n,e,t,i,a,s,o,c){return(a-o)*(e-c)>=(n-o)*(s-c)&&(n-o)*(i-c)>=(t-o)*(e-c)&&(t-o)*(s-c)>=(a-o)*(i-c)}function Ug(n,e,t,i,a,s,o,c){return!(n===o&&e===c)&&jN(n,e,t,i,a,s,o,c)}function h8(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!d8(n,e)&&(g0(n,e)&&g0(e,n)&&p8(n,e)&&(Gi(n.prev,n,e.prev)||Gi(n,e.prev,e))||Op(n,e)&&Gi(n.prev,n,n.next)>0&&Gi(e.prev,e,e.next)>0)}function Gi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Op(n,e){return n.x===e.x&&n.y===e.y}function YN(n,e,t,i){const a=gx(Gi(n,e,t)),s=gx(Gi(n,e,i)),o=gx(Gi(t,i,n)),c=gx(Gi(t,i,e));return!!(a!==s&&o!==c||a===0&&mx(n,t,e)||s===0&&mx(n,i,e)||o===0&&mx(t,n,i)||c===0&&mx(t,e,i))}function mx(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function gx(n){return n>0?1:n<0?-1:0}function d8(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&YN(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function g0(n,e){return Gi(n.prev,n,n.next)<0?Gi(n,e,n.next)>=0&&Gi(n,n.prev,e)>=0:Gi(n,e,n.prev)<0||Gi(n,n.next,e)<0}function p8(n,e){let t=n,i=!1;const a=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&a<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function qN(n,e){const t=oM(n.i,n.x,n.y),i=oM(e.i,e.x,e.y),a=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=a,a.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function FR(n,e,t,i){const a=oM(n,e,t);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function v0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function oM(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function m8(n,e,t,i){let a=0;for(let s=e,o=t-i;s<t;s+=i)a+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return a}class g8{static triangulate(e,t,i=2){return $5(e,t,i)}}class Do{static area(e){const t=e.length;let i=0;for(let a=t-1,s=0;s<t;a=s++)i+=e[a].x*e[s].y-e[s].x*e[a].y;return i*.5}static isClockWise(e){return Do.area(e)<0}static triangulateShape(e,t){const i=[],a=[],s=[];zR(e),HR(i,e);let o=e.length;t.forEach(zR);for(let f=0;f<t.length;f++)a.push(o),o+=t[f].length,HR(i,t[f]);const c=g8.triangulate(i,a);for(let f=0;f<c.length;f+=3)s.push(c.slice(f,f+3));return s}}function zR(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function HR(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Lb extends gn{constructor(e=new _h([new Ze(.5,.5),new Ze(-.5,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,a=[],s=[];for(let c=0,f=e.length;c<f;c++){const d=e[c];o(d)}this.setAttribute("position",new Pt(a,3)),this.setAttribute("uv",new Pt(s,2)),this.computeVertexNormals();function o(c){const f=[],d=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,A=t.bevelSize!==void 0?t.bevelSize:_-.1,T=t.bevelOffset!==void 0?t.bevelOffset:0,E=t.bevelSegments!==void 0?t.bevelSegments:3;const b=t.extrudePath,R=t.UVGenerator!==void 0?t.UVGenerator:v8;let D,B=!1,U,L,z,I;b&&(D=b.getSpacedPoints(m),B=!0,y=!1,U=b.computeFrenetFrames(m,!1),L=new Q,z=new Q,I=new Q),y||(E=0,_=0,A=0,T=0);const O=c.extractPoints(d);let P=O.shape;const Y=O.holes;if(!Do.isClockWise(P)){P=P.reverse();for(let Ye=0,je=Y.length;Ye<je;Ye++){const Xe=Y[Ye];Do.isClockWise(Xe)&&(Y[Ye]=Xe.reverse())}}function se(Ye){const Xe=10000000000000001e-36;let He=Ye[0];for(let gt=1;gt<=Ye.length;gt++){const st=gt%Ye.length,rt=Ye[st],Ot=rt.x-He.x,Gt=rt.y-He.y,$=Ot*Ot+Gt*Gt,X=Math.max(Math.abs(rt.x),Math.abs(rt.y),Math.abs(He.x),Math.abs(He.y)),Ee=Xe*X*X;if($<=Ee){Ye.splice(st,1),gt--;continue}He=rt}}se(P),Y.forEach(se);const ue=Y.length,me=P;for(let Ye=0;Ye<ue;Ye++){const je=Y[Ye];P=P.concat(je)}function H(Ye,je,Xe){return je||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ye.clone().addScaledVector(je,Xe)}const W=P.length;function q(Ye,je,Xe){let He,gt,st;const rt=Ye.x-je.x,Ot=Ye.y-je.y,Gt=Xe.x-Ye.x,$=Xe.y-Ye.y,X=rt*rt+Ot*Ot,Ee=rt*$-Ot*Gt;if(Math.abs(Ee)>Number.EPSILON){const Fe=Math.sqrt(X),ke=Math.sqrt(Gt*Gt+$*$),Le=je.x-Ot/Fe,xt=je.y+rt/Fe,pt=Xe.x-$/ke,St=Xe.y+Gt/ke,Rt=((pt-Le)*$-(St-xt)*Gt)/(rt*$-Ot*Gt);He=Le+rt*Rt-Ye.x,gt=xt+Ot*Rt-Ye.y;const nt=He*He+gt*gt;if(nt<=2)return new Ze(He,gt);st=Math.sqrt(nt/2)}else{let Fe=!1;rt>Number.EPSILON?Gt>Number.EPSILON&&(Fe=!0):rt<-Number.EPSILON?Gt<-Number.EPSILON&&(Fe=!0):Math.sign(Ot)===Math.sign($)&&(Fe=!0),Fe?(He=-Ot,gt=rt,st=Math.sqrt(X)):(He=rt,gt=Ot,st=Math.sqrt(X/2))}return new Ze(He/st,gt/st)}const ge=[];for(let Ye=0,je=me.length,Xe=je-1,He=Ye+1;Ye<je;Ye++,Xe++,He++)Xe===je&&(Xe=0),He===je&&(He=0),ge[Ye]=q(me[Ye],me[Xe],me[He]);const j=[];let fe,_e=ge.concat();for(let Ye=0,je=ue;Ye<je;Ye++){const Xe=Y[Ye];fe=[];for(let He=0,gt=Xe.length,st=gt-1,rt=He+1;He<gt;He++,st++,rt++)st===gt&&(st=0),rt===gt&&(rt=0),fe[He]=q(Xe[He],Xe[st],Xe[rt]);j.push(fe),_e=_e.concat(fe)}let Ae;if(E===0)Ae=Do.triangulateShape(me,Y);else{const Ye=[],je=[];for(let Xe=0;Xe<E;Xe++){const He=Xe/E,gt=_*Math.cos(He*Math.PI/2),st=A*Math.sin(He*Math.PI/2)+T;for(let rt=0,Ot=me.length;rt<Ot;rt++){const Gt=H(me[rt],ge[rt],st);bt(Gt.x,Gt.y,-gt),He===0&&Ye.push(Gt)}for(let rt=0,Ot=ue;rt<Ot;rt++){const Gt=Y[rt];fe=j[rt];const $=[];for(let X=0,Ee=Gt.length;X<Ee;X++){const Fe=H(Gt[X],fe[X],st);bt(Fe.x,Fe.y,-gt),He===0&&$.push(Fe)}He===0&&je.push($)}}Ae=Do.triangulateShape(Ye,je)}const De=Ae.length,ot=A+T;for(let Ye=0;Ye<W;Ye++){const je=y?H(P[Ye],_e[Ye],ot):P[Ye];B?(z.copy(U.normals[0]).multiplyScalar(je.x),L.copy(U.binormals[0]).multiplyScalar(je.y),I.copy(D[0]).add(z).add(L),bt(I.x,I.y,I.z)):bt(je.x,je.y,0)}for(let Ye=1;Ye<=m;Ye++)for(let je=0;je<W;je++){const Xe=y?H(P[je],_e[je],ot):P[je];B?(z.copy(U.normals[Ye]).multiplyScalar(Xe.x),L.copy(U.binormals[Ye]).multiplyScalar(Xe.y),I.copy(D[Ye]).add(z).add(L),bt(I.x,I.y,I.z)):bt(Xe.x,Xe.y,g/m*Ye)}for(let Ye=E-1;Ye>=0;Ye--){const je=Ye/E,Xe=_*Math.cos(je*Math.PI/2),He=A*Math.sin(je*Math.PI/2)+T;for(let gt=0,st=me.length;gt<st;gt++){const rt=H(me[gt],ge[gt],He);bt(rt.x,rt.y,g+Xe)}for(let gt=0,st=Y.length;gt<st;gt++){const rt=Y[gt];fe=j[gt];for(let Ot=0,Gt=rt.length;Ot<Gt;Ot++){const $=H(rt[Ot],fe[Ot],He);B?bt($.x,$.y+D[m-1].y,D[m-1].x+Xe):bt($.x,$.y,g+Xe)}}}ve(),Ne();function ve(){const Ye=a.length/3;if(y){let je=0,Xe=W*je;for(let He=0;He<De;He++){const gt=Ae[He];ct(gt[2]+Xe,gt[1]+Xe,gt[0]+Xe)}je=m+E*2,Xe=W*je;for(let He=0;He<De;He++){const gt=Ae[He];ct(gt[0]+Xe,gt[1]+Xe,gt[2]+Xe)}}else{for(let je=0;je<De;je++){const Xe=Ae[je];ct(Xe[2],Xe[1],Xe[0])}for(let je=0;je<De;je++){const Xe=Ae[je];ct(Xe[0]+W*m,Xe[1]+W*m,Xe[2]+W*m)}}i.addGroup(Ye,a.length/3-Ye,0)}function Ne(){const Ye=a.length/3;let je=0;Qe(me,je),je+=me.length;for(let Xe=0,He=Y.length;Xe<He;Xe++){const gt=Y[Xe];Qe(gt,je),je+=gt.length}i.addGroup(Ye,a.length/3-Ye,1)}function Qe(Ye,je){let Xe=Ye.length;for(;--Xe>=0;){const He=Xe;let gt=Xe-1;gt<0&&(gt=Ye.length-1);for(let st=0,rt=m+E*2;st<rt;st++){const Ot=W*st,Gt=W*(st+1),$=je+He+Ot,X=je+gt+Ot,Ee=je+gt+Gt,Fe=je+He+Gt;zt($,X,Ee,Fe)}}}function bt(Ye,je,Xe){f.push(Ye),f.push(je),f.push(Xe)}function ct(Ye,je,Xe){Xt(Ye),Xt(je),Xt(Xe);const He=a.length/3,gt=R.generateTopUV(i,a,He-3,He-2,He-1);ae(gt[0]),ae(gt[1]),ae(gt[2])}function zt(Ye,je,Xe,He){Xt(Ye),Xt(je),Xt(He),Xt(je),Xt(Xe),Xt(He);const gt=a.length/3,st=R.generateSideWallUV(i,a,gt-6,gt-3,gt-2,gt-1);ae(st[0]),ae(st[1]),ae(st[3]),ae(st[1]),ae(st[2]),ae(st[3])}function Xt(Ye){a.push(f[Ye*3+0]),a.push(f[Ye*3+1]),a.push(f[Ye*3+2])}function ae(Ye){s.push(Ye.x),s.push(Ye.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return y8(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const c=t[e.shapes[s]];i.push(c)}const a=e.options.extrudePath;return a!==void 0&&(e.options.extrudePath=new X_[a.type]().fromJSON(a)),new Lb(i,e.options)}}const v8={generateTopUV:function(n,e,t,i,a){const s=e[t*3],o=e[t*3+1],c=e[i*3],f=e[i*3+1],d=e[a*3],m=e[a*3+1];return[new Ze(s,o),new Ze(c,f),new Ze(d,m)]},generateSideWallUV:function(n,e,t,i,a,s){const o=e[t*3],c=e[t*3+1],f=e[t*3+2],d=e[i*3],m=e[i*3+1],g=e[i*3+2],y=e[a*3],_=e[a*3+1],A=e[a*3+2],T=e[s*3],E=e[s*3+1],b=e[s*3+2];return Math.abs(c-m)<Math.abs(o-d)?[new Ze(o,1-f),new Ze(d,1-g),new Ze(y,1-A),new Ze(T,1-b)]:[new Ze(c,1-f),new Ze(m,1-g),new Ze(_,1-A),new Ze(E,1-b)]}};function y8(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,a=n.length;i<a;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class X0 extends Vu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,a=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new X0(e.radius,e.detail)}}class Ib extends gn{constructor(e=[new Ze(0,-.5),new Ze(.5,0),new Ze(0,.5)],t=12,i=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:a},t=Math.floor(t),a=rn(a,0,Math.PI*2);const s=[],o=[],c=[],f=[],d=[],m=1/t,g=new Q,y=new Ze,_=new Q,A=new Q,T=new Q;let E=0,b=0;for(let R=0;R<=e.length-1;R++)switch(R){case 0:E=e[R+1].x-e[R].x,b=e[R+1].y-e[R].y,_.x=b*1,_.y=-E,_.z=b*0,T.copy(_),_.normalize(),f.push(_.x,_.y,_.z);break;case e.length-1:f.push(T.x,T.y,T.z);break;default:E=e[R+1].x-e[R].x,b=e[R+1].y-e[R].y,_.x=b*1,_.y=-E,_.z=b*0,A.copy(_),_.x+=T.x,_.y+=T.y,_.z+=T.z,_.normalize(),f.push(_.x,_.y,_.z),T.copy(A)}for(let R=0;R<=t;R++){const D=i+R*m*a,B=Math.sin(D),U=Math.cos(D);for(let L=0;L<=e.length-1;L++){g.x=e[L].x*B,g.y=e[L].y,g.z=e[L].x*U,o.push(g.x,g.y,g.z),y.x=R/t,y.y=L/(e.length-1),c.push(y.x,y.y);const z=f[3*L+0]*B,I=f[3*L+1],O=f[3*L+0]*U;d.push(z,I,O)}}for(let R=0;R<t;R++)for(let D=0;D<e.length-1;D++){const B=D+R*e.length,U=B,L=B+e.length,z=B+e.length+1,I=B+1;s.push(U,L,I),s.push(z,I,L)}this.setIndex(s),this.setAttribute("position",new Pt(o,3)),this.setAttribute("uv",new Pt(c,2)),this.setAttribute("normal",new Pt(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ib(e.points,e.segments,e.phiStart,e.phiLength)}}class j0 extends Vu{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,a,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new j0(e.radius,e.detail)}}class ku extends gn{constructor(e=1,t=1,i=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:a};const s=e/2,o=t/2,c=Math.floor(i),f=Math.floor(a),d=c+1,m=f+1,g=e/c,y=t/f,_=[],A=[],T=[],E=[];for(let b=0;b<m;b++){const R=b*y-o;for(let D=0;D<d;D++){const B=D*g-s;A.push(B,-R,0),T.push(0,0,1),E.push(D/c),E.push(1-b/f)}}for(let b=0;b<f;b++)for(let R=0;R<c;R++){const D=R+d*b,B=R+d*(b+1),U=R+1+d*(b+1),L=R+1+d*b;_.push(D,B,L),_.push(B,U,L)}this.setIndex(_),this.setAttribute("position",new Pt(A,3)),this.setAttribute("normal",new Pt(T,3)),this.setAttribute("uv",new Pt(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ku(e.width,e.height,e.widthSegments,e.heightSegments)}}class Pb extends gn{constructor(e=.5,t=1,i=32,a=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:a,thetaStart:s,thetaLength:o},i=Math.max(3,i),a=Math.max(1,a);const c=[],f=[],d=[],m=[];let g=e;const y=(t-e)/a,_=new Q,A=new Ze;for(let T=0;T<=a;T++){for(let E=0;E<=i;E++){const b=s+E/i*o;_.x=g*Math.cos(b),_.y=g*Math.sin(b),f.push(_.x,_.y,_.z),d.push(0,0,1),A.x=(_.x/t+1)/2,A.y=(_.y/t+1)/2,m.push(A.x,A.y)}g+=y}for(let T=0;T<a;T++){const E=T*(i+1);for(let b=0;b<i;b++){const R=b+E,D=R,B=R+i+1,U=R+i+2,L=R+1;c.push(D,B,L),c.push(B,U,L)}}this.setIndex(c),this.setAttribute("position",new Pt(f,3)),this.setAttribute("normal",new Pt(d,3)),this.setAttribute("uv",new Pt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Fb extends gn{constructor(e=new _h([new Ze(0,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],a=[],s=[],o=[];let c=0,f=0;if(Array.isArray(e)===!1)d(e);else for(let m=0;m<e.length;m++)d(e[m]),this.addGroup(c,f,m),c+=f,f=0;this.setIndex(i),this.setAttribute("position",new Pt(a,3)),this.setAttribute("normal",new Pt(s,3)),this.setAttribute("uv",new Pt(o,2));function d(m){const g=a.length/3,y=m.extractPoints(t);let _=y.shape;const A=y.holes;Do.isClockWise(_)===!1&&(_=_.reverse());for(let E=0,b=A.length;E<b;E++){const R=A[E];Do.isClockWise(R)===!0&&(A[E]=R.reverse())}const T=Do.triangulateShape(_,A);for(let E=0,b=A.length;E<b;E++){const R=A[E];_=_.concat(R)}for(let E=0,b=_.length;E<b;E++){const R=_[E];a.push(R.x,R.y,0),s.push(0,0,1),o.push(R.x,R.y)}for(let E=0,b=T.length;E<b;E++){const R=T[E],D=R[0]+g,B=R[1]+g,U=R[2]+g;i.push(D,B,U),f+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return x8(t,e)}static fromJSON(e,t){const i=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=t[e.shapes[a]];i.push(o)}return new Fb(i,e.curveSegments)}}function x8(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const a=n[t];e.shapes.push(a.uuid)}else e.shapes.push(n.uuid);return e}class Y0 extends gn{constructor(e=1,t=32,i=16,a=0,s=Math.PI*2,o=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:a,phiLength:s,thetaStart:o,thetaLength:c},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const f=Math.min(o+c,Math.PI);let d=0;const m=[],g=new Q,y=new Q,_=[],A=[],T=[],E=[];for(let b=0;b<=i;b++){const R=[],D=b/i;let B=0;b===0&&o===0?B=.5/t:b===i&&f===Math.PI&&(B=-.5/t);for(let U=0;U<=t;U++){const L=U/t;g.x=-e*Math.cos(a+L*s)*Math.sin(o+D*c),g.y=e*Math.cos(o+D*c),g.z=e*Math.sin(a+L*s)*Math.sin(o+D*c),A.push(g.x,g.y,g.z),y.copy(g).normalize(),T.push(y.x,y.y,y.z),E.push(L+B,1-D),R.push(d++)}m.push(R)}for(let b=0;b<i;b++)for(let R=0;R<t;R++){const D=m[b][R+1],B=m[b][R],U=m[b+1][R],L=m[b+1][R+1];(b!==0||o>0)&&_.push(D,B,L),(b!==i-1||f<Math.PI)&&_.push(B,U,L)}this.setIndex(_),this.setAttribute("position",new Pt(A,3)),this.setAttribute("normal",new Pt(T,3)),this.setAttribute("uv",new Pt(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Y0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class zb extends Vu{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,a,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zb(e.radius,e.detail)}}class Hb extends gn{constructor(e=1,t=.4,i=12,a=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:a,arc:s},i=Math.floor(i),a=Math.floor(a);const o=[],c=[],f=[],d=[],m=new Q,g=new Q,y=new Q;for(let _=0;_<=i;_++)for(let A=0;A<=a;A++){const T=A/a*s,E=_/i*Math.PI*2;g.x=(e+t*Math.cos(E))*Math.cos(T),g.y=(e+t*Math.cos(E))*Math.sin(T),g.z=t*Math.sin(E),c.push(g.x,g.y,g.z),m.x=e*Math.cos(T),m.y=e*Math.sin(T),y.subVectors(g,m).normalize(),f.push(y.x,y.y,y.z),d.push(A/a),d.push(_/i)}for(let _=1;_<=i;_++)for(let A=1;A<=a;A++){const T=(a+1)*_+A-1,E=(a+1)*(_-1)+A-1,b=(a+1)*(_-1)+A,R=(a+1)*_+A;o.push(T,E,R),o.push(E,b,R)}this.setIndex(o),this.setAttribute("position",new Pt(c,3)),this.setAttribute("normal",new Pt(f,3)),this.setAttribute("uv",new Pt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hb(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Gb extends gn{constructor(e=1,t=.4,i=64,a=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:a,p:s,q:o},i=Math.floor(i),a=Math.floor(a);const c=[],f=[],d=[],m=[],g=new Q,y=new Q,_=new Q,A=new Q,T=new Q,E=new Q,b=new Q;for(let D=0;D<=i;++D){const B=D/i*s*Math.PI*2;R(B,s,o,e,_),R(B+.01,s,o,e,A),E.subVectors(A,_),b.addVectors(A,_),T.crossVectors(E,b),b.crossVectors(T,E),T.normalize(),b.normalize();for(let U=0;U<=a;++U){const L=U/a*Math.PI*2,z=-t*Math.cos(L),I=t*Math.sin(L);g.x=_.x+(z*b.x+I*T.x),g.y=_.y+(z*b.y+I*T.y),g.z=_.z+(z*b.z+I*T.z),f.push(g.x,g.y,g.z),y.subVectors(g,_).normalize(),d.push(y.x,y.y,y.z),m.push(D/i),m.push(U/a)}}for(let D=1;D<=i;D++)for(let B=1;B<=a;B++){const U=(a+1)*(D-1)+(B-1),L=(a+1)*D+(B-1),z=(a+1)*D+B,I=(a+1)*(D-1)+B;c.push(U,L,I),c.push(L,z,I)}this.setIndex(c),this.setAttribute("position",new Pt(f,3)),this.setAttribute("normal",new Pt(d,3)),this.setAttribute("uv",new Pt(m,2));function R(D,B,U,L,z){const I=Math.cos(D),O=Math.sin(D),P=U/B*D,Y=Math.cos(P);z.x=L*(2+Y)*.5*I,z.y=L*(2+Y)*O*.5,z.z=L*Math.sin(P)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Vb extends gn{constructor(e=new FE(new Q(-1,-1,0),new Q(-1,1,0),new Q(1,1,0)),t=64,i=1,a=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:a,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const c=new Q,f=new Q,d=new Ze;let m=new Q;const g=[],y=[],_=[],A=[];T(),this.setIndex(A),this.setAttribute("position",new Pt(g,3)),this.setAttribute("normal",new Pt(y,3)),this.setAttribute("uv",new Pt(_,2));function T(){for(let D=0;D<t;D++)E(D);E(s===!1?t:0),R(),b()}function E(D){m=e.getPointAt(D/t,m);const B=o.normals[D],U=o.binormals[D];for(let L=0;L<=a;L++){const z=L/a*Math.PI*2,I=Math.sin(z),O=-Math.cos(z);f.x=O*B.x+I*U.x,f.y=O*B.y+I*U.y,f.z=O*B.z+I*U.z,f.normalize(),y.push(f.x,f.y,f.z),c.x=m.x+i*f.x,c.y=m.y+i*f.y,c.z=m.z+i*f.z,g.push(c.x,c.y,c.z)}}function b(){for(let D=1;D<=t;D++)for(let B=1;B<=a;B++){const U=(a+1)*(D-1)+(B-1),L=(a+1)*D+(B-1),z=(a+1)*D+B,I=(a+1)*(D-1)+B;A.push(U,L,I),A.push(L,z,I)}}function R(){for(let D=0;D<=t;D++)for(let B=0;B<=a;B++)d.x=D/t,d.y=B/a,_.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Vb(new X_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class KN extends gn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,a=new Q,s=new Q;if(e.index!==null){const o=e.attributes.position,c=e.index;let f=e.groups;f.length===0&&(f=[{start:0,count:c.count,materialIndex:0}]);for(let d=0,m=f.length;d<m;++d){const g=f[d],y=g.start,_=g.count;for(let A=y,T=y+_;A<T;A+=3)for(let E=0;E<3;E++){const b=c.getX(A+E),R=c.getX(A+(E+1)%3);a.fromBufferAttribute(o,b),s.fromBufferAttribute(o,R),GR(a,s,i)===!0&&(t.push(a.x,a.y,a.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let c=0,f=o.count/3;c<f;c++)for(let d=0;d<3;d++){const m=3*c+d,g=3*c+(d+1)%3;a.fromBufferAttribute(o,m),s.fromBufferAttribute(o,g),GR(a,s,i)===!0&&(t.push(a.x,a.y,a.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Pt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function GR(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,a=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(a)===!0?!1:(t.add(i),t.add(a),!0)}var VR=Object.freeze({__proto__:null,BoxGeometry:Bh,CapsuleGeometry:Bb,CircleGeometry:Nb,ConeGeometry:k0,CylinderGeometry:V0,DodecahedronGeometry:Ob,EdgesGeometry:FN,ExtrudeGeometry:Lb,IcosahedronGeometry:X0,LatheGeometry:Ib,OctahedronGeometry:j0,PlaneGeometry:ku,PolyhedronGeometry:Vu,RingGeometry:Pb,ShapeGeometry:Fb,SphereGeometry:Y0,TetrahedronGeometry:zb,TorusGeometry:Hb,TorusKnotGeometry:Gb,TubeGeometry:Vb,WireframeGeometry:KN});class WN extends Ma{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Et(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class JN extends tr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class q0 extends Ma{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Et(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Jr extends q0{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return rn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Et(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Et(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Et(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class ZN extends Ma{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Et(16777215),this.specular=new Et(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xr,this.combine=U0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class QN extends Ma{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Et(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class $N extends Ma{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class eO extends Ma{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xr,this.combine=U0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class HE extends Ma{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=mN,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class GE extends Ma{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class tO extends Ma{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Et(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nO extends fs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function dh(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function iO(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function aO(n){function e(a,s){return n[a]-n[s]}const t=n.length,i=new Array(t);for(let a=0;a!==t;++a)i[a]=a;return i.sort(e),i}function lM(n,e,t){const i=n.length,a=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const c=t[s]*e;for(let f=0;f!==e;++f)a[o++]=n[c+f]}return a}function VE(n,e,t,i){let a=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[a++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push(...o)),s=n[a++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[a++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[a++];while(s!==void 0)}function _8(n,e,t,i,a=30){const s=n.clone();s.name=e;const o=[];for(let f=0;f<s.tracks.length;++f){const d=s.tracks[f],m=d.getValueSize(),g=[],y=[];for(let _=0;_<d.times.length;++_){const A=d.times[_]*a;if(!(A<t||A>=i)){g.push(d.times[_]);for(let T=0;T<m;++T)y.push(d.values[_*m+T])}}g.length!==0&&(d.times=dh(g,d.times.constructor),d.values=dh(y,d.values.constructor),o.push(d))}s.tracks=o;let c=1/0;for(let f=0;f<s.tracks.length;++f)c>s.tracks[f].times[0]&&(c=s.tracks[f].times[0]);for(let f=0;f<s.tracks.length;++f)s.tracks[f].shift(-1*c);return s.resetDuration(),s}function b8(n,e=0,t=n,i=30){i<=0&&(i=30);const a=t.tracks.length,s=e/i;for(let o=0;o<a;++o){const c=t.tracks[o],f=c.ValueTypeName;if(f==="bool"||f==="string")continue;const d=n.tracks.find(function(b){return b.name===c.name&&b.ValueTypeName===f});if(d===void 0)continue;let m=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let y=0;const _=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=_/3);const A=c.times.length-1;let T;if(s<=c.times[0]){const b=m,R=g-m;T=c.values.slice(b,R)}else if(s>=c.times[A]){const b=A*g+m,R=b+g-m;T=c.values.slice(b,R)}else{const b=c.createInterpolant(),R=m,D=g-m;b.evaluate(s),T=b.resultBuffer.slice(R,D)}f==="quaternion"&&new Pa().fromArray(T).normalize().conjugate().toArray(T);const E=d.times.length;for(let b=0;b<E;++b){const R=b*_+y;if(f==="quaternion")Pa.multiplyQuaternionsFlat(d.values,R,T,0,d.values,R);else{const D=_-y*2;for(let B=0;B<D;++B)d.values[R+B]-=T[B]}}}return n.blendMode=xE,n}class A8{static convertArray(e,t){return dh(e,t)}static isTypedArray(e){return iO(e)}static getKeyframeOrder(e){return aO(e)}static sortedArray(e,t,i){return lM(e,t,i)}static flattenJSON(e,t,i,a){VE(e,t,i,a)}static subclip(e,t,i,a,s=30){return _8(e,t,i,a,s)}static makeClipAdditive(e,t=0,i=e,a=30){return b8(e,t,i,a)}}class Yp{constructor(e,t,i,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,a=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<a)){for(let c=i+2;;){if(a===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===c)break;if(s=a,a=t[++i],e<a)break t}o=t.length;break n}if(!(e>=s)){const c=t[1];e<c&&(i=2,s=c);for(let f=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===f)break;if(a=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const c=i+o>>>1;e<t[c]?o=c:i=c+1}if(a=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,a)}return this.interpolate_(i,s,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,a=this.valueSize,s=e*a;for(let o=0;o!==a;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class sO extends Yp{constructor(e,t,i,a){super(e,t,i,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:uh,endingEnd:uh}}intervalChanged_(e,t,i){const a=this.parameterPositions;let s=e-2,o=e+1,c=a[s],f=a[o];if(c===void 0)switch(this.getSettings_().endingStart){case fh:s=e,c=2*t-i;break;case u0:s=a.length-2,c=t+a[s]-a[s+1];break;default:s=e,c=i}if(f===void 0)switch(this.getSettings_().endingEnd){case fh:o=e,f=2*i-t;break;case u0:o=1,f=i+a[1]-a[0];break;default:o=e-1,f=t}const d=(i-t)*.5,m=this.valueSize;this._weightPrev=d/(t-c),this._weightNext=d/(f-i),this._offsetPrev=s*m,this._offsetNext=o*m}interpolate_(e,t,i,a){const s=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=e*c,d=f-c,m=this._offsetPrev,g=this._offsetNext,y=this._weightPrev,_=this._weightNext,A=(i-t)/(a-t),T=A*A,E=T*A,b=-y*E+2*y*T-y*A,R=(1+y)*E+(-1.5-2*y)*T+(-.5+y)*A+1,D=(-1-_)*E+(1.5+_)*T+.5*A,B=_*E-_*T;for(let U=0;U!==c;++U)s[U]=b*o[m+U]+R*o[d+U]+D*o[f+U]+B*o[g+U];return s}}class kE extends Yp{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e,t,i,a){const s=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=e*c,d=f-c,m=(i-t)/(a-t),g=1-m;for(let y=0;y!==c;++y)s[y]=o[d+y]*g+o[f+y]*m;return s}}class rO extends Yp{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class Zr{constructor(e,t,i,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=dh(t,this.TimeBufferType),this.values=dh(i,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:dh(e.times,Array),values:dh(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(i.interpolation=a)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new rO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new kE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new sO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Cp:t=this.InterpolantFactoryMethodDiscrete;break;case wp:t=this.InterpolantFactoryMethodLinear;break;case Xx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Cp;case this.InterpolantFactoryMethodLinear:return wp;case this.InterpolantFactoryMethodSmooth:return Xx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,a=t.length;i!==a;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,a=t.length;i!==a;++i)t[i]*=e}return this}trim(e,t){const i=this.times,a=i.length;let s=0,o=a-1;for(;s!==a&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==a){s>=o&&(o=Math.max(o,1),s=o-1);const c=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*c,o*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,a=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let c=0;c!==s;c++){const f=i[c];if(typeof f=="number"&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,f),e=!1;break}if(o!==null&&o>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,f,o),e=!1;break}o=f}if(a!==void 0&&iO(a))for(let c=0,f=a.length;c!==f;++c){const d=a[c];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),a=this.getInterpolation()===Xx,s=e.length-1;let o=1;for(let c=1;c<s;++c){let f=!1;const d=e[c],m=e[c+1];if(d!==m&&(c!==1||d!==e[0]))if(a)f=!0;else{const g=c*i,y=g-i,_=g+i;for(let A=0;A!==i;++A){const T=t[g+A];if(T!==t[y+A]||T!==t[_+A]){f=!0;break}}}if(f){if(c!==o){e[o]=e[c];const g=c*i,y=o*i;for(let _=0;_!==i;++_)t[y+_]=t[g+_]}++o}}if(s>0){e[o]=e[s];for(let c=s*i,f=o*i,d=0;d!==i;++d)t[f+d]=t[c+d];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,a=new i(this.name,e,t);return a.createInterpolant=this.createInterpolant,a}}Zr.prototype.ValueTypeName="";Zr.prototype.TimeBufferType=Float32Array;Zr.prototype.ValueBufferType=Float32Array;Zr.prototype.DefaultInterpolation=wp;class Nh extends Zr{constructor(e,t,i){super(e,t,i)}}Nh.prototype.ValueTypeName="bool";Nh.prototype.ValueBufferType=Array;Nh.prototype.DefaultInterpolation=Cp;Nh.prototype.InterpolantFactoryMethodLinear=void 0;Nh.prototype.InterpolantFactoryMethodSmooth=void 0;class XE extends Zr{constructor(e,t,i,a){super(e,t,i,a)}}XE.prototype.ValueTypeName="color";class Eh extends Zr{constructor(e,t,i,a){super(e,t,i,a)}}Eh.prototype.ValueTypeName="number";class oO extends Yp{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e,t,i,a){const s=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=(i-t)/(a-t);let d=e*c;for(let m=d+c;d!==m;d+=4)Pa.slerpFlat(s,0,o,d-c,o,d,f);return s}}class Th extends Zr{constructor(e,t,i,a){super(e,t,i,a)}InterpolantFactoryMethodLinear(e){return new oO(this.times,this.values,this.getValueSize(),e)}}Th.prototype.ValueTypeName="quaternion";Th.prototype.InterpolantFactoryMethodSmooth=void 0;class Oh extends Zr{constructor(e,t,i){super(e,t,i)}}Oh.prototype.ValueTypeName="string";Oh.prototype.ValueBufferType=Array;Oh.prototype.DefaultInterpolation=Cp;Oh.prototype.InterpolantFactoryMethodLinear=void 0;Oh.prototype.InterpolantFactoryMethodSmooth=void 0;class Ch extends Zr{constructor(e,t,i,a){super(e,t,i,a)}}Ch.prototype.ValueTypeName="vector";class Up{constructor(e="",t=-1,i=[],a=bb){this.name=e,this.tracks=i,this.duration=t,this.blendMode=a,this.uuid=yr(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,a=1/(e.fps||1);for(let o=0,c=i.length;o!==c;++o)t.push(M8(i[o]).scale(a));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],i=e.tracks,a={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,o=i.length;s!==o;++s)t.push(Zr.toJSON(i[s]));return a}static CreateFromMorphTargetSequence(e,t,i,a){const s=t.length,o=[];for(let c=0;c<s;c++){let f=[],d=[];f.push((c+s-1)%s,c,(c+1)%s),d.push(0,1,0);const m=aO(f);f=lM(f,1,m),d=lM(d,1,m),!a&&f[0]===0&&(f.push(s),d.push(d[0])),o.push(new Eh(".morphTargetInfluences["+t[c].name+"]",f,d).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const a=e;i=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<i.length;a++)if(i[a].name===t)return i[a];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const a={},s=/^([\w-]*?)([\d]+)$/;for(let c=0,f=e.length;c<f;c++){const d=e[c],m=d.name.match(s);if(m&&m.length>1){const g=m[1];let y=a[g];y||(a[g]=y=[]),y.push(d)}}const o=[];for(const c in a)o.push(this.CreateFromMorphTargetSequence(c,a[c],t,i));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(g,y,_,A,T){if(_.length!==0){const E=[],b=[];VE(_,E,b,A),E.length!==0&&T.push(new g(y,E,b))}},a=[],s=e.name||"default",o=e.fps||30,c=e.blendMode;let f=e.length||-1;const d=e.hierarchy||[];for(let g=0;g<d.length;g++){const y=d[g].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const _={};let A;for(A=0;A<y.length;A++)if(y[A].morphTargets)for(let T=0;T<y[A].morphTargets.length;T++)_[y[A].morphTargets[T]]=-1;for(const T in _){const E=[],b=[];for(let R=0;R!==y[A].morphTargets.length;++R){const D=y[A];E.push(D.time),b.push(D.morphTarget===T?1:0)}a.push(new Eh(".morphTargetInfluence["+T+"]",E,b))}f=_.length*o}else{const _=".bones["+t[g].name+"]";i(Ch,_+".position",y,"pos",a),i(Th,_+".quaternion",y,"rot",a),i(Ch,_+".scale",y,"scl",a)}}return a.length===0?null:new this(s,f,a,c)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,a=e.length;i!==a;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function S8(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Eh;case"vector":case"vector2":case"vector3":case"vector4":return Ch;case"color":return XE;case"quaternion":return Th;case"bool":case"boolean":return Nh;case"string":return Oh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function M8(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=S8(n.type);if(n.times===void 0){const t=[],i=[];VE(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const _l={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class kb{constructor(e,t,i){const a=this;let s=!1,o=0,c=0,f;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.abortController=new AbortController,this.itemStart=function(m){c++,s===!1&&a.onStart!==void 0&&a.onStart(m,o,c),s=!0},this.itemEnd=function(m){o++,a.onProgress!==void 0&&a.onProgress(m,o,c),o===c&&(s=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(m){a.onError!==void 0&&a.onError(m)},this.resolveURL=function(m){return f?f(m):m},this.setURLModifier=function(m){return f=m,this},this.addHandler=function(m,g){return d.push(m,g),this},this.removeHandler=function(m){const g=d.indexOf(m);return g!==-1&&d.splice(g,2),this},this.getHandler=function(m){for(let g=0,y=d.length;g<y;g+=2){const _=d[g],A=d[g+1];if(_.global&&(_.lastIndex=0),_.test(m))return A}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const lO=new kb;class Qa{constructor(e){this.manager=e!==void 0?e:lO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(a,s){i.load(e,a,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Qa.DEFAULT_MATERIAL_NAME="__DEFAULT";const uc={};class E8 extends Error{constructor(e,t){super(e),this.response=t}}class Za extends Qa{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=_l.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(uc[e]!==void 0){uc[e].push({onLoad:t,onProgress:i,onError:a});return}uc[e]=[],uc[e].push({onLoad:t,onProgress:i,onError:a});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),c=this.mimeType,f=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const m=uc[e],g=d.body.getReader(),y=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),_=y?parseInt(y):0,A=_!==0;let T=0;const E=new ReadableStream({start(b){R();function R(){g.read().then(({done:D,value:B})=>{if(D)b.close();else{T+=B.byteLength;const U=new ProgressEvent("progress",{lengthComputable:A,loaded:T,total:_});for(let L=0,z=m.length;L<z;L++){const I=m[L];I.onProgress&&I.onProgress(U)}b.enqueue(B),R()}},D=>{b.error(D)})}}});return new Response(E)}else throw new E8(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(f){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(m=>new DOMParser().parseFromString(m,c));case"json":return d.json();default:if(c==="")return d.text();{const g=/charset="?([^;"\s]*)"?/i.exec(c),y=g&&g[1]?g[1].toLowerCase():void 0,_=new TextDecoder(y);return d.arrayBuffer().then(A=>_.decode(A))}}}).then(d=>{_l.add(`file:${e}`,d);const m=uc[e];delete uc[e];for(let g=0,y=m.length;g<y;g++){const _=m[g];_.onLoad&&_.onLoad(d)}}).catch(d=>{const m=uc[e];if(m===void 0)throw this.manager.itemError(e),d;delete uc[e];for(let g=0,y=m.length;g<y;g++){const _=m[g];_.onError&&_.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class T8 extends Qa{constructor(e){super(e)}load(e,t,i,a){const s=this,o=new Za(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(f){a?a(f):console.error(f),s.manager.itemError(e)}},i,a)}parse(e){const t=[];for(let i=0;i<e.length;i++){const a=Up.parse(e[i]);t.push(a)}return t}}class C8 extends Qa{constructor(e){super(e)}load(e,t,i,a){const s=this,o=[],c=new Db,f=new Za(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(s.withCredentials);let d=0;function m(g){f.load(e[g],function(y){const _=s.parse(y,!0);o[g]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},d+=1,d===6&&(_.mipmapCount===1&&(c.minFilter=ni),c.image=o,c.format=_.format,c.needsUpdate=!0,t&&t(c))},i,a)}if(Array.isArray(e))for(let g=0,y=e.length;g<y;++g)m(g);else f.load(e,function(g){const y=s.parse(g,!0);if(y.isCubemap){const _=y.mipmaps.length/y.mipmapCount;for(let A=0;A<_;A++){o[A]={mipmaps:[]};for(let T=0;T<y.mipmapCount;T++)o[A].mipmaps.push(y.mipmaps[A*y.mipmapCount+T]),o[A].format=y.format,o[A].width=y.width,o[A].height=y.height}c.image=o}else c.image.width=y.width,c.image.height=y.height,c.mipmaps=y.mipmaps;y.mipmapCount===1&&(c.minFilter=ni),c.format=y.format,c.needsUpdate=!0,t&&t(c)},i,a);return c}}const $d=new WeakMap;class y0 extends Qa{constructor(e){super(e)}load(e,t,i,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=_l.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let g=$d.get(o);g===void 0&&(g=[],$d.set(o,g)),g.push({onLoad:t,onError:a})}return o}const c=d0("img");function f(){m(),t&&t(this);const g=$d.get(this)||[];for(let y=0;y<g.length;y++){const _=g[y];_.onLoad&&_.onLoad(this)}$d.delete(this),s.manager.itemEnd(e)}function d(g){m(),a&&a(g),_l.remove(`image:${e}`);const y=$d.get(this)||[];for(let _=0;_<y.length;_++){const A=y[_];A.onError&&A.onError(g)}$d.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function m(){c.removeEventListener("load",f,!1),c.removeEventListener("error",d,!1)}return c.addEventListener("load",f,!1),c.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),_l.add(`image:${e}`,c),s.manager.itemStart(e),c.src=e,c}}class cO extends Qa{constructor(e){super(e)}load(e,t,i,a){const s=new F0;s.colorSpace=Wa;const o=new y0(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let c=0;function f(d){o.load(e[d],function(m){s.images[d]=m,c++,c===6&&(s.needsUpdate=!0,t&&t(s))},void 0,a)}for(let d=0;d<e.length;++d)f(d);return s}}class jE extends Qa{constructor(e){super(e)}load(e,t,i,a){const s=this,o=new Bo,c=new Za(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(s.withCredentials),c.load(e,function(f){let d;try{d=s.parse(f)}catch(m){if(a!==void 0)a(m);else{console.error(m);return}}d.image!==void 0?o.image=d.image:d.data!==void 0&&(o.image.width=d.width,o.image.height=d.height,o.image.data=d.data),o.wrapS=d.wrapS!==void 0?d.wrapS:aa,o.wrapT=d.wrapT!==void 0?d.wrapT:aa,o.magFilter=d.magFilter!==void 0?d.magFilter:ni,o.minFilter=d.minFilter!==void 0?d.minFilter:ni,o.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(o.colorSpace=d.colorSpace),d.flipY!==void 0&&(o.flipY=d.flipY),d.format!==void 0&&(o.format=d.format),d.type!==void 0&&(o.type=d.type),d.mipmaps!==void 0&&(o.mipmaps=d.mipmaps,o.minFilter=Yr),d.mipmapCount===1&&(o.minFilter=ni),d.generateMipmaps!==void 0&&(o.generateMipmaps=d.generateMipmaps),o.needsUpdate=!0,t&&t(o,d)},i,a),o}}class uO extends Qa{constructor(e){super(e)}load(e,t,i,a){const s=new ri,o=new y0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(c){s.image=c,s.needsUpdate=!0,t!==void 0&&t(s)},i,a),s}}class Xu extends Hn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Et(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class fO extends Xu{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Et(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const FS=new $t,kR=new Q,XR=new Q;class YE{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ze(512,512),this.mapType=Us,this.map=null,this.mapPass=null,this.matrix=new $t,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jp,this._frameExtents=new Ze(1,1),this._viewportCount=1,this._viewports=[new jn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;kR.setFromMatrixPosition(e.matrixWorld),t.position.copy(kR),XR.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(XR),t.updateMatrixWorld(),FS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(FS,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(FS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class w8 extends YE{constructor(){super(new Ji(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=Dp*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(i!==t.fov||a!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=a,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class qE extends Xu{constructor(e,t,i=0,a=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.target=new Hn,this.distance=i,this.angle=a,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new w8}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const jR=new $t,Cg=new Q,zS=new Q;class R8 extends YE{constructor(){super(new Ji(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ze(4,2),this._viewportCount=6,this._viewports=[new jn(2,1,1,1),new jn(0,1,1,1),new jn(3,1,1,1),new jn(1,1,1,1),new jn(3,0,1,1),new jn(1,0,1,1)],this._cubeDirections=[new Q(1,0,0),new Q(-1,0,0),new Q(0,0,1),new Q(0,0,-1),new Q(0,1,0),new Q(0,-1,0)],this._cubeUps=[new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,0,1),new Q(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,a=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Cg.setFromMatrixPosition(e.matrixWorld),i.position.copy(Cg),zS.copy(i.position),zS.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(zS),i.updateMatrixWorld(),a.makeTranslation(-Cg.x,-Cg.y,-Cg.z),jR.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jR,i.coordinateSystem,i.reversedDepth)}}class KE extends Xu{constructor(e,t,i=0,a=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=a,this.shadow=new R8}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Tl extends Mb{constructor(e=-1,t=1,i=1,a=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=a,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,a,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let s=i-e,o=i+e,c=a+t,f=a-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,c-=m*this.view.offsetY,f=c-m*this.view.height}this.projectionMatrix.makeOrthographic(s,o,c,f,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class D8 extends YE{constructor(){super(new Tl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class WE extends Xu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.target=new Hn,this.shadow=new D8}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class hO extends Xu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class dO extends Xu{constructor(e,t,i=10,a=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class pO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Q)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,a=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*a),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*a)),t.addScaledVector(o[5],1.092548*(a*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-a*a)),t}getIrradianceAt(e,t){const i=e.x,a=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*a),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*a),t.addScaledVector(o[5],2*.429043*a*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-a*a)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].fromArray(e,t+a*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].toArray(e,t+a*3);return e}static getBasisAt(e,t){const i=e.x,a=e.y,s=e.z;t[0]=.282095,t[1]=.488603*a,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*a,t[5]=1.092548*a*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-a*a)}}class mO extends Xu{constructor(e=new pO,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Xb extends Qa{constructor(e){super(e),this.textures={}}load(e,t,i,a){const s=this,o=new Za(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(f){a?a(f):console.error(f),s.manager.itemError(e)}},i,a)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const a=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(a.uuid=e.uuid),e.name!==void 0&&(a.name=e.name),e.color!==void 0&&a.color!==void 0&&a.color.setHex(e.color),e.roughness!==void 0&&(a.roughness=e.roughness),e.metalness!==void 0&&(a.metalness=e.metalness),e.sheen!==void 0&&(a.sheen=e.sheen),e.sheenColor!==void 0&&(a.sheenColor=new Et().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(a.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(e.emissive),e.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(e.specular),e.specularIntensity!==void 0&&(a.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(a.shininess=e.shininess),e.clearcoat!==void 0&&(a.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(a.dispersion=e.dispersion),e.iridescence!==void 0&&(a.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(a.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(a.transmission=e.transmission),e.thickness!==void 0&&(a.thickness=e.thickness),e.attenuationDistance!==void 0&&(a.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(a.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(a.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(a.fog=e.fog),e.flatShading!==void 0&&(a.flatShading=e.flatShading),e.blending!==void 0&&(a.blending=e.blending),e.combine!==void 0&&(a.combine=e.combine),e.side!==void 0&&(a.side=e.side),e.shadowSide!==void 0&&(a.shadowSide=e.shadowSide),e.opacity!==void 0&&(a.opacity=e.opacity),e.transparent!==void 0&&(a.transparent=e.transparent),e.alphaTest!==void 0&&(a.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(a.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(a.depthFunc=e.depthFunc),e.depthTest!==void 0&&(a.depthTest=e.depthTest),e.depthWrite!==void 0&&(a.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(a.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(a.blendSrc=e.blendSrc),e.blendDst!==void 0&&(a.blendDst=e.blendDst),e.blendEquation!==void 0&&(a.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(a.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(a.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(a.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(a.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(a.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(a.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(a.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(a.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(a.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(a.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(a.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(a.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(a.rotation=e.rotation),e.linewidth!==void 0&&(a.linewidth=e.linewidth),e.dashSize!==void 0&&(a.dashSize=e.dashSize),e.gapSize!==void 0&&(a.gapSize=e.gapSize),e.scale!==void 0&&(a.scale=e.scale),e.polygonOffset!==void 0&&(a.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(a.dithering=e.dithering),e.alphaToCoverage!==void 0&&(a.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(a.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(a.visible=e.visible),e.toneMapped!==void 0&&(a.toneMapped=e.toneMapped),e.userData!==void 0&&(a.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?a.vertexColors=e.vertexColors>0:a.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(a.uniforms[s]={},o.type){case"t":a.uniforms[s].value=i(o.value);break;case"c":a.uniforms[s].value=new Et().setHex(o.value);break;case"v2":a.uniforms[s].value=new Ze().fromArray(o.value);break;case"v3":a.uniforms[s].value=new Q().fromArray(o.value);break;case"v4":a.uniforms[s].value=new jn().fromArray(o.value);break;case"m3":a.uniforms[s].value=new yn().fromArray(o.value);break;case"m4":a.uniforms[s].value=new $t().fromArray(o.value);break;default:a.uniforms[s].value=o.value}}if(e.defines!==void 0&&(a.defines=e.defines),e.vertexShader!==void 0&&(a.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(a.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(a.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)a.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(a.lights=e.lights),e.clipping!==void 0&&(a.clipping=e.clipping),e.size!==void 0&&(a.size=e.size),e.sizeAttenuation!==void 0&&(a.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(a.map=i(e.map)),e.matcap!==void 0&&(a.matcap=i(e.matcap)),e.alphaMap!==void 0&&(a.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(a.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(a.bumpScale=e.bumpScale),e.normalMap!==void 0&&(a.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(a.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),a.normalScale=new Ze().fromArray(s)}return e.displacementMap!==void 0&&(a.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(a.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(a.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(a.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(a.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(a.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(a.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(a.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(a.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(a.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(a.envMap=i(e.envMap)),e.envMapRotation!==void 0&&a.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(a.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(a.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(a.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(a.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(a.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(a.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(a.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(a.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(a.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new Ze().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(a.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(a.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(a.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(a.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(a.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=i(e.sheenRoughnessMap)),a}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Xb.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:WN,SpriteMaterial:CE,RawShaderMaterial:JN,ShaderMaterial:tr,PointsMaterial:Rb,MeshPhysicalMaterial:Jr,MeshStandardMaterial:q0,MeshPhongMaterial:ZN,MeshToonMaterial:QN,MeshNormalMaterial:$N,MeshLambertMaterial:eO,MeshDepthMaterial:HE,MeshDistanceMaterial:GE,MeshBasicMaterial:er,MeshMatcapMaterial:tO,LineDashedMaterial:nO,LineBasicMaterial:fs,Material:Ma};return new t[e]}}class Ou{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class gO extends gn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class vO extends Qa{constructor(e){super(e)}load(e,t,i,a){const s=this,o=new Za(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(f){a?a(f):console.error(f),s.manager.itemError(e)}},i,a)}parse(e){const t={},i={};function a(_,A){if(t[A]!==void 0)return t[A];const E=_.interleavedBuffers[A],b=s(_,E.buffer),R=fp(E.type,b),D=new H0(R,E.stride);return D.uuid=E.uuid,t[A]=D,D}function s(_,A){if(i[A]!==void 0)return i[A];const E=_.arrayBuffers[A],b=new Uint32Array(E).buffer;return i[A]=b,b}const o=e.isInstancedBufferGeometry?new gO:new gn,c=e.data.index;if(c!==void 0){const _=fp(c.type,c.array);o.setIndex(new Yn(_,1))}const f=e.data.attributes;for(const _ in f){const A=f[_];let T;if(A.isInterleavedBufferAttribute){const E=a(e.data,A.data);T=new Fu(E,A.itemSize,A.offset,A.normalized)}else{const E=fp(A.type,A.array),b=A.isInstancedBufferAttribute?Sh:Yn;T=new b(E,A.itemSize,A.normalized)}A.name!==void 0&&(T.name=A.name),A.usage!==void 0&&T.setUsage(A.usage),o.setAttribute(_,T)}const d=e.data.morphAttributes;if(d)for(const _ in d){const A=d[_],T=[];for(let E=0,b=A.length;E<b;E++){const R=A[E];let D;if(R.isInterleavedBufferAttribute){const B=a(e.data,R.data);D=new Fu(B,R.itemSize,R.offset,R.normalized)}else{const B=fp(R.type,R.array);D=new Yn(B,R.itemSize,R.normalized)}R.name!==void 0&&(D.name=R.name),T.push(D)}o.morphAttributes[_]=T}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let _=0,A=g.length;_!==A;++_){const T=g[_];o.addGroup(T.start,T.count,T.materialIndex)}const y=e.data.boundingSphere;return y!==void 0&&(o.boundingSphere=new Fa().fromJSON(y)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class B8 extends Qa{constructor(e){super(e)}load(e,t,i,a){const s=this,o=this.path===""?Ou.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const c=new Za(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){let d=null;try{d=JSON.parse(f)}catch(g){a!==void 0&&a(g),console.error("THREE:ObjectLoader: Can't parse "+e+".",g.message);return}const m=d.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(d,t)},i,a)}async loadAsync(e,t){const i=this,a=this.path===""?Ou.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new Za(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),c=JSON.parse(o),f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(c)}parse(e,t){const i=this.parseAnimations(e.animations),a=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,a),o=this.parseImages(e.images,function(){t!==void 0&&t(d)}),c=this.parseTextures(e.textures,o),f=this.parseMaterials(e.materials,c),d=this.parseObject(e.object,s,f,c,i),m=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,m),this.bindLightTargets(d),t!==void 0){let g=!1;for(const y in o)if(o[y].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,o),f=this.parseObject(e.object,a,c,o,t),d=this.parseSkeletons(e.skeletons,f);return this.bindSkeletons(f,d),this.bindLightTargets(f),f}parseShapes(e){const t={};if(e!==void 0)for(let i=0,a=e.length;i<a;i++){const s=new _h().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},a={};if(t.traverse(function(s){s.isBone&&(a[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const c=new G0().fromJSON(e[s],a);i[c.uuid]=c}return i}parseGeometries(e,t){const i={};if(e!==void 0){const a=new vO;for(let s=0,o=e.length;s<o;s++){let c;const f=e[s];switch(f.type){case"BufferGeometry":case"InstancedBufferGeometry":c=a.parse(f);break;default:f.type in VR?c=VR[f.type].fromJSON(f,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${f.type}"`)}c.uuid=f.uuid,f.name!==void 0&&(c.name=f.name),f.userData!==void 0&&(c.userData=f.userData),i[f.uuid]=c}}return i}parseMaterials(e,t){const i={},a={};if(e!==void 0){const s=new Xb;s.setTextures(t);for(let o=0,c=e.length;o<c;o++){const f=e[o];i[f.uuid]===void 0&&(i[f.uuid]=s.parse(f)),a[f.uuid]=i[f.uuid]}}return a}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const a=e[i],s=Up.parse(a);t[s.uuid]=s}return t}parseImages(e,t){const i=this,a={};let s;function o(f){return i.manager.itemStart(f),s.load(f,function(){i.manager.itemEnd(f)},void 0,function(){i.manager.itemError(f),i.manager.itemEnd(f)})}function c(f){if(typeof f=="string"){const d=f,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:i.resourcePath+d;return o(m)}else return f.data?{data:fp(f.type,f.data),width:f.width,height:f.height}:null}if(e!==void 0&&e.length>0){const f=new kb(t);s=new y0(f),s.setCrossOrigin(this.crossOrigin);for(let d=0,m=e.length;d<m;d++){const g=e[d],y=g.url;if(Array.isArray(y)){const _=[];for(let A=0,T=y.length;A<T;A++){const E=y[A],b=c(E);b!==null&&(b instanceof HTMLImageElement?_.push(b):_.push(new Bo(b.data,b.width,b.height)))}a[g.uuid]=new Bu(_)}else{const _=c(g.url);a[g.uuid]=new Bu(_)}}}return a}async parseImagesAsync(e){const t=this,i={};let a;async function s(o){if(typeof o=="string"){const c=o,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await a.loadAsync(f)}else return o.data?{data:fp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){a=new y0(this.manager),a.setCrossOrigin(this.crossOrigin);for(let o=0,c=e.length;o<c;o++){const f=e[o],d=f.url;if(Array.isArray(d)){const m=[];for(let g=0,y=d.length;g<y;g++){const _=d[g],A=await s(_);A!==null&&(A instanceof HTMLImageElement?m.push(A):m.push(new Bo(A.data,A.width,A.height)))}i[f.uuid]=new Bu(m)}else{const m=await s(f.url);i[f.uuid]=new Bu(m)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const a={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const c=e[s];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const f=t[c.image],d=f.data;let m;Array.isArray(d)?(m=new F0,d.length===6&&(m.needsUpdate=!0)):(d&&d.data?m=new Bo:m=new ri,d&&(m.needsUpdate=!0)),m.source=f,m.uuid=c.uuid,c.name!==void 0&&(m.name=c.name),c.mapping!==void 0&&(m.mapping=i(c.mapping,N8)),c.channel!==void 0&&(m.channel=c.channel),c.offset!==void 0&&m.offset.fromArray(c.offset),c.repeat!==void 0&&m.repeat.fromArray(c.repeat),c.center!==void 0&&m.center.fromArray(c.center),c.rotation!==void 0&&(m.rotation=c.rotation),c.wrap!==void 0&&(m.wrapS=i(c.wrap[0],YR),m.wrapT=i(c.wrap[1],YR)),c.format!==void 0&&(m.format=c.format),c.internalFormat!==void 0&&(m.internalFormat=c.internalFormat),c.type!==void 0&&(m.type=c.type),c.colorSpace!==void 0&&(m.colorSpace=c.colorSpace),c.minFilter!==void 0&&(m.minFilter=i(c.minFilter,qR)),c.magFilter!==void 0&&(m.magFilter=i(c.magFilter,qR)),c.anisotropy!==void 0&&(m.anisotropy=c.anisotropy),c.flipY!==void 0&&(m.flipY=c.flipY),c.generateMipmaps!==void 0&&(m.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(m.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(m.compareFunction=c.compareFunction),c.userData!==void 0&&(m.userData=c.userData),a[c.uuid]=m}return a}parseObject(e,t,i,a,s){let o;function c(y){return t[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),t[y]}function f(y){if(y!==void 0){if(Array.isArray(y)){const _=[];for(let A=0,T=y.length;A<T;A++){const E=y[A];i[E]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",E),_.push(i[E])}return _}return i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),i[y]}}function d(y){return a[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),a[y]}let m,g;switch(e.type){case"Scene":o=new z0,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Et(e.background):o.background=d(e.background)),e.environment!==void 0&&(o.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Tb(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Eb(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Ji(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Tl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new hO(e.color,e.intensity);break;case"DirectionalLight":o=new WE(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new KE(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new dO(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new qE(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new fO(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new mO().fromJSON(e);break;case"SkinnedMesh":m=c(e.geometry),g=f(e.material),o=new wE(m,g),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":m=c(e.geometry),g=f(e.material),o=new Oi(m,g);break;case"InstancedMesh":m=c(e.geometry),g=f(e.material);const y=e.count,_=e.instanceMatrix,A=e.instanceColor;o=new RE(m,g,y),o.instanceMatrix=new Sh(new Float32Array(_.array),16),A!==void 0&&(o.instanceColor=new Sh(new Float32Array(A.array),A.itemSize));break;case"BatchedMesh":m=c(e.geometry),g=f(e.material),o=new IN(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),o.geometry=m,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(T=>{let E=null,b=null;return T.boundingBox!==void 0&&(E=new Ja().fromJSON(T.boundingBox)),T.boundingSphere!==void 0&&(b=new Fa().fromJSON(T.boundingSphere)),{...T,boundingBox:E,boundingSphere:b}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=d(e.matricesTexture.uuid),o._indirectTexture=d(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=d(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new Fa().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new Ja().fromJSON(e.boundingBox));break;case"LOD":o=new LN;break;case"Line":o=new Sc(c(e.geometry),f(e.material));break;case"LineLoop":o=new DE(c(e.geometry),f(e.material));break;case"LineSegments":o=new Lo(c(e.geometry),f(e.material));break;case"PointCloud":case"Points":o=new BE(c(e.geometry),f(e.material));break;case"Sprite":o=new UN(f(e.material));break;case"Group":o=new mc;break;case"Bone":o=new Cb;break;default:o=new Hn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let _=0;_<y.length;_++)o.add(this.parseObject(y[_],t,i,a,s))}if(e.animations!==void 0){const y=e.animations;for(let _=0;_<y.length;_++){const A=y[_];o.animations.push(s[A])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const y=e.levels;for(let _=0;_<y.length;_++){const A=y[_],T=o.getObjectByProperty("uuid",A.object);T!==void 0&&o.addLevel(T,A.distance,A.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const a=t[i.skeleton];a===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(a,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,a=e.getObjectByProperty("uuid",i);a!==void 0?t.target=a:t.target=new Hn}})}}const N8={UVMapping:Lu,CubeReflectionMapping:Rl,CubeRefractionMapping:Iu,EquirectangularReflectionMapping:bp,EquirectangularRefractionMapping:c0,CubeUVReflectionMapping:Xp},YR={RepeatWrapping:Pu,ClampToEdgeWrapping:aa,MirroredRepeatWrapping:Ap},qR={NearestFilter:Ia,NearestMipmapNearestFilter:pb,NearestMipmapLinearFilter:ch,LinearFilter:ni,LinearMipmapNearestFilter:pp,LinearMipmapLinearFilter:Yr},HS=new WeakMap;class yO extends Qa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=_l.get(`image-bitmap:${e}`);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(d=>{if(HS.has(o)===!0)a&&a(HS.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(d),s.manager.itemEnd(e),d});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,c.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const f=fetch(e,c).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(d){return _l.add(`image-bitmap:${e}`,d),t&&t(d),s.manager.itemEnd(e),d}).catch(function(d){a&&a(d),HS.set(f,d),_l.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});_l.add(`image-bitmap:${e}`,f),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let vx;class JE{static getContext(){return vx===void 0&&(vx=new(window.AudioContext||window.webkitAudioContext)),vx}static setContext(e){vx=e}}class O8 extends Qa{constructor(e){super(e)}load(e,t,i,a){const s=this,o=new Za(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(f){try{const d=f.slice(0);JE.getContext().decodeAudioData(d,function(g){t(g)}).catch(c)}catch(d){c(d)}},i,a);function c(f){a?a(f):console.error(f),s.manager.itemError(e)}}}const KR=new $t,WR=new $t,jf=new $t;class U8{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ji,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ji,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,jf.copy(e.projectionMatrix);const a=t.eyeSep/2,s=a*t.near/t.focus,o=t.near*Math.tan(xh*t.fov*.5)/t.zoom;let c,f;WR.elements[12]=-a,KR.elements[12]=a,c=-o*t.aspect+s,f=o*t.aspect+s,jf.elements[0]=2*t.near/(f-c),jf.elements[8]=(f+c)/(f-c),this.cameraL.projectionMatrix.copy(jf),c=-o*t.aspect-s,f=o*t.aspect-s,jf.elements[0]=2*t.near/(f-c),jf.elements[8]=(f+c)/(f-c),this.cameraR.projectionMatrix.copy(jf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(WR),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(KR)}}class xO extends Ji{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class ZE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Yf=new Q,GS=new Pa,L8=new Q,qf=new Q,Kf=new Q;class I8 extends Hn{constructor(){super(),this.type="AudioListener",this.context=JE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ZE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Yf,GS,L8),qf.set(0,0,-1).applyQuaternion(GS),Kf.set(0,1,0).applyQuaternion(GS),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Yf.x,i),t.positionY.linearRampToValueAtTime(Yf.y,i),t.positionZ.linearRampToValueAtTime(Yf.z,i),t.forwardX.linearRampToValueAtTime(qf.x,i),t.forwardY.linearRampToValueAtTime(qf.y,i),t.forwardZ.linearRampToValueAtTime(qf.z,i),t.upX.linearRampToValueAtTime(Kf.x,i),t.upY.linearRampToValueAtTime(Kf.y,i),t.upZ.linearRampToValueAtTime(Kf.z,i)}else t.setPosition(Yf.x,Yf.y,Yf.z),t.setOrientation(qf.x,qf.y,qf.z,Kf.x,Kf.y,Kf.z)}}class _O extends Hn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Wf=new Q,JR=new Pa,P8=new Q,Jf=new Q;class F8 extends _O{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Wf,JR,P8),Jf.set(0,0,1).applyQuaternion(JR);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Wf.x,i),t.positionY.linearRampToValueAtTime(Wf.y,i),t.positionZ.linearRampToValueAtTime(Wf.z,i),t.orientationX.linearRampToValueAtTime(Jf.x,i),t.orientationY.linearRampToValueAtTime(Jf.y,i),t.orientationZ.linearRampToValueAtTime(Jf.z,i)}else t.setPosition(Wf.x,Wf.y,Wf.z),t.setOrientation(Jf.x,Jf.y,Jf.z)}}class z8{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class bO{constructor(e,t,i){this.binding=e,this.valueSize=i;let a,s,o;switch(t){case"quaternion":a=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":a=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:a=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,a=this.valueSize,s=e*a+a;let o=this.cumulativeWeight;if(o===0){for(let c=0;c!==a;++c)i[s+c]=i[c];o=t}else{o+=t;const c=t/o;this._mixBufferRegion(i,s,0,c,a)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,a=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,a,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,a=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const f=t*this._origIndex;this._mixBufferRegion(i,a,f,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,a,this._addIndex*t,1,t);for(let f=t,d=t+t;f!==d;++f)if(i[f]!==i[f+t]){c.setValue(i,a);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,a=i*this._origIndex;e.getValue(t,a);for(let s=i,o=a;s!==o;++s)t[s]=t[a+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,a,s){if(a>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,a){Pa.slerpFlat(e,t,e,t,e,i,a)}_slerpAdditive(e,t,i,a,s){const o=this._workIndex*s;Pa.multiplyQuaternionsFlat(e,o,e,t,e,i),Pa.slerpFlat(e,t,e,t,e,o,a)}_lerp(e,t,i,a,s){const o=1-a;for(let c=0;c!==s;++c){const f=t+c;e[f]=e[f]*o+e[i+c]*a}}_lerpAdditive(e,t,i,a,s){for(let o=0;o!==s;++o){const c=t+o;e[c]=e[c]+e[i+o]*a}}}const QE="\\[\\]\\.:\\/",H8=new RegExp("["+QE+"]","g"),$E="[^"+QE+"]",G8="[^"+QE.replace("\\.","")+"]",V8=/((?:WC+[\/:])*)/.source.replace("WC",$E),k8=/(WCOD+)?/.source.replace("WCOD",G8),X8=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",$E),j8=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",$E),Y8=new RegExp("^"+V8+k8+X8+j8+"$"),q8=["material","materials","bones","map"];class K8{constructor(e,t,i){const a=i||kn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,a)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,a=this._bindings[i];a!==void 0&&a.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let a=this._targetGroup.nCachedObjects_,s=i.length;a!==s;++a)i[a].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class kn{constructor(e,t,i){this.path=t,this.parsedPath=i||kn.parseTrackName(t),this.node=kn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new kn.Composite(e,t,i):new kn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(H8,"")}static parseTrackName(e){const t=Y8.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},a=i.nodeName&&i.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const s=i.nodeName.substring(a+1);q8.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,a),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const c=s[o];if(c.name===t||c.uuid===t)return c;const f=i(c.children);if(f)return f}return null},a=i(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)e[t++]=i[a]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,a=t.propertyName;let s=t.propertyIndex;if(e||(e=kn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let d=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===d){d=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const o=e[a];if(o===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+a+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(s!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}f=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(f=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=a;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}kn.Composite=K8;kn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};kn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};kn.prototype.GetterByBindingType=[kn.prototype._getValue_direct,kn.prototype._getValue_array,kn.prototype._getValue_arrayElement,kn.prototype._getValue_toArray];kn.prototype.SetterByBindingTypeAndVersioning=[[kn.prototype._setValue_direct,kn.prototype._setValue_direct_setNeedsUpdate,kn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[kn.prototype._setValue_array,kn.prototype._setValue_array_setNeedsUpdate,kn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[kn.prototype._setValue_arrayElement,kn.prototype._setValue_arrayElement_setNeedsUpdate,kn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[kn.prototype._setValue_fromArray,kn.prototype._setValue_fromArray_setNeedsUpdate,kn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class W8{constructor(){this.isAnimationObjectGroup=!0,this.uuid=yr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,a=arguments.length;i!==a;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length;let c,f=e.length,d=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const y=arguments[m],_=y.uuid;let A=t[_];if(A===void 0){A=f++,t[_]=A,e.push(y);for(let T=0,E=o;T!==E;++T)s[T].push(new kn(y,i[T],a[T]))}else if(A<d){c=e[A];const T=--d,E=e[T];t[E.uuid]=A,e[A]=E,t[_]=T,e[T]=y;for(let b=0,R=o;b!==R;++b){const D=s[b],B=D[T];let U=D[A];D[A]=B,U===void 0&&(U=new kn(y,i[b],a[b])),D[T]=U}}else e[A]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,a=i.length;let s=this.nCachedObjects_;for(let o=0,c=arguments.length;o!==c;++o){const f=arguments[o],d=f.uuid,m=t[d];if(m!==void 0&&m>=s){const g=s++,y=e[g];t[y.uuid]=m,e[m]=y,t[d]=g,e[g]=f;for(let _=0,A=a;_!==A;++_){const T=i[_],E=T[g],b=T[m];T[m]=E,T[g]=b}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,a=i.length;let s=this.nCachedObjects_,o=e.length;for(let c=0,f=arguments.length;c!==f;++c){const d=arguments[c],m=d.uuid,g=t[m];if(g!==void 0)if(delete t[m],g<s){const y=--s,_=e[y],A=--o,T=e[A];t[_.uuid]=g,e[g]=_,t[T.uuid]=y,e[y]=T,e.pop();for(let E=0,b=a;E!==b;++E){const R=i[E],D=R[y],B=R[A];R[g]=D,R[y]=B,R.pop()}}else{const y=--o,_=e[y];y>0&&(t[_.uuid]=g),e[g]=_,e.pop();for(let A=0,T=a;A!==T;++A){const E=i[A];E[g]=E[y],E.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let a=i[e];const s=this._bindings;if(a!==void 0)return s[a];const o=this._paths,c=this._parsedPaths,f=this._objects,d=f.length,m=this.nCachedObjects_,g=new Array(d);a=s.length,i[e]=a,o.push(e),c.push(t),s.push(g);for(let y=m,_=f.length;y!==_;++y){const A=f[y];g[y]=new kn(A,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const a=this._paths,s=this._parsedPaths,o=this._bindings,c=o.length-1,f=o[c],d=e[c];t[d]=i,o[i]=f,o.pop(),s[i]=s[c],s.pop(),a[i]=a[c],a.pop()}}}class AO{constructor(e,t,i=null,a=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=a;const s=t.tracks,o=s.length,c=new Array(o),f={endingStart:uh,endingEnd:uh};for(let d=0;d!==o;++d){const m=s[d].createInterpolant(null);c[d]=m,m.settings=f}this._interpolantSettings=f,this._interpolants=c,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=hN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const a=this._clip.duration,s=e._clip.duration,o=s/a,c=a/s;e.warp(1,o,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const a=this._mixer,s=a.time,o=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=a._lendControlInterpolant(),this._timeScaleInterpolant=c);const f=c.parameterPositions,d=c.sampleValues;return f[0]=s,f[1]=s+i,d[0]=e/o,d[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,a){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const f=(e-s)*i;f<0||i===0?t=0:(this._startTime=null,t=i*f)}t*=this._updateTimeScale(e);const o=this._updateTime(t),c=this._updateWeight(e);if(c>0){const f=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case xE:for(let m=0,g=f.length;m!==g;++m)f[m].evaluate(o),d[m].accumulateAdditive(c);break;case bb:default:for(let m=0,g=f.length;m!==g;++m)f[m].evaluate(o),d[m].accumulate(a,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const a=i.evaluate(e)[0];t*=a,e>i.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const a=i.evaluate(e)[0];t*=a,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let a=this.time+e,s=this._loopCount;const o=i===dN;if(e===0)return s===-1?a:o&&(s&1)===1?t-a:a;if(i===fN){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=t)a=t;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),a>=t||a<0){const c=Math.floor(a/t);a-=t*c,s+=Math.abs(c);const f=this.repetitions-s;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?t:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const d=e<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=a;if(o&&(s&1)===1)return t-a}return a}_setEndings(e,t,i){const a=this._interpolantSettings;i?(a.endingStart=fh,a.endingEnd=fh):(e?a.endingStart=this.zeroSlopeAtStart?fh:uh:a.endingStart=u0,t?a.endingEnd=this.zeroSlopeAtEnd?fh:uh:a.endingEnd=u0)}_scheduleFading(e,t,i){const a=this._mixer,s=a.time;let o=this._weightInterpolant;o===null&&(o=a._lendControlInterpolant(),this._weightInterpolant=o);const c=o.parameterPositions,f=o.sampleValues;return c[0]=s,f[0]=t,c[1]=s+e,f[1]=i,this}}const J8=new Float32Array(1);class Z8 extends Nl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,a=e._clip.tracks,s=a.length,o=e._propertyBindings,c=e._interpolants,f=i.uuid,d=this._bindingsByRootAndName;let m=d[f];m===void 0&&(m={},d[f]=m);for(let g=0;g!==s;++g){const y=a[g],_=y.name;let A=m[_];if(A!==void 0)++A.referenceCount,o[g]=A;else{if(A=o[g],A!==void 0){A._cacheIndex===null&&(++A.referenceCount,this._addInactiveBinding(A,f,_));continue}const T=t&&t._propertyBindings[g].binding.parsedPath;A=new bO(kn.create(i,_,T),y.ValueTypeName,y.getValueSize()),++A.referenceCount,this._addInactiveBinding(A,f,_),o[g]=A}c[g].resultBuffer=A.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,a=e._clip.uuid,s=this._actionsByClip[a];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,a,i)}const t=e._propertyBindings;for(let i=0,a=t.length;i!==a;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,a=t.length;i!==a;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const a=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const c=o.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=a.length,a.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],a=e._cacheIndex;i._cacheIndex=a,t[a]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,c=o[s],f=c.knownActions,d=f[f.length-1],m=e._byClipCacheIndex;d._byClipCacheIndex=m,f[m]=d,f.pop(),e._byClipCacheIndex=null;const g=c.actionByRoot,y=(e._localRoot||this._root).uuid;delete g[y],f.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,a=t.length;i!==a;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,a=this._nActiveActions++,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,a=--this._nActiveActions,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const a=this._bindingsByRootAndName,s=this._bindings;let o=a[t];o===void 0&&(o={},a[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,a=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,c=o[a],f=t[t.length-1],d=e._cacheIndex;f._cacheIndex=d,t[d]=f,t.pop(),delete c[s],Object.keys(c).length===0&&delete o[a]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,a=this._nActiveBindings++,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,a=--this._nActiveBindings,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new kE(new Float32Array(2),new Float32Array(2),1,J8),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,a=--this._nActiveControlInterpolants,s=t[a];e.__cacheIndex=a,t[a]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const a=t||this._root,s=a.uuid;let o=typeof e=="string"?Up.findByName(a,e):e;const c=o!==null?o.uuid:e,f=this._actionsByClip[c];let d=null;if(i===void 0&&(o!==null?i=o.blendMode:i=bb),f!==void 0){const g=f.actionByRoot[s];if(g!==void 0&&g.blendMode===i)return g;d=f.knownActions[0],o===null&&(o=d._clip)}if(o===null)return null;const m=new AO(this,o,t,i);return this._bindAction(m,d),this._addInactiveAction(m,c,s),m}existingAction(e,t){const i=t||this._root,a=i.uuid,s=typeof e=="string"?Up.findByName(i,e):e,o=s?s.uuid:e,c=this._actionsByClip[o];return c!==void 0&&c.actionByRoot[a]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,a=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let d=0;d!==i;++d)t[d]._update(a,e,s,o);const c=this._bindings,f=this._nActiveBindings;for(let d=0;d!==f;++d)c[d].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,a=this._actionsByClip,s=a[i];if(s!==void 0){const o=s.knownActions;for(let c=0,f=o.length;c!==f;++c){const d=o[c];this._deactivateAction(d);const m=d._cacheIndex,g=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,g._cacheIndex=m,t[m]=g,t.pop(),this._removeInactiveBindingsForAction(d)}delete a[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const c=i[o].actionByRoot,f=c[t];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const a=this._bindingsByRootAndName,s=a[t];if(s!==void 0)for(const o in s){const c=s[o];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Q8 extends SE{constructor(e=1,t=1,i=1,a={}){super(e,t,a),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Sb(null,e,t,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class eT{constructor(e){this.value=e}clone(){return new eT(this.value.clone===void 0?this.value:this.value.clone())}}let $8=0;class e9 extends Nl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:$8++}),this.name="",this.usage=h0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,a=t.length;i<a;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class t9 extends H0{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class n9{constructor(e,t,i,a,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=a,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const ZR=new $t;class tT{constructor(e,t,i=0,a=1/0){this.ray=new Dh(e,t),this.near=i,this.far=a,this.camera=null,this.layers=new Bp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return ZR.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(ZR),this}intersectObject(e,t=!0,i=[]){return cM(e,this,i,t),i.sort(QR),i}intersectObjects(e,t=!0,i=[]){for(let a=0,s=e.length;a<s;a++)cM(e[a],this,i,t);return i.sort(QR),i}}function QR(n,e){return n.distance-e.distance}function cM(n,e,t,i){let a=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(a=!1),a===!0&&i===!0){const s=n.children;for(let o=0,c=s.length;o<c;o++)cM(s[o],e,t,!0)}}class i9{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=a9.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function a9(){this._document.hidden===!1&&this.reset()}class uM{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=rn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(rn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class s9{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class nT{constructor(e,t,i,a){nT.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,a)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,a){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=a,this}}const $R=new Ze;class r9{constructor(e=new Ze(1/0,1/0),t=new Ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=$R.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,$R).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const e2=new Q,yx=new Q,ep=new Q,tp=new Q,VS=new Q,o9=new Q,l9=new Q;class c9{constructor(e=new Q,t=new Q){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){e2.subVectors(e,this.start),yx.subVectors(this.end,this.start);const i=yx.dot(yx);let s=yx.dot(e2)/i;return t&&(s=rn(s,0,1)),s}closestPointToPoint(e,t,i){const a=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(a).add(this.start)}distanceSqToLine3(e,t=o9,i=l9){const a=10000000000000001e-32;let s,o;const c=this.start,f=e.start,d=this.end,m=e.end;ep.subVectors(d,c),tp.subVectors(m,f),VS.subVectors(c,f);const g=ep.dot(ep),y=tp.dot(tp),_=tp.dot(VS);if(g<=a&&y<=a)return t.copy(c),i.copy(f),t.sub(i),t.dot(t);if(g<=a)s=0,o=_/y,o=rn(o,0,1);else{const A=ep.dot(VS);if(y<=a)o=0,s=rn(-A/g,0,1);else{const T=ep.dot(tp),E=g*y-T*T;E!==0?s=rn((T*_-A*y)/E,0,1):s=0,o=(T*s+_)/y,o<0?(o=0,s=rn(-A/g,0,1)):o>1&&(o=1,s=rn((T-A)/g,0,1))}}return t.copy(c).add(ep.multiplyScalar(s)),i.copy(f).add(tp.multiplyScalar(o)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const t2=new Q;class u9 extends Hn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new gn,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,c=1,f=32;o<f;o++,c++){const d=o/f*Math.PI*2,m=c/f*Math.PI*2;a.push(Math.cos(d),Math.sin(d),1,Math.cos(m),Math.sin(m),1)}i.setAttribute("position",new Pt(a,3));const s=new fs({fog:!1,toneMapped:!1});this.cone=new Lo(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),t2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Eu=new Q,xx=new $t,kS=new $t;class f9 extends Lo{constructor(e){const t=SO(e),i=new gn,a=[],s=[];for(let d=0;d<t.length;d++){const m=t[d];m.parent&&m.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}i.setAttribute("position",new Pt(a,3)),i.setAttribute("color",new Pt(s,3));const o=new fs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const c=new Et(255),f=new Et(65280);this.setColors(c,f)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,a=i.getAttribute("position");kS.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const c=t[s];c.parent&&c.parent.isBone&&(xx.multiplyMatrices(kS,c.matrixWorld),Eu.setFromMatrixPosition(xx),a.setXYZ(o,Eu.x,Eu.y,Eu.z),xx.multiplyMatrices(kS,c.parent.matrixWorld),Eu.setFromMatrixPosition(xx),a.setXYZ(o+1,Eu.x,Eu.y,Eu.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const a=this.geometry.getAttribute("color");for(let s=0;s<a.count;s+=2)a.setXYZ(s,e.r,e.g,e.b),a.setXYZ(s+1,t.r,t.g,t.b);return a.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function SO(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...SO(n.children[t]));return e}class h9 extends Oi{constructor(e,t,i){const a=new Y0(t,4,2),s=new er({wireframe:!0,fog:!1,toneMapped:!1});super(a,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const d9=new Q,n2=new Et,i2=new Et;class p9 extends Hn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const a=new j0(t);a.rotateY(Math.PI*.5),this.material=new er({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=a.getAttribute("position"),o=new Float32Array(s.count*3);a.setAttribute("color",new Yn(o,3)),this.add(new Oi(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");n2.copy(this.light.color),i2.copy(this.light.groundColor);for(let i=0,a=t.count;i<a;i++){const s=i<a/2?n2:i2;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(d9.setFromMatrixPosition(this.light.matrixWorld).negate())}}class m9 extends Lo{constructor(e=10,t=10,i=4473924,a=8947848){i=new Et(i),a=new Et(a);const s=t/2,o=e/t,c=e/2,f=[],d=[];for(let y=0,_=0,A=-c;y<=t;y++,A+=o){f.push(-c,0,A,c,0,A),f.push(A,0,-c,A,0,c);const T=y===s?i:a;T.toArray(d,_),_+=3,T.toArray(d,_),_+=3,T.toArray(d,_),_+=3,T.toArray(d,_),_+=3}const m=new gn;m.setAttribute("position",new Pt(f,3)),m.setAttribute("color",new Pt(d,3));const g=new fs({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class g9 extends Lo{constructor(e=10,t=16,i=8,a=64,s=4473924,o=8947848){s=new Et(s),o=new Et(o);const c=[],f=[];if(t>1)for(let g=0;g<t;g++){const y=g/t*(Math.PI*2),_=Math.sin(y)*e,A=Math.cos(y)*e;c.push(0,0,0),c.push(_,0,A);const T=g&1?s:o;f.push(T.r,T.g,T.b),f.push(T.r,T.g,T.b)}for(let g=0;g<i;g++){const y=g&1?s:o,_=e-e/i*g;for(let A=0;A<a;A++){let T=A/a*(Math.PI*2),E=Math.sin(T)*_,b=Math.cos(T)*_;c.push(E,0,b),f.push(y.r,y.g,y.b),T=(A+1)/a*(Math.PI*2),E=Math.sin(T)*_,b=Math.cos(T)*_,c.push(E,0,b),f.push(y.r,y.g,y.b)}}const d=new gn;d.setAttribute("position",new Pt(c,3)),d.setAttribute("color",new Pt(f,3));const m=new fs({vertexColors:!0,toneMapped:!1});super(d,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const a2=new Q,_x=new Q,s2=new Q;class v9 extends Hn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let a=new gn;a.setAttribute("position",new Pt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new fs({fog:!1,toneMapped:!1});this.lightPlane=new Sc(a,s),this.add(this.lightPlane),a=new gn,a.setAttribute("position",new Pt([0,0,0,0,0,1],3)),this.targetLine=new Sc(a,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),a2.setFromMatrixPosition(this.light.matrixWorld),_x.setFromMatrixPosition(this.light.target.matrixWorld),s2.subVectors(_x,a2),this.lightPlane.lookAt(_x),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_x),this.targetLine.scale.z=s2.length()}}const bx=new Q,Ki=new Mb;class y9 extends Lo{constructor(e){const t=new gn,i=new fs({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],s=[],o={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(A,T){f(A),f(T)}function f(A){a.push(0,0,0),s.push(0,0,0),o[A]===void 0&&(o[A]=[]),o[A].push(a.length/3-1)}t.setAttribute("position",new Pt(a,3)),t.setAttribute("color",new Pt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const d=new Et(16755200),m=new Et(16711680),g=new Et(43775),y=new Et(16777215),_=new Et(3355443);this.setColors(d,m,g,y,_)}setColors(e,t,i,a,s){const c=this.geometry.getAttribute("color");return c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,i.r,i.g,i.b),c.setXYZ(33,i.r,i.g,i.b),c.setXYZ(34,i.r,i.g,i.b),c.setXYZ(35,i.r,i.g,i.b),c.setXYZ(36,i.r,i.g,i.b),c.setXYZ(37,i.r,i.g,i.b),c.setXYZ(38,a.r,a.g,a.b),c.setXYZ(39,a.r,a.g,a.b),c.setXYZ(40,s.r,s.g,s.b),c.setXYZ(41,s.r,s.g,s.b),c.setXYZ(42,s.r,s.g,s.b),c.setXYZ(43,s.r,s.g,s.b),c.setXYZ(44,s.r,s.g,s.b),c.setXYZ(45,s.r,s.g,s.b),c.setXYZ(46,s.r,s.g,s.b),c.setXYZ(47,s.r,s.g,s.b),c.setXYZ(48,s.r,s.g,s.b),c.setXYZ(49,s.r,s.g,s.b),c.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,a=1;let s,o;if(Ki.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===vr)s=-1,o=1;else if(this.camera.coordinateSystem===Rp)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);na("c",t,e,Ki,0,0,s),na("t",t,e,Ki,0,0,o),na("n1",t,e,Ki,-i,-a,s),na("n2",t,e,Ki,i,-a,s),na("n3",t,e,Ki,-i,a,s),na("n4",t,e,Ki,i,a,s),na("f1",t,e,Ki,-i,-a,o),na("f2",t,e,Ki,i,-a,o),na("f3",t,e,Ki,-i,a,o),na("f4",t,e,Ki,i,a,o),na("u1",t,e,Ki,i*.7,a*1.1,s),na("u2",t,e,Ki,-i*.7,a*1.1,s),na("u3",t,e,Ki,0,a*2,s),na("cf1",t,e,Ki,-i,0,o),na("cf2",t,e,Ki,i,0,o),na("cf3",t,e,Ki,0,-a,o),na("cf4",t,e,Ki,0,a,o),na("cn1",t,e,Ki,-i,0,s),na("cn2",t,e,Ki,i,0,s),na("cn3",t,e,Ki,0,-a,s),na("cn4",t,e,Ki,0,a,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function na(n,e,t,i,a,s,o){bx.set(a,s,o).unproject(i);const c=e[n];if(c!==void 0){const f=t.getAttribute("position");for(let d=0,m=c.length;d<m;d++)f.setXYZ(c[d],bx.x,bx.y,bx.z)}}const Ax=new Ja;class x9 extends Lo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),s=new gn;s.setIndex(new Yn(i,1)),s.setAttribute("position",new Yn(a,3)),super(s,new fs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Ax.setFromObject(this.object),Ax.isEmpty())return;const e=Ax.min,t=Ax.max,i=this.geometry.attributes.position,a=i.array;a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=e.x,a[4]=t.y,a[5]=t.z,a[6]=e.x,a[7]=e.y,a[8]=t.z,a[9]=t.x,a[10]=e.y,a[11]=t.z,a[12]=t.x,a[13]=t.y,a[14]=e.z,a[15]=e.x,a[16]=t.y,a[17]=e.z,a[18]=e.x,a[19]=e.y,a[20]=e.z,a[21]=t.x,a[22]=e.y,a[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class _9 extends Lo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new gn;s.setIndex(new Yn(i,1)),s.setAttribute("position",new Pt(a,3)),super(s,new fs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class b9 extends Sc{constructor(e,t=1,i=16776960){const a=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new gn;o.setAttribute("position",new Pt(s,3)),o.computeBoundingSphere(),super(o,new fs({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],f=new gn;f.setAttribute("position",new Pt(c,3)),f.computeBoundingSphere(),this.add(new Oi(f,new er({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const r2=new Q;let Sx,XS;class A9 extends Hn{constructor(e=new Q(0,0,1),t=new Q(0,0,0),i=1,a=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Sx===void 0&&(Sx=new gn,Sx.setAttribute("position",new Pt([0,0,0,0,1,0],3)),XS=new k0(.5,1,5,1),XS.translate(0,-.5,0)),this.position.copy(t),this.line=new Sc(Sx,new fs({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Oi(XS,new er({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{r2.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(r2,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class S9 extends Lo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new gn;a.setAttribute("position",new Pt(t,3)),a.setAttribute("color",new Pt(i,3));const s=new fs({vertexColors:!0,toneMapped:!1});super(a,s),this.type="AxesHelper"}setColors(e,t,i){const a=new Et,s=this.geometry.attributes.color.array;return a.set(e),a.toArray(s,0),a.toArray(s,3),a.set(t),a.toArray(s,6),a.toArray(s,9),a.set(i),a.toArray(s,12),a.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class M9{constructor(){this.type="ShapePath",this.color=new Et,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new j_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,a){return this.currentPath.quadraticCurveTo(e,t,i,a),this}bezierCurveTo(e,t,i,a,s,o){return this.currentPath.bezierCurveTo(e,t,i,a,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(b){const R=[];for(let D=0,B=b.length;D<B;D++){const U=b[D],L=new _h;L.curves=U.curves,R.push(L)}return R}function i(b,R){const D=R.length;let B=!1;for(let U=D-1,L=0;L<D;U=L++){let z=R[U],I=R[L],O=I.x-z.x,P=I.y-z.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(z=R[L],O=-O,I=R[U],P=-P),b.y<z.y||b.y>I.y)continue;if(b.y===z.y){if(b.x===z.x)return!0}else{const Y=P*(b.x-z.x)-O*(b.y-z.y);if(Y===0)return!0;if(Y<0)continue;B=!B}}else{if(b.y!==z.y)continue;if(I.x<=b.x&&b.x<=z.x||z.x<=b.x&&b.x<=I.x)return!0}}return B}const a=Do.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,c,f;const d=[];if(s.length===1)return c=s[0],f=new _h,f.curves=c.curves,d.push(f),d;let m=!a(s[0].getPoints());m=e?!m:m;const g=[],y=[];let _=[],A=0,T;y[A]=void 0,_[A]=[];for(let b=0,R=s.length;b<R;b++)c=s[b],T=c.getPoints(),o=a(T),o=e?!o:o,o?(!m&&y[A]&&A++,y[A]={s:new _h,p:T},y[A].s.curves=c.curves,m&&A++,_[A]=[]):_[A].push({h:c,p:T[0]});if(!y[0])return t(s);if(y.length>1){let b=!1,R=0;for(let D=0,B=y.length;D<B;D++)g[D]=[];for(let D=0,B=y.length;D<B;D++){const U=_[D];for(let L=0;L<U.length;L++){const z=U[L];let I=!0;for(let O=0;O<y.length;O++)i(z.p,y[O].p)&&(D!==O&&R++,I?(I=!1,g[O].push(z)):b=!0);I&&g[D].push(z)}}R>0&&b===!1&&(_=g)}let E;for(let b=0,R=y.length;b<R;b++){f=y[b].s,d.push(f),E=_[b];for(let D=0,B=E.length;D<B;D++)f.holes.push(E[D].h)}return d}}class E9 extends Nl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function T9(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function C9(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function w9(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function fM(n,e,t,i){const a=R9(i);switch(t){case gE:return n*e;case I0:return n*e/a.components*a.byteLength;case P0:return n*e/a.components*a.byteLength;case yE:return n*e*2/a.components*a.byteLength;case xb:return n*e*2/a.components*a.byteLength;case vE:return n*e*3/a.components*a.byteLength;case sa:return n*e*4/a.components*a.byteLength;case _b:return n*e*4/a.components*a.byteLength;case kg:case Xg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case jg:case Yg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case p_:case g_:return Math.max(n,16)*Math.max(e,8)/4;case d_:case m_:return Math.max(n,8)*Math.max(e,8)/2;case v_:case y_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case x_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case __:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case b_:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case A_:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case S_:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case M_:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case E_:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case T_:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case C_:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case w_:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case R_:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case D_:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case B_:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case N_:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case O_:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case U_:case L_:case I_:return Math.ceil(n/4)*Math.ceil(e/4)*16;case P_:case F_:return Math.ceil(n/4)*Math.ceil(e/4)*8;case z_:case H_:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function R9(n){switch(n){case Us:case mb:return{byteLength:1,components:1};case Sp:case gb:case La:return{byteLength:2,components:1};case vb:case yb:return{byteLength:2,components:4};case Dl:case L0:case Vi:return{byteLength:4,components:1};case pE:case mE:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class D9{static contain(e,t){return T9(e,t)}static cover(e,t){return C9(e,t)}static fill(e){return w9(e)}static getByteLength(e,t,i,a){return fM(e,t,i,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:O0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=O0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function MO(){let n=null,e=!1,t=null,i=null;function a(s,o){t(s,o),i=n.requestAnimationFrame(a)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(a),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function B9(n){const e=new WeakMap;function t(c,f){const d=c.array,m=c.usage,g=d.byteLength,y=n.createBuffer();n.bindBuffer(f,y),n.bufferData(f,d,m),c.onUploadCallback();let _;if(d instanceof Float32Array)_=n.FLOAT;else if(typeof Float16Array<"u"&&d instanceof Float16Array)_=n.HALF_FLOAT;else if(d instanceof Uint16Array)c.isFloat16BufferAttribute?_=n.HALF_FLOAT:_=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)_=n.SHORT;else if(d instanceof Uint32Array)_=n.UNSIGNED_INT;else if(d instanceof Int32Array)_=n.INT;else if(d instanceof Int8Array)_=n.BYTE;else if(d instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:y,type:_,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:g}}function i(c,f,d){const m=f.array,g=f.updateRanges;if(n.bindBuffer(d,c),g.length===0)n.bufferSubData(d,0,m);else{g.sort((_,A)=>_.start-A.start);let y=0;for(let _=1;_<g.length;_++){const A=g[y],T=g[_];T.start<=A.start+A.count+1?A.count=Math.max(A.count,T.start+T.count-A.start):(++y,g[y]=T)}g.length=y+1;for(let _=0,A=g.length;_<A;_++){const T=g[_];n.bufferSubData(d,T.start*m.BYTES_PER_ELEMENT,m,T.start,T.count)}f.clearUpdateRanges()}f.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const f=e.get(c);f&&(n.deleteBuffer(f.buffer),e.delete(c))}function o(c,f){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const m=e.get(c);(!m||m.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const d=e.get(c);if(d===void 0)e.set(c,t(c,f));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(d.buffer,c,f),d.version=c.version}}return{get:a,remove:s,update:o}}var N9=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,O9=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,U9=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,L9=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,I9=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,P9=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,F9=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,z9=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,H9=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,G9=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,V9=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,k9=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,X9=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,j9=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Y9=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,q9=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,K9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,W9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,J9=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Z9=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Q9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,$9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,eV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,tV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,nV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,iV=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,aV=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,sV=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,rV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,oV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,lV="gl_FragColor = linearToOutputTexel( gl_FragColor );",cV=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,uV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,fV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,hV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,dV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,pV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,mV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,gV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,vV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,yV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,xV=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,_V=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,bV=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,AV=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,SV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,MV=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,EV=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,TV=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,CV=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,wV=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,RV=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,DV=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,BV=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,NV=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,OV=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,UV=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,LV=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,IV=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,PV=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,FV=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,zV=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,HV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,GV=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,VV=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,kV=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,XV=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,jV=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,YV=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,qV=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,KV=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,WV=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,JV=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ZV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,QV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$V=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ek=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,tk=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,nk=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,ik=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ak=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,sk=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,rk=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ok=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,lk=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ck=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,uk=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,fk=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,hk=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,dk=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,pk=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,mk=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,gk=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,vk=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,yk=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,xk=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,_k=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,bk=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Ak=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Sk=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Mk=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Ek=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Tk=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Ck=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,wk=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Rk=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Dk=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Bk=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Nk=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ok=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Uk=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Lk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ik=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Pk=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Fk=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,zk=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Hk=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Gk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Vk=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kk=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Xk=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jk=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Yk=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qk=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Kk=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wk=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Jk=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zk=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Qk=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,$k=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,e7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,t7=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,n7=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i7=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,s7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,r7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,o7=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,l7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,c7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,u7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Mn={alphahash_fragment:N9,alphahash_pars_fragment:O9,alphamap_fragment:U9,alphamap_pars_fragment:L9,alphatest_fragment:I9,alphatest_pars_fragment:P9,aomap_fragment:F9,aomap_pars_fragment:z9,batching_pars_vertex:H9,batching_vertex:G9,begin_vertex:V9,beginnormal_vertex:k9,bsdfs:X9,iridescence_fragment:j9,bumpmap_pars_fragment:Y9,clipping_planes_fragment:q9,clipping_planes_pars_fragment:K9,clipping_planes_pars_vertex:W9,clipping_planes_vertex:J9,color_fragment:Z9,color_pars_fragment:Q9,color_pars_vertex:$9,color_vertex:eV,common:tV,cube_uv_reflection_fragment:nV,defaultnormal_vertex:iV,displacementmap_pars_vertex:aV,displacementmap_vertex:sV,emissivemap_fragment:rV,emissivemap_pars_fragment:oV,colorspace_fragment:lV,colorspace_pars_fragment:cV,envmap_fragment:uV,envmap_common_pars_fragment:fV,envmap_pars_fragment:hV,envmap_pars_vertex:dV,envmap_physical_pars_fragment:MV,envmap_vertex:pV,fog_vertex:mV,fog_pars_vertex:gV,fog_fragment:vV,fog_pars_fragment:yV,gradientmap_pars_fragment:xV,lightmap_pars_fragment:_V,lights_lambert_fragment:bV,lights_lambert_pars_fragment:AV,lights_pars_begin:SV,lights_toon_fragment:EV,lights_toon_pars_fragment:TV,lights_phong_fragment:CV,lights_phong_pars_fragment:wV,lights_physical_fragment:RV,lights_physical_pars_fragment:DV,lights_fragment_begin:BV,lights_fragment_maps:NV,lights_fragment_end:OV,logdepthbuf_fragment:UV,logdepthbuf_pars_fragment:LV,logdepthbuf_pars_vertex:IV,logdepthbuf_vertex:PV,map_fragment:FV,map_pars_fragment:zV,map_particle_fragment:HV,map_particle_pars_fragment:GV,metalnessmap_fragment:VV,metalnessmap_pars_fragment:kV,morphinstance_vertex:XV,morphcolor_vertex:jV,morphnormal_vertex:YV,morphtarget_pars_vertex:qV,morphtarget_vertex:KV,normal_fragment_begin:WV,normal_fragment_maps:JV,normal_pars_fragment:ZV,normal_pars_vertex:QV,normal_vertex:$V,normalmap_pars_fragment:ek,clearcoat_normal_fragment_begin:tk,clearcoat_normal_fragment_maps:nk,clearcoat_pars_fragment:ik,iridescence_pars_fragment:ak,opaque_fragment:sk,packing:rk,premultiplied_alpha_fragment:ok,project_vertex:lk,dithering_fragment:ck,dithering_pars_fragment:uk,roughnessmap_fragment:fk,roughnessmap_pars_fragment:hk,shadowmap_pars_fragment:dk,shadowmap_pars_vertex:pk,shadowmap_vertex:mk,shadowmask_pars_fragment:gk,skinbase_vertex:vk,skinning_pars_vertex:yk,skinning_vertex:xk,skinnormal_vertex:_k,specularmap_fragment:bk,specularmap_pars_fragment:Ak,tonemapping_fragment:Sk,tonemapping_pars_fragment:Mk,transmission_fragment:Ek,transmission_pars_fragment:Tk,uv_pars_fragment:Ck,uv_pars_vertex:wk,uv_vertex:Rk,worldpos_vertex:Dk,background_vert:Bk,background_frag:Nk,backgroundCube_vert:Ok,backgroundCube_frag:Uk,cube_vert:Lk,cube_frag:Ik,depth_vert:Pk,depth_frag:Fk,distanceRGBA_vert:zk,distanceRGBA_frag:Hk,equirect_vert:Gk,equirect_frag:Vk,linedashed_vert:kk,linedashed_frag:Xk,meshbasic_vert:jk,meshbasic_frag:Yk,meshlambert_vert:qk,meshlambert_frag:Kk,meshmatcap_vert:Wk,meshmatcap_frag:Jk,meshnormal_vert:Zk,meshnormal_frag:Qk,meshphong_vert:$k,meshphong_frag:e7,meshphysical_vert:t7,meshphysical_frag:n7,meshtoon_vert:i7,meshtoon_frag:a7,points_vert:s7,points_frag:r7,shadow_vert:o7,shadow_frag:l7,sprite_vert:c7,sprite_frag:u7},wt={common:{diffuse:{value:new Et(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new yn},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new yn}},envmap:{envMap:{value:null},envMapRotation:{value:new yn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new yn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new yn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new yn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new yn},normalScale:{value:new Ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new yn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new yn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new yn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new yn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0},uvTransform:{value:new yn}},sprite:{diffuse:{value:new Et(16777215)},opacity:{value:1},center:{value:new Ze(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new yn},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0}}},Ro={basic:{uniforms:ws([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.fog]),vertexShader:Mn.meshbasic_vert,fragmentShader:Mn.meshbasic_frag},lambert:{uniforms:ws([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new Et(0)}}]),vertexShader:Mn.meshlambert_vert,fragmentShader:Mn.meshlambert_frag},phong:{uniforms:ws([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new Et(0)},specular:{value:new Et(1118481)},shininess:{value:30}}]),vertexShader:Mn.meshphong_vert,fragmentShader:Mn.meshphong_frag},standard:{uniforms:ws([wt.common,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.roughnessmap,wt.metalnessmap,wt.fog,wt.lights,{emissive:{value:new Et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag},toon:{uniforms:ws([wt.common,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.gradientmap,wt.fog,wt.lights,{emissive:{value:new Et(0)}}]),vertexShader:Mn.meshtoon_vert,fragmentShader:Mn.meshtoon_frag},matcap:{uniforms:ws([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,{matcap:{value:null}}]),vertexShader:Mn.meshmatcap_vert,fragmentShader:Mn.meshmatcap_frag},points:{uniforms:ws([wt.points,wt.fog]),vertexShader:Mn.points_vert,fragmentShader:Mn.points_frag},dashed:{uniforms:ws([wt.common,wt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mn.linedashed_vert,fragmentShader:Mn.linedashed_frag},depth:{uniforms:ws([wt.common,wt.displacementmap]),vertexShader:Mn.depth_vert,fragmentShader:Mn.depth_frag},normal:{uniforms:ws([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,{opacity:{value:1}}]),vertexShader:Mn.meshnormal_vert,fragmentShader:Mn.meshnormal_frag},sprite:{uniforms:ws([wt.sprite,wt.fog]),vertexShader:Mn.sprite_vert,fragmentShader:Mn.sprite_frag},background:{uniforms:{uvTransform:{value:new yn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mn.background_vert,fragmentShader:Mn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new yn}},vertexShader:Mn.backgroundCube_vert,fragmentShader:Mn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mn.cube_vert,fragmentShader:Mn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mn.equirect_vert,fragmentShader:Mn.equirect_frag},distanceRGBA:{uniforms:ws([wt.common,wt.displacementmap,{referencePosition:{value:new Q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mn.distanceRGBA_vert,fragmentShader:Mn.distanceRGBA_frag},shadow:{uniforms:ws([wt.lights,wt.fog,{color:{value:new Et(0)},opacity:{value:1}}]),vertexShader:Mn.shadow_vert,fragmentShader:Mn.shadow_frag}};Ro.physical={uniforms:ws([Ro.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new yn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new yn},clearcoatNormalScale:{value:new Ze(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new yn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new yn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new yn},sheen:{value:0},sheenColor:{value:new Et(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new yn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new yn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new yn},transmissionSamplerSize:{value:new Ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new yn},attenuationDistance:{value:0},attenuationColor:{value:new Et(0)},specularColor:{value:new Et(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new yn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new yn},anisotropyVector:{value:new Ze},anisotropyMap:{value:null},anisotropyMapTransform:{value:new yn}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag};const Mx={r:0,b:0,g:0},Zf=new xr,f7=new $t;function h7(n,e,t,i,a,s,o){const c=new Et(0);let f=s===!0?0:1,d,m,g=null,y=0,_=null;function A(D){let B=D.isScene===!0?D.background:null;return B&&B.isTexture&&(B=(D.backgroundBlurriness>0?t:e).get(B)),B}function T(D){let B=!1;const U=A(D);U===null?b(c,f):U&&U.isColor&&(b(U,1),B=!0);const L=n.xr.getEnvironmentBlendMode();L==="additive"?i.buffers.color.setClear(0,0,0,1,o):L==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||B)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function E(D,B){const U=A(B);U&&(U.isCubeTexture||U.mapping===Xp)?(m===void 0&&(m=new Oi(new Bh(1,1,1),new tr({name:"BackgroundCubeMaterial",uniforms:Np(Ro.backgroundCube.uniforms),vertexShader:Ro.backgroundCube.vertexShader,fragmentShader:Ro.backgroundCube.fragmentShader,side:Os,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(L,z,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(m)),Zf.copy(B.backgroundRotation),Zf.x*=-1,Zf.y*=-1,Zf.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(Zf.y*=-1,Zf.z*=-1),m.material.uniforms.envMap.value=U,m.material.uniforms.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=B.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(f7.makeRotationFromEuler(Zf)),m.material.toneMapped=zn.getTransfer(U.colorSpace)!==di,(g!==U||y!==U.version||_!==n.toneMapping)&&(m.material.needsUpdate=!0,g=U,y=U.version,_=n.toneMapping),m.layers.enableAll(),D.unshift(m,m.geometry,m.material,0,0,null)):U&&U.isTexture&&(d===void 0&&(d=new Oi(new ku(2,2),new tr({name:"BackgroundMaterial",uniforms:Np(Ro.background.uniforms),vertexShader:Ro.background.vertexShader,fragmentShader:Ro.background.fragmentShader,side:wl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(d)),d.material.uniforms.t2D.value=U,d.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,d.material.toneMapped=zn.getTransfer(U.colorSpace)!==di,U.matrixAutoUpdate===!0&&U.updateMatrix(),d.material.uniforms.uvTransform.value.copy(U.matrix),(g!==U||y!==U.version||_!==n.toneMapping)&&(d.material.needsUpdate=!0,g=U,y=U.version,_=n.toneMapping),d.layers.enableAll(),D.unshift(d,d.geometry,d.material,0,0,null))}function b(D,B){D.getRGB(Mx,DN(n)),i.buffers.color.setClear(Mx.r,Mx.g,Mx.b,B,o)}function R(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return c},setClearColor:function(D,B=1){c.set(D),f=B,b(c,f)},getClearAlpha:function(){return f},setClearAlpha:function(D){f=D,b(c,f)},render:T,addToRenderList:E,dispose:R}}function d7(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},a=y(null);let s=a,o=!1;function c(P,Y,ie,se,ue){let me=!1;const H=g(se,ie,Y);s!==H&&(s=H,d(s.object)),me=_(P,se,ie,ue),me&&A(P,se,ie,ue),ue!==null&&e.update(ue,n.ELEMENT_ARRAY_BUFFER),(me||o)&&(o=!1,B(P,Y,ie,se),ue!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ue).buffer))}function f(){return n.createVertexArray()}function d(P){return n.bindVertexArray(P)}function m(P){return n.deleteVertexArray(P)}function g(P,Y,ie){const se=ie.wireframe===!0;let ue=i[P.id];ue===void 0&&(ue={},i[P.id]=ue);let me=ue[Y.id];me===void 0&&(me={},ue[Y.id]=me);let H=me[se];return H===void 0&&(H=y(f()),me[se]=H),H}function y(P){const Y=[],ie=[],se=[];for(let ue=0;ue<t;ue++)Y[ue]=0,ie[ue]=0,se[ue]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:ie,attributeDivisors:se,object:P,attributes:{},index:null}}function _(P,Y,ie,se){const ue=s.attributes,me=Y.attributes;let H=0;const W=ie.getAttributes();for(const q in W)if(W[q].location>=0){const j=ue[q];let fe=me[q];if(fe===void 0&&(q==="instanceMatrix"&&P.instanceMatrix&&(fe=P.instanceMatrix),q==="instanceColor"&&P.instanceColor&&(fe=P.instanceColor)),j===void 0||j.attribute!==fe||fe&&j.data!==fe.data)return!0;H++}return s.attributesNum!==H||s.index!==se}function A(P,Y,ie,se){const ue={},me=Y.attributes;let H=0;const W=ie.getAttributes();for(const q in W)if(W[q].location>=0){let j=me[q];j===void 0&&(q==="instanceMatrix"&&P.instanceMatrix&&(j=P.instanceMatrix),q==="instanceColor"&&P.instanceColor&&(j=P.instanceColor));const fe={};fe.attribute=j,j&&j.data&&(fe.data=j.data),ue[q]=fe,H++}s.attributes=ue,s.attributesNum=H,s.index=se}function T(){const P=s.newAttributes;for(let Y=0,ie=P.length;Y<ie;Y++)P[Y]=0}function E(P){b(P,0)}function b(P,Y){const ie=s.newAttributes,se=s.enabledAttributes,ue=s.attributeDivisors;ie[P]=1,se[P]===0&&(n.enableVertexAttribArray(P),se[P]=1),ue[P]!==Y&&(n.vertexAttribDivisor(P,Y),ue[P]=Y)}function R(){const P=s.newAttributes,Y=s.enabledAttributes;for(let ie=0,se=Y.length;ie<se;ie++)Y[ie]!==P[ie]&&(n.disableVertexAttribArray(ie),Y[ie]=0)}function D(P,Y,ie,se,ue,me,H){H===!0?n.vertexAttribIPointer(P,Y,ie,ue,me):n.vertexAttribPointer(P,Y,ie,se,ue,me)}function B(P,Y,ie,se){T();const ue=se.attributes,me=ie.getAttributes(),H=Y.defaultAttributeValues;for(const W in me){const q=me[W];if(q.location>=0){let ge=ue[W];if(ge===void 0&&(W==="instanceMatrix"&&P.instanceMatrix&&(ge=P.instanceMatrix),W==="instanceColor"&&P.instanceColor&&(ge=P.instanceColor)),ge!==void 0){const j=ge.normalized,fe=ge.itemSize,_e=e.get(ge);if(_e===void 0)continue;const Ae=_e.buffer,De=_e.type,ot=_e.bytesPerElement,ve=De===n.INT||De===n.UNSIGNED_INT||ge.gpuType===L0;if(ge.isInterleavedBufferAttribute){const Ne=ge.data,Qe=Ne.stride,bt=ge.offset;if(Ne.isInstancedInterleavedBuffer){for(let ct=0;ct<q.locationSize;ct++)b(q.location+ct,Ne.meshPerAttribute);P.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=Ne.meshPerAttribute*Ne.count)}else for(let ct=0;ct<q.locationSize;ct++)E(q.location+ct);n.bindBuffer(n.ARRAY_BUFFER,Ae);for(let ct=0;ct<q.locationSize;ct++)D(q.location+ct,fe/q.locationSize,De,j,Qe*ot,(bt+fe/q.locationSize*ct)*ot,ve)}else{if(ge.isInstancedBufferAttribute){for(let Ne=0;Ne<q.locationSize;Ne++)b(q.location+Ne,ge.meshPerAttribute);P.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let Ne=0;Ne<q.locationSize;Ne++)E(q.location+Ne);n.bindBuffer(n.ARRAY_BUFFER,Ae);for(let Ne=0;Ne<q.locationSize;Ne++)D(q.location+Ne,fe/q.locationSize,De,j,fe*ot,fe/q.locationSize*Ne*ot,ve)}}else if(H!==void 0){const j=H[W];if(j!==void 0)switch(j.length){case 2:n.vertexAttrib2fv(q.location,j);break;case 3:n.vertexAttrib3fv(q.location,j);break;case 4:n.vertexAttrib4fv(q.location,j);break;default:n.vertexAttrib1fv(q.location,j)}}}}R()}function U(){I();for(const P in i){const Y=i[P];for(const ie in Y){const se=Y[ie];for(const ue in se)m(se[ue].object),delete se[ue];delete Y[ie]}delete i[P]}}function L(P){if(i[P.id]===void 0)return;const Y=i[P.id];for(const ie in Y){const se=Y[ie];for(const ue in se)m(se[ue].object),delete se[ue];delete Y[ie]}delete i[P.id]}function z(P){for(const Y in i){const ie=i[Y];if(ie[P.id]===void 0)continue;const se=ie[P.id];for(const ue in se)m(se[ue].object),delete se[ue];delete ie[P.id]}}function I(){O(),o=!0,s!==a&&(s=a,d(s.object))}function O(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:c,reset:I,resetDefaultState:O,dispose:U,releaseStatesOfGeometry:L,releaseStatesOfProgram:z,initAttributes:T,enableAttribute:E,disableUnusedAttributes:R}}function p7(n,e,t){let i;function a(d){i=d}function s(d,m){n.drawArrays(i,d,m),t.update(m,i,1)}function o(d,m,g){g!==0&&(n.drawArraysInstanced(i,d,m,g),t.update(m,i,g))}function c(d,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,d,0,m,0,g);let _=0;for(let A=0;A<g;A++)_+=m[A];t.update(_,i,1)}function f(d,m,g,y){if(g===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let A=0;A<d.length;A++)o(d[A],m[A],y[A]);else{_.multiDrawArraysInstancedWEBGL(i,d,0,m,0,y,0,g);let A=0;for(let T=0;T<g;T++)A+=m[T]*y[T];t.update(A,i,1)}}this.setMode=a,this.render=s,this.renderInstances=o,this.renderMultiDraw=c,this.renderMultiDrawInstances=f}function m7(n,e,t,i){let a;function s(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");a=n.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function o(z){return!(z!==sa&&i.convert(z)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(z){const I=z===La&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(z!==Us&&i.convert(z)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&z!==Vi&&!I)}function f(z){if(z==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";z="mediump"}return z==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp";const m=f(d);m!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",m,"instead."),d=m);const g=t.logarithmicDepthBuffer===!0,y=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),_=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),A=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T=n.getParameter(n.MAX_TEXTURE_SIZE),E=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),b=n.getParameter(n.MAX_VERTEX_ATTRIBS),R=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),D=n.getParameter(n.MAX_VARYING_VECTORS),B=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),U=A>0,L=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:f,textureFormatReadable:o,textureTypeReadable:c,precision:d,logarithmicDepthBuffer:g,reversedDepthBuffer:y,maxTextures:_,maxVertexTextures:A,maxTextureSize:T,maxCubemapSize:E,maxAttributes:b,maxVertexUniforms:R,maxVaryings:D,maxFragmentUniforms:B,vertexTextures:U,maxSamples:L}}function g7(n){const e=this;let t=null,i=0,a=!1,s=!1;const o=new hc,c=new yn,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(g,y){const _=g.length!==0||y||i!==0||a;return a=y,i=g.length,_},this.beginShadows=function(){s=!0,m(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(g,y){t=m(g,y,0)},this.setState=function(g,y,_){const A=g.clippingPlanes,T=g.clipIntersection,E=g.clipShadows,b=n.get(g);if(!a||A===null||A.length===0||s&&!E)s?m(null):d();else{const R=s?0:i,D=R*4;let B=b.clippingState||null;f.value=B,B=m(A,y,D,_);for(let U=0;U!==D;++U)B[U]=t[U];b.clippingState=B,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=R}};function d(){f.value!==t&&(f.value=t,f.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function m(g,y,_,A){const T=g!==null?g.length:0;let E=null;if(T!==0){if(E=f.value,A!==!0||E===null){const b=_+T*4,R=y.matrixWorldInverse;c.getNormalMatrix(R),(E===null||E.length<b)&&(E=new Float32Array(b));for(let D=0,B=_;D!==T;++D,B+=4)o.copy(g[D]).applyMatrix4(R,c),o.normal.toArray(E,B),E[B+3]=o.constant}f.value=E,f.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,E}}function v7(n){let e=new WeakMap;function t(o,c){return c===bp?o.mapping=Rl:c===c0&&(o.mapping=Iu),o}function i(o){if(o&&o.isTexture){const c=o.mapping;if(c===bp||c===c0)if(e.has(o)){const f=e.get(o).texture;return t(f,o.mapping)}else{const f=o.image;if(f&&f.height>0){const d=new TE(f.height);return d.fromEquirectangularTexture(n,o),e.set(o,d),o.addEventListener("dispose",a),t(d.texture,o.mapping)}else return null}}return o}function a(o){const c=o.target;c.removeEventListener("dispose",a);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const hp=4,o2=[.125,.215,.35,.446,.526,.582],rh=20,jS=new Tl,l2=new Et;let YS=null,qS=0,KS=0,WS=!1;const sh=(1+Math.sqrt(5))/2,np=1/sh,c2=[new Q(-sh,np,0),new Q(sh,np,0),new Q(-np,0,sh),new Q(np,0,sh),new Q(0,sh,-np),new Q(0,sh,np),new Q(-1,1,-1),new Q(1,1,-1),new Q(-1,1,1),new Q(1,1,1)],y7=new Q;class hM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,a=100,s={}){const{size:o=256,position:c=y7}=s;YS=this._renderer.getRenderTarget(),qS=this._renderer.getActiveCubeFace(),KS=this._renderer.getActiveMipmapLevel(),WS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(e,i,a,f,c),t>0&&this._blur(f,0,0,t),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=h2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=f2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(YS,qS,KS),this._renderer.xr.enabled=WS,e.scissorTest=!1,Ex(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Rl||e.mapping===Iu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),YS=this._renderer.getRenderTarget(),qS=this._renderer.getActiveCubeFace(),KS=this._renderer.getActiveMipmapLevel(),WS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ni,minFilter:ni,generateMipmaps:!1,type:La,format:sa,colorSpace:No,depthBuffer:!1},a=u2(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=u2(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=x7(s)),this._blurMaterial=_7(s,e,t)}return a}_compileMaterial(e){const t=new Oi(this._lodPlanes[0],e);this._renderer.compile(t,jS)}_sceneToCubeUV(e,t,i,a,s){const f=new Ji(90,1,t,i),d=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],g=this._renderer,y=g.autoClear,_=g.toneMapping;g.getClearColor(l2),g.toneMapping=El,g.autoClear=!1,g.state.buffers.depth.getReversed()&&(g.setRenderTarget(a),g.clearDepth(),g.setRenderTarget(null));const T=new er({name:"PMREM.Background",side:Os,depthWrite:!1,depthTest:!1}),E=new Oi(new Bh,T);let b=!1;const R=e.background;R?R.isColor&&(T.color.copy(R),e.background=null,b=!0):(T.color.copy(l2),b=!0);for(let D=0;D<6;D++){const B=D%3;B===0?(f.up.set(0,d[D],0),f.position.set(s.x,s.y,s.z),f.lookAt(s.x+m[D],s.y,s.z)):B===1?(f.up.set(0,0,d[D]),f.position.set(s.x,s.y,s.z),f.lookAt(s.x,s.y+m[D],s.z)):(f.up.set(0,d[D],0),f.position.set(s.x,s.y,s.z),f.lookAt(s.x,s.y,s.z+m[D]));const U=this._cubeSize;Ex(a,B*U,D>2?U:0,U,U),g.setRenderTarget(a),b&&g.render(E,f),g.render(e,f)}E.geometry.dispose(),E.material.dispose(),g.toneMapping=_,g.autoClear=y,e.background=R}_textureToCubeUV(e,t){const i=this._renderer,a=e.mapping===Rl||e.mapping===Iu;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=h2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=f2());const s=a?this._cubemapMaterial:this._equirectMaterial,o=new Oi(this._lodPlanes[0],s),c=s.uniforms;c.envMap.value=e;const f=this._cubeSize;Ex(t,0,0,3*f,2*f),i.setRenderTarget(t),i.render(o,jS)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const a=this._lodPlanes.length;for(let s=1;s<a;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),c=c2[(a-s-1)%c2.length];this._blur(e,s-1,s,o,c)}t.autoClear=i}_blur(e,t,i,a,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,a,"latitudinal",s),this._halfBlur(o,e,i,i,a,"longitudinal",s)}_halfBlur(e,t,i,a,s,o,c){const f=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,g=new Oi(this._lodPlanes[a],d),y=d.uniforms,_=this._sizeLods[i]-1,A=isFinite(s)?Math.PI/(2*_):2*Math.PI/(2*rh-1),T=s/A,E=isFinite(s)?1+Math.floor(m*T):rh;E>rh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${rh}`);const b=[];let R=0;for(let z=0;z<rh;++z){const I=z/T,O=Math.exp(-I*I/2);b.push(O),z===0?R+=O:z<E&&(R+=2*O)}for(let z=0;z<b.length;z++)b[z]=b[z]/R;y.envMap.value=e.texture,y.samples.value=E,y.weights.value=b,y.latitudinal.value=o==="latitudinal",c&&(y.poleAxis.value=c);const{_lodMax:D}=this;y.dTheta.value=A,y.mipInt.value=D-i;const B=this._sizeLods[a],U=3*B*(a>D-hp?a-D+hp:0),L=4*(this._cubeSize-B);Ex(t,U,L,3*B,2*B),f.setRenderTarget(t),f.render(g,jS)}}function x7(n){const e=[],t=[],i=[];let a=n;const s=n-hp+1+o2.length;for(let o=0;o<s;o++){const c=Math.pow(2,a);t.push(c);let f=1/c;o>n-hp?f=o2[o-n+hp-1]:o===0&&(f=0),i.push(f);const d=1/(c-2),m=-d,g=1+d,y=[m,m,g,m,g,g,m,m,g,g,m,g],_=6,A=6,T=3,E=2,b=1,R=new Float32Array(T*A*_),D=new Float32Array(E*A*_),B=new Float32Array(b*A*_);for(let L=0;L<_;L++){const z=L%3*2/3-1,I=L>2?0:-1,O=[z,I,0,z+2/3,I,0,z+2/3,I+1,0,z,I,0,z+2/3,I+1,0,z,I+1,0];R.set(O,T*A*L),D.set(y,E*A*L);const P=[L,L,L,L,L,L];B.set(P,b*A*L)}const U=new gn;U.setAttribute("position",new Yn(R,T)),U.setAttribute("uv",new Yn(D,E)),U.setAttribute("faceIndex",new Yn(B,b)),e.push(U),a>hp&&a--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function u2(n,e,t){const i=new Kr(n,e,t);return i.texture.mapping=Xp,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Ex(n,e,t,i,a){n.viewport.set(e,t,i,a),n.scissor.set(e,t,i,a)}function _7(n,e,t){const i=new Float32Array(rh),a=new Q(0,1,0);return new tr({name:"SphericalGaussianBlur",defines:{n:rh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:iT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ml,depthTest:!1,depthWrite:!1})}function f2(){return new tr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:iT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ml,depthTest:!1,depthWrite:!1})}function h2(){return new tr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:iT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ml,depthTest:!1,depthWrite:!1})}function iT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function b7(n){let e=new WeakMap,t=null;function i(c){if(c&&c.isTexture){const f=c.mapping,d=f===bp||f===c0,m=f===Rl||f===Iu;if(d||m){let g=e.get(c);const y=g!==void 0?g.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==y)return t===null&&(t=new hM(n)),g=d?t.fromEquirectangular(c,g):t.fromCubemap(c,g),g.texture.pmremVersion=c.pmremVersion,e.set(c,g),g.texture;if(g!==void 0)return g.texture;{const _=c.image;return d&&_&&_.height>0||m&&_&&a(_)?(t===null&&(t=new hM(n)),g=d?t.fromEquirectangular(c):t.fromCubemap(c),g.texture.pmremVersion=c.pmremVersion,e.set(c,g),c.addEventListener("dispose",s),g.texture):null}}}return c}function a(c){let f=0;const d=6;for(let m=0;m<d;m++)c[m]!==void 0&&f++;return f===d}function s(c){const f=c.target;f.removeEventListener("dispose",s);const d=e.get(f);d!==void 0&&(e.delete(f),d.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function A7(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let a;switch(i){case"WEBGL_depth_texture":a=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=n.getExtension(i)}return e[i]=a,a}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const a=t(i);return a===null&&p0("THREE.WebGLRenderer: "+i+" extension not supported."),a}}}function S7(n,e,t,i){const a={},s=new WeakMap;function o(g){const y=g.target;y.index!==null&&e.remove(y.index);for(const A in y.attributes)e.remove(y.attributes[A]);y.removeEventListener("dispose",o),delete a[y.id];const _=s.get(y);_&&(e.remove(_),s.delete(y)),i.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function c(g,y){return a[y.id]===!0||(y.addEventListener("dispose",o),a[y.id]=!0,t.memory.geometries++),y}function f(g){const y=g.attributes;for(const _ in y)e.update(y[_],n.ARRAY_BUFFER)}function d(g){const y=[],_=g.index,A=g.attributes.position;let T=0;if(_!==null){const R=_.array;T=_.version;for(let D=0,B=R.length;D<B;D+=3){const U=R[D+0],L=R[D+1],z=R[D+2];y.push(U,L,L,z,z,U)}}else if(A!==void 0){const R=A.array;T=A.version;for(let D=0,B=R.length/3-1;D<B;D+=3){const U=D+0,L=D+1,z=D+2;y.push(U,L,L,z,z,U)}}else return;const E=new(TN(y)?EE:ME)(y,1);E.version=T;const b=s.get(g);b&&e.remove(b),s.set(g,E)}function m(g){const y=s.get(g);if(y){const _=g.index;_!==null&&y.version<_.version&&d(g)}else d(g);return s.get(g)}return{get:c,update:f,getWireframeAttribute:m}}function M7(n,e,t){let i;function a(y){i=y}let s,o;function c(y){s=y.type,o=y.bytesPerElement}function f(y,_){n.drawElements(i,_,s,y*o),t.update(_,i,1)}function d(y,_,A){A!==0&&(n.drawElementsInstanced(i,_,s,y*o,A),t.update(_,i,A))}function m(y,_,A){if(A===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,_,0,s,y,0,A);let E=0;for(let b=0;b<A;b++)E+=_[b];t.update(E,i,1)}function g(y,_,A,T){if(A===0)return;const E=e.get("WEBGL_multi_draw");if(E===null)for(let b=0;b<y.length;b++)d(y[b]/o,_[b],T[b]);else{E.multiDrawElementsInstancedWEBGL(i,_,0,s,y,0,T,0,A);let b=0;for(let R=0;R<A;R++)b+=_[R]*T[R];t.update(b,i,1)}}this.setMode=a,this.setIndex=c,this.render=f,this.renderInstances=d,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function E7(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,c){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=c*(s/3);break;case n.LINES:t.lines+=c*(s/2);break;case n.LINE_STRIP:t.lines+=c*(s-1);break;case n.LINE_LOOP:t.lines+=c*s;break;case n.POINTS:t.points+=c*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function a(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:a,update:i}}function T7(n,e,t){const i=new WeakMap,a=new jn;function s(o,c,f){const d=o.morphTargetInfluences,m=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,g=m!==void 0?m.length:0;let y=i.get(c);if(y===void 0||y.count!==g){let P=function(){I.dispose(),i.delete(c),c.removeEventListener("dispose",P)};var _=P;y!==void 0&&y.texture.dispose();const A=c.morphAttributes.position!==void 0,T=c.morphAttributes.normal!==void 0,E=c.morphAttributes.color!==void 0,b=c.morphAttributes.position||[],R=c.morphAttributes.normal||[],D=c.morphAttributes.color||[];let B=0;A===!0&&(B=1),T===!0&&(B=2),E===!0&&(B=3);let U=c.attributes.position.count*B,L=1;U>e.maxTextureSize&&(L=Math.ceil(U/e.maxTextureSize),U=e.maxTextureSize);const z=new Float32Array(U*L*4*g),I=new Ab(z,U,L,g);I.type=Vi,I.needsUpdate=!0;const O=B*4;for(let Y=0;Y<g;Y++){const ie=b[Y],se=R[Y],ue=D[Y],me=U*L*4*Y;for(let H=0;H<ie.count;H++){const W=H*O;A===!0&&(a.fromBufferAttribute(ie,H),z[me+W+0]=a.x,z[me+W+1]=a.y,z[me+W+2]=a.z,z[me+W+3]=0),T===!0&&(a.fromBufferAttribute(se,H),z[me+W+4]=a.x,z[me+W+5]=a.y,z[me+W+6]=a.z,z[me+W+7]=0),E===!0&&(a.fromBufferAttribute(ue,H),z[me+W+8]=a.x,z[me+W+9]=a.y,z[me+W+10]=a.z,z[me+W+11]=ue.itemSize===4?a.w:1)}}y={count:g,texture:I,size:new Ze(U,L)},i.set(c,y),c.addEventListener("dispose",P)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)f.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let A=0;for(let E=0;E<d.length;E++)A+=d[E];const T=c.morphTargetsRelative?1:1-A;f.getUniforms().setValue(n,"morphTargetBaseInfluence",T),f.getUniforms().setValue(n,"morphTargetInfluences",d)}f.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}return{update:s}}function C7(n,e,t,i){let a=new WeakMap;function s(f){const d=i.render.frame,m=f.geometry,g=e.get(f,m);if(a.get(g)!==d&&(e.update(g),a.set(g,d)),f.isInstancedMesh&&(f.hasEventListener("dispose",c)===!1&&f.addEventListener("dispose",c),a.get(f)!==d&&(t.update(f.instanceMatrix,n.ARRAY_BUFFER),f.instanceColor!==null&&t.update(f.instanceColor,n.ARRAY_BUFFER),a.set(f,d))),f.isSkinnedMesh){const y=f.skeleton;a.get(y)!==d&&(y.update(),a.set(y,d))}return g}function o(){a=new WeakMap}function c(f){const d=f.target;d.removeEventListener("dispose",c),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:o}}const EO=new ri,d2=new NE(1,1),TO=new Ab,CO=new Sb,wO=new F0,p2=[],m2=[],g2=new Float32Array(16),v2=new Float32Array(9),y2=new Float32Array(4);function qp(n,e,t){const i=n[0];if(i<=0||i>0)return n;const a=e*t;let s=p2[a];if(s===void 0&&(s=new Float32Array(a),p2[a]=s),e!==0){i.toArray(s,0);for(let o=1,c=0;o!==e;++o)c+=t,n[o].toArray(s,c)}return s}function Ea(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ta(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function jb(n,e){let t=m2[e];t===void 0&&(t=new Int32Array(e),m2[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function w7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function R7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ea(t,e))return;n.uniform2fv(this.addr,e),Ta(t,e)}}function D7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ea(t,e))return;n.uniform3fv(this.addr,e),Ta(t,e)}}function B7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ea(t,e))return;n.uniform4fv(this.addr,e),Ta(t,e)}}function N7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ea(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ta(t,e)}else{if(Ea(t,i))return;y2.set(i),n.uniformMatrix2fv(this.addr,!1,y2),Ta(t,i)}}function O7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ea(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ta(t,e)}else{if(Ea(t,i))return;v2.set(i),n.uniformMatrix3fv(this.addr,!1,v2),Ta(t,i)}}function U7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ea(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ta(t,e)}else{if(Ea(t,i))return;g2.set(i),n.uniformMatrix4fv(this.addr,!1,g2),Ta(t,i)}}function L7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function I7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ea(t,e))return;n.uniform2iv(this.addr,e),Ta(t,e)}}function P7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ea(t,e))return;n.uniform3iv(this.addr,e),Ta(t,e)}}function F7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ea(t,e))return;n.uniform4iv(this.addr,e),Ta(t,e)}}function z7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function H7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ea(t,e))return;n.uniform2uiv(this.addr,e),Ta(t,e)}}function G7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ea(t,e))return;n.uniform3uiv(this.addr,e),Ta(t,e)}}function V7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ea(t,e))return;n.uniform4uiv(this.addr,e),Ta(t,e)}}function k7(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a);let s;this.type===n.SAMPLER_2D_SHADOW?(d2.compareFunction=bE,s=d2):s=EO,t.setTexture2D(e||s,a)}function X7(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTexture3D(e||CO,a)}function j7(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTextureCube(e||wO,a)}function Y7(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTexture2DArray(e||TO,a)}function q7(n){switch(n){case 5126:return w7;case 35664:return R7;case 35665:return D7;case 35666:return B7;case 35674:return N7;case 35675:return O7;case 35676:return U7;case 5124:case 35670:return L7;case 35667:case 35671:return I7;case 35668:case 35672:return P7;case 35669:case 35673:return F7;case 5125:return z7;case 36294:return H7;case 36295:return G7;case 36296:return V7;case 35678:case 36198:case 36298:case 36306:case 35682:return k7;case 35679:case 36299:case 36307:return X7;case 35680:case 36300:case 36308:case 36293:return j7;case 36289:case 36303:case 36311:case 36292:return Y7}}function K7(n,e){n.uniform1fv(this.addr,e)}function W7(n,e){const t=qp(e,this.size,2);n.uniform2fv(this.addr,t)}function J7(n,e){const t=qp(e,this.size,3);n.uniform3fv(this.addr,t)}function Z7(n,e){const t=qp(e,this.size,4);n.uniform4fv(this.addr,t)}function Q7(n,e){const t=qp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function $7(n,e){const t=qp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function eX(n,e){const t=qp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function tX(n,e){n.uniform1iv(this.addr,e)}function nX(n,e){n.uniform2iv(this.addr,e)}function iX(n,e){n.uniform3iv(this.addr,e)}function aX(n,e){n.uniform4iv(this.addr,e)}function sX(n,e){n.uniform1uiv(this.addr,e)}function rX(n,e){n.uniform2uiv(this.addr,e)}function oX(n,e){n.uniform3uiv(this.addr,e)}function lX(n,e){n.uniform4uiv(this.addr,e)}function cX(n,e,t){const i=this.cache,a=e.length,s=jb(t,a);Ea(i,s)||(n.uniform1iv(this.addr,s),Ta(i,s));for(let o=0;o!==a;++o)t.setTexture2D(e[o]||EO,s[o])}function uX(n,e,t){const i=this.cache,a=e.length,s=jb(t,a);Ea(i,s)||(n.uniform1iv(this.addr,s),Ta(i,s));for(let o=0;o!==a;++o)t.setTexture3D(e[o]||CO,s[o])}function fX(n,e,t){const i=this.cache,a=e.length,s=jb(t,a);Ea(i,s)||(n.uniform1iv(this.addr,s),Ta(i,s));for(let o=0;o!==a;++o)t.setTextureCube(e[o]||wO,s[o])}function hX(n,e,t){const i=this.cache,a=e.length,s=jb(t,a);Ea(i,s)||(n.uniform1iv(this.addr,s),Ta(i,s));for(let o=0;o!==a;++o)t.setTexture2DArray(e[o]||TO,s[o])}function dX(n){switch(n){case 5126:return K7;case 35664:return W7;case 35665:return J7;case 35666:return Z7;case 35674:return Q7;case 35675:return $7;case 35676:return eX;case 5124:case 35670:return tX;case 35667:case 35671:return nX;case 35668:case 35672:return iX;case 35669:case 35673:return aX;case 5125:return sX;case 36294:return rX;case 36295:return oX;case 36296:return lX;case 35678:case 36198:case 36298:case 36306:case 35682:return cX;case 35679:case 36299:case 36307:return uX;case 35680:case 36300:case 36308:case 36293:return fX;case 36289:case 36303:case 36311:case 36292:return hX}}class pX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=q7(t.type)}}class mX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=dX(t.type)}}class gX{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const a=this.seq;for(let s=0,o=a.length;s!==o;++s){const c=a[s];c.setValue(e,t[c.id],i)}}}const JS=/(\w+)(\])?(\[|\.)?/g;function x2(n,e){n.seq.push(e),n.map[e.id]=e}function vX(n,e,t){const i=n.name,a=i.length;for(JS.lastIndex=0;;){const s=JS.exec(i),o=JS.lastIndex;let c=s[1];const f=s[2]==="]",d=s[3];if(f&&(c=c|0),d===void 0||d==="["&&o+2===a){x2(t,d===void 0?new pX(c,n,e):new mX(c,n,e));break}else{let g=t.map[c];g===void 0&&(g=new gX(c),x2(t,g)),t=g}}}class Yx{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let a=0;a<i;++a){const s=e.getActiveUniform(t,a),o=e.getUniformLocation(t,s.name);vX(s,o,this)}}setValue(e,t,i,a){const s=this.map[t];s!==void 0&&s.setValue(e,i,a)}setOptional(e,t,i){const a=t[i];a!==void 0&&this.setValue(e,i,a)}static upload(e,t,i,a){for(let s=0,o=t.length;s!==o;++s){const c=t[s],f=i[c.id];f.needsUpdate!==!1&&c.setValue(e,f.value,a)}}static seqWithValue(e,t){const i=[];for(let a=0,s=e.length;a!==s;++a){const o=e[a];o.id in t&&i.push(o)}return i}}function _2(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const yX=37297;let xX=0;function _X(n,e){const t=n.split(`
`),i=[],a=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=a;o<s;o++){const c=o+1;i.push(`${c===e?">":" "} ${c}: ${t[o]}`)}return i.join(`
`)}const b2=new yn;function bX(n){zn._getMatrix(b2,zn.workingColorSpace,n);const e=`mat3( ${b2.elements.map(t=>t.toFixed(4))} )`;switch(zn.getTransfer(n)){case f0:return[e,"LinearTransferOETF"];case di:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function A2(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const c=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+_X(n.getShaderSource(e),c)}else return s}function AX(n,e){const t=bX(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function SX(n,e){let t;switch(e){case aN:t="Linear";break;case sN:t="Reinhard";break;case rN:t="Cineon";break;case dE:t="ACESFilmic";break;case lN:t="AgX";break;case cN:t="Neutral";break;case oN:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Tx=new Q;function MX(){zn.getLuminanceCoefficients(Tx);const n=Tx.x.toFixed(4),e=Tx.y.toFixed(4),t=Tx.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function EX(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Lg).join(`
`)}function TX(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function CX(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const s=n.getActiveAttrib(e,a),o=s.name;let c=1;s.type===n.FLOAT_MAT2&&(c=2),s.type===n.FLOAT_MAT3&&(c=3),s.type===n.FLOAT_MAT4&&(c=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:c}}return t}function Lg(n){return n!==""}function S2(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function M2(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const wX=/^[ \t]*#include +<([\w\d./]+)>/gm;function dM(n){return n.replace(wX,DX)}const RX=new Map;function DX(n,e){let t=Mn[e];if(t===void 0){const i=RX.get(e);if(i!==void 0)t=Mn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return dM(t)}const BX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function E2(n){return n.replace(BX,NX)}function NX(n,e,t,i){let a="";for(let s=parseInt(e);s<parseInt(t);s++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return a}function T2(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function OX(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===db?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Vg?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===wo&&(e="SHADOWMAP_TYPE_VSM"),e}function UX(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Rl:case Iu:e="ENVMAP_TYPE_CUBE";break;case Xp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function LX(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Iu:e="ENVMAP_MODE_REFRACTION";break}return e}function IX(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case U0:e="ENVMAP_BLENDING_MULTIPLY";break;case nN:e="ENVMAP_BLENDING_MIX";break;case iN:e="ENVMAP_BLENDING_ADD";break}return e}function PX(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function FX(n,e,t,i){const a=n.getContext(),s=t.defines;let o=t.vertexShader,c=t.fragmentShader;const f=OX(t),d=UX(t),m=LX(t),g=IX(t),y=PX(t),_=EX(t),A=TX(s),T=a.createProgram();let E,b,R=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(Lg).join(`
`),E.length>0&&(E+=`
`),b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(Lg).join(`
`),b.length>0&&(b+=`
`)):(E=[T2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Lg).join(`
`),b=[T2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+m:"",t.envMap?"#define "+g:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==El?"#define TONE_MAPPING":"",t.toneMapping!==El?Mn.tonemapping_pars_fragment:"",t.toneMapping!==El?SX("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Mn.colorspace_pars_fragment,AX("linearToOutputTexel",t.outputColorSpace),MX(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Lg).join(`
`)),o=dM(o),o=S2(o,t),o=M2(o,t),c=dM(c),c=S2(c,t),c=M2(c,t),o=E2(o),c=E2(c),t.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,E=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,b=["#define varying in",t.glslVersion===aM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===aM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const D=R+E+o,B=R+b+c,U=_2(a,a.VERTEX_SHADER,D),L=_2(a,a.FRAGMENT_SHADER,B);a.attachShader(T,U),a.attachShader(T,L),t.index0AttributeName!==void 0?a.bindAttribLocation(T,0,t.index0AttributeName):t.morphTargets===!0&&a.bindAttribLocation(T,0,"position"),a.linkProgram(T);function z(Y){if(n.debug.checkShaderErrors){const ie=a.getProgramInfoLog(T)||"",se=a.getShaderInfoLog(U)||"",ue=a.getShaderInfoLog(L)||"",me=ie.trim(),H=se.trim(),W=ue.trim();let q=!0,ge=!0;if(a.getProgramParameter(T,a.LINK_STATUS)===!1)if(q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(a,T,U,L);else{const j=A2(a,U,"vertex"),fe=A2(a,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(T,a.VALIDATE_STATUS)+`

Material Name: `+Y.name+`
Material Type: `+Y.type+`

Program Info Log: `+me+`
`+j+`
`+fe)}else me!==""?console.warn("THREE.WebGLProgram: Program Info Log:",me):(H===""||W==="")&&(ge=!1);ge&&(Y.diagnostics={runnable:q,programLog:me,vertexShader:{log:H,prefix:E},fragmentShader:{log:W,prefix:b}})}a.deleteShader(U),a.deleteShader(L),I=new Yx(a,T),O=CX(a,T)}let I;this.getUniforms=function(){return I===void 0&&z(this),I};let O;this.getAttributes=function(){return O===void 0&&z(this),O};let P=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=a.getProgramParameter(T,yX)),P},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(T),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=xX++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=U,this.fragmentShader=L,this}let zX=0;class HX{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,a=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(a)===!1&&(o.add(a),a.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new GX(e),t.set(e,i)),i}}class GX{constructor(e){this.id=zX++,this.code=e,this.usedTimes=0}}function VX(n,e,t,i,a,s,o){const c=new Bp,f=new HX,d=new Set,m=[],g=a.logarithmicDepthBuffer,y=a.vertexTextures;let _=a.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(O){return d.add(O),O===0?"uv":`uv${O}`}function E(O,P,Y,ie,se){const ue=ie.fog,me=se.geometry,H=O.isMeshStandardMaterial?ie.environment:null,W=(O.isMeshStandardMaterial?t:e).get(O.envMap||H),q=W&&W.mapping===Xp?W.image.height:null,ge=A[O.type];O.precision!==null&&(_=a.getMaxPrecision(O.precision),_!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",_,"instead."));const j=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,fe=j!==void 0?j.length:0;let _e=0;me.morphAttributes.position!==void 0&&(_e=1),me.morphAttributes.normal!==void 0&&(_e=2),me.morphAttributes.color!==void 0&&(_e=3);let Ae,De,ot,ve;if(ge){const jt=Ro[ge];Ae=jt.vertexShader,De=jt.fragmentShader}else Ae=O.vertexShader,De=O.fragmentShader,f.update(O),ot=f.getVertexShaderID(O),ve=f.getFragmentShaderID(O);const Ne=n.getRenderTarget(),Qe=n.state.buffers.depth.getReversed(),bt=se.isInstancedMesh===!0,ct=se.isBatchedMesh===!0,zt=!!O.map,Xt=!!O.matcap,ae=!!W,Ye=!!O.aoMap,je=!!O.lightMap,Xe=!!O.bumpMap,He=!!O.normalMap,gt=!!O.displacementMap,st=!!O.emissiveMap,rt=!!O.metalnessMap,Ot=!!O.roughnessMap,Gt=O.anisotropy>0,$=O.clearcoat>0,X=O.dispersion>0,Ee=O.iridescence>0,Fe=O.sheen>0,ke=O.transmission>0,Le=Gt&&!!O.anisotropyMap,xt=$&&!!O.clearcoatMap,pt=$&&!!O.clearcoatNormalMap,St=$&&!!O.clearcoatRoughnessMap,Rt=Ee&&!!O.iridescenceMap,nt=Ee&&!!O.iridescenceThicknessMap,ut=Fe&&!!O.sheenColorMap,Dt=Fe&&!!O.sheenRoughnessMap,re=!!O.specularMap,Se=!!O.specularColorMap,tt=!!O.specularIntensityMap,ce=ke&&!!O.transmissionMap,be=ke&&!!O.thicknessMap,lt=!!O.gradientMap,ft=!!O.alphaMap,it=O.alphaTest>0,Ve=!!O.alphaHash,_t=!!O.extensions;let Mt=El;O.toneMapped&&(Ne===null||Ne.isXRRenderTarget===!0)&&(Mt=n.toneMapping);const Vt={shaderID:ge,shaderType:O.type,shaderName:O.name,vertexShader:Ae,fragmentShader:De,defines:O.defines,customVertexShaderID:ot,customFragmentShaderID:ve,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:_,batching:ct,batchingColor:ct&&se._colorsTexture!==null,instancing:bt,instancingColor:bt&&se.instanceColor!==null,instancingMorph:bt&&se.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:Ne===null?n.outputColorSpace:Ne.isXRRenderTarget===!0?Ne.texture.colorSpace:No,alphaToCoverage:!!O.alphaToCoverage,map:zt,matcap:Xt,envMap:ae,envMapMode:ae&&W.mapping,envMapCubeUVHeight:q,aoMap:Ye,lightMap:je,bumpMap:Xe,normalMap:He,displacementMap:y&&gt,emissiveMap:st,normalMapObjectSpace:He&&O.normalMapType===vN,normalMapTangentSpace:He&&O.normalMapType===Gu,metalnessMap:rt,roughnessMap:Ot,anisotropy:Gt,anisotropyMap:Le,clearcoat:$,clearcoatMap:xt,clearcoatNormalMap:pt,clearcoatRoughnessMap:St,dispersion:X,iridescence:Ee,iridescenceMap:Rt,iridescenceThicknessMap:nt,sheen:Fe,sheenColorMap:ut,sheenRoughnessMap:Dt,specularMap:re,specularColorMap:Se,specularIntensityMap:tt,transmission:ke,transmissionMap:ce,thicknessMap:be,gradientMap:lt,opaque:O.transparent===!1&&O.blending===yh&&O.alphaToCoverage===!1,alphaMap:ft,alphaTest:it,alphaHash:Ve,combine:O.combine,mapUv:zt&&T(O.map.channel),aoMapUv:Ye&&T(O.aoMap.channel),lightMapUv:je&&T(O.lightMap.channel),bumpMapUv:Xe&&T(O.bumpMap.channel),normalMapUv:He&&T(O.normalMap.channel),displacementMapUv:gt&&T(O.displacementMap.channel),emissiveMapUv:st&&T(O.emissiveMap.channel),metalnessMapUv:rt&&T(O.metalnessMap.channel),roughnessMapUv:Ot&&T(O.roughnessMap.channel),anisotropyMapUv:Le&&T(O.anisotropyMap.channel),clearcoatMapUv:xt&&T(O.clearcoatMap.channel),clearcoatNormalMapUv:pt&&T(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:St&&T(O.clearcoatRoughnessMap.channel),iridescenceMapUv:Rt&&T(O.iridescenceMap.channel),iridescenceThicknessMapUv:nt&&T(O.iridescenceThicknessMap.channel),sheenColorMapUv:ut&&T(O.sheenColorMap.channel),sheenRoughnessMapUv:Dt&&T(O.sheenRoughnessMap.channel),specularMapUv:re&&T(O.specularMap.channel),specularColorMapUv:Se&&T(O.specularColorMap.channel),specularIntensityMapUv:tt&&T(O.specularIntensityMap.channel),transmissionMapUv:ce&&T(O.transmissionMap.channel),thicknessMapUv:be&&T(O.thicknessMap.channel),alphaMapUv:ft&&T(O.alphaMap.channel),vertexTangents:!!me.attributes.tangent&&(He||Gt),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,pointsUvs:se.isPoints===!0&&!!me.attributes.uv&&(zt||ft),fog:!!ue,useFog:O.fog===!0,fogExp2:!!ue&&ue.isFogExp2,flatShading:O.flatShading===!0&&O.wireframe===!1,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:g,reversedDepthBuffer:Qe,skinning:se.isSkinnedMesh===!0,morphTargets:me.morphAttributes.position!==void 0,morphNormals:me.morphAttributes.normal!==void 0,morphColors:me.morphAttributes.color!==void 0,morphTargetsCount:fe,morphTextureStride:_e,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:O.dithering,shadowMapEnabled:n.shadowMap.enabled&&Y.length>0,shadowMapType:n.shadowMap.type,toneMapping:Mt,decodeVideoTexture:zt&&O.map.isVideoTexture===!0&&zn.getTransfer(O.map.colorSpace)===di,decodeVideoTextureEmissive:st&&O.emissiveMap.isVideoTexture===!0&&zn.getTransfer(O.emissiveMap.colorSpace)===di,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===kr,flipSided:O.side===Os,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:_t&&O.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(_t&&O.extensions.multiDraw===!0||ct)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return Vt.vertexUv1s=d.has(1),Vt.vertexUv2s=d.has(2),Vt.vertexUv3s=d.has(3),d.clear(),Vt}function b(O){const P=[];if(O.shaderID?P.push(O.shaderID):(P.push(O.customVertexShaderID),P.push(O.customFragmentShaderID)),O.defines!==void 0)for(const Y in O.defines)P.push(Y),P.push(O.defines[Y]);return O.isRawShaderMaterial===!1&&(R(P,O),D(P,O),P.push(n.outputColorSpace)),P.push(O.customProgramCacheKey),P.join()}function R(O,P){O.push(P.precision),O.push(P.outputColorSpace),O.push(P.envMapMode),O.push(P.envMapCubeUVHeight),O.push(P.mapUv),O.push(P.alphaMapUv),O.push(P.lightMapUv),O.push(P.aoMapUv),O.push(P.bumpMapUv),O.push(P.normalMapUv),O.push(P.displacementMapUv),O.push(P.emissiveMapUv),O.push(P.metalnessMapUv),O.push(P.roughnessMapUv),O.push(P.anisotropyMapUv),O.push(P.clearcoatMapUv),O.push(P.clearcoatNormalMapUv),O.push(P.clearcoatRoughnessMapUv),O.push(P.iridescenceMapUv),O.push(P.iridescenceThicknessMapUv),O.push(P.sheenColorMapUv),O.push(P.sheenRoughnessMapUv),O.push(P.specularMapUv),O.push(P.specularColorMapUv),O.push(P.specularIntensityMapUv),O.push(P.transmissionMapUv),O.push(P.thicknessMapUv),O.push(P.combine),O.push(P.fogExp2),O.push(P.sizeAttenuation),O.push(P.morphTargetsCount),O.push(P.morphAttributeCount),O.push(P.numDirLights),O.push(P.numPointLights),O.push(P.numSpotLights),O.push(P.numSpotLightMaps),O.push(P.numHemiLights),O.push(P.numRectAreaLights),O.push(P.numDirLightShadows),O.push(P.numPointLightShadows),O.push(P.numSpotLightShadows),O.push(P.numSpotLightShadowsWithMaps),O.push(P.numLightProbes),O.push(P.shadowMapType),O.push(P.toneMapping),O.push(P.numClippingPlanes),O.push(P.numClipIntersection),O.push(P.depthPacking)}function D(O,P){c.disableAll(),P.supportsVertexTextures&&c.enable(0),P.instancing&&c.enable(1),P.instancingColor&&c.enable(2),P.instancingMorph&&c.enable(3),P.matcap&&c.enable(4),P.envMap&&c.enable(5),P.normalMapObjectSpace&&c.enable(6),P.normalMapTangentSpace&&c.enable(7),P.clearcoat&&c.enable(8),P.iridescence&&c.enable(9),P.alphaTest&&c.enable(10),P.vertexColors&&c.enable(11),P.vertexAlphas&&c.enable(12),P.vertexUv1s&&c.enable(13),P.vertexUv2s&&c.enable(14),P.vertexUv3s&&c.enable(15),P.vertexTangents&&c.enable(16),P.anisotropy&&c.enable(17),P.alphaHash&&c.enable(18),P.batching&&c.enable(19),P.dispersion&&c.enable(20),P.batchingColor&&c.enable(21),P.gradientMap&&c.enable(22),O.push(c.mask),c.disableAll(),P.fog&&c.enable(0),P.useFog&&c.enable(1),P.flatShading&&c.enable(2),P.logarithmicDepthBuffer&&c.enable(3),P.reversedDepthBuffer&&c.enable(4),P.skinning&&c.enable(5),P.morphTargets&&c.enable(6),P.morphNormals&&c.enable(7),P.morphColors&&c.enable(8),P.premultipliedAlpha&&c.enable(9),P.shadowMapEnabled&&c.enable(10),P.doubleSided&&c.enable(11),P.flipSided&&c.enable(12),P.useDepthPacking&&c.enable(13),P.dithering&&c.enable(14),P.transmission&&c.enable(15),P.sheen&&c.enable(16),P.opaque&&c.enable(17),P.pointsUvs&&c.enable(18),P.decodeVideoTexture&&c.enable(19),P.decodeVideoTextureEmissive&&c.enable(20),P.alphaToCoverage&&c.enable(21),O.push(c.mask)}function B(O){const P=A[O.type];let Y;if(P){const ie=Ro[P];Y=BN.clone(ie.uniforms)}else Y=O.uniforms;return Y}function U(O,P){let Y;for(let ie=0,se=m.length;ie<se;ie++){const ue=m[ie];if(ue.cacheKey===P){Y=ue,++Y.usedTimes;break}}return Y===void 0&&(Y=new FX(n,P,O,s),m.push(Y)),Y}function L(O){if(--O.usedTimes===0){const P=m.indexOf(O);m[P]=m[m.length-1],m.pop(),O.destroy()}}function z(O){f.remove(O)}function I(){f.dispose()}return{getParameters:E,getProgramCacheKey:b,getUniforms:B,acquireProgram:U,releaseProgram:L,releaseShaderCache:z,programs:m,dispose:I}}function kX(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let c=n.get(o);return c===void 0&&(c={},n.set(o,c)),c}function i(o){n.delete(o)}function a(o,c,f){n.get(o)[c]=f}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:a,dispose:s}}function XX(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function C2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function w2(){const n=[];let e=0;const t=[],i=[],a=[];function s(){e=0,t.length=0,i.length=0,a.length=0}function o(g,y,_,A,T,E){let b=n[e];return b===void 0?(b={id:g.id,object:g,geometry:y,material:_,groupOrder:A,renderOrder:g.renderOrder,z:T,group:E},n[e]=b):(b.id=g.id,b.object=g,b.geometry=y,b.material=_,b.groupOrder=A,b.renderOrder=g.renderOrder,b.z=T,b.group=E),e++,b}function c(g,y,_,A,T,E){const b=o(g,y,_,A,T,E);_.transmission>0?i.push(b):_.transparent===!0?a.push(b):t.push(b)}function f(g,y,_,A,T,E){const b=o(g,y,_,A,T,E);_.transmission>0?i.unshift(b):_.transparent===!0?a.unshift(b):t.unshift(b)}function d(g,y){t.length>1&&t.sort(g||XX),i.length>1&&i.sort(y||C2),a.length>1&&a.sort(y||C2)}function m(){for(let g=e,y=n.length;g<y;g++){const _=n[g];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:i,transparent:a,init:s,push:c,unshift:f,finish:m,sort:d}}function jX(){let n=new WeakMap;function e(i,a){const s=n.get(i);let o;return s===void 0?(o=new w2,n.set(i,[o])):a>=s.length?(o=new w2,s.push(o)):o=s[a],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function YX(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Q,color:new Et};break;case"SpotLight":t={position:new Q,direction:new Q,color:new Et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Q,color:new Et,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Q,skyColor:new Et,groundColor:new Et};break;case"RectAreaLight":t={color:new Et,position:new Q,halfWidth:new Q,halfHeight:new Q};break}return n[e.id]=t,t}}}function qX(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let KX=0;function WX(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function JX(n){const e=new YX,t=qX(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new Q);const a=new Q,s=new $t,o=new $t;function c(d){let m=0,g=0,y=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let _=0,A=0,T=0,E=0,b=0,R=0,D=0,B=0,U=0,L=0,z=0;d.sort(WX);for(let O=0,P=d.length;O<P;O++){const Y=d[O],ie=Y.color,se=Y.intensity,ue=Y.distance,me=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null;if(Y.isAmbientLight)m+=ie.r*se,g+=ie.g*se,y+=ie.b*se;else if(Y.isLightProbe){for(let H=0;H<9;H++)i.probe[H].addScaledVector(Y.sh.coefficients[H],se);z++}else if(Y.isDirectionalLight){const H=e.get(Y);if(H.color.copy(Y.color).multiplyScalar(Y.intensity),Y.castShadow){const W=Y.shadow,q=t.get(Y);q.shadowIntensity=W.intensity,q.shadowBias=W.bias,q.shadowNormalBias=W.normalBias,q.shadowRadius=W.radius,q.shadowMapSize=W.mapSize,i.directionalShadow[_]=q,i.directionalShadowMap[_]=me,i.directionalShadowMatrix[_]=Y.shadow.matrix,R++}i.directional[_]=H,_++}else if(Y.isSpotLight){const H=e.get(Y);H.position.setFromMatrixPosition(Y.matrixWorld),H.color.copy(ie).multiplyScalar(se),H.distance=ue,H.coneCos=Math.cos(Y.angle),H.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),H.decay=Y.decay,i.spot[T]=H;const W=Y.shadow;if(Y.map&&(i.spotLightMap[U]=Y.map,U++,W.updateMatrices(Y),Y.castShadow&&L++),i.spotLightMatrix[T]=W.matrix,Y.castShadow){const q=t.get(Y);q.shadowIntensity=W.intensity,q.shadowBias=W.bias,q.shadowNormalBias=W.normalBias,q.shadowRadius=W.radius,q.shadowMapSize=W.mapSize,i.spotShadow[T]=q,i.spotShadowMap[T]=me,B++}T++}else if(Y.isRectAreaLight){const H=e.get(Y);H.color.copy(ie).multiplyScalar(se),H.halfWidth.set(Y.width*.5,0,0),H.halfHeight.set(0,Y.height*.5,0),i.rectArea[E]=H,E++}else if(Y.isPointLight){const H=e.get(Y);if(H.color.copy(Y.color).multiplyScalar(Y.intensity),H.distance=Y.distance,H.decay=Y.decay,Y.castShadow){const W=Y.shadow,q=t.get(Y);q.shadowIntensity=W.intensity,q.shadowBias=W.bias,q.shadowNormalBias=W.normalBias,q.shadowRadius=W.radius,q.shadowMapSize=W.mapSize,q.shadowCameraNear=W.camera.near,q.shadowCameraFar=W.camera.far,i.pointShadow[A]=q,i.pointShadowMap[A]=me,i.pointShadowMatrix[A]=Y.shadow.matrix,D++}i.point[A]=H,A++}else if(Y.isHemisphereLight){const H=e.get(Y);H.skyColor.copy(Y.color).multiplyScalar(se),H.groundColor.copy(Y.groundColor).multiplyScalar(se),i.hemi[b]=H,b++}}E>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=wt.LTC_FLOAT_1,i.rectAreaLTC2=wt.LTC_FLOAT_2):(i.rectAreaLTC1=wt.LTC_HALF_1,i.rectAreaLTC2=wt.LTC_HALF_2)),i.ambient[0]=m,i.ambient[1]=g,i.ambient[2]=y;const I=i.hash;(I.directionalLength!==_||I.pointLength!==A||I.spotLength!==T||I.rectAreaLength!==E||I.hemiLength!==b||I.numDirectionalShadows!==R||I.numPointShadows!==D||I.numSpotShadows!==B||I.numSpotMaps!==U||I.numLightProbes!==z)&&(i.directional.length=_,i.spot.length=T,i.rectArea.length=E,i.point.length=A,i.hemi.length=b,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=D,i.pointShadowMap.length=D,i.spotShadow.length=B,i.spotShadowMap.length=B,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=D,i.spotLightMatrix.length=B+U-L,i.spotLightMap.length=U,i.numSpotLightShadowsWithMaps=L,i.numLightProbes=z,I.directionalLength=_,I.pointLength=A,I.spotLength=T,I.rectAreaLength=E,I.hemiLength=b,I.numDirectionalShadows=R,I.numPointShadows=D,I.numSpotShadows=B,I.numSpotMaps=U,I.numLightProbes=z,i.version=KX++)}function f(d,m){let g=0,y=0,_=0,A=0,T=0;const E=m.matrixWorldInverse;for(let b=0,R=d.length;b<R;b++){const D=d[b];if(D.isDirectionalLight){const B=i.directional[g];B.direction.setFromMatrixPosition(D.matrixWorld),a.setFromMatrixPosition(D.target.matrixWorld),B.direction.sub(a),B.direction.transformDirection(E),g++}else if(D.isSpotLight){const B=i.spot[_];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(E),B.direction.setFromMatrixPosition(D.matrixWorld),a.setFromMatrixPosition(D.target.matrixWorld),B.direction.sub(a),B.direction.transformDirection(E),_++}else if(D.isRectAreaLight){const B=i.rectArea[A];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(E),o.identity(),s.copy(D.matrixWorld),s.premultiply(E),o.extractRotation(s),B.halfWidth.set(D.width*.5,0,0),B.halfHeight.set(0,D.height*.5,0),B.halfWidth.applyMatrix4(o),B.halfHeight.applyMatrix4(o),A++}else if(D.isPointLight){const B=i.point[y];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(E),y++}else if(D.isHemisphereLight){const B=i.hemi[T];B.direction.setFromMatrixPosition(D.matrixWorld),B.direction.transformDirection(E),T++}}}return{setup:c,setupView:f,state:i}}function R2(n){const e=new JX(n),t=[],i=[];function a(m){d.camera=m,t.length=0,i.length=0}function s(m){t.push(m)}function o(m){i.push(m)}function c(){e.setup(t)}function f(m){e.setupView(t,m)}const d={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:a,state:d,setupLights:c,setupLightsView:f,pushLight:s,pushShadow:o}}function ZX(n){let e=new WeakMap;function t(a,s=0){const o=e.get(a);let c;return o===void 0?(c=new R2(n),e.set(a,[c])):s>=o.length?(c=new R2(n),o.push(c)):c=o[s],c}function i(){e=new WeakMap}return{get:t,dispose:i}}const QX=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,$X=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ej(n,e,t){let i=new jp;const a=new Ze,s=new Ze,o=new jn,c=new HE({depthPacking:gN}),f=new GE,d={},m=t.maxTextureSize,g={[wl]:Os,[Os]:wl,[kr]:kr},y=new tr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ze},radius:{value:4}},vertexShader:QX,fragmentShader:$X}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const A=new gn;A.setAttribute("position",new Yn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new Oi(A,y),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=db;let b=this.type;this.render=function(L,z,I){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||L.length===0)return;const O=n.getRenderTarget(),P=n.getActiveCubeFace(),Y=n.getActiveMipmapLevel(),ie=n.state;ie.setBlending(Ml),ie.buffers.depth.getReversed()===!0?ie.buffers.color.setClear(0,0,0,0):ie.buffers.color.setClear(1,1,1,1),ie.buffers.depth.setTest(!0),ie.setScissorTest(!1);const se=b!==wo&&this.type===wo,ue=b===wo&&this.type!==wo;for(let me=0,H=L.length;me<H;me++){const W=L[me],q=W.shadow;if(q===void 0){console.warn("THREE.WebGLShadowMap:",W,"has no shadow.");continue}if(q.autoUpdate===!1&&q.needsUpdate===!1)continue;a.copy(q.mapSize);const ge=q.getFrameExtents();if(a.multiply(ge),s.copy(q.mapSize),(a.x>m||a.y>m)&&(a.x>m&&(s.x=Math.floor(m/ge.x),a.x=s.x*ge.x,q.mapSize.x=s.x),a.y>m&&(s.y=Math.floor(m/ge.y),a.y=s.y*ge.y,q.mapSize.y=s.y)),q.map===null||se===!0||ue===!0){const fe=this.type!==wo?{minFilter:Ia,magFilter:Ia}:{};q.map!==null&&q.map.dispose(),q.map=new Kr(a.x,a.y,fe),q.map.texture.name=W.name+".shadowMap",q.camera.updateProjectionMatrix()}n.setRenderTarget(q.map),n.clear();const j=q.getViewportCount();for(let fe=0;fe<j;fe++){const _e=q.getViewport(fe);o.set(s.x*_e.x,s.y*_e.y,s.x*_e.z,s.y*_e.w),ie.viewport(o),q.updateMatrices(W,fe),i=q.getFrustum(),B(z,I,q.camera,W,this.type)}q.isPointLightShadow!==!0&&this.type===wo&&R(q,I),q.needsUpdate=!1}b=this.type,E.needsUpdate=!1,n.setRenderTarget(O,P,Y)};function R(L,z){const I=e.update(T);y.defines.VSM_SAMPLES!==L.blurSamples&&(y.defines.VSM_SAMPLES=L.blurSamples,_.defines.VSM_SAMPLES=L.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new Kr(a.x,a.y)),y.uniforms.shadow_pass.value=L.map.texture,y.uniforms.resolution.value=L.mapSize,y.uniforms.radius.value=L.radius,n.setRenderTarget(L.mapPass),n.clear(),n.renderBufferDirect(z,null,I,y,T,null),_.uniforms.shadow_pass.value=L.mapPass.texture,_.uniforms.resolution.value=L.mapSize,_.uniforms.radius.value=L.radius,n.setRenderTarget(L.map),n.clear(),n.renderBufferDirect(z,null,I,_,T,null)}function D(L,z,I,O){let P=null;const Y=I.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(Y!==void 0)P=Y;else if(P=I.isPointLight===!0?f:c,n.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0||z.map&&z.alphaTest>0||z.alphaToCoverage===!0){const ie=P.uuid,se=z.uuid;let ue=d[ie];ue===void 0&&(ue={},d[ie]=ue);let me=ue[se];me===void 0&&(me=P.clone(),ue[se]=me,z.addEventListener("dispose",U)),P=me}if(P.visible=z.visible,P.wireframe=z.wireframe,O===wo?P.side=z.shadowSide!==null?z.shadowSide:z.side:P.side=z.shadowSide!==null?z.shadowSide:g[z.side],P.alphaMap=z.alphaMap,P.alphaTest=z.alphaToCoverage===!0?.5:z.alphaTest,P.map=z.map,P.clipShadows=z.clipShadows,P.clippingPlanes=z.clippingPlanes,P.clipIntersection=z.clipIntersection,P.displacementMap=z.displacementMap,P.displacementScale=z.displacementScale,P.displacementBias=z.displacementBias,P.wireframeLinewidth=z.wireframeLinewidth,P.linewidth=z.linewidth,I.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const ie=n.properties.get(P);ie.light=I}return P}function B(L,z,I,O,P){if(L.visible===!1)return;if(L.layers.test(z.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&P===wo)&&(!L.frustumCulled||i.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,L.matrixWorld);const se=e.update(L),ue=L.material;if(Array.isArray(ue)){const me=se.groups;for(let H=0,W=me.length;H<W;H++){const q=me[H],ge=ue[q.materialIndex];if(ge&&ge.visible){const j=D(L,ge,O,P);L.onBeforeShadow(n,L,z,I,se,j,q),n.renderBufferDirect(I,null,se,j,L,q),L.onAfterShadow(n,L,z,I,se,j,q)}}}else if(ue.visible){const me=D(L,ue,O,P);L.onBeforeShadow(n,L,z,I,se,me,null),n.renderBufferDirect(I,null,se,me,L,null),L.onAfterShadow(n,L,z,I,se,me,null)}}const ie=L.children;for(let se=0,ue=ie.length;se<ue;se++)B(ie[se],z,I,O,P)}function U(L){L.target.removeEventListener("dispose",U);for(const I in d){const O=d[I],P=L.target.uuid;P in O&&(O[P].dispose(),delete O[P])}}}const tj={[r_]:o_,[l_]:f_,[c_]:h_,[Ah]:u_,[o_]:r_,[f_]:l_,[h_]:c_,[u_]:Ah};function nj(n,e){function t(){let ce=!1;const be=new jn;let lt=null;const ft=new jn(0,0,0,0);return{setMask:function(it){lt!==it&&!ce&&(n.colorMask(it,it,it,it),lt=it)},setLocked:function(it){ce=it},setClear:function(it,Ve,_t,Mt,Vt){Vt===!0&&(it*=Mt,Ve*=Mt,_t*=Mt),be.set(it,Ve,_t,Mt),ft.equals(be)===!1&&(n.clearColor(it,Ve,_t,Mt),ft.copy(be))},reset:function(){ce=!1,lt=null,ft.set(-1,0,0,0)}}}function i(){let ce=!1,be=!1,lt=null,ft=null,it=null;return{setReversed:function(Ve){if(be!==Ve){const _t=e.get("EXT_clip_control");Ve?_t.clipControlEXT(_t.LOWER_LEFT_EXT,_t.ZERO_TO_ONE_EXT):_t.clipControlEXT(_t.LOWER_LEFT_EXT,_t.NEGATIVE_ONE_TO_ONE_EXT),be=Ve;const Mt=it;it=null,this.setClear(Mt)}},getReversed:function(){return be},setTest:function(Ve){Ve?Ne(n.DEPTH_TEST):Qe(n.DEPTH_TEST)},setMask:function(Ve){lt!==Ve&&!ce&&(n.depthMask(Ve),lt=Ve)},setFunc:function(Ve){if(be&&(Ve=tj[Ve]),ft!==Ve){switch(Ve){case r_:n.depthFunc(n.NEVER);break;case o_:n.depthFunc(n.ALWAYS);break;case l_:n.depthFunc(n.LESS);break;case Ah:n.depthFunc(n.LEQUAL);break;case c_:n.depthFunc(n.EQUAL);break;case u_:n.depthFunc(n.GEQUAL);break;case f_:n.depthFunc(n.GREATER);break;case h_:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ft=Ve}},setLocked:function(Ve){ce=Ve},setClear:function(Ve){it!==Ve&&(be&&(Ve=1-Ve),n.clearDepth(Ve),it=Ve)},reset:function(){ce=!1,lt=null,ft=null,it=null,be=!1}}}function a(){let ce=!1,be=null,lt=null,ft=null,it=null,Ve=null,_t=null,Mt=null,Vt=null;return{setTest:function(jt){ce||(jt?Ne(n.STENCIL_TEST):Qe(n.STENCIL_TEST))},setMask:function(jt){be!==jt&&!ce&&(n.stencilMask(jt),be=jt)},setFunc:function(jt,oi,cn){(lt!==jt||ft!==oi||it!==cn)&&(n.stencilFunc(jt,oi,cn),lt=jt,ft=oi,it=cn)},setOp:function(jt,oi,cn){(Ve!==jt||_t!==oi||Mt!==cn)&&(n.stencilOp(jt,oi,cn),Ve=jt,_t=oi,Mt=cn)},setLocked:function(jt){ce=jt},setClear:function(jt){Vt!==jt&&(n.clearStencil(jt),Vt=jt)},reset:function(){ce=!1,be=null,lt=null,ft=null,it=null,Ve=null,_t=null,Mt=null,Vt=null}}}const s=new t,o=new i,c=new a,f=new WeakMap,d=new WeakMap;let m={},g={},y=new WeakMap,_=[],A=null,T=!1,E=null,b=null,R=null,D=null,B=null,U=null,L=null,z=new Et(0,0,0),I=0,O=!1,P=null,Y=null,ie=null,se=null,ue=null;const me=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let H=!1,W=0;const q=n.getParameter(n.VERSION);q.indexOf("WebGL")!==-1?(W=parseFloat(/^WebGL (\d)/.exec(q)[1]),H=W>=1):q.indexOf("OpenGL ES")!==-1&&(W=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),H=W>=2);let ge=null,j={};const fe=n.getParameter(n.SCISSOR_BOX),_e=n.getParameter(n.VIEWPORT),Ae=new jn().fromArray(fe),De=new jn().fromArray(_e);function ot(ce,be,lt,ft){const it=new Uint8Array(4),Ve=n.createTexture();n.bindTexture(ce,Ve),n.texParameteri(ce,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ce,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let _t=0;_t<lt;_t++)ce===n.TEXTURE_3D||ce===n.TEXTURE_2D_ARRAY?n.texImage3D(be,0,n.RGBA,1,1,ft,0,n.RGBA,n.UNSIGNED_BYTE,it):n.texImage2D(be+_t,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,it);return Ve}const ve={};ve[n.TEXTURE_2D]=ot(n.TEXTURE_2D,n.TEXTURE_2D,1),ve[n.TEXTURE_CUBE_MAP]=ot(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ve[n.TEXTURE_2D_ARRAY]=ot(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ve[n.TEXTURE_3D]=ot(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),c.setClear(0),Ne(n.DEPTH_TEST),o.setFunc(Ah),Xe(!1),He(Z1),Ne(n.CULL_FACE),Ye(Ml);function Ne(ce){m[ce]!==!0&&(n.enable(ce),m[ce]=!0)}function Qe(ce){m[ce]!==!1&&(n.disable(ce),m[ce]=!1)}function bt(ce,be){return g[ce]!==be?(n.bindFramebuffer(ce,be),g[ce]=be,ce===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=be),ce===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=be),!0):!1}function ct(ce,be){let lt=_,ft=!1;if(ce){lt=y.get(be),lt===void 0&&(lt=[],y.set(be,lt));const it=ce.textures;if(lt.length!==it.length||lt[0]!==n.COLOR_ATTACHMENT0){for(let Ve=0,_t=it.length;Ve<_t;Ve++)lt[Ve]=n.COLOR_ATTACHMENT0+Ve;lt.length=it.length,ft=!0}}else lt[0]!==n.BACK&&(lt[0]=n.BACK,ft=!0);ft&&n.drawBuffers(lt)}function zt(ce){return A!==ce?(n.useProgram(ce),A=ce,!0):!1}const Xt={[Du]:n.FUNC_ADD,[z3]:n.FUNC_SUBTRACT,[H3]:n.FUNC_REVERSE_SUBTRACT};Xt[G3]=n.MIN,Xt[V3]=n.MAX;const ae={[k3]:n.ZERO,[X3]:n.ONE,[j3]:n.SRC_COLOR,[a_]:n.SRC_ALPHA,[Z3]:n.SRC_ALPHA_SATURATE,[W3]:n.DST_COLOR,[q3]:n.DST_ALPHA,[Y3]:n.ONE_MINUS_SRC_COLOR,[s_]:n.ONE_MINUS_SRC_ALPHA,[J3]:n.ONE_MINUS_DST_COLOR,[K3]:n.ONE_MINUS_DST_ALPHA,[Q3]:n.CONSTANT_COLOR,[$3]:n.ONE_MINUS_CONSTANT_COLOR,[eN]:n.CONSTANT_ALPHA,[tN]:n.ONE_MINUS_CONSTANT_ALPHA};function Ye(ce,be,lt,ft,it,Ve,_t,Mt,Vt,jt){if(ce===Ml){T===!0&&(Qe(n.BLEND),T=!1);return}if(T===!1&&(Ne(n.BLEND),T=!0),ce!==F3){if(ce!==E||jt!==O){if((b!==Du||B!==Du)&&(n.blendEquation(n.FUNC_ADD),b=Du,B=Du),jt)switch(ce){case yh:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Q1:n.blendFunc(n.ONE,n.ONE);break;case $1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case eM:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}else switch(ce){case yh:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Q1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case $1:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case eM:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}R=null,D=null,U=null,L=null,z.set(0,0,0),I=0,E=ce,O=jt}return}it=it||be,Ve=Ve||lt,_t=_t||ft,(be!==b||it!==B)&&(n.blendEquationSeparate(Xt[be],Xt[it]),b=be,B=it),(lt!==R||ft!==D||Ve!==U||_t!==L)&&(n.blendFuncSeparate(ae[lt],ae[ft],ae[Ve],ae[_t]),R=lt,D=ft,U=Ve,L=_t),(Mt.equals(z)===!1||Vt!==I)&&(n.blendColor(Mt.r,Mt.g,Mt.b,Vt),z.copy(Mt),I=Vt),E=ce,O=!1}function je(ce,be){ce.side===kr?Qe(n.CULL_FACE):Ne(n.CULL_FACE);let lt=ce.side===Os;be&&(lt=!lt),Xe(lt),ce.blending===yh&&ce.transparent===!1?Ye(Ml):Ye(ce.blending,ce.blendEquation,ce.blendSrc,ce.blendDst,ce.blendEquationAlpha,ce.blendSrcAlpha,ce.blendDstAlpha,ce.blendColor,ce.blendAlpha,ce.premultipliedAlpha),o.setFunc(ce.depthFunc),o.setTest(ce.depthTest),o.setMask(ce.depthWrite),s.setMask(ce.colorWrite);const ft=ce.stencilWrite;c.setTest(ft),ft&&(c.setMask(ce.stencilWriteMask),c.setFunc(ce.stencilFunc,ce.stencilRef,ce.stencilFuncMask),c.setOp(ce.stencilFail,ce.stencilZFail,ce.stencilZPass)),st(ce.polygonOffset,ce.polygonOffsetFactor,ce.polygonOffsetUnits),ce.alphaToCoverage===!0?Ne(n.SAMPLE_ALPHA_TO_COVERAGE):Qe(n.SAMPLE_ALPHA_TO_COVERAGE)}function Xe(ce){P!==ce&&(ce?n.frontFace(n.CW):n.frontFace(n.CCW),P=ce)}function He(ce){ce!==L3?(Ne(n.CULL_FACE),ce!==Y&&(ce===Z1?n.cullFace(n.BACK):ce===I3?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Qe(n.CULL_FACE),Y=ce}function gt(ce){ce!==ie&&(H&&n.lineWidth(ce),ie=ce)}function st(ce,be,lt){ce?(Ne(n.POLYGON_OFFSET_FILL),(se!==be||ue!==lt)&&(n.polygonOffset(be,lt),se=be,ue=lt)):Qe(n.POLYGON_OFFSET_FILL)}function rt(ce){ce?Ne(n.SCISSOR_TEST):Qe(n.SCISSOR_TEST)}function Ot(ce){ce===void 0&&(ce=n.TEXTURE0+me-1),ge!==ce&&(n.activeTexture(ce),ge=ce)}function Gt(ce,be,lt){lt===void 0&&(ge===null?lt=n.TEXTURE0+me-1:lt=ge);let ft=j[lt];ft===void 0&&(ft={type:void 0,texture:void 0},j[lt]=ft),(ft.type!==ce||ft.texture!==be)&&(ge!==lt&&(n.activeTexture(lt),ge=lt),n.bindTexture(ce,be||ve[ce]),ft.type=ce,ft.texture=be)}function $(){const ce=j[ge];ce!==void 0&&ce.type!==void 0&&(n.bindTexture(ce.type,null),ce.type=void 0,ce.texture=void 0)}function X(){try{n.compressedTexImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Ee(){try{n.compressedTexImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Fe(){try{n.texSubImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ke(){try{n.texSubImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Le(){try{n.compressedTexSubImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function xt(){try{n.compressedTexSubImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function pt(){try{n.texStorage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function St(){try{n.texStorage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Rt(){try{n.texImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function nt(){try{n.texImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ut(ce){Ae.equals(ce)===!1&&(n.scissor(ce.x,ce.y,ce.z,ce.w),Ae.copy(ce))}function Dt(ce){De.equals(ce)===!1&&(n.viewport(ce.x,ce.y,ce.z,ce.w),De.copy(ce))}function re(ce,be){let lt=d.get(be);lt===void 0&&(lt=new WeakMap,d.set(be,lt));let ft=lt.get(ce);ft===void 0&&(ft=n.getUniformBlockIndex(be,ce.name),lt.set(ce,ft))}function Se(ce,be){const ft=d.get(be).get(ce);f.get(be)!==ft&&(n.uniformBlockBinding(be,ft,ce.__bindingPointIndex),f.set(be,ft))}function tt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},ge=null,j={},g={},y=new WeakMap,_=[],A=null,T=!1,E=null,b=null,R=null,D=null,B=null,U=null,L=null,z=new Et(0,0,0),I=0,O=!1,P=null,Y=null,ie=null,se=null,ue=null,Ae.set(0,0,n.canvas.width,n.canvas.height),De.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),c.reset()}return{buffers:{color:s,depth:o,stencil:c},enable:Ne,disable:Qe,bindFramebuffer:bt,drawBuffers:ct,useProgram:zt,setBlending:Ye,setMaterial:je,setFlipSided:Xe,setCullFace:He,setLineWidth:gt,setPolygonOffset:st,setScissorTest:rt,activeTexture:Ot,bindTexture:Gt,unbindTexture:$,compressedTexImage2D:X,compressedTexImage3D:Ee,texImage2D:Rt,texImage3D:nt,updateUBOMapping:re,uniformBlockBinding:Se,texStorage2D:pt,texStorage3D:St,texSubImage2D:Fe,texSubImage3D:ke,compressedTexSubImage2D:Le,compressedTexSubImage3D:xt,scissor:ut,viewport:Dt,reset:tt}}function ij(n,e,t,i,a,s,o){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Ze,m=new WeakMap;let g;const y=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A($,X){return _?new OffscreenCanvas($,X):d0("canvas")}function T($,X,Ee){let Fe=1;const ke=Gt($);if((ke.width>Ee||ke.height>Ee)&&(Fe=Ee/Math.max(ke.width,ke.height)),Fe<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const Le=Math.floor(Fe*ke.width),xt=Math.floor(Fe*ke.height);g===void 0&&(g=A(Le,xt));const pt=X?A(Le,xt):g;return pt.width=Le,pt.height=xt,pt.getContext("2d").drawImage($,0,0,Le,xt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ke.width+"x"+ke.height+") to ("+Le+"x"+xt+")."),pt}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ke.width+"x"+ke.height+")."),$;return $}function E($){return $.generateMipmaps}function b($){n.generateMipmap($)}function R($){return $.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?n.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function D($,X,Ee,Fe,ke=!1){if($!==null){if(n[$]!==void 0)return n[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Le=X;if(X===n.RED&&(Ee===n.FLOAT&&(Le=n.R32F),Ee===n.HALF_FLOAT&&(Le=n.R16F),Ee===n.UNSIGNED_BYTE&&(Le=n.R8)),X===n.RED_INTEGER&&(Ee===n.UNSIGNED_BYTE&&(Le=n.R8UI),Ee===n.UNSIGNED_SHORT&&(Le=n.R16UI),Ee===n.UNSIGNED_INT&&(Le=n.R32UI),Ee===n.BYTE&&(Le=n.R8I),Ee===n.SHORT&&(Le=n.R16I),Ee===n.INT&&(Le=n.R32I)),X===n.RG&&(Ee===n.FLOAT&&(Le=n.RG32F),Ee===n.HALF_FLOAT&&(Le=n.RG16F),Ee===n.UNSIGNED_BYTE&&(Le=n.RG8)),X===n.RG_INTEGER&&(Ee===n.UNSIGNED_BYTE&&(Le=n.RG8UI),Ee===n.UNSIGNED_SHORT&&(Le=n.RG16UI),Ee===n.UNSIGNED_INT&&(Le=n.RG32UI),Ee===n.BYTE&&(Le=n.RG8I),Ee===n.SHORT&&(Le=n.RG16I),Ee===n.INT&&(Le=n.RG32I)),X===n.RGB_INTEGER&&(Ee===n.UNSIGNED_BYTE&&(Le=n.RGB8UI),Ee===n.UNSIGNED_SHORT&&(Le=n.RGB16UI),Ee===n.UNSIGNED_INT&&(Le=n.RGB32UI),Ee===n.BYTE&&(Le=n.RGB8I),Ee===n.SHORT&&(Le=n.RGB16I),Ee===n.INT&&(Le=n.RGB32I)),X===n.RGBA_INTEGER&&(Ee===n.UNSIGNED_BYTE&&(Le=n.RGBA8UI),Ee===n.UNSIGNED_SHORT&&(Le=n.RGBA16UI),Ee===n.UNSIGNED_INT&&(Le=n.RGBA32UI),Ee===n.BYTE&&(Le=n.RGBA8I),Ee===n.SHORT&&(Le=n.RGBA16I),Ee===n.INT&&(Le=n.RGBA32I)),X===n.RGB&&(Ee===n.UNSIGNED_INT_5_9_9_9_REV&&(Le=n.RGB9_E5),Ee===n.UNSIGNED_INT_10F_11F_11F_REV&&(Le=n.R11F_G11F_B10F)),X===n.RGBA){const xt=ke?f0:zn.getTransfer(Fe);Ee===n.FLOAT&&(Le=n.RGBA32F),Ee===n.HALF_FLOAT&&(Le=n.RGBA16F),Ee===n.UNSIGNED_BYTE&&(Le=xt===di?n.SRGB8_ALPHA8:n.RGBA8),Ee===n.UNSIGNED_SHORT_4_4_4_4&&(Le=n.RGBA4),Ee===n.UNSIGNED_SHORT_5_5_5_1&&(Le=n.RGB5_A1)}return(Le===n.R16F||Le===n.R32F||Le===n.RG16F||Le===n.RG32F||Le===n.RGBA16F||Le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Le}function B($,X){let Ee;return $?X===null||X===Dl||X===Mp?Ee=n.DEPTH24_STENCIL8:X===Vi?Ee=n.DEPTH32F_STENCIL8:X===Sp&&(Ee=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):X===null||X===Dl||X===Mp?Ee=n.DEPTH_COMPONENT24:X===Vi?Ee=n.DEPTH_COMPONENT32F:X===Sp&&(Ee=n.DEPTH_COMPONENT16),Ee}function U($,X){return E($)===!0||$.isFramebufferTexture&&$.minFilter!==Ia&&$.minFilter!==ni?Math.log2(Math.max(X.width,X.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?X.mipmaps.length:1}function L($){const X=$.target;X.removeEventListener("dispose",L),I(X),X.isVideoTexture&&m.delete(X)}function z($){const X=$.target;X.removeEventListener("dispose",z),P(X)}function I($){const X=i.get($);if(X.__webglInit===void 0)return;const Ee=$.source,Fe=y.get(Ee);if(Fe){const ke=Fe[X.__cacheKey];ke.usedTimes--,ke.usedTimes===0&&O($),Object.keys(Fe).length===0&&y.delete(Ee)}i.remove($)}function O($){const X=i.get($);n.deleteTexture(X.__webglTexture);const Ee=$.source,Fe=y.get(Ee);delete Fe[X.__cacheKey],o.memory.textures--}function P($){const X=i.get($);if($.depthTexture&&($.depthTexture.dispose(),i.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let Fe=0;Fe<6;Fe++){if(Array.isArray(X.__webglFramebuffer[Fe]))for(let ke=0;ke<X.__webglFramebuffer[Fe].length;ke++)n.deleteFramebuffer(X.__webglFramebuffer[Fe][ke]);else n.deleteFramebuffer(X.__webglFramebuffer[Fe]);X.__webglDepthbuffer&&n.deleteRenderbuffer(X.__webglDepthbuffer[Fe])}else{if(Array.isArray(X.__webglFramebuffer))for(let Fe=0;Fe<X.__webglFramebuffer.length;Fe++)n.deleteFramebuffer(X.__webglFramebuffer[Fe]);else n.deleteFramebuffer(X.__webglFramebuffer);if(X.__webglDepthbuffer&&n.deleteRenderbuffer(X.__webglDepthbuffer),X.__webglMultisampledFramebuffer&&n.deleteFramebuffer(X.__webglMultisampledFramebuffer),X.__webglColorRenderbuffer)for(let Fe=0;Fe<X.__webglColorRenderbuffer.length;Fe++)X.__webglColorRenderbuffer[Fe]&&n.deleteRenderbuffer(X.__webglColorRenderbuffer[Fe]);X.__webglDepthRenderbuffer&&n.deleteRenderbuffer(X.__webglDepthRenderbuffer)}const Ee=$.textures;for(let Fe=0,ke=Ee.length;Fe<ke;Fe++){const Le=i.get(Ee[Fe]);Le.__webglTexture&&(n.deleteTexture(Le.__webglTexture),o.memory.textures--),i.remove(Ee[Fe])}i.remove($)}let Y=0;function ie(){Y=0}function se(){const $=Y;return $>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+a.maxTextures),Y+=1,$}function ue($){const X=[];return X.push($.wrapS),X.push($.wrapT),X.push($.wrapR||0),X.push($.magFilter),X.push($.minFilter),X.push($.anisotropy),X.push($.internalFormat),X.push($.format),X.push($.type),X.push($.generateMipmaps),X.push($.premultiplyAlpha),X.push($.flipY),X.push($.unpackAlignment),X.push($.colorSpace),X.join()}function me($,X){const Ee=i.get($);if($.isVideoTexture&&rt($),$.isRenderTargetTexture===!1&&$.isExternalTexture!==!0&&$.version>0&&Ee.__version!==$.version){const Fe=$.image;if(Fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ve(Ee,$,X);return}}else $.isExternalTexture&&(Ee.__webglTexture=$.sourceTexture?$.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,Ee.__webglTexture,n.TEXTURE0+X)}function H($,X){const Ee=i.get($);if($.isRenderTargetTexture===!1&&$.version>0&&Ee.__version!==$.version){ve(Ee,$,X);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Ee.__webglTexture,n.TEXTURE0+X)}function W($,X){const Ee=i.get($);if($.isRenderTargetTexture===!1&&$.version>0&&Ee.__version!==$.version){ve(Ee,$,X);return}t.bindTexture(n.TEXTURE_3D,Ee.__webglTexture,n.TEXTURE0+X)}function q($,X){const Ee=i.get($);if($.version>0&&Ee.__version!==$.version){Ne(Ee,$,X);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Ee.__webglTexture,n.TEXTURE0+X)}const ge={[Pu]:n.REPEAT,[aa]:n.CLAMP_TO_EDGE,[Ap]:n.MIRRORED_REPEAT},j={[Ia]:n.NEAREST,[pb]:n.NEAREST_MIPMAP_NEAREST,[ch]:n.NEAREST_MIPMAP_LINEAR,[ni]:n.LINEAR,[pp]:n.LINEAR_MIPMAP_NEAREST,[Yr]:n.LINEAR_MIPMAP_LINEAR},fe={[yN]:n.NEVER,[MN]:n.ALWAYS,[xN]:n.LESS,[bE]:n.LEQUAL,[_N]:n.EQUAL,[SN]:n.GEQUAL,[bN]:n.GREATER,[AN]:n.NOTEQUAL};function _e($,X){if(X.type===Vi&&e.has("OES_texture_float_linear")===!1&&(X.magFilter===ni||X.magFilter===pp||X.magFilter===ch||X.magFilter===Yr||X.minFilter===ni||X.minFilter===pp||X.minFilter===ch||X.minFilter===Yr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri($,n.TEXTURE_WRAP_S,ge[X.wrapS]),n.texParameteri($,n.TEXTURE_WRAP_T,ge[X.wrapT]),($===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY)&&n.texParameteri($,n.TEXTURE_WRAP_R,ge[X.wrapR]),n.texParameteri($,n.TEXTURE_MAG_FILTER,j[X.magFilter]),n.texParameteri($,n.TEXTURE_MIN_FILTER,j[X.minFilter]),X.compareFunction&&(n.texParameteri($,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri($,n.TEXTURE_COMPARE_FUNC,fe[X.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(X.magFilter===Ia||X.minFilter!==ch&&X.minFilter!==Yr||X.type===Vi&&e.has("OES_texture_float_linear")===!1)return;if(X.anisotropy>1||i.get(X).__currentAnisotropy){const Ee=e.get("EXT_texture_filter_anisotropic");n.texParameterf($,Ee.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,a.getMaxAnisotropy())),i.get(X).__currentAnisotropy=X.anisotropy}}}function Ae($,X){let Ee=!1;$.__webglInit===void 0&&($.__webglInit=!0,X.addEventListener("dispose",L));const Fe=X.source;let ke=y.get(Fe);ke===void 0&&(ke={},y.set(Fe,ke));const Le=ue(X);if(Le!==$.__cacheKey){ke[Le]===void 0&&(ke[Le]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Ee=!0),ke[Le].usedTimes++;const xt=ke[$.__cacheKey];xt!==void 0&&(ke[$.__cacheKey].usedTimes--,xt.usedTimes===0&&O(X)),$.__cacheKey=Le,$.__webglTexture=ke[Le].texture}return Ee}function De($,X,Ee){return Math.floor(Math.floor($/Ee)/X)}function ot($,X,Ee,Fe){const Le=$.updateRanges;if(Le.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,X.width,X.height,Ee,Fe,X.data);else{Le.sort((nt,ut)=>nt.start-ut.start);let xt=0;for(let nt=1;nt<Le.length;nt++){const ut=Le[xt],Dt=Le[nt],re=ut.start+ut.count,Se=De(Dt.start,X.width,4),tt=De(ut.start,X.width,4);Dt.start<=re+1&&Se===tt&&De(Dt.start+Dt.count-1,X.width,4)===Se?ut.count=Math.max(ut.count,Dt.start+Dt.count-ut.start):(++xt,Le[xt]=Dt)}Le.length=xt+1;const pt=n.getParameter(n.UNPACK_ROW_LENGTH),St=n.getParameter(n.UNPACK_SKIP_PIXELS),Rt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,X.width);for(let nt=0,ut=Le.length;nt<ut;nt++){const Dt=Le[nt],re=Math.floor(Dt.start/4),Se=Math.ceil(Dt.count/4),tt=re%X.width,ce=Math.floor(re/X.width),be=Se,lt=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,tt),n.pixelStorei(n.UNPACK_SKIP_ROWS,ce),t.texSubImage2D(n.TEXTURE_2D,0,tt,ce,be,lt,Ee,Fe,X.data)}$.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,pt),n.pixelStorei(n.UNPACK_SKIP_PIXELS,St),n.pixelStorei(n.UNPACK_SKIP_ROWS,Rt)}}function ve($,X,Ee){let Fe=n.TEXTURE_2D;(X.isDataArrayTexture||X.isCompressedArrayTexture)&&(Fe=n.TEXTURE_2D_ARRAY),X.isData3DTexture&&(Fe=n.TEXTURE_3D);const ke=Ae($,X),Le=X.source;t.bindTexture(Fe,$.__webglTexture,n.TEXTURE0+Ee);const xt=i.get(Le);if(Le.version!==xt.__version||ke===!0){t.activeTexture(n.TEXTURE0+Ee);const pt=zn.getPrimaries(zn.workingColorSpace),St=X.colorSpace===dc?null:zn.getPrimaries(X.colorSpace),Rt=X.colorSpace===dc||pt===St?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,X.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,X.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Rt);let nt=T(X.image,!1,a.maxTextureSize);nt=Ot(X,nt);const ut=s.convert(X.format,X.colorSpace),Dt=s.convert(X.type);let re=D(X.internalFormat,ut,Dt,X.colorSpace,X.isVideoTexture);_e(Fe,X);let Se;const tt=X.mipmaps,ce=X.isVideoTexture!==!0,be=xt.__version===void 0||ke===!0,lt=Le.dataReady,ft=U(X,nt);if(X.isDepthTexture)re=B(X.format===Tp,X.type),be&&(ce?t.texStorage2D(n.TEXTURE_2D,1,re,nt.width,nt.height):t.texImage2D(n.TEXTURE_2D,0,re,nt.width,nt.height,0,ut,Dt,null));else if(X.isDataTexture)if(tt.length>0){ce&&be&&t.texStorage2D(n.TEXTURE_2D,ft,re,tt[0].width,tt[0].height);for(let it=0,Ve=tt.length;it<Ve;it++)Se=tt[it],ce?lt&&t.texSubImage2D(n.TEXTURE_2D,it,0,0,Se.width,Se.height,ut,Dt,Se.data):t.texImage2D(n.TEXTURE_2D,it,re,Se.width,Se.height,0,ut,Dt,Se.data);X.generateMipmaps=!1}else ce?(be&&t.texStorage2D(n.TEXTURE_2D,ft,re,nt.width,nt.height),lt&&ot(X,nt,ut,Dt)):t.texImage2D(n.TEXTURE_2D,0,re,nt.width,nt.height,0,ut,Dt,nt.data);else if(X.isCompressedTexture)if(X.isCompressedArrayTexture){ce&&be&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ft,re,tt[0].width,tt[0].height,nt.depth);for(let it=0,Ve=tt.length;it<Ve;it++)if(Se=tt[it],X.format!==sa)if(ut!==null)if(ce){if(lt)if(X.layerUpdates.size>0){const _t=fM(Se.width,Se.height,X.format,X.type);for(const Mt of X.layerUpdates){const Vt=Se.data.subarray(Mt*_t/Se.data.BYTES_PER_ELEMENT,(Mt+1)*_t/Se.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,it,0,0,Mt,Se.width,Se.height,1,ut,Vt)}X.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,it,0,0,0,Se.width,Se.height,nt.depth,ut,Se.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,it,re,Se.width,Se.height,nt.depth,0,Se.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ce?lt&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,it,0,0,0,Se.width,Se.height,nt.depth,ut,Dt,Se.data):t.texImage3D(n.TEXTURE_2D_ARRAY,it,re,Se.width,Se.height,nt.depth,0,ut,Dt,Se.data)}else{ce&&be&&t.texStorage2D(n.TEXTURE_2D,ft,re,tt[0].width,tt[0].height);for(let it=0,Ve=tt.length;it<Ve;it++)Se=tt[it],X.format!==sa?ut!==null?ce?lt&&t.compressedTexSubImage2D(n.TEXTURE_2D,it,0,0,Se.width,Se.height,ut,Se.data):t.compressedTexImage2D(n.TEXTURE_2D,it,re,Se.width,Se.height,0,Se.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ce?lt&&t.texSubImage2D(n.TEXTURE_2D,it,0,0,Se.width,Se.height,ut,Dt,Se.data):t.texImage2D(n.TEXTURE_2D,it,re,Se.width,Se.height,0,ut,Dt,Se.data)}else if(X.isDataArrayTexture)if(ce){if(be&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ft,re,nt.width,nt.height,nt.depth),lt)if(X.layerUpdates.size>0){const it=fM(nt.width,nt.height,X.format,X.type);for(const Ve of X.layerUpdates){const _t=nt.data.subarray(Ve*it/nt.data.BYTES_PER_ELEMENT,(Ve+1)*it/nt.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ve,nt.width,nt.height,1,ut,Dt,_t)}X.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,nt.width,nt.height,nt.depth,ut,Dt,nt.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,re,nt.width,nt.height,nt.depth,0,ut,Dt,nt.data);else if(X.isData3DTexture)ce?(be&&t.texStorage3D(n.TEXTURE_3D,ft,re,nt.width,nt.height,nt.depth),lt&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,nt.width,nt.height,nt.depth,ut,Dt,nt.data)):t.texImage3D(n.TEXTURE_3D,0,re,nt.width,nt.height,nt.depth,0,ut,Dt,nt.data);else if(X.isFramebufferTexture){if(be)if(ce)t.texStorage2D(n.TEXTURE_2D,ft,re,nt.width,nt.height);else{let it=nt.width,Ve=nt.height;for(let _t=0;_t<ft;_t++)t.texImage2D(n.TEXTURE_2D,_t,re,it,Ve,0,ut,Dt,null),it>>=1,Ve>>=1}}else if(tt.length>0){if(ce&&be){const it=Gt(tt[0]);t.texStorage2D(n.TEXTURE_2D,ft,re,it.width,it.height)}for(let it=0,Ve=tt.length;it<Ve;it++)Se=tt[it],ce?lt&&t.texSubImage2D(n.TEXTURE_2D,it,0,0,ut,Dt,Se):t.texImage2D(n.TEXTURE_2D,it,re,ut,Dt,Se);X.generateMipmaps=!1}else if(ce){if(be){const it=Gt(nt);t.texStorage2D(n.TEXTURE_2D,ft,re,it.width,it.height)}lt&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ut,Dt,nt)}else t.texImage2D(n.TEXTURE_2D,0,re,ut,Dt,nt);E(X)&&b(Fe),xt.__version=Le.version,X.onUpdate&&X.onUpdate(X)}$.__version=X.version}function Ne($,X,Ee){if(X.image.length!==6)return;const Fe=Ae($,X),ke=X.source;t.bindTexture(n.TEXTURE_CUBE_MAP,$.__webglTexture,n.TEXTURE0+Ee);const Le=i.get(ke);if(ke.version!==Le.__version||Fe===!0){t.activeTexture(n.TEXTURE0+Ee);const xt=zn.getPrimaries(zn.workingColorSpace),pt=X.colorSpace===dc?null:zn.getPrimaries(X.colorSpace),St=X.colorSpace===dc||xt===pt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,X.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,X.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,St);const Rt=X.isCompressedTexture||X.image[0].isCompressedTexture,nt=X.image[0]&&X.image[0].isDataTexture,ut=[];for(let Ve=0;Ve<6;Ve++)!Rt&&!nt?ut[Ve]=T(X.image[Ve],!0,a.maxCubemapSize):ut[Ve]=nt?X.image[Ve].image:X.image[Ve],ut[Ve]=Ot(X,ut[Ve]);const Dt=ut[0],re=s.convert(X.format,X.colorSpace),Se=s.convert(X.type),tt=D(X.internalFormat,re,Se,X.colorSpace),ce=X.isVideoTexture!==!0,be=Le.__version===void 0||Fe===!0,lt=ke.dataReady;let ft=U(X,Dt);_e(n.TEXTURE_CUBE_MAP,X);let it;if(Rt){ce&&be&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ft,tt,Dt.width,Dt.height);for(let Ve=0;Ve<6;Ve++){it=ut[Ve].mipmaps;for(let _t=0;_t<it.length;_t++){const Mt=it[_t];X.format!==sa?re!==null?ce?lt&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,_t,0,0,Mt.width,Mt.height,re,Mt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,_t,tt,Mt.width,Mt.height,0,Mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ce?lt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,_t,0,0,Mt.width,Mt.height,re,Se,Mt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,_t,tt,Mt.width,Mt.height,0,re,Se,Mt.data)}}}else{if(it=X.mipmaps,ce&&be){it.length>0&&ft++;const Ve=Gt(ut[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ft,tt,Ve.width,Ve.height)}for(let Ve=0;Ve<6;Ve++)if(nt){ce?lt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,0,0,ut[Ve].width,ut[Ve].height,re,Se,ut[Ve].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,tt,ut[Ve].width,ut[Ve].height,0,re,Se,ut[Ve].data);for(let _t=0;_t<it.length;_t++){const Vt=it[_t].image[Ve].image;ce?lt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,_t+1,0,0,Vt.width,Vt.height,re,Se,Vt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,_t+1,tt,Vt.width,Vt.height,0,re,Se,Vt.data)}}else{ce?lt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,0,0,re,Se,ut[Ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,tt,re,Se,ut[Ve]);for(let _t=0;_t<it.length;_t++){const Mt=it[_t];ce?lt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,_t+1,0,0,re,Se,Mt.image[Ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,_t+1,tt,re,Se,Mt.image[Ve])}}}E(X)&&b(n.TEXTURE_CUBE_MAP),Le.__version=ke.version,X.onUpdate&&X.onUpdate(X)}$.__version=X.version}function Qe($,X,Ee,Fe,ke,Le){const xt=s.convert(Ee.format,Ee.colorSpace),pt=s.convert(Ee.type),St=D(Ee.internalFormat,xt,pt,Ee.colorSpace),Rt=i.get(X),nt=i.get(Ee);if(nt.__renderTarget=X,!Rt.__hasExternalTextures){const ut=Math.max(1,X.width>>Le),Dt=Math.max(1,X.height>>Le);ke===n.TEXTURE_3D||ke===n.TEXTURE_2D_ARRAY?t.texImage3D(ke,Le,St,ut,Dt,X.depth,0,xt,pt,null):t.texImage2D(ke,Le,St,ut,Dt,0,xt,pt,null)}t.bindFramebuffer(n.FRAMEBUFFER,$),st(X)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Fe,ke,nt.__webglTexture,0,gt(X)):(ke===n.TEXTURE_2D||ke>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ke<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Fe,ke,nt.__webglTexture,Le),t.bindFramebuffer(n.FRAMEBUFFER,null)}function bt($,X,Ee){if(n.bindRenderbuffer(n.RENDERBUFFER,$),X.depthBuffer){const Fe=X.depthTexture,ke=Fe&&Fe.isDepthTexture?Fe.type:null,Le=B(X.stencilBuffer,ke),xt=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pt=gt(X);st(X)?c.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,pt,Le,X.width,X.height):Ee?n.renderbufferStorageMultisample(n.RENDERBUFFER,pt,Le,X.width,X.height):n.renderbufferStorage(n.RENDERBUFFER,Le,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,xt,n.RENDERBUFFER,$)}else{const Fe=X.textures;for(let ke=0;ke<Fe.length;ke++){const Le=Fe[ke],xt=s.convert(Le.format,Le.colorSpace),pt=s.convert(Le.type),St=D(Le.internalFormat,xt,pt,Le.colorSpace),Rt=gt(X);Ee&&st(X)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Rt,St,X.width,X.height):st(X)?c.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Rt,St,X.width,X.height):n.renderbufferStorage(n.RENDERBUFFER,St,X.width,X.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ct($,X){if(X&&X.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,$),!(X.depthTexture&&X.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Fe=i.get(X.depthTexture);Fe.__renderTarget=X,(!Fe.__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),me(X.depthTexture,0);const ke=Fe.__webglTexture,Le=gt(X);if(X.depthTexture.format===Ep)st(X)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ke,0,Le):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ke,0);else if(X.depthTexture.format===Tp)st(X)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ke,0,Le):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ke,0);else throw new Error("Unknown depthTexture format")}function zt($){const X=i.get($),Ee=$.isWebGLCubeRenderTarget===!0;if(X.__boundDepthTexture!==$.depthTexture){const Fe=$.depthTexture;if(X.__depthDisposeCallback&&X.__depthDisposeCallback(),Fe){const ke=()=>{delete X.__boundDepthTexture,delete X.__depthDisposeCallback,Fe.removeEventListener("dispose",ke)};Fe.addEventListener("dispose",ke),X.__depthDisposeCallback=ke}X.__boundDepthTexture=Fe}if($.depthTexture&&!X.__autoAllocateDepthBuffer){if(Ee)throw new Error("target.depthTexture not supported in Cube render targets");const Fe=$.texture.mipmaps;Fe&&Fe.length>0?ct(X.__webglFramebuffer[0],$):ct(X.__webglFramebuffer,$)}else if(Ee){X.__webglDepthbuffer=[];for(let Fe=0;Fe<6;Fe++)if(t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer[Fe]),X.__webglDepthbuffer[Fe]===void 0)X.__webglDepthbuffer[Fe]=n.createRenderbuffer(),bt(X.__webglDepthbuffer[Fe],$,!1);else{const ke=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Le=X.__webglDepthbuffer[Fe];n.bindRenderbuffer(n.RENDERBUFFER,Le),n.framebufferRenderbuffer(n.FRAMEBUFFER,ke,n.RENDERBUFFER,Le)}}else{const Fe=$.texture.mipmaps;if(Fe&&Fe.length>0?t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer),X.__webglDepthbuffer===void 0)X.__webglDepthbuffer=n.createRenderbuffer(),bt(X.__webglDepthbuffer,$,!1);else{const ke=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Le=X.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Le),n.framebufferRenderbuffer(n.FRAMEBUFFER,ke,n.RENDERBUFFER,Le)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Xt($,X,Ee){const Fe=i.get($);X!==void 0&&Qe(Fe.__webglFramebuffer,$,$.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Ee!==void 0&&zt($)}function ae($){const X=$.texture,Ee=i.get($),Fe=i.get(X);$.addEventListener("dispose",z);const ke=$.textures,Le=$.isWebGLCubeRenderTarget===!0,xt=ke.length>1;if(xt||(Fe.__webglTexture===void 0&&(Fe.__webglTexture=n.createTexture()),Fe.__version=X.version,o.memory.textures++),Le){Ee.__webglFramebuffer=[];for(let pt=0;pt<6;pt++)if(X.mipmaps&&X.mipmaps.length>0){Ee.__webglFramebuffer[pt]=[];for(let St=0;St<X.mipmaps.length;St++)Ee.__webglFramebuffer[pt][St]=n.createFramebuffer()}else Ee.__webglFramebuffer[pt]=n.createFramebuffer()}else{if(X.mipmaps&&X.mipmaps.length>0){Ee.__webglFramebuffer=[];for(let pt=0;pt<X.mipmaps.length;pt++)Ee.__webglFramebuffer[pt]=n.createFramebuffer()}else Ee.__webglFramebuffer=n.createFramebuffer();if(xt)for(let pt=0,St=ke.length;pt<St;pt++){const Rt=i.get(ke[pt]);Rt.__webglTexture===void 0&&(Rt.__webglTexture=n.createTexture(),o.memory.textures++)}if($.samples>0&&st($)===!1){Ee.__webglMultisampledFramebuffer=n.createFramebuffer(),Ee.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Ee.__webglMultisampledFramebuffer);for(let pt=0;pt<ke.length;pt++){const St=ke[pt];Ee.__webglColorRenderbuffer[pt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Ee.__webglColorRenderbuffer[pt]);const Rt=s.convert(St.format,St.colorSpace),nt=s.convert(St.type),ut=D(St.internalFormat,Rt,nt,St.colorSpace,$.isXRRenderTarget===!0),Dt=gt($);n.renderbufferStorageMultisample(n.RENDERBUFFER,Dt,ut,$.width,$.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+pt,n.RENDERBUFFER,Ee.__webglColorRenderbuffer[pt])}n.bindRenderbuffer(n.RENDERBUFFER,null),$.depthBuffer&&(Ee.__webglDepthRenderbuffer=n.createRenderbuffer(),bt(Ee.__webglDepthRenderbuffer,$,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Le){t.bindTexture(n.TEXTURE_CUBE_MAP,Fe.__webglTexture),_e(n.TEXTURE_CUBE_MAP,X);for(let pt=0;pt<6;pt++)if(X.mipmaps&&X.mipmaps.length>0)for(let St=0;St<X.mipmaps.length;St++)Qe(Ee.__webglFramebuffer[pt][St],$,X,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+pt,St);else Qe(Ee.__webglFramebuffer[pt],$,X,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+pt,0);E(X)&&b(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(xt){for(let pt=0,St=ke.length;pt<St;pt++){const Rt=ke[pt],nt=i.get(Rt);let ut=n.TEXTURE_2D;($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(ut=$.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ut,nt.__webglTexture),_e(ut,Rt),Qe(Ee.__webglFramebuffer,$,Rt,n.COLOR_ATTACHMENT0+pt,ut,0),E(Rt)&&b(ut)}t.unbindTexture()}else{let pt=n.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(pt=$.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(pt,Fe.__webglTexture),_e(pt,X),X.mipmaps&&X.mipmaps.length>0)for(let St=0;St<X.mipmaps.length;St++)Qe(Ee.__webglFramebuffer[St],$,X,n.COLOR_ATTACHMENT0,pt,St);else Qe(Ee.__webglFramebuffer,$,X,n.COLOR_ATTACHMENT0,pt,0);E(X)&&b(pt),t.unbindTexture()}$.depthBuffer&&zt($)}function Ye($){const X=$.textures;for(let Ee=0,Fe=X.length;Ee<Fe;Ee++){const ke=X[Ee];if(E(ke)){const Le=R($),xt=i.get(ke).__webglTexture;t.bindTexture(Le,xt),b(Le),t.unbindTexture()}}}const je=[],Xe=[];function He($){if($.samples>0){if(st($)===!1){const X=$.textures,Ee=$.width,Fe=$.height;let ke=n.COLOR_BUFFER_BIT;const Le=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,xt=i.get($),pt=X.length>1;if(pt)for(let Rt=0;Rt<X.length;Rt++)t.bindFramebuffer(n.FRAMEBUFFER,xt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Rt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,xt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Rt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,xt.__webglMultisampledFramebuffer);const St=$.texture.mipmaps;St&&St.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,xt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,xt.__webglFramebuffer);for(let Rt=0;Rt<X.length;Rt++){if($.resolveDepthBuffer&&($.depthBuffer&&(ke|=n.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(ke|=n.STENCIL_BUFFER_BIT)),pt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,xt.__webglColorRenderbuffer[Rt]);const nt=i.get(X[Rt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,nt,0)}n.blitFramebuffer(0,0,Ee,Fe,0,0,Ee,Fe,ke,n.NEAREST),f===!0&&(je.length=0,Xe.length=0,je.push(n.COLOR_ATTACHMENT0+Rt),$.depthBuffer&&$.resolveDepthBuffer===!1&&(je.push(Le),Xe.push(Le),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Xe)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,je))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),pt)for(let Rt=0;Rt<X.length;Rt++){t.bindFramebuffer(n.FRAMEBUFFER,xt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Rt,n.RENDERBUFFER,xt.__webglColorRenderbuffer[Rt]);const nt=i.get(X[Rt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,xt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Rt,n.TEXTURE_2D,nt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,xt.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&f){const X=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[X])}}}function gt($){return Math.min(a.maxSamples,$.samples)}function st($){const X=i.get($);return $.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&X.__useRenderToTexture!==!1}function rt($){const X=o.render.frame;m.get($)!==X&&(m.set($,X),$.update())}function Ot($,X){const Ee=$.colorSpace,Fe=$.format,ke=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||Ee!==No&&Ee!==dc&&(zn.getTransfer(Ee)===di?(Fe!==sa||ke!==Us)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ee)),X}function Gt($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(d.width=$.naturalWidth||$.width,d.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(d.width=$.displayWidth,d.height=$.displayHeight):(d.width=$.width,d.height=$.height),d}this.allocateTextureUnit=se,this.resetTextureUnits=ie,this.setTexture2D=me,this.setTexture2DArray=H,this.setTexture3D=W,this.setTextureCube=q,this.rebindTextures=Xt,this.setupRenderTarget=ae,this.updateRenderTargetMipmap=Ye,this.updateMultisampleRenderTarget=He,this.setupDepthRenderbuffer=zt,this.setupFrameBufferTexture=Qe,this.useMultisampledRTT=st}function RO(n,e){function t(i,a=dc){let s;const o=zn.getTransfer(a);if(i===Us)return n.UNSIGNED_BYTE;if(i===vb)return n.UNSIGNED_SHORT_4_4_4_4;if(i===yb)return n.UNSIGNED_SHORT_5_5_5_1;if(i===pE)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===mE)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===mb)return n.BYTE;if(i===gb)return n.SHORT;if(i===Sp)return n.UNSIGNED_SHORT;if(i===L0)return n.INT;if(i===Dl)return n.UNSIGNED_INT;if(i===Vi)return n.FLOAT;if(i===La)return n.HALF_FLOAT;if(i===gE)return n.ALPHA;if(i===vE)return n.RGB;if(i===sa)return n.RGBA;if(i===Ep)return n.DEPTH_COMPONENT;if(i===Tp)return n.DEPTH_STENCIL;if(i===I0)return n.RED;if(i===P0)return n.RED_INTEGER;if(i===yE)return n.RG;if(i===xb)return n.RG_INTEGER;if(i===_b)return n.RGBA_INTEGER;if(i===kg||i===Xg||i===jg||i===Yg)if(o===di)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===kg)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Xg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===jg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Yg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===kg)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Xg)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===jg)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Yg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===d_||i===p_||i===m_||i===g_)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===d_)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===p_)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===m_)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===g_)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===v_||i===y_||i===x_)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===v_||i===y_)return o===di?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===x_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===__||i===b_||i===A_||i===S_||i===M_||i===E_||i===T_||i===C_||i===w_||i===R_||i===D_||i===B_||i===N_||i===O_)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===__)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===b_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===A_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===S_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===M_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===E_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===T_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===C_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===w_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===R_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===D_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===B_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===N_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===O_)return o===di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===U_||i===L_||i===I_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===U_)return o===di?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===L_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===I_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===P_||i===F_||i===z_||i===H_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===P_)return s.COMPRESSED_RED_RGTC1_EXT;if(i===F_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===z_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===H_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Mp?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const aj=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,sj=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class rj{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new OE(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new tr({vertexShader:aj,fragmentShader:sj,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Oi(new ku(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class oj extends Nl{constructor(e,t){super();const i=this;let a=null,s=1,o=null,c="local-floor",f=1,d=null,m=null,g=null,y=null,_=null,A=null;const T=typeof XRWebGLBinding<"u",E=new rj,b={},R=t.getContextAttributes();let D=null,B=null;const U=[],L=[],z=new Ze;let I=null;const O=new Ji;O.viewport=new jn;const P=new Ji;P.viewport=new jn;const Y=[O,P],ie=new xO;let se=null,ue=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ve){let Ne=U[ve];return Ne===void 0&&(Ne=new jx,U[ve]=Ne),Ne.getTargetRaySpace()},this.getControllerGrip=function(ve){let Ne=U[ve];return Ne===void 0&&(Ne=new jx,U[ve]=Ne),Ne.getGripSpace()},this.getHand=function(ve){let Ne=U[ve];return Ne===void 0&&(Ne=new jx,U[ve]=Ne),Ne.getHandSpace()};function me(ve){const Ne=L.indexOf(ve.inputSource);if(Ne===-1)return;const Qe=U[Ne];Qe!==void 0&&(Qe.update(ve.inputSource,ve.frame,d||o),Qe.dispatchEvent({type:ve.type,data:ve.inputSource}))}function H(){a.removeEventListener("select",me),a.removeEventListener("selectstart",me),a.removeEventListener("selectend",me),a.removeEventListener("squeeze",me),a.removeEventListener("squeezestart",me),a.removeEventListener("squeezeend",me),a.removeEventListener("end",H),a.removeEventListener("inputsourceschange",W);for(let ve=0;ve<U.length;ve++){const Ne=L[ve];Ne!==null&&(L[ve]=null,U[ve].disconnect(Ne))}se=null,ue=null,E.reset();for(const ve in b)delete b[ve];e.setRenderTarget(D),_=null,y=null,g=null,a=null,B=null,ot.stop(),i.isPresenting=!1,e.setPixelRatio(I),e.setSize(z.width,z.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ve){s=ve,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ve){c=ve,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(ve){d=ve},this.getBaseLayer=function(){return y!==null?y:_},this.getBinding=function(){return g===null&&T&&(g=new XRWebGLBinding(a,t)),g},this.getFrame=function(){return A},this.getSession=function(){return a},this.setSession=async function(ve){if(a=ve,a!==null){if(D=e.getRenderTarget(),a.addEventListener("select",me),a.addEventListener("selectstart",me),a.addEventListener("selectend",me),a.addEventListener("squeeze",me),a.addEventListener("squeezestart",me),a.addEventListener("squeezeend",me),a.addEventListener("end",H),a.addEventListener("inputsourceschange",W),R.xrCompatible!==!0&&await t.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(z),T&&"createProjectionLayer"in XRWebGLBinding.prototype){let Qe=null,bt=null,ct=null;R.depth&&(ct=R.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Qe=R.stencil?Tp:Ep,bt=R.stencil?Mp:Dl);const zt={colorFormat:t.RGBA8,depthFormat:ct,scaleFactor:s};g=this.getBinding(),y=g.createProjectionLayer(zt),a.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),B=new Kr(y.textureWidth,y.textureHeight,{format:sa,type:Us,depthTexture:new NE(y.textureWidth,y.textureHeight,bt,void 0,void 0,void 0,void 0,void 0,void 0,Qe),stencilBuffer:R.stencil,colorSpace:e.outputColorSpace,samples:R.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const Qe={antialias:R.antialias,alpha:!0,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:s};_=new XRWebGLLayer(a,t,Qe),a.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),B=new Kr(_.framebufferWidth,_.framebufferHeight,{format:sa,type:Us,colorSpace:e.outputColorSpace,stencilBuffer:R.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}B.isXRRenderTarget=!0,this.setFoveation(f),d=null,o=await a.requestReferenceSpace(c),ot.setContext(a),ot.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return E.getDepthTexture()};function W(ve){for(let Ne=0;Ne<ve.removed.length;Ne++){const Qe=ve.removed[Ne],bt=L.indexOf(Qe);bt>=0&&(L[bt]=null,U[bt].disconnect(Qe))}for(let Ne=0;Ne<ve.added.length;Ne++){const Qe=ve.added[Ne];let bt=L.indexOf(Qe);if(bt===-1){for(let zt=0;zt<U.length;zt++)if(zt>=L.length){L.push(Qe),bt=zt;break}else if(L[zt]===null){L[zt]=Qe,bt=zt;break}if(bt===-1)break}const ct=U[bt];ct&&ct.connect(Qe)}}const q=new Q,ge=new Q;function j(ve,Ne,Qe){q.setFromMatrixPosition(Ne.matrixWorld),ge.setFromMatrixPosition(Qe.matrixWorld);const bt=q.distanceTo(ge),ct=Ne.projectionMatrix.elements,zt=Qe.projectionMatrix.elements,Xt=ct[14]/(ct[10]-1),ae=ct[14]/(ct[10]+1),Ye=(ct[9]+1)/ct[5],je=(ct[9]-1)/ct[5],Xe=(ct[8]-1)/ct[0],He=(zt[8]+1)/zt[0],gt=Xt*Xe,st=Xt*He,rt=bt/(-Xe+He),Ot=rt*-Xe;if(Ne.matrixWorld.decompose(ve.position,ve.quaternion,ve.scale),ve.translateX(Ot),ve.translateZ(rt),ve.matrixWorld.compose(ve.position,ve.quaternion,ve.scale),ve.matrixWorldInverse.copy(ve.matrixWorld).invert(),ct[10]===-1)ve.projectionMatrix.copy(Ne.projectionMatrix),ve.projectionMatrixInverse.copy(Ne.projectionMatrixInverse);else{const Gt=Xt+rt,$=ae+rt,X=gt-Ot,Ee=st+(bt-Ot),Fe=Ye*ae/$*Gt,ke=je*ae/$*Gt;ve.projectionMatrix.makePerspective(X,Ee,Fe,ke,Gt,$),ve.projectionMatrixInverse.copy(ve.projectionMatrix).invert()}}function fe(ve,Ne){Ne===null?ve.matrixWorld.copy(ve.matrix):ve.matrixWorld.multiplyMatrices(Ne.matrixWorld,ve.matrix),ve.matrixWorldInverse.copy(ve.matrixWorld).invert()}this.updateCamera=function(ve){if(a===null)return;let Ne=ve.near,Qe=ve.far;E.texture!==null&&(E.depthNear>0&&(Ne=E.depthNear),E.depthFar>0&&(Qe=E.depthFar)),ie.near=P.near=O.near=Ne,ie.far=P.far=O.far=Qe,(se!==ie.near||ue!==ie.far)&&(a.updateRenderState({depthNear:ie.near,depthFar:ie.far}),se=ie.near,ue=ie.far),ie.layers.mask=ve.layers.mask|6,O.layers.mask=ie.layers.mask&3,P.layers.mask=ie.layers.mask&5;const bt=ve.parent,ct=ie.cameras;fe(ie,bt);for(let zt=0;zt<ct.length;zt++)fe(ct[zt],bt);ct.length===2?j(ie,O,P):ie.projectionMatrix.copy(O.projectionMatrix),_e(ve,ie,bt)};function _e(ve,Ne,Qe){Qe===null?ve.matrix.copy(Ne.matrixWorld):(ve.matrix.copy(Qe.matrixWorld),ve.matrix.invert(),ve.matrix.multiply(Ne.matrixWorld)),ve.matrix.decompose(ve.position,ve.quaternion,ve.scale),ve.updateMatrixWorld(!0),ve.projectionMatrix.copy(Ne.projectionMatrix),ve.projectionMatrixInverse.copy(Ne.projectionMatrixInverse),ve.isPerspectiveCamera&&(ve.fov=Dp*2*Math.atan(1/ve.projectionMatrix.elements[5]),ve.zoom=1)}this.getCamera=function(){return ie},this.getFoveation=function(){if(!(y===null&&_===null))return f},this.setFoveation=function(ve){f=ve,y!==null&&(y.fixedFoveation=ve),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=ve)},this.hasDepthSensing=function(){return E.texture!==null},this.getDepthSensingMesh=function(){return E.getMesh(ie)},this.getCameraTexture=function(ve){return b[ve]};let Ae=null;function De(ve,Ne){if(m=Ne.getViewerPose(d||o),A=Ne,m!==null){const Qe=m.views;_!==null&&(e.setRenderTargetFramebuffer(B,_.framebuffer),e.setRenderTarget(B));let bt=!1;Qe.length!==ie.cameras.length&&(ie.cameras.length=0,bt=!0);for(let ae=0;ae<Qe.length;ae++){const Ye=Qe[ae];let je=null;if(_!==null)je=_.getViewport(Ye);else{const He=g.getViewSubImage(y,Ye);je=He.viewport,ae===0&&(e.setRenderTargetTextures(B,He.colorTexture,He.depthStencilTexture),e.setRenderTarget(B))}let Xe=Y[ae];Xe===void 0&&(Xe=new Ji,Xe.layers.enable(ae),Xe.viewport=new jn,Y[ae]=Xe),Xe.matrix.fromArray(Ye.transform.matrix),Xe.matrix.decompose(Xe.position,Xe.quaternion,Xe.scale),Xe.projectionMatrix.fromArray(Ye.projectionMatrix),Xe.projectionMatrixInverse.copy(Xe.projectionMatrix).invert(),Xe.viewport.set(je.x,je.y,je.width,je.height),ae===0&&(ie.matrix.copy(Xe.matrix),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale)),bt===!0&&ie.cameras.push(Xe)}const ct=a.enabledFeatures;if(ct&&ct.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&T){g=i.getBinding();const ae=g.getDepthInformation(Qe[0]);ae&&ae.isValid&&ae.texture&&E.init(ae,a.renderState)}if(ct&&ct.includes("camera-access")&&T){e.state.unbindTexture(),g=i.getBinding();for(let ae=0;ae<Qe.length;ae++){const Ye=Qe[ae].camera;if(Ye){let je=b[Ye];je||(je=new OE,b[Ye]=je);const Xe=g.getCameraImage(Ye);je.sourceTexture=Xe}}}}for(let Qe=0;Qe<U.length;Qe++){const bt=L[Qe],ct=U[Qe];bt!==null&&ct!==void 0&&ct.update(bt,Ne,d||o)}Ae&&Ae(ve,Ne),Ne.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ne}),A=null}const ot=new MO;ot.setAnimationLoop(De),this.setAnimationLoop=function(ve){Ae=ve},this.dispose=function(){}}}const Qf=new xr,lj=new $t;function cj(n,e){function t(E,b){E.matrixAutoUpdate===!0&&E.updateMatrix(),b.value.copy(E.matrix)}function i(E,b){b.color.getRGB(E.fogColor.value,DN(n)),b.isFog?(E.fogNear.value=b.near,E.fogFar.value=b.far):b.isFogExp2&&(E.fogDensity.value=b.density)}function a(E,b,R,D,B){b.isMeshBasicMaterial||b.isMeshLambertMaterial?s(E,b):b.isMeshToonMaterial?(s(E,b),g(E,b)):b.isMeshPhongMaterial?(s(E,b),m(E,b)):b.isMeshStandardMaterial?(s(E,b),y(E,b),b.isMeshPhysicalMaterial&&_(E,b,B)):b.isMeshMatcapMaterial?(s(E,b),A(E,b)):b.isMeshDepthMaterial?s(E,b):b.isMeshDistanceMaterial?(s(E,b),T(E,b)):b.isMeshNormalMaterial?s(E,b):b.isLineBasicMaterial?(o(E,b),b.isLineDashedMaterial&&c(E,b)):b.isPointsMaterial?f(E,b,R,D):b.isSpriteMaterial?d(E,b):b.isShadowMaterial?(E.color.value.copy(b.color),E.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function s(E,b){E.opacity.value=b.opacity,b.color&&E.diffuse.value.copy(b.color),b.emissive&&E.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(E.map.value=b.map,t(b.map,E.mapTransform)),b.alphaMap&&(E.alphaMap.value=b.alphaMap,t(b.alphaMap,E.alphaMapTransform)),b.bumpMap&&(E.bumpMap.value=b.bumpMap,t(b.bumpMap,E.bumpMapTransform),E.bumpScale.value=b.bumpScale,b.side===Os&&(E.bumpScale.value*=-1)),b.normalMap&&(E.normalMap.value=b.normalMap,t(b.normalMap,E.normalMapTransform),E.normalScale.value.copy(b.normalScale),b.side===Os&&E.normalScale.value.negate()),b.displacementMap&&(E.displacementMap.value=b.displacementMap,t(b.displacementMap,E.displacementMapTransform),E.displacementScale.value=b.displacementScale,E.displacementBias.value=b.displacementBias),b.emissiveMap&&(E.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,E.emissiveMapTransform)),b.specularMap&&(E.specularMap.value=b.specularMap,t(b.specularMap,E.specularMapTransform)),b.alphaTest>0&&(E.alphaTest.value=b.alphaTest);const R=e.get(b),D=R.envMap,B=R.envMapRotation;D&&(E.envMap.value=D,Qf.copy(B),Qf.x*=-1,Qf.y*=-1,Qf.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Qf.y*=-1,Qf.z*=-1),E.envMapRotation.value.setFromMatrix4(lj.makeRotationFromEuler(Qf)),E.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=b.reflectivity,E.ior.value=b.ior,E.refractionRatio.value=b.refractionRatio),b.lightMap&&(E.lightMap.value=b.lightMap,E.lightMapIntensity.value=b.lightMapIntensity,t(b.lightMap,E.lightMapTransform)),b.aoMap&&(E.aoMap.value=b.aoMap,E.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,E.aoMapTransform))}function o(E,b){E.diffuse.value.copy(b.color),E.opacity.value=b.opacity,b.map&&(E.map.value=b.map,t(b.map,E.mapTransform))}function c(E,b){E.dashSize.value=b.dashSize,E.totalSize.value=b.dashSize+b.gapSize,E.scale.value=b.scale}function f(E,b,R,D){E.diffuse.value.copy(b.color),E.opacity.value=b.opacity,E.size.value=b.size*R,E.scale.value=D*.5,b.map&&(E.map.value=b.map,t(b.map,E.uvTransform)),b.alphaMap&&(E.alphaMap.value=b.alphaMap,t(b.alphaMap,E.alphaMapTransform)),b.alphaTest>0&&(E.alphaTest.value=b.alphaTest)}function d(E,b){E.diffuse.value.copy(b.color),E.opacity.value=b.opacity,E.rotation.value=b.rotation,b.map&&(E.map.value=b.map,t(b.map,E.mapTransform)),b.alphaMap&&(E.alphaMap.value=b.alphaMap,t(b.alphaMap,E.alphaMapTransform)),b.alphaTest>0&&(E.alphaTest.value=b.alphaTest)}function m(E,b){E.specular.value.copy(b.specular),E.shininess.value=Math.max(b.shininess,1e-4)}function g(E,b){b.gradientMap&&(E.gradientMap.value=b.gradientMap)}function y(E,b){E.metalness.value=b.metalness,b.metalnessMap&&(E.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,E.metalnessMapTransform)),E.roughness.value=b.roughness,b.roughnessMap&&(E.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,E.roughnessMapTransform)),b.envMap&&(E.envMapIntensity.value=b.envMapIntensity)}function _(E,b,R){E.ior.value=b.ior,b.sheen>0&&(E.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),E.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(E.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,E.sheenColorMapTransform)),b.sheenRoughnessMap&&(E.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,E.sheenRoughnessMapTransform))),b.clearcoat>0&&(E.clearcoat.value=b.clearcoat,E.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(E.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,E.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(E.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===Os&&E.clearcoatNormalScale.value.negate())),b.dispersion>0&&(E.dispersion.value=b.dispersion),b.iridescence>0&&(E.iridescence.value=b.iridescence,E.iridescenceIOR.value=b.iridescenceIOR,E.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(E.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,E.iridescenceMapTransform)),b.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),b.transmission>0&&(E.transmission.value=b.transmission,E.transmissionSamplerMap.value=R.texture,E.transmissionSamplerSize.value.set(R.width,R.height),b.transmissionMap&&(E.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,E.transmissionMapTransform)),E.thickness.value=b.thickness,b.thicknessMap&&(E.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=b.attenuationDistance,E.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(E.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(E.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=b.specularIntensity,E.specularColor.value.copy(b.specularColor),b.specularColorMap&&(E.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,E.specularColorMapTransform)),b.specularIntensityMap&&(E.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,E.specularIntensityMapTransform))}function A(E,b){b.matcap&&(E.matcap.value=b.matcap)}function T(E,b){const R=e.get(b).light;E.referencePosition.value.setFromMatrixPosition(R.matrixWorld),E.nearDistance.value=R.shadow.camera.near,E.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:a}}function uj(n,e,t,i){let a={},s={},o=[];const c=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function f(R,D){const B=D.program;i.uniformBlockBinding(R,B)}function d(R,D){let B=a[R.id];B===void 0&&(A(R),B=m(R),a[R.id]=B,R.addEventListener("dispose",E));const U=D.program;i.updateUBOMapping(R,U);const L=e.render.frame;s[R.id]!==L&&(y(R),s[R.id]=L)}function m(R){const D=g();R.__bindingPointIndex=D;const B=n.createBuffer(),U=R.__size,L=R.usage;return n.bindBuffer(n.UNIFORM_BUFFER,B),n.bufferData(n.UNIFORM_BUFFER,U,L),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,D,B),B}function g(){for(let R=0;R<c;R++)if(o.indexOf(R)===-1)return o.push(R),R;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(R){const D=a[R.id],B=R.uniforms,U=R.__cache;n.bindBuffer(n.UNIFORM_BUFFER,D);for(let L=0,z=B.length;L<z;L++){const I=Array.isArray(B[L])?B[L]:[B[L]];for(let O=0,P=I.length;O<P;O++){const Y=I[O];if(_(Y,L,O,U)===!0){const ie=Y.__offset,se=Array.isArray(Y.value)?Y.value:[Y.value];let ue=0;for(let me=0;me<se.length;me++){const H=se[me],W=T(H);typeof H=="number"||typeof H=="boolean"?(Y.__data[0]=H,n.bufferSubData(n.UNIFORM_BUFFER,ie+ue,Y.__data)):H.isMatrix3?(Y.__data[0]=H.elements[0],Y.__data[1]=H.elements[1],Y.__data[2]=H.elements[2],Y.__data[3]=0,Y.__data[4]=H.elements[3],Y.__data[5]=H.elements[4],Y.__data[6]=H.elements[5],Y.__data[7]=0,Y.__data[8]=H.elements[6],Y.__data[9]=H.elements[7],Y.__data[10]=H.elements[8],Y.__data[11]=0):(H.toArray(Y.__data,ue),ue+=W.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,ie,Y.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function _(R,D,B,U){const L=R.value,z=D+"_"+B;if(U[z]===void 0)return typeof L=="number"||typeof L=="boolean"?U[z]=L:U[z]=L.clone(),!0;{const I=U[z];if(typeof L=="number"||typeof L=="boolean"){if(I!==L)return U[z]=L,!0}else if(I.equals(L)===!1)return I.copy(L),!0}return!1}function A(R){const D=R.uniforms;let B=0;const U=16;for(let z=0,I=D.length;z<I;z++){const O=Array.isArray(D[z])?D[z]:[D[z]];for(let P=0,Y=O.length;P<Y;P++){const ie=O[P],se=Array.isArray(ie.value)?ie.value:[ie.value];for(let ue=0,me=se.length;ue<me;ue++){const H=se[ue],W=T(H),q=B%U,ge=q%W.boundary,j=q+ge;B+=ge,j!==0&&U-j<W.storage&&(B+=U-j),ie.__data=new Float32Array(W.storage/Float32Array.BYTES_PER_ELEMENT),ie.__offset=B,B+=W.storage}}}const L=B%U;return L>0&&(B+=U-L),R.__size=B,R.__cache={},this}function T(R){const D={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(D.boundary=4,D.storage=4):R.isVector2?(D.boundary=8,D.storage=8):R.isVector3||R.isColor?(D.boundary=16,D.storage=12):R.isVector4?(D.boundary=16,D.storage=16):R.isMatrix3?(D.boundary=48,D.storage=48):R.isMatrix4?(D.boundary=64,D.storage=64):R.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",R),D}function E(R){const D=R.target;D.removeEventListener("dispose",E);const B=o.indexOf(D.__bindingPointIndex);o.splice(B,1),n.deleteBuffer(a[D.id]),delete a[D.id],delete s[D.id]}function b(){for(const R in a)n.deleteBuffer(a[R]);o=[],a={},s={}}return{bind:f,update:d,dispose:b}}class aT{constructor(e={}){const{canvas:t=CN(),context:i=null,depth:a=!0,stencil:s=!1,alpha:o=!1,antialias:c=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:d=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reversedDepthBuffer:y=!1}=e;this.isWebGLRenderer=!0;let _;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=i.getContextAttributes().alpha}else _=o;const A=new Uint32Array(4),T=new Int32Array(4);let E=null,b=null;const R=[],D=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=El,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const B=this;let U=!1;this._outputColorSpace=Wa;let L=0,z=0,I=null,O=-1,P=null;const Y=new jn,ie=new jn;let se=null;const ue=new Et(0);let me=0,H=t.width,W=t.height,q=1,ge=null,j=null;const fe=new jn(0,0,H,W),_e=new jn(0,0,H,W);let Ae=!1;const De=new jp;let ot=!1,ve=!1;const Ne=new $t,Qe=new Q,bt=new jn,ct={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let zt=!1;function Xt(){return I===null?q:1}let ae=i;function Ye(V,te){return t.getContext(V,te)}try{const V={alpha:!0,depth:a,stencil:s,antialias:c,premultipliedAlpha:f,preserveDrawingBuffer:d,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${O0}`),t.addEventListener("webglcontextlost",lt,!1),t.addEventListener("webglcontextrestored",ft,!1),t.addEventListener("webglcontextcreationerror",it,!1),ae===null){const te="webgl2";if(ae=Ye(te,V),ae===null)throw Ye(te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(V){throw console.error("THREE.WebGLRenderer: "+V.message),V}let je,Xe,He,gt,st,rt,Ot,Gt,$,X,Ee,Fe,ke,Le,xt,pt,St,Rt,nt,ut,Dt,re,Se,tt;function ce(){je=new A7(ae),je.init(),re=new RO(ae,je),Xe=new m7(ae,je,e,re),He=new nj(ae,je),Xe.reversedDepthBuffer&&y&&He.buffers.depth.setReversed(!0),gt=new E7(ae),st=new kX,rt=new ij(ae,je,He,st,Xe,re,gt),Ot=new v7(B),Gt=new b7(B),$=new B9(ae),Se=new d7(ae,$),X=new S7(ae,$,gt,Se),Ee=new C7(ae,X,$,gt),nt=new T7(ae,Xe,rt),pt=new g7(st),Fe=new VX(B,Ot,Gt,je,Xe,Se,pt),ke=new cj(B,st),Le=new jX,xt=new ZX(je),Rt=new h7(B,Ot,Gt,He,Ee,_,f),St=new ej(B,Ee,Xe),tt=new uj(ae,gt,Xe,He),ut=new p7(ae,je,gt),Dt=new M7(ae,je,gt),gt.programs=Fe.programs,B.capabilities=Xe,B.extensions=je,B.properties=st,B.renderLists=Le,B.shadowMap=St,B.state=He,B.info=gt}ce();const be=new oj(B,ae);this.xr=be,this.getContext=function(){return ae},this.getContextAttributes=function(){return ae.getContextAttributes()},this.forceContextLoss=function(){const V=je.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=je.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(V){V!==void 0&&(q=V,this.setSize(H,W,!1))},this.getSize=function(V){return V.set(H,W)},this.setSize=function(V,te,oe=!0){if(be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=V,W=te,t.width=Math.floor(V*q),t.height=Math.floor(te*q),oe===!0&&(t.style.width=V+"px",t.style.height=te+"px"),this.setViewport(0,0,V,te)},this.getDrawingBufferSize=function(V){return V.set(H*q,W*q).floor()},this.setDrawingBufferSize=function(V,te,oe){H=V,W=te,q=oe,t.width=Math.floor(V*oe),t.height=Math.floor(te*oe),this.setViewport(0,0,V,te)},this.getCurrentViewport=function(V){return V.copy(Y)},this.getViewport=function(V){return V.copy(fe)},this.setViewport=function(V,te,oe,de){V.isVector4?fe.set(V.x,V.y,V.z,V.w):fe.set(V,te,oe,de),He.viewport(Y.copy(fe).multiplyScalar(q).round())},this.getScissor=function(V){return V.copy(_e)},this.setScissor=function(V,te,oe,de){V.isVector4?_e.set(V.x,V.y,V.z,V.w):_e.set(V,te,oe,de),He.scissor(ie.copy(_e).multiplyScalar(q).round())},this.getScissorTest=function(){return Ae},this.setScissorTest=function(V){He.setScissorTest(Ae=V)},this.setOpaqueSort=function(V){ge=V},this.setTransparentSort=function(V){j=V},this.getClearColor=function(V){return V.copy(Rt.getClearColor())},this.setClearColor=function(){Rt.setClearColor(...arguments)},this.getClearAlpha=function(){return Rt.getClearAlpha()},this.setClearAlpha=function(){Rt.setClearAlpha(...arguments)},this.clear=function(V=!0,te=!0,oe=!0){let de=0;if(V){let ne=!1;if(I!==null){const $e=I.texture.format;ne=$e===_b||$e===xb||$e===P0}if(ne){const $e=I.texture.type,ze=$e===Us||$e===Dl||$e===Sp||$e===Mp||$e===vb||$e===yb,qe=Rt.getClearColor(),Ke=Rt.getClearAlpha(),dt=qe.r,At=qe.g,yt=qe.b;ze?(A[0]=dt,A[1]=At,A[2]=yt,A[3]=Ke,ae.clearBufferuiv(ae.COLOR,0,A)):(T[0]=dt,T[1]=At,T[2]=yt,T[3]=Ke,ae.clearBufferiv(ae.COLOR,0,T))}else de|=ae.COLOR_BUFFER_BIT}te&&(de|=ae.DEPTH_BUFFER_BIT),oe&&(de|=ae.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ae.clear(de)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",lt,!1),t.removeEventListener("webglcontextrestored",ft,!1),t.removeEventListener("webglcontextcreationerror",it,!1),Rt.dispose(),Le.dispose(),xt.dispose(),st.dispose(),Ot.dispose(),Gt.dispose(),Ee.dispose(),Se.dispose(),tt.dispose(),Fe.dispose(),be.dispose(),be.removeEventListener("sessionstart",cn),be.removeEventListener("sessionend",Xn),Tn.stop()};function lt(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),U=!0}function ft(){console.log("THREE.WebGLRenderer: Context Restored."),U=!1;const V=gt.autoReset,te=St.enabled,oe=St.autoUpdate,de=St.needsUpdate,ne=St.type;ce(),gt.autoReset=V,St.enabled=te,St.autoUpdate=oe,St.needsUpdate=de,St.type=ne}function it(V){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function Ve(V){const te=V.target;te.removeEventListener("dispose",Ve),_t(te)}function _t(V){Mt(V),st.remove(V)}function Mt(V){const te=st.get(V).programs;te!==void 0&&(te.forEach(function(oe){Fe.releaseProgram(oe)}),V.isShaderMaterial&&Fe.releaseShaderCache(V))}this.renderBufferDirect=function(V,te,oe,de,ne,$e){te===null&&(te=ct);const ze=ne.isMesh&&ne.matrixWorld.determinant()<0,qe=Z(V,te,oe,de,ne);He.setMaterial(de,ze);let Ke=oe.index,dt=1;if(de.wireframe===!0){if(Ke=X.getWireframeAttribute(oe),Ke===void 0)return;dt=2}const At=oe.drawRange,yt=oe.attributes.position;let Ft=At.start*dt,en=(At.start+At.count)*dt;$e!==null&&(Ft=Math.max(Ft,$e.start*dt),en=Math.min(en,($e.start+$e.count)*dt)),Ke!==null?(Ft=Math.max(Ft,0),en=Math.min(en,Ke.count)):yt!=null&&(Ft=Math.max(Ft,0),en=Math.min(en,yt.count));const Wt=en-Ft;if(Wt<0||Wt===1/0)return;Se.setup(ne,de,qe,oe,Ke);let xn,Nt=ut;if(Ke!==null&&(xn=$.get(Ke),Nt=Dt,Nt.setIndex(xn)),ne.isMesh)de.wireframe===!0?(He.setLineWidth(de.wireframeLinewidth*Xt()),Nt.setMode(ae.LINES)):Nt.setMode(ae.TRIANGLES);else if(ne.isLine){let Tt=de.linewidth;Tt===void 0&&(Tt=1),He.setLineWidth(Tt*Xt()),ne.isLineSegments?Nt.setMode(ae.LINES):ne.isLineLoop?Nt.setMode(ae.LINE_LOOP):Nt.setMode(ae.LINE_STRIP)}else ne.isPoints?Nt.setMode(ae.POINTS):ne.isSprite&&Nt.setMode(ae.TRIANGLES);if(ne.isBatchedMesh)if(ne._multiDrawInstances!==null)p0("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Nt.renderMultiDrawInstances(ne._multiDrawStarts,ne._multiDrawCounts,ne._multiDrawCount,ne._multiDrawInstances);else if(je.get("WEBGL_multi_draw"))Nt.renderMultiDraw(ne._multiDrawStarts,ne._multiDrawCounts,ne._multiDrawCount);else{const Tt=ne._multiDrawStarts,Nn=ne._multiDrawCounts,un=ne._multiDrawCount,qn=Ke?$.get(Ke).bytesPerElement:1,_n=st.get(de).currentProgram.getUniforms();for(let Ln=0;Ln<un;Ln++)_n.setValue(ae,"_gl_DrawID",Ln),Nt.render(Tt[Ln]/qn,Nn[Ln])}else if(ne.isInstancedMesh)Nt.renderInstances(Ft,Wt,ne.count);else if(oe.isInstancedBufferGeometry){const Tt=oe._maxInstanceCount!==void 0?oe._maxInstanceCount:1/0,Nn=Math.min(oe.instanceCount,Tt);Nt.renderInstances(Ft,Wt,Nn)}else Nt.render(Ft,Wt)};function Vt(V,te,oe){V.transparent===!0&&V.side===kr&&V.forceSinglePass===!1?(V.side=Os,V.needsUpdate=!0,Xi(V,te,oe),V.side=wl,V.needsUpdate=!0,Xi(V,te,oe),V.side=kr):Xi(V,te,oe)}this.compile=function(V,te,oe=null){oe===null&&(oe=V),b=xt.get(oe),b.init(te),D.push(b),oe.traverseVisible(function(ne){ne.isLight&&ne.layers.test(te.layers)&&(b.pushLight(ne),ne.castShadow&&b.pushShadow(ne))}),V!==oe&&V.traverseVisible(function(ne){ne.isLight&&ne.layers.test(te.layers)&&(b.pushLight(ne),ne.castShadow&&b.pushShadow(ne))}),b.setupLights();const de=new Set;return V.traverse(function(ne){if(!(ne.isMesh||ne.isPoints||ne.isLine||ne.isSprite))return;const $e=ne.material;if($e)if(Array.isArray($e))for(let ze=0;ze<$e.length;ze++){const qe=$e[ze];Vt(qe,oe,ne),de.add(qe)}else Vt($e,oe,ne),de.add($e)}),b=D.pop(),de},this.compileAsync=function(V,te,oe=null){const de=this.compile(V,te,oe);return new Promise(ne=>{function $e(){if(de.forEach(function(ze){st.get(ze).currentProgram.isReady()&&de.delete(ze)}),de.size===0){ne(V);return}setTimeout($e,10)}je.get("KHR_parallel_shader_compile")!==null?$e():setTimeout($e,10)})};let jt=null;function oi(V){jt&&jt(V)}function cn(){Tn.stop()}function Xn(){Tn.start()}const Tn=new MO;Tn.setAnimationLoop(oi),typeof self<"u"&&Tn.setContext(self),this.setAnimationLoop=function(V){jt=V,be.setAnimationLoop(V),V===null?Tn.stop():Tn.start()},be.addEventListener("sessionstart",cn),be.addEventListener("sessionend",Xn),this.render=function(V,te){if(te!==void 0&&te.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(U===!0)return;if(V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),te.parent===null&&te.matrixWorldAutoUpdate===!0&&te.updateMatrixWorld(),be.enabled===!0&&be.isPresenting===!0&&(be.cameraAutoUpdate===!0&&be.updateCamera(te),te=be.getCamera()),V.isScene===!0&&V.onBeforeRender(B,V,te,I),b=xt.get(V,D.length),b.init(te),D.push(b),Ne.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),De.setFromProjectionMatrix(Ne,vr,te.reversedDepth),ve=this.localClippingEnabled,ot=pt.init(this.clippingPlanes,ve),E=Le.get(V,R.length),E.init(),R.push(E),be.enabled===!0&&be.isPresenting===!0){const $e=B.xr.getDepthSensingMesh();$e!==null&&li($e,te,-1/0,B.sortObjects)}li(V,te,0,B.sortObjects),E.finish(),B.sortObjects===!0&&E.sort(ge,j),zt=be.enabled===!1||be.isPresenting===!1||be.hasDepthSensing()===!1,zt&&Rt.addToRenderList(E,V),this.info.render.frame++,ot===!0&&pt.beginShadows();const oe=b.state.shadowsArray;St.render(oe,V,te),ot===!0&&pt.endShadows(),this.info.autoReset===!0&&this.info.reset();const de=E.opaque,ne=E.transmissive;if(b.setupLights(),te.isArrayCamera){const $e=te.cameras;if(ne.length>0)for(let ze=0,qe=$e.length;ze<qe;ze++){const Ke=$e[ze];da(de,ne,V,Ke)}zt&&Rt.render(V);for(let ze=0,qe=$e.length;ze<qe;ze++){const Ke=$e[ze];Ui(E,V,Ke,Ke.viewport)}}else ne.length>0&&da(de,ne,V,te),zt&&Rt.render(V),Ui(E,V,te);I!==null&&z===0&&(rt.updateMultisampleRenderTarget(I),rt.updateRenderTargetMipmap(I)),V.isScene===!0&&V.onAfterRender(B,V,te),Se.resetDefaultState(),O=-1,P=null,D.pop(),D.length>0?(b=D[D.length-1],ot===!0&&pt.setGlobalState(B.clippingPlanes,b.state.camera)):b=null,R.pop(),R.length>0?E=R[R.length-1]:E=null};function li(V,te,oe,de){if(V.visible===!1)return;if(V.layers.test(te.layers)){if(V.isGroup)oe=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(te);else if(V.isLight)b.pushLight(V),V.castShadow&&b.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||De.intersectsSprite(V)){de&&bt.setFromMatrixPosition(V.matrixWorld).applyMatrix4(Ne);const ze=Ee.update(V),qe=V.material;qe.visible&&E.push(V,ze,qe,oe,bt.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||De.intersectsObject(V))){const ze=Ee.update(V),qe=V.material;if(de&&(V.boundingSphere!==void 0?(V.boundingSphere===null&&V.computeBoundingSphere(),bt.copy(V.boundingSphere.center)):(ze.boundingSphere===null&&ze.computeBoundingSphere(),bt.copy(ze.boundingSphere.center)),bt.applyMatrix4(V.matrixWorld).applyMatrix4(Ne)),Array.isArray(qe)){const Ke=ze.groups;for(let dt=0,At=Ke.length;dt<At;dt++){const yt=Ke[dt],Ft=qe[yt.materialIndex];Ft&&Ft.visible&&E.push(V,ze,Ft,oe,bt.z,yt)}}else qe.visible&&E.push(V,ze,qe,oe,bt.z,null)}}const $e=V.children;for(let ze=0,qe=$e.length;ze<qe;ze++)li($e[ze],te,oe,de)}function Ui(V,te,oe,de){const ne=V.opaque,$e=V.transmissive,ze=V.transparent;b.setupLightsView(oe),ot===!0&&pt.setGlobalState(B.clippingPlanes,oe),de&&He.viewport(Y.copy(de)),ne.length>0&&ii(ne,te,oe),$e.length>0&&ii($e,te,oe),ze.length>0&&ii(ze,te,oe),He.buffers.depth.setTest(!0),He.buffers.depth.setMask(!0),He.buffers.color.setMask(!0),He.setPolygonOffset(!1)}function da(V,te,oe,de){if((oe.isScene===!0?oe.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[de.id]===void 0&&(b.state.transmissionRenderTarget[de.id]=new Kr(1,1,{generateMipmaps:!0,type:je.has("EXT_color_buffer_half_float")||je.has("EXT_color_buffer_float")?La:Us,minFilter:Yr,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:zn.workingColorSpace}));const $e=b.state.transmissionRenderTarget[de.id],ze=de.viewport||Y;$e.setSize(ze.z*B.transmissionResolutionScale,ze.w*B.transmissionResolutionScale);const qe=B.getRenderTarget(),Ke=B.getActiveCubeFace(),dt=B.getActiveMipmapLevel();B.setRenderTarget($e),B.getClearColor(ue),me=B.getClearAlpha(),me<1&&B.setClearColor(16777215,.5),B.clear(),zt&&Rt.render(oe);const At=B.toneMapping;B.toneMapping=El;const yt=de.viewport;if(de.viewport!==void 0&&(de.viewport=void 0),b.setupLightsView(de),ot===!0&&pt.setGlobalState(B.clippingPlanes,de),ii(V,oe,de),rt.updateMultisampleRenderTarget($e),rt.updateRenderTargetMipmap($e),je.has("WEBGL_multisampled_render_to_texture")===!1){let Ft=!1;for(let en=0,Wt=te.length;en<Wt;en++){const xn=te[en],Nt=xn.object,Tt=xn.geometry,Nn=xn.material,un=xn.group;if(Nn.side===kr&&Nt.layers.test(de.layers)){const qn=Nn.side;Nn.side=Os,Nn.needsUpdate=!0,Yt(Nt,oe,de,Tt,Nn,un),Nn.side=qn,Nn.needsUpdate=!0,Ft=!0}}Ft===!0&&(rt.updateMultisampleRenderTarget($e),rt.updateRenderTargetMipmap($e))}B.setRenderTarget(qe,Ke,dt),B.setClearColor(ue,me),yt!==void 0&&(de.viewport=yt),B.toneMapping=At}function ii(V,te,oe){const de=te.isScene===!0?te.overrideMaterial:null;for(let ne=0,$e=V.length;ne<$e;ne++){const ze=V[ne],qe=ze.object,Ke=ze.geometry,dt=ze.group;let At=ze.material;At.allowOverride===!0&&de!==null&&(At=de),qe.layers.test(oe.layers)&&Yt(qe,te,oe,Ke,At,dt)}}function Yt(V,te,oe,de,ne,$e){V.onBeforeRender(B,te,oe,de,ne,$e),V.modelViewMatrix.multiplyMatrices(oe.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),ne.onBeforeRender(B,te,oe,de,V,$e),ne.transparent===!0&&ne.side===kr&&ne.forceSinglePass===!1?(ne.side=Os,ne.needsUpdate=!0,B.renderBufferDirect(oe,te,de,ne,V,$e),ne.side=wl,ne.needsUpdate=!0,B.renderBufferDirect(oe,te,de,ne,V,$e),ne.side=kr):B.renderBufferDirect(oe,te,de,ne,V,$e),V.onAfterRender(B,te,oe,de,ne,$e)}function Xi(V,te,oe){te.isScene!==!0&&(te=ct);const de=st.get(V),ne=b.state.lights,$e=b.state.shadowsArray,ze=ne.state.version,qe=Fe.getParameters(V,ne.state,$e,te,oe),Ke=Fe.getProgramCacheKey(qe);let dt=de.programs;de.environment=V.isMeshStandardMaterial?te.environment:null,de.fog=te.fog,de.envMap=(V.isMeshStandardMaterial?Gt:Ot).get(V.envMap||de.environment),de.envMapRotation=de.environment!==null&&V.envMap===null?te.environmentRotation:V.envMapRotation,dt===void 0&&(V.addEventListener("dispose",Ve),dt=new Map,de.programs=dt);let At=dt.get(Ke);if(At!==void 0){if(de.currentProgram===At&&de.lightsStateVersion===ze)return k(V,qe),At}else qe.uniforms=Fe.getUniforms(V),V.onBeforeCompile(qe,B),At=Fe.acquireProgram(qe,Ke),dt.set(Ke,At),de.uniforms=qe.uniforms;const yt=de.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(yt.clippingPlanes=pt.uniform),k(V,qe),de.needsLights=Re(V),de.lightsStateVersion=ze,de.needsLights&&(yt.ambientLightColor.value=ne.state.ambient,yt.lightProbe.value=ne.state.probe,yt.directionalLights.value=ne.state.directional,yt.directionalLightShadows.value=ne.state.directionalShadow,yt.spotLights.value=ne.state.spot,yt.spotLightShadows.value=ne.state.spotShadow,yt.rectAreaLights.value=ne.state.rectArea,yt.ltc_1.value=ne.state.rectAreaLTC1,yt.ltc_2.value=ne.state.rectAreaLTC2,yt.pointLights.value=ne.state.point,yt.pointLightShadows.value=ne.state.pointShadow,yt.hemisphereLights.value=ne.state.hemi,yt.directionalShadowMap.value=ne.state.directionalShadowMap,yt.directionalShadowMatrix.value=ne.state.directionalShadowMatrix,yt.spotShadowMap.value=ne.state.spotShadowMap,yt.spotLightMatrix.value=ne.state.spotLightMatrix,yt.spotLightMap.value=ne.state.spotLightMap,yt.pointShadowMap.value=ne.state.pointShadowMap,yt.pointShadowMatrix.value=ne.state.pointShadowMatrix),de.currentProgram=At,de.uniformsList=null,At}function ai(V){if(V.uniformsList===null){const te=V.currentProgram.getUniforms();V.uniformsList=Yx.seqWithValue(te.seq,V.uniforms)}return V.uniformsList}function k(V,te){const oe=st.get(V);oe.outputColorSpace=te.outputColorSpace,oe.batching=te.batching,oe.batchingColor=te.batchingColor,oe.instancing=te.instancing,oe.instancingColor=te.instancingColor,oe.instancingMorph=te.instancingMorph,oe.skinning=te.skinning,oe.morphTargets=te.morphTargets,oe.morphNormals=te.morphNormals,oe.morphColors=te.morphColors,oe.morphTargetsCount=te.morphTargetsCount,oe.numClippingPlanes=te.numClippingPlanes,oe.numIntersection=te.numClipIntersection,oe.vertexAlphas=te.vertexAlphas,oe.vertexTangents=te.vertexTangents,oe.toneMapping=te.toneMapping}function Z(V,te,oe,de,ne){te.isScene!==!0&&(te=ct),rt.resetTextureUnits();const $e=te.fog,ze=de.isMeshStandardMaterial?te.environment:null,qe=I===null?B.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:No,Ke=(de.isMeshStandardMaterial?Gt:Ot).get(de.envMap||ze),dt=de.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,At=!!oe.attributes.tangent&&(!!de.normalMap||de.anisotropy>0),yt=!!oe.morphAttributes.position,Ft=!!oe.morphAttributes.normal,en=!!oe.morphAttributes.color;let Wt=El;de.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(Wt=B.toneMapping);const xn=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,Nt=xn!==void 0?xn.length:0,Tt=st.get(de),Nn=b.state.lights;if(ot===!0&&(ve===!0||V!==P)){const Cn=V===P&&de.id===O;pt.setState(de,V,Cn)}let un=!1;de.version===Tt.__version?(Tt.needsLights&&Tt.lightsStateVersion!==Nn.state.version||Tt.outputColorSpace!==qe||ne.isBatchedMesh&&Tt.batching===!1||!ne.isBatchedMesh&&Tt.batching===!0||ne.isBatchedMesh&&Tt.batchingColor===!0&&ne.colorTexture===null||ne.isBatchedMesh&&Tt.batchingColor===!1&&ne.colorTexture!==null||ne.isInstancedMesh&&Tt.instancing===!1||!ne.isInstancedMesh&&Tt.instancing===!0||ne.isSkinnedMesh&&Tt.skinning===!1||!ne.isSkinnedMesh&&Tt.skinning===!0||ne.isInstancedMesh&&Tt.instancingColor===!0&&ne.instanceColor===null||ne.isInstancedMesh&&Tt.instancingColor===!1&&ne.instanceColor!==null||ne.isInstancedMesh&&Tt.instancingMorph===!0&&ne.morphTexture===null||ne.isInstancedMesh&&Tt.instancingMorph===!1&&ne.morphTexture!==null||Tt.envMap!==Ke||de.fog===!0&&Tt.fog!==$e||Tt.numClippingPlanes!==void 0&&(Tt.numClippingPlanes!==pt.numPlanes||Tt.numIntersection!==pt.numIntersection)||Tt.vertexAlphas!==dt||Tt.vertexTangents!==At||Tt.morphTargets!==yt||Tt.morphNormals!==Ft||Tt.morphColors!==en||Tt.toneMapping!==Wt||Tt.morphTargetsCount!==Nt)&&(un=!0):(un=!0,Tt.__version=de.version);let qn=Tt.currentProgram;un===!0&&(qn=Xi(de,te,ne));let _n=!1,Ln=!1,fn=!1;const Ht=qn.getUniforms(),Qn=Tt.uniforms;if(He.useProgram(qn.program)&&(_n=!0,Ln=!0,fn=!0),de.id!==O&&(O=de.id,Ln=!0),_n||P!==V){He.buffers.depth.getReversed()&&V.reversedDepth!==!0&&(V._reversedDepth=!0,V.updateProjectionMatrix()),Ht.setValue(ae,"projectionMatrix",V.projectionMatrix),Ht.setValue(ae,"viewMatrix",V.matrixWorldInverse);const pi=Ht.map.cameraPosition;pi!==void 0&&pi.setValue(ae,Qe.setFromMatrixPosition(V.matrixWorld)),Xe.logarithmicDepthBuffer&&Ht.setValue(ae,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial)&&Ht.setValue(ae,"isOrthographic",V.isOrthographicCamera===!0),P!==V&&(P=V,Ln=!0,fn=!0)}if(ne.isSkinnedMesh){Ht.setOptional(ae,ne,"bindMatrix"),Ht.setOptional(ae,ne,"bindMatrixInverse");const Cn=ne.skeleton;Cn&&(Cn.boneTexture===null&&Cn.computeBoneTexture(),Ht.setValue(ae,"boneTexture",Cn.boneTexture,rt))}ne.isBatchedMesh&&(Ht.setOptional(ae,ne,"batchingTexture"),Ht.setValue(ae,"batchingTexture",ne._matricesTexture,rt),Ht.setOptional(ae,ne,"batchingIdTexture"),Ht.setValue(ae,"batchingIdTexture",ne._indirectTexture,rt),Ht.setOptional(ae,ne,"batchingColorTexture"),ne._colorsTexture!==null&&Ht.setValue(ae,"batchingColorTexture",ne._colorsTexture,rt));const _i=oe.morphAttributes;if((_i.position!==void 0||_i.normal!==void 0||_i.color!==void 0)&&nt.update(ne,oe,qn),(Ln||Tt.receiveShadow!==ne.receiveShadow)&&(Tt.receiveShadow=ne.receiveShadow,Ht.setValue(ae,"receiveShadow",ne.receiveShadow)),de.isMeshGouraudMaterial&&de.envMap!==null&&(Qn.envMap.value=Ke,Qn.flipEnvMap.value=Ke.isCubeTexture&&Ke.isRenderTargetTexture===!1?-1:1),de.isMeshStandardMaterial&&de.envMap===null&&te.environment!==null&&(Qn.envMapIntensity.value=te.environmentIntensity),Ln&&(Ht.setValue(ae,"toneMappingExposure",B.toneMappingExposure),Tt.needsLights&&pe(Qn,fn),$e&&de.fog===!0&&ke.refreshFogUniforms(Qn,$e),ke.refreshMaterialUniforms(Qn,de,q,W,b.state.transmissionRenderTarget[V.id]),Yx.upload(ae,ai(Tt),Qn,rt)),de.isShaderMaterial&&de.uniformsNeedUpdate===!0&&(Yx.upload(ae,ai(Tt),Qn,rt),de.uniformsNeedUpdate=!1),de.isSpriteMaterial&&Ht.setValue(ae,"center",ne.center),Ht.setValue(ae,"modelViewMatrix",ne.modelViewMatrix),Ht.setValue(ae,"normalMatrix",ne.normalMatrix),Ht.setValue(ae,"modelMatrix",ne.matrixWorld),de.isShaderMaterial||de.isRawShaderMaterial){const Cn=de.uniformsGroups;for(let pi=0,Ol=Cn.length;pi<Ol;pi++){const Zi=Cn[pi];tt.update(Zi,qn),tt.bind(Zi,qn)}}return qn}function pe(V,te){V.ambientLightColor.needsUpdate=te,V.lightProbe.needsUpdate=te,V.directionalLights.needsUpdate=te,V.directionalLightShadows.needsUpdate=te,V.pointLights.needsUpdate=te,V.pointLightShadows.needsUpdate=te,V.spotLights.needsUpdate=te,V.spotLightShadows.needsUpdate=te,V.rectAreaLights.needsUpdate=te,V.hemisphereLights.needsUpdate=te}function Re(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return z},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(V,te,oe){const de=st.get(V);de.__autoAllocateDepthBuffer=V.resolveDepthBuffer===!1,de.__autoAllocateDepthBuffer===!1&&(de.__useRenderToTexture=!1),st.get(V.texture).__webglTexture=te,st.get(V.depthTexture).__webglTexture=de.__autoAllocateDepthBuffer?void 0:oe,de.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(V,te){const oe=st.get(V);oe.__webglFramebuffer=te,oe.__useDefaultFramebuffer=te===void 0};const Oe=ae.createFramebuffer();this.setRenderTarget=function(V,te=0,oe=0){I=V,L=te,z=oe;let de=!0,ne=null,$e=!1,ze=!1;if(V){const Ke=st.get(V);if(Ke.__useDefaultFramebuffer!==void 0)He.bindFramebuffer(ae.FRAMEBUFFER,null),de=!1;else if(Ke.__webglFramebuffer===void 0)rt.setupRenderTarget(V);else if(Ke.__hasExternalTextures)rt.rebindTextures(V,st.get(V.texture).__webglTexture,st.get(V.depthTexture).__webglTexture);else if(V.depthBuffer){const yt=V.depthTexture;if(Ke.__boundDepthTexture!==yt){if(yt!==null&&st.has(yt)&&(V.width!==yt.image.width||V.height!==yt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");rt.setupDepthRenderbuffer(V)}}const dt=V.texture;(dt.isData3DTexture||dt.isDataArrayTexture||dt.isCompressedArrayTexture)&&(ze=!0);const At=st.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(Array.isArray(At[te])?ne=At[te][oe]:ne=At[te],$e=!0):V.samples>0&&rt.useMultisampledRTT(V)===!1?ne=st.get(V).__webglMultisampledFramebuffer:Array.isArray(At)?ne=At[oe]:ne=At,Y.copy(V.viewport),ie.copy(V.scissor),se=V.scissorTest}else Y.copy(fe).multiplyScalar(q).floor(),ie.copy(_e).multiplyScalar(q).floor(),se=Ae;if(oe!==0&&(ne=Oe),He.bindFramebuffer(ae.FRAMEBUFFER,ne)&&de&&He.drawBuffers(V,ne),He.viewport(Y),He.scissor(ie),He.setScissorTest(se),$e){const Ke=st.get(V.texture);ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_CUBE_MAP_POSITIVE_X+te,Ke.__webglTexture,oe)}else if(ze){const Ke=te;for(let dt=0;dt<V.textures.length;dt++){const At=st.get(V.textures[dt]);ae.framebufferTextureLayer(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0+dt,At.__webglTexture,oe,Ke)}}else if(V!==null&&oe!==0){const Ke=st.get(V.texture);ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,Ke.__webglTexture,oe)}O=-1},this.readRenderTargetPixels=function(V,te,oe,de,ne,$e,ze,qe=0){if(!(V&&V.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ke=st.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&ze!==void 0&&(Ke=Ke[ze]),Ke){He.bindFramebuffer(ae.FRAMEBUFFER,Ke);try{const dt=V.textures[qe],At=dt.format,yt=dt.type;if(!Xe.textureFormatReadable(At)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Xe.textureTypeReadable(yt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}te>=0&&te<=V.width-de&&oe>=0&&oe<=V.height-ne&&(V.textures.length>1&&ae.readBuffer(ae.COLOR_ATTACHMENT0+qe),ae.readPixels(te,oe,de,ne,re.convert(At),re.convert(yt),$e))}finally{const dt=I!==null?st.get(I).__webglFramebuffer:null;He.bindFramebuffer(ae.FRAMEBUFFER,dt)}}},this.readRenderTargetPixelsAsync=async function(V,te,oe,de,ne,$e,ze,qe=0){if(!(V&&V.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ke=st.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&ze!==void 0&&(Ke=Ke[ze]),Ke)if(te>=0&&te<=V.width-de&&oe>=0&&oe<=V.height-ne){He.bindFramebuffer(ae.FRAMEBUFFER,Ke);const dt=V.textures[qe],At=dt.format,yt=dt.type;if(!Xe.textureFormatReadable(At))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Xe.textureTypeReadable(yt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ft=ae.createBuffer();ae.bindBuffer(ae.PIXEL_PACK_BUFFER,Ft),ae.bufferData(ae.PIXEL_PACK_BUFFER,$e.byteLength,ae.STREAM_READ),V.textures.length>1&&ae.readBuffer(ae.COLOR_ATTACHMENT0+qe),ae.readPixels(te,oe,de,ne,re.convert(At),re.convert(yt),0);const en=I!==null?st.get(I).__webglFramebuffer:null;He.bindFramebuffer(ae.FRAMEBUFFER,en);const Wt=ae.fenceSync(ae.SYNC_GPU_COMMANDS_COMPLETE,0);return ae.flush(),await e5(ae,Wt,4),ae.bindBuffer(ae.PIXEL_PACK_BUFFER,Ft),ae.getBufferSubData(ae.PIXEL_PACK_BUFFER,0,$e),ae.deleteBuffer(Ft),ae.deleteSync(Wt),$e}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(V,te=null,oe=0){const de=Math.pow(2,-oe),ne=Math.floor(V.image.width*de),$e=Math.floor(V.image.height*de),ze=te!==null?te.x:0,qe=te!==null?te.y:0;rt.setTexture2D(V,0),ae.copyTexSubImage2D(ae.TEXTURE_2D,oe,0,0,ze,qe,ne,$e),He.unbindTexture()};const Ge=ae.createFramebuffer(),ht=ae.createFramebuffer();this.copyTextureToTexture=function(V,te,oe=null,de=null,ne=0,$e=null){$e===null&&(ne!==0?(p0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),$e=ne,ne=0):$e=0);let ze,qe,Ke,dt,At,yt,Ft,en,Wt;const xn=V.isCompressedTexture?V.mipmaps[$e]:V.image;if(oe!==null)ze=oe.max.x-oe.min.x,qe=oe.max.y-oe.min.y,Ke=oe.isBox3?oe.max.z-oe.min.z:1,dt=oe.min.x,At=oe.min.y,yt=oe.isBox3?oe.min.z:0;else{const _i=Math.pow(2,-ne);ze=Math.floor(xn.width*_i),qe=Math.floor(xn.height*_i),V.isDataArrayTexture?Ke=xn.depth:V.isData3DTexture?Ke=Math.floor(xn.depth*_i):Ke=1,dt=0,At=0,yt=0}de!==null?(Ft=de.x,en=de.y,Wt=de.z):(Ft=0,en=0,Wt=0);const Nt=re.convert(te.format),Tt=re.convert(te.type);let Nn;te.isData3DTexture?(rt.setTexture3D(te,0),Nn=ae.TEXTURE_3D):te.isDataArrayTexture||te.isCompressedArrayTexture?(rt.setTexture2DArray(te,0),Nn=ae.TEXTURE_2D_ARRAY):(rt.setTexture2D(te,0),Nn=ae.TEXTURE_2D),ae.pixelStorei(ae.UNPACK_FLIP_Y_WEBGL,te.flipY),ae.pixelStorei(ae.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),ae.pixelStorei(ae.UNPACK_ALIGNMENT,te.unpackAlignment);const un=ae.getParameter(ae.UNPACK_ROW_LENGTH),qn=ae.getParameter(ae.UNPACK_IMAGE_HEIGHT),_n=ae.getParameter(ae.UNPACK_SKIP_PIXELS),Ln=ae.getParameter(ae.UNPACK_SKIP_ROWS),fn=ae.getParameter(ae.UNPACK_SKIP_IMAGES);ae.pixelStorei(ae.UNPACK_ROW_LENGTH,xn.width),ae.pixelStorei(ae.UNPACK_IMAGE_HEIGHT,xn.height),ae.pixelStorei(ae.UNPACK_SKIP_PIXELS,dt),ae.pixelStorei(ae.UNPACK_SKIP_ROWS,At),ae.pixelStorei(ae.UNPACK_SKIP_IMAGES,yt);const Ht=V.isDataArrayTexture||V.isData3DTexture,Qn=te.isDataArrayTexture||te.isData3DTexture;if(V.isDepthTexture){const _i=st.get(V),Cn=st.get(te),pi=st.get(_i.__renderTarget),Ol=st.get(Cn.__renderTarget);He.bindFramebuffer(ae.READ_FRAMEBUFFER,pi.__webglFramebuffer),He.bindFramebuffer(ae.DRAW_FRAMEBUFFER,Ol.__webglFramebuffer);for(let Zi=0;Zi<Ke;Zi++)Ht&&(ae.framebufferTextureLayer(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,st.get(V).__webglTexture,ne,yt+Zi),ae.framebufferTextureLayer(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,st.get(te).__webglTexture,$e,Wt+Zi)),ae.blitFramebuffer(dt,At,ze,qe,Ft,en,ze,qe,ae.DEPTH_BUFFER_BIT,ae.NEAREST);He.bindFramebuffer(ae.READ_FRAMEBUFFER,null),He.bindFramebuffer(ae.DRAW_FRAMEBUFFER,null)}else if(ne!==0||V.isRenderTargetTexture||st.has(V)){const _i=st.get(V),Cn=st.get(te);He.bindFramebuffer(ae.READ_FRAMEBUFFER,Ge),He.bindFramebuffer(ae.DRAW_FRAMEBUFFER,ht);for(let pi=0;pi<Ke;pi++)Ht?ae.framebufferTextureLayer(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,_i.__webglTexture,ne,yt+pi):ae.framebufferTexture2D(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,_i.__webglTexture,ne),Qn?ae.framebufferTextureLayer(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,Cn.__webglTexture,$e,Wt+pi):ae.framebufferTexture2D(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,Cn.__webglTexture,$e),ne!==0?ae.blitFramebuffer(dt,At,ze,qe,Ft,en,ze,qe,ae.COLOR_BUFFER_BIT,ae.NEAREST):Qn?ae.copyTexSubImage3D(Nn,$e,Ft,en,Wt+pi,dt,At,ze,qe):ae.copyTexSubImage2D(Nn,$e,Ft,en,dt,At,ze,qe);He.bindFramebuffer(ae.READ_FRAMEBUFFER,null),He.bindFramebuffer(ae.DRAW_FRAMEBUFFER,null)}else Qn?V.isDataTexture||V.isData3DTexture?ae.texSubImage3D(Nn,$e,Ft,en,Wt,ze,qe,Ke,Nt,Tt,xn.data):te.isCompressedArrayTexture?ae.compressedTexSubImage3D(Nn,$e,Ft,en,Wt,ze,qe,Ke,Nt,xn.data):ae.texSubImage3D(Nn,$e,Ft,en,Wt,ze,qe,Ke,Nt,Tt,xn):V.isDataTexture?ae.texSubImage2D(ae.TEXTURE_2D,$e,Ft,en,ze,qe,Nt,Tt,xn.data):V.isCompressedTexture?ae.compressedTexSubImage2D(ae.TEXTURE_2D,$e,Ft,en,xn.width,xn.height,Nt,xn.data):ae.texSubImage2D(ae.TEXTURE_2D,$e,Ft,en,ze,qe,Nt,Tt,xn);ae.pixelStorei(ae.UNPACK_ROW_LENGTH,un),ae.pixelStorei(ae.UNPACK_IMAGE_HEIGHT,qn),ae.pixelStorei(ae.UNPACK_SKIP_PIXELS,_n),ae.pixelStorei(ae.UNPACK_SKIP_ROWS,Ln),ae.pixelStorei(ae.UNPACK_SKIP_IMAGES,fn),$e===0&&te.generateMipmaps&&ae.generateMipmap(Nn),He.unbindTexture()},this.initRenderTarget=function(V){st.get(V).__webglFramebuffer===void 0&&rt.setupRenderTarget(V)},this.initTexture=function(V){V.isCubeTexture?rt.setTextureCube(V,0):V.isData3DTexture?rt.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?rt.setTexture2DArray(V,0):rt.setTexture2D(V,0),He.unbindTexture()},this.resetState=function(){L=0,z=0,I=null,He.reset(),Se.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return vr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=zn._getDrawingBufferColorSpace(e),t.unpackColorSpace=zn._getUnpackColorSpace()}}const fj=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:dE,AddEquation:Du,AddOperation:iN,AdditiveAnimationBlendMode:xE,AdditiveBlending:Q1,AgXToneMapping:lN,AlphaFormat:gE,AlwaysCompare:MN,AlwaysDepth:o_,AlwaysStencilFunc:iM,AmbientLight:hO,AnimationAction:AO,AnimationClip:Up,AnimationLoader:T8,AnimationMixer:Z8,AnimationObjectGroup:W8,AnimationUtils:A8,ArcCurve:zN,ArrayCamera:xO,ArrowHelper:A9,AttachedBindMode:tM,Audio:_O,AudioAnalyser:z8,AudioContext:JE,AudioListener:I8,AudioLoader:O8,AxesHelper:S9,BackSide:Os,BasicDepthPacking:mN,BasicShadowMap:P3,BatchedMesh:IN,Bone:Cb,BooleanKeyframeTrack:Nh,Box2:r9,Box3:Ja,Box3Helper:_9,BoxGeometry:Bh,BoxHelper:x9,BufferAttribute:Yn,BufferGeometry:gn,BufferGeometryLoader:vO,ByteType:mb,Cache:_l,Camera:Mb,CameraHelper:y9,CanvasTexture:j5,CapsuleGeometry:Bb,CatmullRomCurve3:HN,CineonToneMapping:rN,CircleGeometry:Nb,ClampToEdgeWrapping:aa,Clock:ZE,Color:Et,ColorKeyframeTrack:XE,ColorManagement:zn,CompressedArrayTexture:k5,CompressedCubeTexture:X5,CompressedTexture:Db,CompressedTextureLoader:C8,ConeGeometry:k0,ConstantAlphaFactor:eN,ConstantColorFactor:Q3,Controls:E9,CubeCamera:NN,CubeReflectionMapping:Rl,CubeRefractionMapping:Iu,CubeTexture:F0,CubeTextureLoader:cO,CubeUVReflectionMapping:Xp,CubicBezierCurve:LE,CubicBezierCurve3:GN,CubicInterpolant:sO,CullFaceBack:Z1,CullFaceFront:I3,CullFaceFrontBack:a6,CullFaceNone:L3,Curve:Io,CurvePath:kN,CustomBlending:F3,CustomToneMapping:oN,CylinderGeometry:V0,Cylindrical:s9,Data3DTexture:Sb,DataArrayTexture:Ab,DataTexture:Bo,DataTextureLoader:jE,DataUtils:hh,DecrementStencilOp:p6,DecrementWrapStencilOp:g6,DefaultLoadingManager:lO,DepthFormat:Ep,DepthStencilFormat:Tp,DepthTexture:NE,DetachedBindMode:uN,DirectionalLight:WE,DirectionalLightHelper:v9,DiscreteInterpolant:rO,DodecahedronGeometry:Ob,DoubleSide:kr,DstAlphaFactor:q3,DstColorFactor:W3,DynamicCopyUsage:B6,DynamicDrawUsage:E6,DynamicReadUsage:w6,EdgesGeometry:FN,EllipseCurve:Ub,EqualCompare:_N,EqualDepth:c_,EqualStencilFunc:_6,EquirectangularReflectionMapping:bp,EquirectangularRefractionMapping:c0,Euler:xr,EventDispatcher:Nl,ExternalTexture:OE,ExtrudeGeometry:Lb,FileLoader:Za,Float16BufferAttribute:b5,Float32BufferAttribute:Pt,FloatType:Vi,Fog:Tb,FogExp2:Eb,FramebufferTexture:V5,FrontSide:wl,Frustum:jp,FrustumArray:wb,GLBufferAttribute:n9,GLSL1:O6,GLSL3:aM,GreaterCompare:bN,GreaterDepth:f_,GreaterEqualCompare:SN,GreaterEqualDepth:u_,GreaterEqualStencilFunc:M6,GreaterStencilFunc:A6,GridHelper:m9,Group:mc,HalfFloatType:La,HemisphereLight:fO,HemisphereLightHelper:p9,IcosahedronGeometry:X0,ImageBitmapLoader:yO,ImageLoader:y0,ImageUtils:wN,IncrementStencilOp:d6,IncrementWrapStencilOp:m6,InstancedBufferAttribute:Sh,InstancedBufferGeometry:gO,InstancedInterleavedBuffer:t9,InstancedMesh:RE,Int16BufferAttribute:x5,Int32BufferAttribute:_5,Int8BufferAttribute:g5,IntType:L0,InterleavedBuffer:H0,InterleavedBufferAttribute:Fu,Interpolant:Yp,InterpolateDiscrete:Cp,InterpolateLinear:wp,InterpolateSmooth:Xx,InterpolationSamplingMode:I6,InterpolationSamplingType:L6,InvertStencilOp:v6,KeepStencilOp:ah,KeyframeTrack:Zr,LOD:LN,LatheGeometry:Ib,Layers:Bp,LessCompare:xN,LessDepth:l_,LessEqualCompare:bE,LessEqualDepth:Ah,LessEqualStencilFunc:b6,LessStencilFunc:x6,Light:Xu,LightProbe:mO,Line:Sc,Line3:c9,LineBasicMaterial:fs,LineCurve:IE,LineCurve3:VN,LineDashedMaterial:nO,LineLoop:DE,LineSegments:Lo,LinearFilter:ni,LinearInterpolant:kE,LinearMipMapLinearFilter:nM,LinearMipMapNearestFilter:o6,LinearMipmapLinearFilter:Yr,LinearMipmapNearestFilter:pp,LinearSRGBColorSpace:No,LinearToneMapping:aN,LinearTransfer:f0,Loader:Qa,LoaderUtils:Ou,LoadingManager:kb,LoopOnce:fN,LoopPingPong:dN,LoopRepeat:hN,MOUSE:nh,Material:Ma,MaterialLoader:Xb,MathUtils:EN,Matrix2:nT,Matrix3:yn,Matrix4:$t,MaxEquation:V3,Mesh:Oi,MeshBasicMaterial:er,MeshDepthMaterial:HE,MeshDistanceMaterial:GE,MeshLambertMaterial:eO,MeshMatcapMaterial:tO,MeshNormalMaterial:$N,MeshPhongMaterial:ZN,MeshPhysicalMaterial:Jr,MeshStandardMaterial:q0,MeshToonMaterial:QN,MinEquation:G3,MirroredRepeatWrapping:Ap,MixOperation:nN,MultiplyBlending:eM,MultiplyOperation:U0,NearestFilter:Ia,NearestMipMapLinearFilter:r6,NearestMipMapNearestFilter:s6,NearestMipmapLinearFilter:ch,NearestMipmapNearestFilter:pb,NeutralToneMapping:cN,NeverCompare:yN,NeverDepth:r_,NeverStencilFunc:y6,NoBlending:Ml,NoColorSpace:dc,NoToneMapping:El,NormalAnimationBlendMode:bb,NormalBlending:yh,NotEqualCompare:AN,NotEqualDepth:h_,NotEqualStencilFunc:S6,NumberKeyframeTrack:Eh,Object3D:Hn,ObjectLoader:B8,ObjectSpaceNormalMap:vN,OctahedronGeometry:j0,OneFactor:X3,OneMinusConstantAlphaFactor:tN,OneMinusConstantColorFactor:$3,OneMinusDstAlphaFactor:K3,OneMinusDstColorFactor:J3,OneMinusSrcAlphaFactor:s_,OneMinusSrcColorFactor:Y3,OrthographicCamera:Tl,PCFShadowMap:db,PCFSoftShadowMap:Vg,PMREMGenerator:hM,Path:j_,PerspectiveCamera:Ji,Plane:hc,PlaneGeometry:ku,PlaneHelper:b9,PointLight:KE,PointLightHelper:h9,Points:BE,PointsMaterial:Rb,PolarGridHelper:g9,PolyhedronGeometry:Vu,PositionalAudio:F8,PropertyBinding:kn,PropertyMixer:bO,QuadraticBezierCurve:PE,QuadraticBezierCurve3:FE,Quaternion:Pa,QuaternionKeyframeTrack:Th,QuaternionLinearInterpolant:oO,RED_GREEN_RGTC2_Format:z_,RED_RGTC1_Format:P_,REVISION:O0,RGBADepthPacking:gN,RGBAFormat:sa,RGBAIntegerFormat:_b,RGBA_ASTC_10x10_Format:B_,RGBA_ASTC_10x5_Format:w_,RGBA_ASTC_10x6_Format:R_,RGBA_ASTC_10x8_Format:D_,RGBA_ASTC_12x10_Format:N_,RGBA_ASTC_12x12_Format:O_,RGBA_ASTC_4x4_Format:__,RGBA_ASTC_5x4_Format:b_,RGBA_ASTC_5x5_Format:A_,RGBA_ASTC_6x5_Format:S_,RGBA_ASTC_6x6_Format:M_,RGBA_ASTC_8x5_Format:E_,RGBA_ASTC_8x6_Format:T_,RGBA_ASTC_8x8_Format:C_,RGBA_BPTC_Format:U_,RGBA_ETC2_EAC_Format:x_,RGBA_PVRTC_2BPPV1_Format:g_,RGBA_PVRTC_4BPPV1_Format:m_,RGBA_S3TC_DXT1_Format:Xg,RGBA_S3TC_DXT3_Format:jg,RGBA_S3TC_DXT5_Format:Yg,RGBDepthPacking:c6,RGBFormat:vE,RGBIntegerFormat:l6,RGB_BPTC_SIGNED_Format:L_,RGB_BPTC_UNSIGNED_Format:I_,RGB_ETC1_Format:v_,RGB_ETC2_Format:y_,RGB_PVRTC_2BPPV1_Format:p_,RGB_PVRTC_4BPPV1_Format:d_,RGB_S3TC_DXT1_Format:kg,RGDepthPacking:u6,RGFormat:yE,RGIntegerFormat:xb,RawShaderMaterial:JN,Ray:Dh,Raycaster:tT,RectAreaLight:dO,RedFormat:I0,RedIntegerFormat:P0,ReinhardToneMapping:sN,RenderTarget:SE,RenderTarget3D:Q8,RepeatWrapping:Pu,ReplaceStencilOp:h6,ReverseSubtractEquation:H3,RingGeometry:Pb,SIGNED_RED_GREEN_RGTC2_Format:H_,SIGNED_RED_RGTC1_Format:F_,SRGBColorSpace:Wa,SRGBTransfer:di,Scene:z0,ShaderChunk:Mn,ShaderLib:Ro,ShaderMaterial:tr,ShadowMaterial:WN,Shape:_h,ShapeGeometry:Fb,ShapePath:M9,ShapeUtils:Do,ShortType:gb,Skeleton:G0,SkeletonHelper:f9,SkinnedMesh:wE,Source:Bu,Sphere:Fa,SphereGeometry:Y0,Spherical:uM,SphericalHarmonics3:pO,SplineCurve:zE,SpotLight:qE,SpotLightHelper:u9,Sprite:UN,SpriteMaterial:CE,SrcAlphaFactor:a_,SrcAlphaSaturateFactor:Z3,SrcColorFactor:j3,StaticCopyUsage:D6,StaticDrawUsage:h0,StaticReadUsage:C6,StereoCamera:U8,StreamCopyUsage:N6,StreamDrawUsage:T6,StreamReadUsage:R6,StringKeyframeTrack:Oh,SubtractEquation:z3,SubtractiveBlending:$1,TOUCH:ih,TangentSpaceNormalMap:Gu,TetrahedronGeometry:zb,Texture:ri,TextureLoader:uO,TextureUtils:D9,Timer:i9,TimestampQuery:U6,TorusGeometry:Hb,TorusKnotGeometry:Gb,Triangle:Qs,TriangleFanDrawMode:G_,TriangleStripDrawMode:_E,TrianglesDrawMode:pN,TubeGeometry:Vb,UVMapping:Lu,Uint16BufferAttribute:ME,Uint32BufferAttribute:EE,Uint8BufferAttribute:v5,Uint8ClampedBufferAttribute:y5,Uniform:eT,UniformsGroup:e9,UniformsLib:wt,UniformsUtils:BN,UnsignedByteType:Us,UnsignedInt101111Type:mE,UnsignedInt248Type:Mp,UnsignedInt5999Type:pE,UnsignedIntType:Dl,UnsignedShort4444Type:vb,UnsignedShort5551Type:yb,UnsignedShortType:Sp,VSMShadowMap:wo,Vector2:Ze,Vector3:Q,Vector4:jn,VectorKeyframeTrack:Ch,VideoFrameTexture:G5,VideoTexture:PN,WebGL3DRenderTarget:s5,WebGLArrayRenderTarget:a5,WebGLCoordinateSystem:vr,WebGLCubeRenderTarget:TE,WebGLRenderTarget:Kr,WebGLRenderer:aT,WebGLUtils:RO,WebGPUCoordinateSystem:Rp,WebXRController:jx,WireframeGeometry:KN,WrapAroundEnding:u0,ZeroCurvatureEnding:uh,ZeroFactor:k3,ZeroSlopeEnding:fh,ZeroStencilOp:f6,createCanvasElement:CN},Symbol.toStringTag,{value:"Module"}));var ZS={exports:{}},QS={},$S={exports:{}},e1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D2;function hj(){if(D2)return e1;D2=1;var n=Ip();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,a=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function c(g,y){var _=y(),A=i({inst:{value:_,getSnapshot:y}}),T=A[0].inst,E=A[1];return s(function(){T.value=_,T.getSnapshot=y,f(T)&&E({inst:T})},[g,_,y]),a(function(){return f(T)&&E({inst:T}),g(function(){f(T)&&E({inst:T})})},[g]),o(_),_}function f(g){var y=g.getSnapshot;g=g.value;try{var _=y();return!t(g,_)}catch{return!0}}function d(g,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return e1.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,e1}var B2;function dj(){return B2||(B2=1,$S.exports=hj()),$S.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2;function pj(){if(N2)return QS;N2=1;var n=Ip(),e=dj();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var i=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,c=n.useMemo,f=n.useDebugValue;return QS.useSyncExternalStoreWithSelector=function(d,m,g,y,_){var A=s(null);if(A.current===null){var T={hasValue:!1,value:null};A.current=T}else T=A.current;A=c(function(){function b(L){if(!R){if(R=!0,D=L,L=y(L),_!==void 0&&T.hasValue){var z=T.value;if(_(z,L))return B=z}return B=L}if(z=B,i(D,L))return z;var I=y(L);return _!==void 0&&_(z,I)?(D=L,z):(D=L,B=I)}var R=!1,D,B,U=g===void 0?null:g;return[function(){return b(m())},U===null?void 0:function(){return b(U())}]},[m,g,y,_]);var E=a(d,A[0],A[1]);return o(function(){T.hasValue=!0,T.value=E},[E]),f(E),E},QS}var O2;function mj(){return O2||(O2=1,ZS.exports=pj()),ZS.exports}var gj=mj();const vj=TM(gj),U2=n=>{let e;const t=new Set,i=(d,m)=>{const g=typeof d=="function"?d(e):d;if(!Object.is(g,e)){const y=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(_=>_(e,y))}},a=()=>e,c={setState:i,getState:a,getInitialState:()=>f,subscribe:d=>(t.add(d),()=>t.delete(d))},f=e=n(i,a,c);return c},yj=(n=>n?U2(n):U2),{useSyncExternalStoreWithSelector:xj}=vj,_j=n=>n;function bj(n,e=_j,t){const i=xj(n.subscribe,n.getState,n.getInitialState,e,t);return ti.useDebugValue(i),i}const L2=(n,e)=>{const t=yj(n),i=(a,s=e)=>bj(t,a,s);return Object.assign(i,t),i},DO=((n,e)=>n?L2(n,e):L2),Aj=n=>typeof n=="object"&&typeof n.then=="function",ph=[];function BO(n,e,t=(i,a)=>i===a){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let a=0;a<i;a++)if(!t(n[a],e[a]))return!1;return!0}function NO(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of ph)if(BO(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const a={keys:e,equal:i.equal,remove:()=>{const s=ph.indexOf(a);s!==-1&&ph.splice(s,1)},promise:(Aj(n)?n:n(...e)).then(s=>{a.response=s,i.lifespan&&i.lifespan>0&&(a.timeout=setTimeout(a.remove,i.lifespan))}).catch(s=>a.error=s)};if(ph.push(a),!t)throw a.promise}const Sj=(n,e,t)=>NO(n,e,!1,t),Mj=(n,e,t)=>void NO(n,e,!0,t),Ej=n=>{if(n===void 0||n.length===0)ph.splice(0,ph.length);else{const e=ph.find(t=>BO(n,t.keys,t.equal));e&&e.remove()}};var t1={exports:{}},n1={exports:{}},i1={exports:{}},a1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I2;function Tj(){return I2||(I2=1,(function(n){function e(H,W){var q=H.length;H.push(W);e:for(;0<q;){var ge=q-1>>>1,j=H[ge];if(0<a(j,W))H[ge]=W,H[q]=j,q=ge;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var W=H[0],q=H.pop();if(q!==W){H[0]=q;e:for(var ge=0,j=H.length,fe=j>>>1;ge<fe;){var _e=2*(ge+1)-1,Ae=H[_e],De=_e+1,ot=H[De];if(0>a(Ae,q))De<j&&0>a(ot,Ae)?(H[ge]=ot,H[De]=q,ge=De):(H[ge]=Ae,H[_e]=q,ge=_e);else if(De<j&&0>a(ot,q))H[ge]=ot,H[De]=q,ge=De;else break e}}return W}function a(H,W){var q=H.sortIndex-W.sortIndex;return q!==0?q:H.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var f=[],d=[],m=1,g=null,y=3,_=!1,A=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(H){for(var W=t(d);W!==null;){if(W.callback===null)i(d);else if(W.startTime<=H)i(d),W.sortIndex=W.expirationTime,e(f,W);else break;W=t(d)}}function B(H){if(T=!1,D(H),!A)if(t(f)!==null)A=!0,ue();else{var W=t(d);W!==null&&me(B,W.startTime-H)}}var U=!1,L=-1,z=5,I=-1;function O(){return!(n.unstable_now()-I<z)}function P(){if(U){var H=n.unstable_now();I=H;var W=!0;try{e:{A=!1,T&&(T=!1,b(L),L=-1),_=!0;var q=y;try{t:{for(D(H),g=t(f);g!==null&&!(g.expirationTime>H&&O());){var ge=g.callback;if(typeof ge=="function"){g.callback=null,y=g.priorityLevel;var j=ge(g.expirationTime<=H);if(H=n.unstable_now(),typeof j=="function"){g.callback=j,D(H),W=!0;break t}g===t(f)&&i(f),D(H)}else i(f);g=t(f)}if(g!==null)W=!0;else{var fe=t(d);fe!==null&&me(B,fe.startTime-H),W=!1}}break e}finally{g=null,y=q,_=!1}W=void 0}}finally{W?Y():U=!1}}}var Y;if(typeof R=="function")Y=function(){R(P)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,se=ie.port2;ie.port1.onmessage=P,Y=function(){se.postMessage(null)}}else Y=function(){E(P,0)};function ue(){U||(U=!0,Y())}function me(H,W){L=E(function(){H(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){A||_||(A=!0,ue())},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(H){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var q=y;y=W;try{return H()}finally{y=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var q=y;y=H;try{return W()}finally{y=q}},n.unstable_scheduleCallback=function(H,W,q){var ge=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ge+q:ge):q=ge,H){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=q+j,H={id:m++,callback:W,priorityLevel:H,startTime:q,expirationTime:j,sortIndex:-1},q>ge?(H.sortIndex=q,e(d,H),t(f)===null&&H===t(d)&&(T?(b(L),L=-1):T=!0,me(B,q-ge))):(H.sortIndex=j,e(f,H),A||_||(A=!0,ue())),H},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(H){var W=y;return function(){var q=y;y=W;try{return H.apply(this,arguments)}finally{y=q}}}})(a1)),a1}var P2;function Cj(){return P2||(P2=1,i1.exports=Tj()),i1.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F2;function wj(){return F2||(F2=1,(function(n){n.exports=function(e){function t(u,h,x,M){return new Tm(u,h,x,M)}function i(){}function a(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(u){return u===null||typeof u!="object"?null:(u=uo&&u[uo]||u["@@iterator"],typeof u=="function"?u:null)}function o(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Dm?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case Qo:return"Fragment";case zs:return"Portal";case id:return"Profiler";case xf:return"StrictMode";case ad:return"Suspense";case Yc:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case ar:return(u.displayName||"Context")+".Provider";case wm:return(u._context.displayName||"Context")+".Consumer";case bf:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case sd:return h=u.displayName||null,h!==null?h:o(u.type)||"Memo";case Hs:h=u._payload,u=u._init;try{return o(u(h))}catch{}}return null}function c(u){if(Mr===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);Mr=h&&h[1]||"",fo=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mr+u+fo}function f(u,h){if(!u||Fl)return"";Fl=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var M={DetermineComponentFrameRoot:function(){try{if(h){var Ct=function(){throw Error()};if(Object.defineProperty(Ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ct,[])}catch(dn){var Bt=dn}Reflect.construct(u,[],Ct)}else{try{Ct.call()}catch(dn){Bt=dn}u.call(Ct.prototype)}}else{try{throw Error()}catch(dn){Bt=dn}(Ct=u())&&typeof Ct.catch=="function"&&Ct.catch(function(){})}}catch(dn){if(dn&&Bt&&typeof dn.stack=="string")return[dn.stack,Bt.stack]}return[null,null]}};M.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(M.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(M.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=M.DetermineComponentFrameRoot(),J=N[0],he=N[1];if(J&&he){var Te=J.split(`
`),We=he.split(`
`);for(w=M=0;M<Te.length&&!Te[M].includes("DetermineComponentFrameRoot");)M++;for(;w<We.length&&!We[w].includes("DetermineComponentFrameRoot");)w++;if(M===Te.length||w===We.length)for(M=Te.length-1,w=We.length-1;1<=M&&0<=w&&Te[M]!==We[w];)w--;for(;1<=M&&0<=w;M--,w--)if(Te[M]!==We[w]){if(M!==1||w!==1)do if(M--,w--,0>w||Te[M]!==We[w]){var vt=`
`+Te[M].replace(" at new "," at ");return u.displayName&&vt.includes("<anonymous>")&&(vt=vt.replace("<anonymous>",u.displayName)),vt}while(1<=M&&0<=w);break}}}finally{Fl=!1,Error.prepareStackTrace=x}return(x=u?u.displayName||u.name:"")?c(x):""}function d(u){switch(u.tag){case 26:case 27:case 5:return c(u.type);case 16:return c("Lazy");case 13:return c("Suspense");case 19:return c("SuspenseList");case 0:case 15:return u=f(u.type,!1),u;case 11:return u=f(u.type.render,!1),u;case 1:return u=f(u.type,!0),u;default:return""}}function m(u){try{var h="";do h+=d(u),u=u.return;while(u);return h}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function g(u){var h=u,x=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(x=h.return),u=h.return;while(u)}return h.tag===3?x:null}function y(u){if(g(u)!==u)throw Error(a(188))}function _(u){var h=u.alternate;if(!h){if(h=g(u),h===null)throw Error(a(188));return h!==u?null:u}for(var x=u,M=h;;){var w=x.return;if(w===null)break;var N=w.alternate;if(N===null){if(M=w.return,M!==null){x=M;continue}break}if(w.child===N.child){for(N=w.child;N;){if(N===x)return y(w),u;if(N===M)return y(w),h;N=N.sibling}throw Error(a(188))}if(x.return!==M.return)x=w,M=N;else{for(var J=!1,he=w.child;he;){if(he===x){J=!0,x=w,M=N;break}if(he===M){J=!0,M=w,x=N;break}he=he.sibling}if(!J){for(he=N.child;he;){if(he===x){J=!0,x=N,M=w;break}if(he===M){J=!0,M=N,x=w;break}he=he.sibling}if(!J)throw Error(a(189))}}if(x.alternate!==M)throw Error(a(190))}if(x.tag!==3)throw Error(a(188));return x.stateNode.current===x?u:h}function A(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=A(u),h!==null)return h;u=u.sibling}return null}function T(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(u.tag!==4&&(h=T(u),h!==null))return h;u=u.sibling}return null}function E(u){return{current:u}}function b(u){0>go||(u.current=Pi[go],Pi[go]=null,go--)}function R(u,h){go++,Pi[go]=u.current,u.current=h}function D(u){return u>>>=0,u===0?32:31-(ry(u)/oy|0)|0}function B(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function U(u,h){var x=u.pendingLanes;if(x===0)return 0;var M=0,w=u.suspendedLanes,N=u.pingedLanes,J=u.warmLanes;u=u.finishedLanes!==0;var he=x&134217727;return he!==0?(x=he&~w,x!==0?M=B(x):(N&=he,N!==0?M=B(N):u||(J=he&~J,J!==0&&(M=B(J))))):(he=x&~w,he!==0?M=B(he):N!==0?M=B(N):u||(J=x&~J,J!==0&&(M=B(J)))),M===0?0:h!==0&&h!==M&&(h&w)===0&&(w=M&-M,J=h&-h,w>=J||w===32&&(J&4194176)!==0)?h:M}function L(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function z(u,h){switch(u){case 1:case 2:case 4:case 8:return h+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I(){var u=Tr;return Tr<<=1,(Tr&4194176)===0&&(Tr=128),u}function O(){var u=Gl;return Gl<<=1,(Gl&62914560)===0&&(Gl=4194304),u}function P(u){for(var h=[],x=0;31>x;x++)h.push(u);return h}function Y(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ie(u,h,x,M,w,N){var J=u.pendingLanes;u.pendingLanes=x,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=x,u.entangledLanes&=x,u.errorRecoveryDisabledLanes&=x,u.shellSuspendCounter=0;var he=u.entanglements,Te=u.expirationTimes,We=u.hiddenUpdates;for(x=J&~x;0<x;){var vt=31-Xa(x),Ct=1<<vt;he[vt]=0,Te[vt]=-1;var Bt=We[vt];if(Bt!==null)for(We[vt]=null,vt=0;vt<Bt.length;vt++){var dn=Bt[vt];dn!==null&&(dn.lane&=-536870913)}x&=~Ct}M!==0&&se(u,M,0),N!==0&&w===0&&u.tag!==0&&(u.suspendedLanes|=N&~(J&~h))}function se(u,h,x){u.pendingLanes|=h,u.suspendedLanes&=~h;var M=31-Xa(h);u.entangledLanes|=h,u.entanglements[M]=u.entanglements[M]|1073741824|x&4194218}function ue(u,h){var x=u.entangledLanes|=h;for(u=u.entanglements;x;){var M=31-Xa(x),w=1<<M;w&h|u[M]&h&&(u[M]|=h),x&=~w}}function me(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function H(u){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(Fi,u,void 0,(u.current.flags&128)===128)}catch{}}function W(u){if(typeof uy=="function"&&la(u),ss&&typeof ss.setStrictMode=="function")try{ss.setStrictMode(Fi,u)}catch{}}function q(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}function ge(u,h){if(typeof u=="object"&&u!==null){var x=Wm.get(u);return x!==void 0?x:(h={value:u,source:h,stack:m(h)},Wm.set(u,h),h)}return{value:u,source:h,stack:m(h)}}function j(u,h){Vl[kl++]=tu,Vl[kl++]=Xl,Xl=u,tu=h}function fe(u,h,x){gs[vs++]=or,gs[vs++]=lr,gs[vs++]=sl,sl=u;var M=or;u=lr;var w=32-Xa(M)-1;M&=~(1<<w),x+=1;var N=32-Xa(h)+w;if(30<N){var J=w-w%5;N=(M&(1<<J)-1).toString(32),M>>=J,w-=J,or=1<<32-Xa(h)+w|x<<w|M,lr=N+u}else or=1<<N|x<<w|M,lr=u}function _e(u){u.return!==null&&(j(u,1),fe(u,1,0))}function Ae(u){for(;u===Xl;)Xl=Vl[--kl],Vl[kl]=null,tu=Vl[--kl],Vl[kl]=null;for(;u===sl;)sl=gs[--vs],gs[vs]=null,lr=gs[--vs],gs[vs]=null,or=gs[--vs],gs[vs]=null}function De(u,h){R(Cr,h),R(nu,u),R($i,null),u=Ev(h),b($i),R($i,u)}function ot(){b($i),b(nu),b(Cr)}function ve(u){u.memoizedState!==null&&R(jl,u);var h=$i.current,x=Jc(h,u.type);h!==x&&(R(nu,u),R($i,x))}function Ne(u){nu.current===u&&(b($i),b(nu)),jl.current===u&&(b(jl),Va?sr._currentValue=el:sr._currentValue2=el)}function Qe(u){var h=Error(a(418,""));throw ae(ge(h,u)),Df}function bt(u,h){if(!xa)throw Error(a(175));Jv(u.stateNode,u.type,u.memoizedProps,h,u)||Qe(u)}function ct(u){for(_a=u.return;_a;)switch(_a.tag){case 3:case 27:ca=!0;return;case 5:case 13:ca=!1;return;default:_a=_a.return}}function zt(u){if(!xa||u!==_a)return!1;if(!In)return ct(u),In=!0,!1;var h=!1;if(ci?u.tag!==3&&u.tag!==27&&(u.tag!==5||pd(u.type)&&!mn(u.type,u.memoizedProps))&&(h=!0):u.tag!==3&&(u.tag!==5||pd(u.type)&&!mn(u.type,u.memoizedProps))&&(h=!0),h&&ba&&Qe(u),ct(u),u.tag===13){if(!xa)throw Error(a(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));ba=Qv(u)}else ba=_a?jm(u.stateNode):null;return!0}function Xt(){xa&&(ba=_a=null,In=!1)}function ae(u){ks===null?ks=[u]:ks.push(u)}function Ye(){for(var u=Yl,h=cr=Yl=0;h<u;){var x=Xs[h];Xs[h++]=null;var M=Xs[h];Xs[h++]=null;var w=Xs[h];Xs[h++]=null;var N=Xs[h];if(Xs[h++]=null,M!==null&&w!==null){var J=M.pending;J===null?w.next=w:(w.next=J.next,J.next=w),M.pending=w}N!==0&&gt(x,w,N)}}function je(u,h,x,M){Xs[Yl++]=u,Xs[Yl++]=h,Xs[Yl++]=x,Xs[Yl++]=M,cr|=M,u.lanes|=M,u=u.alternate,u!==null&&(u.lanes|=M)}function Xe(u,h,x,M){return je(u,h,x,M),st(u)}function He(u,h){return je(u,null,null,h),st(u)}function gt(u,h,x){u.lanes|=x;var M=u.alternate;M!==null&&(M.lanes|=x);for(var w=!1,N=u.return;N!==null;)N.childLanes|=x,M=N.alternate,M!==null&&(M.childLanes|=x),N.tag===22&&(u=N.stateNode,u===null||u._visibility&1||(w=!0)),u=N,N=N.return;w&&h!==null&&u.tag===3&&(N=u.stateNode,w=31-Xa(x),N=N.hiddenUpdates,u=N[w],u===null?N[w]=[h]:u.push(h),h.lane=x|536870912)}function st(u){if(50<fu)throw fu=0,Rd=null,Error(a(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}function rt(u){u!==vo&&u.next===null&&(vo===null?Bf=vo=u:vo=vo.next=u),mi=!0,ql||(ql=!0,Fe(Gt))}function Ot(u,h){if(!Jm&&mi){Jm=!0;do for(var x=!1,M=Bf;M!==null;){if(u!==0){var w=M.pendingLanes;if(w===0)var N=0;else{var J=M.suspendedLanes,he=M.pingedLanes;N=(1<<31-Xa(42|u)+1)-1,N&=w&~(J&~he),N=N&201326677?N&201326677|1:N?N|2:0}N!==0&&(x=!0,Ee(M,N))}else N=Dn,N=U(M,M===Jn?N:0),(N&3)===0||L(M,N)||(x=!0,Ee(M,N));M=M.next}while(x);Jm=!1}}function Gt(){mi=ql=!1;var u=0;iu!==0&&(Rv()&&(u=iu),iu=0);for(var h=Vs(),x=null,M=Bf;M!==null;){var w=M.next,N=$(M,h);N===0?(M.next=null,x===null?Bf=w:x.next=w,w===null&&(vo=x)):(x=M,(u!==0||(N&3)!==0)&&(mi=!0)),M=w}Ot(u)}function $(u,h){for(var x=u.suspendedLanes,M=u.pingedLanes,w=u.expirationTimes,N=u.pendingLanes&-62914561;0<N;){var J=31-Xa(N),he=1<<J,Te=w[J];Te===-1?((he&x)===0||(he&M)!==0)&&(w[J]=z(he,h)):Te<=h&&(u.expiredLanes|=he),N&=~he}if(h=Jn,x=Dn,x=U(u,u===h?x:0),M=u.callbackNode,x===0||u===h&&si===2||u.cancelPendingCommit!==null)return M!==null&&M!==null&&yd(M),u.callbackNode=null,u.callbackPriority=0;if((x&3)===0||L(u,x)){if(h=x&-x,h===u.callbackPriority)return h;switch(M!==null&&yd(M),me(x)){case 2:case 8:x=cy;break;case 32:x=bd;break;case 268435456:x=uA;break;default:x=bd}return M=X.bind(null,u),x=Rf(x,M),u.callbackPriority=h,u.callbackNode=x,h}return M!==null&&M!==null&&yd(M),u.callbackPriority=2,u.callbackNode=null,2}function X(u,h){var x=u.callbackNode;if(ir()&&u.callbackNode!==x)return null;var M=Dn;return M=U(u,u===Jn?M:0),M===0?null:(qo(u,M,h),$(u,Vs()),u.callbackNode!=null&&u.callbackNode===x?X.bind(null,u):null)}function Ee(u,h){if(ir())return null;qo(u,h,!0)}function Fe(u){Lm?mo(function(){(Fn&6)!==0?Rf(_d,u):u()}):Rf(_d,u)}function ke(){return iu===0&&(iu=I()),iu}function Le(u,h){if(au===null){var x=au=[];Kl=0,ys=ke(),Wl={status:"pending",value:void 0,then:function(M){x.push(M)}}}return Kl++,h.then(xt,xt),h}function xt(){if(--Kl===0&&au!==null){Wl!==null&&(Wl.status="fulfilled");var u=au;au=null,ys=0,Wl=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function pt(u,h){var x=[],M={status:"pending",value:null,reason:null,then:function(w){x.push(w)}};return u.then(function(){M.status="fulfilled",M.value=h;for(var w=0;w<x.length;w++)(0,x[w])(h)},function(w){for(M.status="rejected",M.reason=w,w=0;w<x.length;w++)(0,x[w])(void 0)}),M}function St(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rt(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function nt(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function ut(u,h,x){var M=u.updateQueue;if(M===null)return null;if(M=M.shared,(Fn&2)!==0){var w=M.pending;return w===null?h.next=h:(h.next=w.next,w.next=h),M.pending=h,h=st(u),gt(u,null,x),h}return je(u,M,h,x),st(u)}function Dt(u,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194176)!==0)){var M=h.lanes;M&=u.pendingLanes,x|=M,h.lanes=x,ue(u,x)}}function re(u,h){var x=u.updateQueue,M=u.alternate;if(M!==null&&(M=M.updateQueue,x===M)){var w=null,N=null;if(x=x.firstBaseUpdate,x!==null){do{var J={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};N===null?w=N=J:N=N.next=J,x=x.next}while(x!==null);N===null?w=N=h:N=N.next=h}else w=N=h;x={baseState:M.baseState,firstBaseUpdate:w,lastBaseUpdate:N,shared:M.shared,callbacks:M.callbacks},u.updateQueue=x;return}u=x.lastBaseUpdate,u===null?x.firstBaseUpdate=h:u.next=h,x.lastBaseUpdate=h}function Se(){if(Jl){var u=Wl;if(u!==null)throw u}}function tt(u,h,x,M){Jl=!1;var w=u.updateQueue;yo=!1;var N=w.firstBaseUpdate,J=w.lastBaseUpdate,he=w.shared.pending;if(he!==null){w.shared.pending=null;var Te=he,We=Te.next;Te.next=null,J===null?N=We:J.next=We,J=Te;var vt=u.alternate;vt!==null&&(vt=vt.updateQueue,he=vt.lastBaseUpdate,he!==J&&(he===null?vt.firstBaseUpdate=We:he.next=We,vt.lastBaseUpdate=Te))}if(N!==null){var Ct=w.baseState;J=0,vt=We=Te=null,he=N;do{var Bt=he.lane&-536870913,dn=Bt!==he.lane;if(dn?(Dn&Bt)===Bt:(M&Bt)===Bt){Bt!==0&&Bt===ys&&(Jl=!0),vt!==null&&(vt=vt.next={lane:0,tag:he.tag,payload:he.payload,callback:null,next:null});e:{var Ts=u,pl=he;Bt=h;var ml=x;switch(pl.tag){case 1:if(Ts=pl.payload,typeof Ts=="function"){Ct=Ts.call(ml,Ct,Bt);break e}Ct=Ts;break e;case 3:Ts.flags=Ts.flags&-65537|128;case 0:if(Ts=pl.payload,Bt=typeof Ts=="function"?Ts.call(ml,Ct,Bt):Ts,Bt==null)break e;Ct=nd({},Ct,Bt);break e;case 2:yo=!0}}Bt=he.callback,Bt!==null&&(u.flags|=64,dn&&(u.flags|=8192),dn=w.callbacks,dn===null?w.callbacks=[Bt]:dn.push(Bt))}else dn={lane:Bt,tag:he.tag,payload:he.payload,callback:he.callback,next:null},vt===null?(We=vt=dn,Te=Ct):vt=vt.next=dn,J|=Bt;if(he=he.next,he===null){if(he=w.shared.pending,he===null)break;dn=he,he=dn.next,dn.next=null,w.lastBaseUpdate=dn,w.shared.pending=null}}while(!0);vt===null&&(Te=Ct),w.baseState=Te,w.firstBaseUpdate=We,w.lastBaseUpdate=vt,N===null&&(w.shared.lanes=0),Ms|=J,u.lanes=J,u.memoizedState=Ct}}function ce(u,h){if(typeof u!="function")throw Error(a(191,u));u.call(h)}function be(u,h){var x=u.callbacks;if(x!==null)for(u.callbacks=null,u=0;u<x.length;u++)ce(x[u],h)}function lt(u,h){if(rs(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var x=Object.keys(u),M=Object.keys(h);if(x.length!==M.length)return!1;for(M=0;M<x.length;M++){var w=x[M];if(!wr.call(h,w)||!rs(u[w],h[w]))return!1}return!0}function ft(u){return u=u.status,u==="fulfilled"||u==="rejected"}function it(){}function Ve(u,h,x){switch(x=u[x],x===void 0?u.push(h):x!==h&&(h.then(it,it),h=x),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,u===su?Error(a(483)):u;default:if(typeof h.status=="string")h.then(it,it);else{if(u=Jn,u!==null&&100<u.shellSuspendCounter)throw Error(a(482));u=h,u.status="pending",u.then(function(M){if(h.status==="pending"){var w=h;w.status="fulfilled",w.value=M}},function(M){if(h.status==="pending"){var w=h;w.status="rejected",w.reason=M}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,u===su?Error(a(483)):u}throw rl=h,su}}function _t(){if(rl===null)throw Error(a(459));var u=rl;return rl=null,u}function Mt(u){var h=ll;return ll+=1,ol===null&&(ol=[]),Ve(ol,u,h)}function Vt(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function jt(u,h){throw h.$$typeof===iA?Error(a(525)):(u=Object.prototype.toString.call(h),Error(a(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function oi(u){var h=u._init;return h(u._payload)}function cn(u){function h(Be,ye){if(u){var Pe=Be.deletions;Pe===null?(Be.deletions=[ye],Be.flags|=16):Pe.push(ye)}}function x(Be,ye){if(!u)return null;for(;ye!==null;)h(Be,ye),ye=ye.sibling;return null}function M(Be){for(var ye=new Map;Be!==null;)Be.key!==null?ye.set(Be.key,Be):ye.set(Be.index,Be),Be=Be.sibling;return ye}function w(Be,ye){return Be=Fs(Be,ye),Be.index=0,Be.sibling=null,Be}function N(Be,ye,Pe){return Be.index=Pe,u?(Pe=Be.alternate,Pe!==null?(Pe=Pe.index,Pe<ye?(Be.flags|=33554434,ye):Pe):(Be.flags|=33554434,ye)):(Be.flags|=1048576,ye)}function J(Be){return u&&Be.alternate===null&&(Be.flags|=33554434),Be}function he(Be,ye,Pe,mt){return ye===null||ye.tag!==6?(ye=ed(Pe,Be.mode,mt),ye.return=Be,ye):(ye=w(ye,Pe),ye.return=Be,ye)}function Te(Be,ye,Pe,mt){var kt=Pe.type;return kt===Qo?vt(Be,ye,Pe.props.children,mt,Pe.key):ye!==null&&(ye.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===Hs&&oi(kt)===ye.type)?(ye=w(ye,Pe.props),Vt(ye,Pe),ye.return=Be,ye):(ye=Sr(Pe.type,Pe.key,Pe.props,null,Be.mode,mt),Vt(ye,Pe),ye.return=Be,ye)}function We(Be,ye,Pe,mt){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Pe.containerInfo||ye.stateNode.implementation!==Pe.implementation?(ye=Cm(Pe,Be.mode,mt),ye.return=Be,ye):(ye=w(ye,Pe.children||[]),ye.return=Be,ye)}function vt(Be,ye,Pe,mt,kt){return ye===null||ye.tag!==7?(ye=wi(Pe,Be.mode,mt,kt),ye.return=Be,ye):(ye=w(ye,Pe),ye.return=Be,ye)}function Ct(Be,ye,Pe){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=ed(""+ye,Be.mode,Pe),ye.return=Be,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case yf:return Pe=Sr(ye.type,ye.key,ye.props,null,Be.mode,Pe),Vt(Pe,ye),Pe.return=Be,Pe;case zs:return ye=Cm(ye,Be.mode,Pe),ye.return=Be,ye;case Hs:var mt=ye._init;return ye=mt(ye._payload),Ct(Be,ye,Pe)}if(qc(ye)||s(ye))return ye=wi(ye,Be.mode,Pe,null),ye.return=Be,ye;if(typeof ye.then=="function")return Ct(Be,Mt(ye),Pe);if(ye.$$typeof===ar)return Ct(Be,nf(Be,ye),Pe);jt(Be,ye)}return null}function Bt(Be,ye,Pe,mt){var kt=ye!==null?ye.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return kt!==null?null:he(Be,ye,""+Pe,mt);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case yf:return Pe.key===kt?Te(Be,ye,Pe,mt):null;case zs:return Pe.key===kt?We(Be,ye,Pe,mt):null;case Hs:return kt=Pe._init,Pe=kt(Pe._payload),Bt(Be,ye,Pe,mt)}if(qc(Pe)||s(Pe))return kt!==null?null:vt(Be,ye,Pe,mt,null);if(typeof Pe.then=="function")return Bt(Be,ye,Mt(Pe),mt);if(Pe.$$typeof===ar)return Bt(Be,ye,nf(Be,Pe),mt);jt(Be,Pe)}return null}function dn(Be,ye,Pe,mt,kt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Be=Be.get(Pe)||null,he(ye,Be,""+mt,kt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case yf:return Be=Be.get(mt.key===null?Pe:mt.key)||null,Te(ye,Be,mt,kt);case zs:return Be=Be.get(mt.key===null?Pe:mt.key)||null,We(ye,Be,mt,kt);case Hs:var Ai=mt._init;return mt=Ai(mt._payload),dn(Be,ye,Pe,mt,kt)}if(qc(mt)||s(mt))return Be=Be.get(Pe)||null,vt(ye,Be,mt,kt,null);if(typeof mt.then=="function")return dn(Be,ye,Pe,Mt(mt),kt);if(mt.$$typeof===ar)return dn(Be,ye,Pe,nf(ye,mt),kt);jt(ye,mt)}return null}function Ts(Be,ye,Pe,mt){for(var kt=null,Ai=null,sn=ye,Vn=ye=0,zi=null;sn!==null&&Vn<Pe.length;Vn++){sn.index>Vn?(zi=sn,sn=null):zi=sn.sibling;var wn=Bt(Be,sn,Pe[Vn],mt);if(wn===null){sn===null&&(sn=zi);break}u&&sn&&wn.alternate===null&&h(Be,sn),ye=N(wn,ye,Vn),Ai===null?kt=wn:Ai.sibling=wn,Ai=wn,sn=zi}if(Vn===Pe.length)return x(Be,sn),In&&j(Be,Vn),kt;if(sn===null){for(;Vn<Pe.length;Vn++)sn=Ct(Be,Pe[Vn],mt),sn!==null&&(ye=N(sn,ye,Vn),Ai===null?kt=sn:Ai.sibling=sn,Ai=sn);return In&&j(Be,Vn),kt}for(sn=M(sn);Vn<Pe.length;Vn++)zi=dn(sn,Be,Vn,Pe[Vn],mt),zi!==null&&(u&&zi.alternate!==null&&sn.delete(zi.key===null?Vn:zi.key),ye=N(zi,ye,Vn),Ai===null?kt=zi:Ai.sibling=zi,Ai=zi);return u&&sn.forEach(function(Ir){return h(Be,Ir)}),In&&j(Be,Vn),kt}function pl(Be,ye,Pe,mt){if(Pe==null)throw Error(a(151));for(var kt=null,Ai=null,sn=ye,Vn=ye=0,zi=null,wn=Pe.next();sn!==null&&!wn.done;Vn++,wn=Pe.next()){sn.index>Vn?(zi=sn,sn=null):zi=sn.sibling;var Ir=Bt(Be,sn,wn.value,mt);if(Ir===null){sn===null&&(sn=zi);break}u&&sn&&Ir.alternate===null&&h(Be,sn),ye=N(Ir,ye,Vn),Ai===null?kt=Ir:Ai.sibling=Ir,Ai=Ir,sn=zi}if(wn.done)return x(Be,sn),In&&j(Be,Vn),kt;if(sn===null){for(;!wn.done;Vn++,wn=Pe.next())wn=Ct(Be,wn.value,mt),wn!==null&&(ye=N(wn,ye,Vn),Ai===null?kt=wn:Ai.sibling=wn,Ai=wn);return In&&j(Be,Vn),kt}for(sn=M(sn);!wn.done;Vn++,wn=Pe.next())wn=dn(sn,Be,Vn,wn.value,mt),wn!==null&&(u&&wn.alternate!==null&&sn.delete(wn.key===null?Vn:wn.key),ye=N(wn,ye,Vn),Ai===null?kt=wn:Ai.sibling=wn,Ai=wn);return u&&sn.forEach(function(Dd){return h(Be,Dd)}),In&&j(Be,Vn),kt}function ml(Be,ye,Pe,mt){if(typeof Pe=="object"&&Pe!==null&&Pe.type===Qo&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case yf:e:{for(var kt=Pe.key;ye!==null;){if(ye.key===kt){if(kt=Pe.type,kt===Qo){if(ye.tag===7){x(Be,ye.sibling),mt=w(ye,Pe.props.children),mt.return=Be,Be=mt;break e}}else if(ye.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===Hs&&oi(kt)===ye.type){x(Be,ye.sibling),mt=w(ye,Pe.props),Vt(mt,Pe),mt.return=Be,Be=mt;break e}x(Be,ye);break}else h(Be,ye);ye=ye.sibling}Pe.type===Qo?(mt=wi(Pe.props.children,Be.mode,mt,Pe.key),mt.return=Be,Be=mt):(mt=Sr(Pe.type,Pe.key,Pe.props,null,Be.mode,mt),Vt(mt,Pe),mt.return=Be,Be=mt)}return J(Be);case zs:e:{for(kt=Pe.key;ye!==null;){if(ye.key===kt)if(ye.tag===4&&ye.stateNode.containerInfo===Pe.containerInfo&&ye.stateNode.implementation===Pe.implementation){x(Be,ye.sibling),mt=w(ye,Pe.children||[]),mt.return=Be,Be=mt;break e}else{x(Be,ye);break}else h(Be,ye);ye=ye.sibling}mt=Cm(Pe,Be.mode,mt),mt.return=Be,Be=mt}return J(Be);case Hs:return kt=Pe._init,Pe=kt(Pe._payload),ml(Be,ye,Pe,mt)}if(qc(Pe))return Ts(Be,ye,Pe,mt);if(s(Pe)){if(kt=s(Pe),typeof kt!="function")throw Error(a(150));return Pe=kt.call(Pe),pl(Be,ye,Pe,mt)}if(typeof Pe.then=="function")return ml(Be,ye,Mt(Pe),mt);if(Pe.$$typeof===ar)return ml(Be,ye,nf(Be,Pe),mt);jt(Be,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint"?(Pe=""+Pe,ye!==null&&ye.tag===6?(x(Be,ye.sibling),mt=w(ye,Pe),mt.return=Be,Be=mt):(x(Be,ye),mt=ed(Pe,Be.mode,mt),mt.return=Be,Be=mt),J(Be)):x(Be,ye)}return function(Be,ye,Pe,mt){try{ll=0;var kt=ml(Be,ye,Pe,mt);return ol=null,kt}catch(sn){if(sn===su)throw sn;var Ai=t(29,sn,null,Be.mode);return Ai.lanes=mt,Ai.return=Be,Ai}finally{}}}function Xn(u,h){u=Da,R(ru,u),R(gi,h),Da=u|h.baseLanes}function Tn(){R(ru,Da),R(gi,gi.current)}function li(){Da=ru.current,b(gi),b(ru)}function Ui(u){var h=u.alternate;R(ea,ea.current&1),R(xs,u),ui===null&&(h===null||gi.current!==null||h.memoizedState!==null)&&(ui=u)}function da(u){if(u.tag===22){if(R(ea,ea.current),R(xs,u),ui===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&(ui=u)}}else ii()}function ii(){R(ea,ea.current),R(xs,xs.current)}function Yt(u){b(xs),ui===u&&(ui=null),b(ea)}function Xi(u){for(var h=u;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||fd(x)||hd(x)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function ai(){throw Error(a(321))}function k(u,h){if(h===null)return!1;for(var x=0;x<h.length&&x<u.length;x++)if(!rs(u[x],h[x]))return!1;return!0}function Z(u,h,x,M,w,N){return xo=N,bn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,an.H=u===null||u.memoizedState===null?fl:ja,ul=!1,N=x(M,w),ul=!1,Zl&&(N=Re(h,x,M,w)),pe(u),N}function pe(u){an.H=Ri;var h=Jt!==null&&Jt.next!==null;if(xo=0,Pn=Jt=bn=null,js=!1,Ql=0,ua=null,h)throw Error(a(300));u===null||fi||(u=u.dependencies,u!==null&&tf(u)&&(fi=!0))}function Re(u,h,x,M){bn=u;var w=0;do{if(Zl&&(ua=null),Ql=0,Zl=!1,25<=w)throw Error(a(301));if(w+=1,Pn=Jt=null,u.updateQueue!=null){var N=u.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}an.H=_s,N=h(x,M)}while(Zl);return N}function Oe(){var u=an.H,h=u.useState()[0];return h=typeof h.then=="function"?de(h):h,u=u.useState()[0],(Jt!==null?Jt.memoizedState:null)!==u&&(bn.flags|=1024),h}function Ge(){var u=Ad!==0;return Ad=0,u}function ht(u,h,x){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~x}function V(u){if(js){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}js=!1}xo=0,Pn=Jt=bn=null,Zl=!1,Ql=Ad=0,ua=null}function te(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?bn.memoizedState=Pn=u:Pn=Pn.next=u,Pn}function oe(){if(Jt===null){var u=bn.alternate;u=u!==null?u.memoizedState:null}else u=Jt.next;var h=Pn===null?bn.memoizedState:Pn.next;if(h!==null)Pn=h,Jt=u;else{if(u===null)throw bn.alternate===null?Error(a(467)):Error(a(310));Jt=u,u={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Pn===null?bn.memoizedState=Pn=u:Pn=Pn.next=u}return Pn}function de(u){var h=Ql;return Ql+=1,ua===null&&(ua=[]),u=Ve(ua,u,h),h=bn,(Pn===null?h.memoizedState:Pn.next)===null&&(h=h.alternate,an.H=h===null||h.memoizedState===null?fl:ja),u}function ne(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return de(u);if(u.$$typeof===ar)return ma(u)}throw Error(a(438,String(u)))}function $e(u){var h=null,x=bn.updateQueue;if(x!==null&&(h=x.memoCache),h==null){var M=bn.alternate;M!==null&&(M=M.updateQueue,M!==null&&(M=M.memoCache,M!=null&&(h={data:M.data.map(function(w){return w.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),x===null&&(x=Sd(),bn.updateQueue=x),x.memoCache=h,x=h.data[h.index],x===void 0)for(x=h.data[h.index]=Array(u),M=0;M<u;M++)x[M]=Mv;return h.index++,x}function ze(u,h){return typeof h=="function"?h(u):h}function qe(u){var h=oe();return Ke(h,Jt,u)}function Ke(u,h,x){var M=u.queue;if(M===null)throw Error(a(311));M.lastRenderedReducer=x;var w=u.baseQueue,N=M.pending;if(N!==null){if(w!==null){var J=w.next;w.next=N.next,N.next=J}h.baseQueue=w=N,M.pending=null}if(N=u.baseState,w===null)u.memoizedState=N;else{h=w.next;var he=J=null,Te=null,We=h,vt=!1;do{var Ct=We.lane&-536870913;if(Ct!==We.lane?(Dn&Ct)===Ct:(xo&Ct)===Ct){var Bt=We.revertLane;if(Bt===0)Te!==null&&(Te=Te.next={lane:0,revertLane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),Ct===ys&&(vt=!0);else if((xo&Bt)===Bt){We=We.next,Bt===ys&&(vt=!0);continue}else Ct={lane:0,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Te===null?(he=Te=Ct,J=N):Te=Te.next=Ct,bn.lanes|=Bt,Ms|=Bt;Ct=We.action,ul&&x(N,Ct),N=We.hasEagerState?We.eagerState:x(N,Ct)}else Bt={lane:Ct,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Te===null?(he=Te=Bt,J=N):Te=Te.next=Bt,bn.lanes|=Ct,Ms|=Ct;We=We.next}while(We!==null&&We!==h);if(Te===null?J=N:Te.next=he,!rs(N,u.memoizedState)&&(fi=!0,vt&&(x=Wl,x!==null)))throw x;u.memoizedState=N,u.baseState=J,u.baseQueue=Te,M.lastRenderedState=N}return w===null&&(M.lanes=0),[u.memoizedState,M.dispatch]}function dt(u){var h=oe(),x=h.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=u;var M=x.dispatch,w=x.pending,N=h.memoizedState;if(w!==null){x.pending=null;var J=w=w.next;do N=u(N,J.action),J=J.next;while(J!==w);rs(N,h.memoizedState)||(fi=!0),h.memoizedState=N,h.baseQueue===null&&(h.baseState=N),x.lastRenderedState=N}return[N,M]}function At(u,h,x){var M=bn,w=oe(),N=In;if(N){if(x===void 0)throw Error(a(407));x=x()}else x=h();var J=!rs((Jt||w).memoizedState,x);if(J&&(w.memoizedState=x,fi=!0),w=w.queue,Qp(en.bind(null,M,w,u),[u]),w.getSnapshot!==h||J||Pn!==null&&Pn.memoizedState.tag&1){if(M.flags|=2048,Zi(9,Ft.bind(null,M,w,x,h),{destroy:void 0},null),Jn===null)throw Error(a(349));N||(xo&60)!==0||yt(M,h,x)}return x}function yt(u,h,x){u.flags|=16384,u={getSnapshot:h,value:x},h=bn.updateQueue,h===null?(h=Sd(),bn.updateQueue=h,h.stores=[u]):(x=h.stores,x===null?h.stores=[u]:x.push(u))}function Ft(u,h,x,M){h.value=x,h.getSnapshot=M,Wt(h)&&xn(u)}function en(u,h,x){return x(function(){Wt(h)&&xn(u)})}function Wt(u){var h=u.getSnapshot;u=u.value;try{var x=h();return!rs(u,x)}catch{return!0}}function xn(u){var h=He(u,2);h!==null&&oa(h,u,2)}function Nt(u){var h=te();if(typeof u=="function"){var x=u;if(u=x(),ul){W(!0);try{x()}finally{W(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ze,lastRenderedState:u},h}function Tt(u,h,x,M){return u.baseState=x,Ke(u,Jt,typeof M=="function"?M:ze)}function Nn(u,h,x,M,w){if(Ju(u))throw Error(a(485));if(u=h.action,u!==null){var N={payload:w,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){N.listeners.push(J)}};an.T!==null?x(!0):N.isTransition=!1,M(N),x=h.pending,x===null?(N.next=h.pending=N,un(h,N)):(N.next=x.next,h.pending=x.next=N)}}function un(u,h){var x=h.action,M=h.payload,w=u.state;if(h.isTransition){var N=an.T,J={};an.T=J;try{var he=x(w,M),Te=an.S;Te!==null&&Te(J,he),qn(u,h,he)}catch(We){Ln(u,h,We)}finally{an.T=N}}else try{N=x(w,M),qn(u,h,N)}catch(We){Ln(u,h,We)}}function qn(u,h,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(M){_n(u,h,M)},function(M){return Ln(u,h,M)}):_n(u,h,x)}function _n(u,h,x){h.status="fulfilled",h.value=x,fn(h),u.state=x,h=u.pending,h!==null&&(x=h.next,x===h?u.pending=null:(x=x.next,h.next=x,un(u,x)))}function Ln(u,h,x){var M=u.pending;if(u.pending=null,M!==null){M=M.next;do h.status="rejected",h.reason=x,fn(h),h=h.next;while(h!==M)}u.action=null}function fn(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function Ht(u,h){return h}function Qn(u,h){if(In){var x=Jn.formState;if(x!==null){e:{var M=bn;if(In){if(ba){var w=Xm(ba,ca);if(w){ba=jm(w),M=Yv(w);break e}}Qe(M)}M=!1}M&&(h=x[0])}}x=te(),x.memoizedState=x.baseState=h,M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ht,lastRenderedState:h},x.queue=M,x=nm.bind(null,bn,M),M.dispatch=x,M=Nt(!1);var N=Rc.bind(null,bn,!1,M.queue);return M=te(),w={state:h,dispatch:null,action:u,pending:null},M.queue=w,x=Nn.bind(null,bn,w,N,x),w.dispatch=x,M.memoizedState=u,[h,x,!1]}function _i(u){var h=oe();return Cn(h,Jt,u)}function Cn(u,h,x){h=Ke(u,h,Ht)[0],u=qe(ze)[0],h=typeof h=="object"&&h!==null&&typeof h.then=="function"?de(h):h;var M=oe(),w=M.queue,N=w.dispatch;return x!==M.memoizedState&&(bn.flags|=2048,Zi(9,pi.bind(null,w,x),{destroy:void 0},null)),[h,N,u]}function pi(u,h){u.action=h}function Ol(u){var h=oe(),x=Jt;if(x!==null)return Cn(h,x,u);oe(),h=h.memoizedState,x=oe();var M=x.queue.dispatch;return x.memoizedState=u,[h,M,!1]}function Zi(u,h,x,M){return u={tag:u,create:h,inst:x,deps:M,next:null},h=bn.updateQueue,h===null&&(h=Sd(),bn.updateQueue=h),x=h.lastEffect,x===null?h.lastEffect=u.next=u:(M=x.next,x.next=u,u.next=M,h.lastEffect=u),u}function tv(){return oe().memoizedState}function ju(u,h,x,M){var w=te();bn.flags|=u,w.memoizedState=Zi(1|h,x,{destroy:void 0},M===void 0?null:M)}function Yu(u,h,x,M){var w=oe();M=M===void 0?null:M;var N=w.memoizedState.inst;Jt!==null&&M!==null&&k(M,Jt.memoizedState.deps)?w.memoizedState=Zi(h,x,N,M):(bn.flags|=u,w.memoizedState=Zi(1|h,x,N,M))}function Uh(u,h){ju(8390656,8,u,h)}function Qp(u,h){Yu(2048,8,u,h)}function nv(u,h){return Yu(4,2,u,h)}function qu(u,h){return Yu(4,4,u,h)}function Lh(u,h){if(typeof h=="function"){u=u();var x=h(u);return function(){typeof x=="function"?x():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function Ih(u,h,x){x=x!=null?x.concat([u]):null,Yu(4,4,Lh.bind(null,h,u),x)}function Po(){}function Ul(u,h){var x=oe();h=h===void 0?null:h;var M=x.memoizedState;return h!==null&&k(h,M[1])?M[0]:(x.memoizedState=[u,h],u)}function $p(u,h){var x=oe();h=h===void 0?null:h;var M=x.memoizedState;if(h!==null&&k(h,M[1]))return M[0];if(M=u(),ul){W(!0);try{u()}finally{W(!1)}}return x.memoizedState=[M,h],M}function Ku(u,h,x){return x===void 0||(xo&1073741824)!==0?u.memoizedState=h:(u.memoizedState=x,u=bm(),bn.lanes|=u,Ms|=u,x)}function em(u,h,x,M){return rs(x,h)?x:gi.current!==null?(u=Ku(u,x,M),rs(u,h)||(fi=!0),u):(xo&42)===0?(fi=!0,u.memoizedState=x):(u=bm(),bn.lanes|=u,Ms|=u,h)}function Cc(u,h,x,M,w){var N=po();wa(N!==0&&8>N?N:8);var J=an.T,he={};an.T=he,Rc(u,!1,h,x);try{var Te=w(),We=an.S;if(We!==null&&We(he,Te),Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var vt=pt(Te,M);Fo(u,h,vt,Li(u))}else Fo(u,h,M,Li(u))}catch(Ct){Fo(u,h,{then:function(){},status:"rejected",reason:Ct},Li())}finally{wa(N),an.T=J}}function _r(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:el,baseState:el,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ze,lastRenderedState:el},next:null};var x={};return h.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ze,lastRenderedState:x},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function Wu(){return ma(sr)}function wc(){return oe().memoizedState}function Qr(){return oe().memoizedState}function tm(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var x=Li();u=nt(x);var M=ut(h,u,x);M!==null&&(oa(M,h,x),Dt(M,h,x)),h={cache:Vo()},u.payload=h;return}h=h.return}}function Ph(u,h,x){var M=Li();x={lane:M,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Ju(u)?za(h,x):(x=Xe(u,h,x,M),x!==null&&(oa(x,u,M),zo(x,h,M)))}function nm(u,h,x){var M=Li();Fo(u,h,x,M)}function Fo(u,h,x,M){var w={lane:M,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Ju(u))za(h,w);else{var N=u.alternate;if(u.lanes===0&&(N===null||N.lanes===0)&&(N=h.lastRenderedReducer,N!==null))try{var J=h.lastRenderedState,he=N(J,x);if(w.hasEagerState=!0,w.eagerState=he,rs(he,J))return je(u,h,w,0),Jn===null&&Ye(),!1}catch{}finally{}if(x=Xe(u,h,w,M),x!==null)return oa(x,u,M),zo(x,h,M),!0}return!1}function Rc(u,h,x,M){if(M={lane:2,revertLane:ke(),action:M,hasEagerState:!1,eagerState:null,next:null},Ju(u)){if(h)throw Error(a(479))}else h=Xe(u,x,M,2),h!==null&&oa(h,u,2)}function Ju(u){var h=u.alternate;return u===bn||h!==null&&h===bn}function za(u,h){Zl=js=!0;var x=u.pending;x===null?h.next=h:(h.next=x.next,x.next=h),u.pending=h}function zo(u,h,x){if((x&4194176)!==0){var M=h.lanes;M&=u.pendingLanes,x|=M,h.lanes=x,ue(u,x)}}function Dc(u,h,x,M){h=u.memoizedState,x=x(M,h),x=x==null?h:nd({},h,x),u.memoizedState=x,u.lanes===0&&(u.updateQueue.baseState=x)}function Bc(u,h,x,M,w,N,J){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(M,N,J):h.prototype&&h.prototype.isPureReactComponent?!lt(x,M)||!lt(w,N):!0}function iv(u,h,x,M){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,M),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,M),h.state!==u&&Dr.enqueueReplaceState(h,h.state,null)}function $r(u,h){var x=h;if("ref"in h){x={};for(var M in h)M!=="ref"&&(x[M]=h[M])}if(u=u.defaultProps){x===h&&(x=nd({},x));for(var w in u)x[w]===void 0&&(x[w]=u[w])}return x}function Nc(u,h){try{var x=u.onUncaughtError;x(h.value,{componentStack:h.stack})}catch(M){setTimeout(function(){throw M})}}function Oc(u,h,x){try{var M=u.onCaughtError;M(x.value,{componentStack:x.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function Uc(u,h,x){return x=nt(x),x.tag=3,x.payload={element:null},x.callback=function(){Nc(u,h)},x}function im(u){return u=nt(u),u.tag=3,u}function av(u,h,x,M){var w=x.type.getDerivedStateFromError;if(typeof w=="function"){var N=M.value;u.payload=function(){return w(N)},u.callback=function(){Oc(h,x,M)}}var J=x.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(u.callback=function(){Oc(h,x,M),typeof w!="function"&&(hl===null?hl=new Set([this]):hl.add(this));var he=M.stack;this.componentDidCatch(M.value,{componentStack:he!==null?he:""})})}function $b(u,h,x,M,w){if(x.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){if(h=x.alternate,h!==null&&ef(h,x,w,!0),x=xs.current,x!==null){switch(x.tag){case 13:return ui===null?oo():x.alternate===null&&hi===0&&(hi=3),x.flags&=-257,x.flags|=65536,x.lanes=w,M===Of?x.flags|=16384:(h=x.updateQueue,h===null?x.updateQueue=new Set([M]):h.add(M),Pl(u,M,w)),!1;case 22:return x.flags|=65536,M===Of?x.flags|=16384:(h=x.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([M])},x.updateQueue=h):(x=h.retryQueue,x===null?h.retryQueue=new Set([M]):x.add(M)),Pl(u,M,w)),!1}throw Error(a(435,x.tag))}return Pl(u,M,w),oo(),!1}if(In)return h=xs.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=w,M!==Df&&(u=Error(a(422),{cause:M}),ae(ge(u,x)))):(M!==Df&&(h=Error(a(423),{cause:M}),ae(ge(h,x))),u=u.current.alternate,u.flags|=65536,w&=-w,u.lanes|=w,M=ge(M,x),w=Uc(u.stateNode,M,w),re(u,w),hi!==4&&(hi=2)),!1;var N=Error(a(520),{cause:M});if(N=ge(N,x),ec===null?ec=[N]:ec.push(N),hi!==4&&(hi=2),h===null)return!0;M=ge(M,x),x=h;do{switch(x.tag){case 3:return x.flags|=65536,u=w&-w,x.lanes|=u,u=Uc(x.stateNode,M,u),re(x,u),!1;case 1:if(h=x.type,N=x.stateNode,(x.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(hl===null||!hl.has(N))))return x.flags|=65536,w&=-w,x.lanes|=w,w=im(w),av(w,u,x,M),re(x,w),!1}x=x.return}while(x!==null);return!1}function pa(u,h,x,M){h.child=u===null?Rr(h,null,x,M):cl(h,u.child,x,M)}function Fh(u,h,x,M,w){x=x.render;var N=h.ref;if("ref"in M){var J={};for(var he in M)he!=="ref"&&(J[he]=M[he])}else J=M;return Go(h),M=Z(u,h,x,J,N,w),he=Ge(),u!==null&&!fi?(ht(u,h,w),eo(u,h,w)):(In&&he&&_e(h),h.flags|=1,pa(u,h,M,w),h.child)}function sv(u,h,x,M,w){if(u===null){var N=x.type;return typeof N=="function"&&!pf(N)&&N.defaultProps===void 0&&x.compare===null?(h.tag=15,h.type=N,rv(u,h,N,M,w)):(u=Sr(x.type,null,M,h,h.mode,w),u.ref=h.ref,u.return=h,h.child=u)}if(N=u.child,!lm(u,w)){var J=N.memoizedProps;if(x=x.compare,x=x!==null?x:lt,x(J,M)&&u.ref===h.ref)return eo(u,h,w)}return h.flags|=1,u=Fs(N,M),u.ref=h.ref,u.return=h,h.child=u}function rv(u,h,x,M,w){if(u!==null){var N=u.memoizedProps;if(lt(N,M)&&u.ref===h.ref)if(fi=!1,h.pendingProps=M=N,lm(u,w))(u.flags&131072)!==0&&(fi=!0);else return h.lanes=u.lanes,eo(u,h,w)}return zh(u,h,x,M,w)}function ov(u,h,x){var M=h.pendingProps,w=M.children,N=(h.stateNode._pendingVisibility&2)!==0,J=u!==null?u.memoizedState:null;if(Zu(u,h),M.mode==="hidden"||N){if((h.flags&128)!==0){if(M=J!==null?J.baseLanes|x:x,u!==null){for(w=h.child=u.child,N=0;w!==null;)N=N|w.lanes|w.childLanes,w=w.sibling;h.childLanes=N&~M}else h.childLanes=0,h.child=null;return lv(u,h,M,x)}if((x&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&Gh(h,J!==null?J.cachePool:null),J!==null?Xn(h,J):Tn(),da(h);else return h.lanes=h.childLanes=536870912,lv(u,h,J!==null?J.baseLanes|x:x,x)}else J!==null?(Gh(h,J.cachePool),Xn(h,J),ii(),h.memoizedState=null):(u!==null&&Gh(h,null),Tn(),ii());return pa(u,h,w,x),h.child}function lv(u,h,x,M){var w=um();return w=w===null?null:{parent:Va?vi._currentValue:vi._currentValue2,pool:w},h.memoizedState={baseLanes:x,cachePool:w},u!==null&&Gh(h,null),Tn(),da(h),u!==null&&ef(u,h,M,!0),null}function Zu(u,h){var x=h.ref;if(x===null)u!==null&&u.ref!==null&&(h.flags|=2097664);else{if(typeof x!="function"&&typeof x!="object")throw Error(a(284));(u===null||u.ref!==x)&&(h.flags|=2097664)}}function zh(u,h,x,M,w){return Go(h),x=Z(u,h,x,M,void 0,w),M=Ge(),u!==null&&!fi?(ht(u,h,w),eo(u,h,w)):(In&&M&&_e(h),h.flags|=1,pa(u,h,x,w),h.child)}function cv(u,h,x,M,w,N){return Go(h),h.updateQueue=null,x=Re(h,M,x,w),pe(u),M=Ge(),u!==null&&!fi?(ht(u,h,N),eo(u,h,N)):(In&&M&&_e(h),h.flags|=1,pa(u,h,x,N),h.child)}function uv(u,h,x,M,w){if(Go(h),h.stateNode===null){var N=al,J=x.contextType;typeof J=="object"&&J!==null&&(N=ma(J)),N=new x(M,N),h.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Dr,h.stateNode=N,N._reactInternals=h,N=h.stateNode,N.props=M,N.state=h.memoizedState,N.refs={},St(h),J=x.contextType,N.context=typeof J=="object"&&J!==null?ma(J):al,N.state=h.memoizedState,J=x.getDerivedStateFromProps,typeof J=="function"&&(Dc(h,x,J,M),N.state=h.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(J=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),J!==N.state&&Dr.enqueueReplaceState(N,N.state,null),tt(h,M,N,w),Se(),N.state=h.memoizedState),typeof N.componentDidMount=="function"&&(h.flags|=4194308),M=!0}else if(u===null){N=h.stateNode;var he=h.memoizedProps,Te=$r(x,he);N.props=Te;var We=N.context,vt=x.contextType;J=al,typeof vt=="object"&&vt!==null&&(J=ma(vt));var Ct=x.getDerivedStateFromProps;vt=typeof Ct=="function"||typeof N.getSnapshotBeforeUpdate=="function",he=h.pendingProps!==he,vt||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(he||We!==J)&&iv(h,N,M,J),yo=!1;var Bt=h.memoizedState;N.state=Bt,tt(h,M,N,w),Se(),We=h.memoizedState,he||Bt!==We||yo?(typeof Ct=="function"&&(Dc(h,x,Ct,M),We=h.memoizedState),(Te=yo||Bc(h,x,Te,M,Bt,We,J))?(vt||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(h.flags|=4194308)):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=M,h.memoizedState=We),N.props=M,N.state=We,N.context=J,M=Te):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),M=!1)}else{N=h.stateNode,Rt(u,h),J=h.memoizedProps,vt=$r(x,J),N.props=vt,Ct=h.pendingProps,Bt=N.context,We=x.contextType,Te=al,typeof We=="object"&&We!==null&&(Te=ma(We)),he=x.getDerivedStateFromProps,(We=typeof he=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(J!==Ct||Bt!==Te)&&iv(h,N,M,Te),yo=!1,Bt=h.memoizedState,N.state=Bt,tt(h,M,N,w),Se();var dn=h.memoizedState;J!==Ct||Bt!==dn||yo||u!==null&&u.dependencies!==null&&tf(u.dependencies)?(typeof he=="function"&&(Dc(h,x,he,M),dn=h.memoizedState),(vt=yo||Bc(h,x,vt,M,Bt,dn,Te)||u!==null&&u.dependencies!==null&&tf(u.dependencies))?(We||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(M,dn,Te),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(M,dn,Te)),typeof N.componentDidUpdate=="function"&&(h.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof N.componentDidUpdate!="function"||J===u.memoizedProps&&Bt===u.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&Bt===u.memoizedState||(h.flags|=1024),h.memoizedProps=M,h.memoizedState=dn),N.props=M,N.state=dn,N.context=Te,M=vt):(typeof N.componentDidUpdate!="function"||J===u.memoizedProps&&Bt===u.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&Bt===u.memoizedState||(h.flags|=1024),M=!1)}return N=M,Zu(u,h),M=(h.flags&128)!==0,N||M?(N=h.stateNode,x=M&&typeof x.getDerivedStateFromError!="function"?null:N.render(),h.flags|=1,u!==null&&M?(h.child=cl(h,u.child,null,w),h.child=cl(h,null,x,w)):pa(u,h,x,w),h.memoizedState=N.state,u=h.child):u=eo(u,h,w),u}function fv(u,h,x,M){return Xt(),h.flags|=256,pa(u,h,x,M),h.child}function am(u){return{baseLanes:u,cachePool:fm()}}function Qu(u,h,x){return u=u!==null?u.childLanes&~x:0,h&&(u|=Es),u}function hv(u,h,x){var M=h.pendingProps,w=!1,N=(h.flags&128)!==0,J;if((J=N)||(J=u!==null&&u.memoizedState===null?!1:(ea.current&2)!==0),J&&(w=!0,h.flags&=-129),J=(h.flags&32)!==0,h.flags&=-33,u===null){if(In){if(w?Ui(h):ii(),In){var he=ba,Te;(Te=he)&&(he=Wv(he,ca),he!==null?(h.memoizedState={dehydrated:he,treeContext:sl!==null?{id:or,overflow:lr}:null,retryLane:536870912},Te=t(18,null,null,0),Te.stateNode=he,Te.return=h,h.child=Te,_a=h,ba=null,Te=!0):Te=!1),Te||Qe(h)}if(he=h.memoizedState,he!==null&&(he=he.dehydrated,he!==null))return hd(he)?h.lanes=16:h.lanes=536870912,null;Yt(h)}return he=M.children,M=M.fallback,w?(ii(),w=h.mode,he=rm({mode:"hidden",children:he},w),M=wi(M,w,x,null),he.return=h,M.return=h,he.sibling=M,h.child=he,w=h.child,w.memoizedState=am(x),w.childLanes=Qu(u,J,x),h.memoizedState=Td,M):(Ui(h),sm(h,he))}if(Te=u.memoizedState,Te!==null&&(he=Te.dehydrated,he!==null)){if(N)h.flags&256?(Ui(h),h.flags&=-257,h=Hh(u,h,x)):h.memoizedState!==null?(ii(),h.child=u.child,h.flags|=128,h=null):(ii(),w=M.fallback,he=h.mode,M=rm({mode:"visible",children:M.children},he),w=wi(w,he,x,null),w.flags|=2,M.return=h,w.return=h,M.sibling=w,h.child=M,cl(h,u.child,null,x),M=h.child,M.memoizedState=am(x),M.childLanes=Qu(u,J,x),h.memoizedState=Td,h=w);else if(Ui(h),hd(he))J=Xv(he).digest,M=Error(a(419)),M.stack="",M.digest=J,ae({value:M,source:null,stack:null}),h=Hh(u,h,x);else if(fi||ef(u,h,x,!1),J=(x&u.childLanes)!==0,fi||J){if(J=Jn,J!==null){if(M=x&-x,(M&42)!==0)M=1;else switch(M){case 2:M=1;break;case 8:M=4;break;case 32:M=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:M=64;break;case 268435456:M=134217728;break;default:M=0}if(M=(M&(J.suspendedLanes|x))!==0?0:M,M!==0&&M!==Te.retryLane)throw Te.retryLane=M,He(u,M),oa(J,u,M),Ed}fd(he)||oo(),h=Hh(u,h,x)}else fd(he)?(h.flags|=128,h.child=u.child,h=lo.bind(null,u),jv(he,h),h=null):(u=Te.treeContext,xa&&(ba=Kv(he),_a=h,In=!0,ks=null,ca=!1,u!==null&&(gs[vs++]=or,gs[vs++]=lr,gs[vs++]=sl,or=u.id,lr=u.overflow,sl=h)),h=sm(h,M.children),h.flags|=4096);return h}return w?(ii(),w=M.fallback,he=h.mode,Te=u.child,N=Te.sibling,M=Fs(Te,{mode:"hidden",children:M.children}),M.subtreeFlags=Te.subtreeFlags&31457280,N!==null?w=Fs(N,w):(w=wi(w,he,x,null),w.flags|=2),w.return=h,M.return=h,M.sibling=w,h.child=M,M=w,w=h.child,he=u.child.memoizedState,he===null?he=am(x):(Te=he.cachePool,Te!==null?(N=Va?vi._currentValue:vi._currentValue2,Te=Te.parent!==N?{parent:N,pool:N}:Te):Te=fm(),he={baseLanes:he.baseLanes|x,cachePool:Te}),w.memoizedState=he,w.childLanes=Qu(u,J,x),h.memoizedState=Td,M):(Ui(h),x=u.child,u=x.sibling,x=Fs(x,{mode:"visible",children:M.children}),x.return=h,x.sibling=null,u!==null&&(J=h.deletions,J===null?(h.deletions=[u],h.flags|=16):J.push(u)),h.child=x,h.memoizedState=null,x)}function sm(u,h){return h=rm({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function rm(u,h){return gf(u,h,0,null)}function Hh(u,h,x){return cl(h,u.child,null,x),u=sm(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function dv(u,h,x){u.lanes|=h;var M=u.alternate;M!==null&&(M.lanes|=h),$u(u.return,h,x)}function om(u,h,x,M,w){var N=u.memoizedState;N===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:M,tail:x,tailMode:w}:(N.isBackwards=h,N.rendering=null,N.renderingStartTime=0,N.last=M,N.tail=x,N.tailMode=w)}function pv(u,h,x){var M=h.pendingProps,w=M.revealOrder,N=M.tail;if(pa(u,h,M.children,x),M=ea.current,(M&2)!==0)M=M&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&dv(u,x,h);else if(u.tag===19)dv(u,x,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}M&=1}switch(R(ea,M),w){case"forwards":for(x=h.child,w=null;x!==null;)u=x.alternate,u!==null&&Xi(u)===null&&(w=x),x=x.sibling;x=w,x===null?(w=h.child,h.child=null):(w=x.sibling,x.sibling=null),om(h,!1,w,x,N);break;case"backwards":for(x=null,w=h.child,h.child=null;w!==null;){if(u=w.alternate,u!==null&&Xi(u)===null){h.child=w;break}u=w.sibling,w.sibling=x,x=w,w=u}om(h,!0,x,null,N);break;case"together":om(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function eo(u,h,x){if(u!==null&&(h.dependencies=u.dependencies),Ms|=h.lanes,(x&h.childLanes)===0)if(u!==null){if(ef(u,h,x,!1),(x&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(a(153));if(h.child!==null){for(u=h.child,x=Fs(u,u.pendingProps),h.child=x,x.return=h;u.sibling!==null;)u=u.sibling,x=x.sibling=Fs(u,u.pendingProps),x.return=h;x.sibling=null}return h.child}function lm(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&tf(u)))}function eA(u,h,x){switch(h.tag){case 3:De(h,h.stateNode.containerInfo),Ho(h,vi,u.memoizedState.cache),Xt();break;case 27:case 5:ve(h);break;case 4:De(h,h.stateNode.containerInfo);break;case 10:Ho(h,h.type,h.memoizedProps.value);break;case 13:var M=h.memoizedState;if(M!==null)return M.dehydrated!==null?(Ui(h),h.flags|=128,null):(x&h.child.childLanes)!==0?hv(u,h,x):(Ui(h),u=eo(u,h,x),u!==null?u.sibling:null);Ui(h);break;case 19:var w=(u.flags&128)!==0;if(M=(x&h.childLanes)!==0,M||(ef(u,h,x,!1),M=(x&h.childLanes)!==0),w){if(M)return pv(u,h,x);h.flags|=128}if(w=h.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),R(ea,ea.current),M)break;return null;case 22:case 23:return h.lanes=0,ov(u,h,x);case 24:Ho(h,vi,u.memoizedState.cache)}return eo(u,h,x)}function mv(u,h,x){if(u!==null)if(u.memoizedProps!==h.pendingProps)fi=!0;else{if(!lm(u,x)&&(h.flags&128)===0)return fi=!1,eA(u,h,x);fi=(u.flags&131072)!==0}else fi=!1,In&&(h.flags&1048576)!==0&&fe(h,tu,h.index);switch(h.lanes=0,h.tag){case 16:e:{u=h.pendingProps;var M=h.elementType,w=M._init;if(M=w(M._payload),h.type=M,typeof M=="function")pf(M)?(u=$r(M,u),h.tag=1,h=uv(null,h,M,u,x)):(h.tag=0,h=zh(null,h,M,u,x));else{if(M!=null){if(w=M.$$typeof,w===bf){h.tag=11,h=Fh(null,h,M,u,x);break e}else if(w===sd){h.tag=14,h=sv(null,h,M,u,x);break e}}throw h=o(M)||M,Error(a(306,h,""))}}return h;case 0:return zh(u,h,h.type,h.pendingProps,x);case 1:return M=h.type,w=$r(M,h.pendingProps),uv(u,h,M,w,x);case 3:e:{if(De(h,h.stateNode.containerInfo),u===null)throw Error(a(387));var N=h.pendingProps;w=h.memoizedState,M=w.element,Rt(u,h),tt(h,N,null,x);var J=h.memoizedState;if(N=J.cache,Ho(h,vi,N),N!==w.cache&&Ll(h,[vi],x,!0),Se(),N=J.element,xa&&w.isDehydrated)if(w={element:N,isDehydrated:!1,cache:J.cache},h.updateQueue.baseState=w,h.memoizedState=w,h.flags&256){h=fv(u,h,N,x);break e}else if(N!==M){M=ge(Error(a(424)),h),ae(M),h=fv(u,h,N,x);break e}else for(xa&&(ba=qv(h.stateNode.containerInfo),_a=h,In=!0,ks=null,ca=!0),x=Rr(h,null,N,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Xt(),N===M){h=eo(u,h,x);break e}pa(u,h,N,x)}h=h.child}return h;case 26:if(ms)return Zu(u,h),u===null?(x=Km(h.type,null,h.pendingProps,null))?h.memoizedState=x:In||(h.stateNode=vd(h.type,h.pendingProps,Cr.current,h)):h.memoizedState=Km(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:if(ci)return ve(h),u===null&&ci&&In&&(M=h.stateNode=rr(h.type,h.pendingProps,Cr.current,$i.current,!1),_a=h,ca=!0,ba=dd(M)),M=h.pendingProps.children,u!==null||In?pa(u,h,M,x):h.child=cl(h,null,M,x),Zu(u,h),h.child;case 5:return u===null&&In&&(md(h.type,h.pendingProps,$i.current),(w=M=ba)&&(M=oA(M,h.type,h.pendingProps,ca),M!==null?(h.stateNode=M,_a=h,ba=dd(M),ca=!1,w=!0):w=!1),w||Qe(h)),ve(h),w=h.type,N=h.pendingProps,J=u!==null?u.memoizedProps:null,M=N.children,mn(w,N)?M=null:J!==null&&mn(w,J)&&(h.flags|=32),h.memoizedState!==null&&(w=Z(u,h,Oe,null,null,x),Va?sr._currentValue=w:sr._currentValue2=w),Zu(u,h),pa(u,h,M,x),h.child;case 6:return u===null&&In&&(ey(h.pendingProps,$i.current),(u=x=ba)&&(x=Ym(x,h.pendingProps,ca),x!==null?(h.stateNode=x,_a=h,ba=null,u=!0):u=!1),u||Qe(h)),null;case 13:return hv(u,h,x);case 4:return De(h,h.stateNode.containerInfo),M=h.pendingProps,u===null?h.child=cl(h,null,M,x):pa(u,h,M,x),h.child;case 11:return Fh(u,h,h.type,h.pendingProps,x);case 7:return pa(u,h,h.pendingProps,x),h.child;case 8:return pa(u,h,h.pendingProps.children,x),h.child;case 12:return pa(u,h,h.pendingProps.children,x),h.child;case 10:return M=h.pendingProps,Ho(h,h.type,M.value),pa(u,h,M.children,x),h.child;case 9:return w=h.type._context,M=h.pendingProps.children,Go(h),w=ma(w),M=M(w),h.flags|=1,pa(u,h,M,x),h.child;case 14:return sv(u,h,h.type,h.pendingProps,x);case 15:return rv(u,h,h.type,h.pendingProps,x);case 19:return pv(u,h,x);case 22:return ov(u,h,x);case 24:return Go(h),M=ma(vi),u===null?(w=um(),w===null&&(w=Jn,N=Vo(),w.pooledCache=N,N.refCount++,N!==null&&(w.pooledCacheLanes|=x),w=N),h.memoizedState={parent:M,cache:w},St(h),Ho(h,vi,w)):((u.lanes&x)!==0&&(Rt(u,h),tt(h,null,null,x),Se()),w=u.memoizedState,N=h.memoizedState,w.parent!==M?(w={parent:M,cache:M},h.memoizedState=w,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=w),Ho(h,vi,M)):(M=N.cache,Ho(h,vi,M),M!==w.cache&&Ll(h,[vi],x,!0))),pa(u,h,h.pendingProps.children,x),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function Ho(u,h,x){Va?(R(_o,h._currentValue),h._currentValue=x):(R(_o,h._currentValue2),h._currentValue2=x)}function to(u){var h=_o.current;Va?u._currentValue=h:u._currentValue2=h,b(_o)}function $u(u,h,x){for(;u!==null;){var M=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,M!==null&&(M.childLanes|=h)):M!==null&&(M.childLanes&h)!==h&&(M.childLanes|=h),u===x)break;u=u.return}}function Ll(u,h,x,M){var w=u.child;for(w!==null&&(w.return=u);w!==null;){var N=w.dependencies;if(N!==null){var J=w.child;N=N.firstContext;e:for(;N!==null;){var he=N;N=w;for(var Te=0;Te<h.length;Te++)if(he.context===h[Te]){N.lanes|=x,he=N.alternate,he!==null&&(he.lanes|=x),$u(N.return,x,u),M||(J=null);break e}N=he.next}}else if(w.tag===18){if(J=w.return,J===null)throw Error(a(341));J.lanes|=x,N=J.alternate,N!==null&&(N.lanes|=x),$u(J,x,u),J=null}else J=w.child;if(J!==null)J.return=w;else for(J=w;J!==null;){if(J===u){J=null;break}if(w=J.sibling,w!==null){w.return=J.return,J=w;break}J=J.return}w=J}}function ef(u,h,x,M){u=null;for(var w=h,N=!1;w!==null;){if(!N){if((w.flags&524288)!==0)N=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var J=w.alternate;if(J===null)throw Error(a(387));if(J=J.memoizedProps,J!==null){var he=w.type;rs(w.pendingProps.value,J.value)||(u!==null?u.push(he):u=[he])}}else if(w===jl.current){if(J=w.alternate,J===null)throw Error(a(387));J.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(u!==null?u.push(sr):u=[sr])}w=w.return}u!==null&&Ll(h,u,x,M),h.flags|=262144}function tf(u){for(u=u.firstContext;u!==null;){var h=u.context;if(!rs(Va?h._currentValue:h._currentValue2,u.memoizedValue))return!0;u=u.next}return!1}function Go(u){fr=u,bs=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function ma(u){return cm(fr,u)}function nf(u,h){return fr===null&&Go(u),cm(u,h)}function cm(u,h){var x=Va?h._currentValue:h._currentValue2;if(h={context:h,memoizedValue:x,next:null},bs===null){if(u===null)throw Error(a(308));bs=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else bs=bs.next=h;return x}function Vo(){return{controller:new ou,data:new Map,refCount:0}}function af(u){u.refCount--,u.refCount===0&&fy(hy,function(){u.controller.abort()})}function um(){var u=Br.current;return u!==null?u:Jn.pooledCache}function Gh(u,h){h===null?R(Br,Br.current):R(Br,h.pool)}function fm(){var u=um();return u===null?null:{parent:Va?vi._currentValue:vi._currentValue2,pool:u}}function $a(u){u.flags|=4}function Lc(u,h){if(u!==null&&u.child===h.child)return!1;if((h.flags&16)!==0)return!0;for(u=h.child;u!==null;){if((u.flags&13878)!==0||(u.subtreeFlags&13878)!==0)return!0;u=u.sibling}return!1}function Il(u,h,x,M){if(Qi)for(x=h.child;x!==null;){if(x.tag===5||x.tag===6)Sf(u,x.stateNode);else if(!(x.tag===4||ci&&x.tag===27)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else if(Gs)for(var w=h.child;w!==null;){if(w.tag===5){var N=w.stateNode;x&&M&&(N=Vm(N,w.type,w.memoizedProps)),Sf(u,N)}else if(w.tag===6)N=w.stateNode,x&&M&&(N=km(N,w.memoizedProps)),Sf(u,N);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)N=w.child,N!==null&&(N.return=w),Il(u,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}}function gv(u,h,x,M){if(Gs)for(var w=h.child;w!==null;){if(w.tag===5){var N=w.stateNode;x&&M&&(N=Vm(N,w.type,w.memoizedProps)),Gm(u,N)}else if(w.tag===6)N=w.stateNode,x&&M&&(N=km(N,w.memoizedProps)),Gm(u,N);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)N=w.child,N!==null&&(N.return=w),gv(u,w,!(w.memoizedProps!==null&&w.memoizedProps.mode==="manual"),!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}}function sf(u,h){if(Gs&&Lc(u,h)){u=h.stateNode;var x=u.containerInfo,M=Mf();gv(M,h,!1,!1),u.pendingChildren=M,$a(h),ud(x,M)}}function Vh(u,h,x,M){if(Qi)u.memoizedProps!==M&&$a(h);else if(Gs){var w=u.stateNode,N=u.memoizedProps;if((u=Lc(u,h))||N!==M){var J=$i.current;N=Qc(w,x,N,M,!u,null),N===w?h.stateNode=w:(ho(N,x,M,J)&&$a(h),h.stateNode=N,u?Il(N,h,!1,!1):$a(h))}else h.stateNode=w}}function kh(u,h,x){if(Om(h,x)){if(u.flags|=16777216,!ld(h,x))if(Ko())u.flags|=8192;else throw rl=Of,Nf}else u.flags&=-16777217}function Xh(u,h){if(iy(h)){if(u.flags|=16777216,!Hl(h))if(Ko())u.flags|=8192;else throw rl=Of,Nf}else u.flags&=-16777217}function Ic(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?O():536870912,u.lanes|=h,Ur|=h)}function Pc(u,h){if(!In)switch(u.tailMode){case"hidden":h=u.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?u.tail=null:x.sibling=null;break;case"collapsed":x=u.tail;for(var M=null;x!==null;)x.alternate!==null&&(M=x),x=x.sibling;M===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:M.sibling=null}}function Si(u){var h=u.alternate!==null&&u.alternate.child===u.child,x=0,M=0;if(h)for(var w=u.child;w!==null;)x|=w.lanes|w.childLanes,M|=w.subtreeFlags&31457280,M|=w.flags&31457280,w.return=u,w=w.sibling;else for(w=u.child;w!==null;)x|=w.lanes|w.childLanes,M|=w.subtreeFlags,M|=w.flags,w.return=u,w=w.sibling;return u.subtreeFlags|=M,u.childLanes=x,h}function vv(u,h,x){var M=h.pendingProps;switch(Ae(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(h),null;case 1:return Si(h),null;case 3:return x=h.stateNode,M=null,u!==null&&(M=u.memoizedState.cache),h.memoizedState.cache!==M&&(h.flags|=2048),to(vi),ot(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(u===null||u.child===null)&&(zt(h)?$a(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,ks!==null&&(hf(ks),ks=null))),sf(u,h),Si(h),null;case 26:if(ms){x=h.type;var w=h.memoizedState;return u===null?($a(h),w!==null?(Si(h),Xh(h,w)):(Si(h),kh(h,x,M))):w?w!==u.memoizedState?($a(h),Si(h),Xh(h,w)):(Si(h),h.flags&=-16777217):(Qi?u.memoizedProps!==M&&$a(h):Vh(u,h,x,M),Si(h),kh(h,x,M)),null}case 27:if(ci){if(Ne(h),x=Cr.current,w=h.type,u!==null&&h.stateNode!=null)Qi?u.memoizedProps!==M&&$a(h):Vh(u,h,w,M);else{if(!M){if(h.stateNode===null)throw Error(a(166));return Si(h),null}u=$i.current,zt(h)?bt(h,u):(u=rr(w,M,x,u,!0),h.stateNode=u,$a(h))}return Si(h),null}case 5:if(Ne(h),x=h.type,u!==null&&h.stateNode!=null)Vh(u,h,x,M);else{if(!M){if(h.stateNode===null)throw Error(a(166));return Si(h),null}u=$i.current,zt(h)?bt(h,u):(w=Nm(x,M,Cr.current,u,h),Il(w,h,!1,!1),h.stateNode=w,ho(w,x,M,u)&&$a(h))}return Si(h),kh(h,h.type,h.pendingProps),null;case 6:if(u&&h.stateNode!=null)x=u.memoizedProps,Qi?x!==M&&$a(h):Gs&&(x!==M?(h.stateNode=$n(M,Cr.current,$i.current,h),$a(h)):h.stateNode=u.stateNode);else{if(typeof M!="string"&&h.stateNode===null)throw Error(a(166));if(u=Cr.current,x=$i.current,zt(h)){if(!xa)throw Error(a(176));if(u=h.stateNode,x=h.memoizedProps,M=null,w=_a,w!==null)switch(w.tag){case 27:case 5:M=w.memoizedProps}qm(u,x,h,M)||Qe(h)}else h.stateNode=$n(M,u,x,h)}return Si(h),null;case 13:if(M=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(w=zt(h),M!==null&&M.dehydrated!==null){if(u===null){if(!w)throw Error(a(318));if(!xa)throw Error(a(344));if(w=h.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(a(317));Zv(w,h)}else Xt(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Si(h),w=!1}else ks!==null&&(hf(ks),ks=null),w=!0;if(!w)return h.flags&256?(Yt(h),h):(Yt(h),null)}if(Yt(h),(h.flags&128)!==0)return h.lanes=x,h;if(x=M!==null,u=u!==null&&u.memoizedState!==null,x){M=h.child,w=null,M.alternate!==null&&M.alternate.memoizedState!==null&&M.alternate.memoizedState.cachePool!==null&&(w=M.alternate.memoizedState.cachePool.pool);var N=null;M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(N=M.memoizedState.cachePool.pool),N!==w&&(M.flags|=2048)}return x!==u&&x&&(h.child.flags|=8192),Ic(h,h.updateQueue),Si(h),null;case 4:return ot(),sf(u,h),u===null&&Ii(h.stateNode.containerInfo),Si(h),null;case 10:return to(h.type),Si(h),null;case 19:if(b(ea),w=h.memoizedState,w===null)return Si(h),null;if(M=(h.flags&128)!==0,N=w.rendering,N===null)if(M)Pc(w,!1);else{if(hi!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(N=Xi(u),N!==null){for(h.flags|=128,Pc(w,!1),u=N.updateQueue,h.updateQueue=u,Ic(h,u),h.subtreeFlags=0,u=x,x=h.child;x!==null;)mf(x,u),x=x.sibling;return R(ea,ea.current&1|2),h.child}u=u.sibling}w.tail!==null&&Vs()>uu&&(h.flags|=128,M=!0,Pc(w,!1),h.lanes=4194304)}else{if(!M)if(u=Xi(N),u!==null){if(h.flags|=128,M=!0,u=u.updateQueue,h.updateQueue=u,Ic(h,u),Pc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!N.alternate&&!In)return Si(h),null}else 2*Vs()-w.renderingStartTime>uu&&x!==536870912&&(h.flags|=128,M=!0,Pc(w,!1),h.lanes=4194304);w.isBackwards?(N.sibling=h.child,h.child=N):(u=w.last,u!==null?u.sibling=N:h.child=N,w.last=N)}return w.tail!==null?(h=w.tail,w.rendering=h,w.tail=h.sibling,w.renderingStartTime=Vs(),h.sibling=null,u=ea.current,R(ea,M?u&1|2:u&1),h):(Si(h),null);case 22:case 23:return Yt(h),li(),M=h.memoizedState!==null,u!==null?u.memoizedState!==null!==M&&(h.flags|=8192):M&&(h.flags|=8192),M?(x&536870912)!==0&&(h.flags&128)===0&&(Si(h),h.subtreeFlags&6&&(h.flags|=8192)):Si(h),x=h.updateQueue,x!==null&&Ic(h,x.retryQueue),x=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),M=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(M=h.memoizedState.cachePool.pool),M!==x&&(h.flags|=2048),u!==null&&b(Br),null;case 24:return x=null,u!==null&&(x=u.memoizedState.cache),h.memoizedState.cache!==x&&(h.flags|=2048),to(vi),Si(h),null;case 25:return null}throw Error(a(156,h.tag))}function tA(u,h){switch(Ae(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return to(vi),ot(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return Ne(h),null;case 13:if(Yt(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(a(340));Xt()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return b(ea),null;case 4:return ot(),null;case 10:return to(h.type),null;case 22:case 23:return Yt(h),li(),u!==null&&b(Br),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return to(vi),null;case 25:return null;default:return null}}function yv(u,h){switch(Ae(h),h.tag){case 3:to(vi),ot();break;case 26:case 27:case 5:Ne(h);break;case 4:ot();break;case 13:Yt(h);break;case 19:b(ea);break;case 10:to(h.type);break;case 22:case 23:Yt(h),li(),u!==null&&b(Br);break;case 24:to(vi)}}function rf(u,h){try{var x=h.updateQueue,M=x!==null?x.lastEffect:null;if(M!==null){var w=M.next;x=w;do{if((x.tag&u)===u){M=void 0;var N=x.create,J=x.inst;M=N(),J.destroy=M}x=x.next}while(x!==w)}}catch(he){Kn(h,h.return,he)}}function ko(u,h,x){try{var M=h.updateQueue,w=M!==null?M.lastEffect:null;if(w!==null){var N=w.next;M=N;do{if((M.tag&u)===u){var J=M.inst,he=J.destroy;if(he!==void 0){J.destroy=void 0,w=h;var Te=x;try{he()}catch(We){Kn(w,Te,We)}}}M=M.next}while(M!==N)}}catch(We){Kn(h,h.return,We)}}function xv(u){var h=u.updateQueue;if(h!==null){var x=u.stateNode;try{be(h,x)}catch(M){Kn(u,u.return,M)}}}function es(u,h,x){x.props=$r(u.type,u.memoizedProps),x.state=u.memoizedState;try{x.componentWillUnmount()}catch(M){Kn(u,h,M)}}function nr(u,h){try{var x=u.ref;if(x!==null){var M=u.stateNode;switch(u.tag){case 26:case 27:case 5:var w=Wc(M);break;default:w=M}typeof x=="function"?u.refCleanup=x(w):x.current=w}}catch(N){Kn(u,h,N)}}function ts(u,h){var x=u.ref,M=u.refCleanup;if(x!==null)if(typeof M=="function")try{M()}catch(w){Kn(u,h,w)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(w){Kn(u,h,w)}else x.current=null}function hm(u){var h=u.type,x=u.memoizedProps,M=u.stateNode;try{sA(M,h,x,u)}catch(w){Kn(u,u.return,w)}}function dm(u,h,x){try{Iv(u.stateNode,u.type,x,h,u)}catch(M){Kn(u,u.return,M)}}function pm(u){return u.tag===5||u.tag===3||(ms?u.tag===26:!1)||(ci?u.tag===27:!1)||u.tag===4}function of(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||pm(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&(!ci||u.tag!==27)&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function mm(u,h,x){var M=u.tag;if(M===5||M===6)u=u.stateNode,h?Fv(x,u,h):Fm(x,u);else if(!(M===4||ci&&M===27)&&(u=u.child,u!==null))for(mm(u,h,x),u=u.sibling;u!==null;)mm(u,h,x),u=u.sibling}function no(u,h,x){var M=u.tag;if(M===5||M===6)u=u.stateNode,h?Pv(x,u,h):Uv(x,u);else if(!(M===4||ci&&M===27)&&(u=u.child,u!==null))for(no(u,h,x),u=u.sibling;u!==null;)no(u,h,x),u=u.sibling}function jh(u,h,x){u=u.containerInfo;try{$c(u,x)}catch(M){Kn(h,h.return,M)}}function lf(u,h){for(rd(u.containerInfo),hn=h;hn!==null;)if(u=hn,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,hn=h;else for(;hn!==null;){u=hn;var x=u.alternate;switch(h=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&x!==null){h=void 0;var M=u,w=x.memoizedProps;x=x.memoizedState;var N=M.stateNode;try{var J=$r(M.type,w,M.elementType===M.type);h=N.getSnapshotBeforeUpdate(J,x),N.__reactInternalSnapshotBeforeUpdate=h}catch(he){Kn(M,M.return,he)}}break;case 3:(h&1024)!==0&&Qi&&kv(u.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(a(163))}if(h=u.sibling,h!==null){h.return=u.return,hn=h;break}hn=u.return}return J=En,En=!1,J}function Yh(u,h,x){var M=x.flags;switch(x.tag){case 0:case 11:case 15:ao(u,x),M&4&&rf(5,x);break;case 1:if(ao(u,x),M&4)if(u=x.stateNode,h===null)try{u.componentDidMount()}catch(he){Kn(x,x.return,he)}else{var w=$r(x.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(w,h,u.__reactInternalSnapshotBeforeUpdate)}catch(he){Kn(x,x.return,he)}}M&64&&xv(x),M&512&&nr(x,x.return);break;case 3:if(ao(u,x),M&64&&(M=x.updateQueue,M!==null)){if(u=null,x.child!==null)switch(x.child.tag){case 27:case 5:u=Wc(x.child.stateNode);break;case 1:u=x.child.stateNode}try{be(M,u)}catch(he){Kn(x,x.return,he)}}break;case 26:if(ms){ao(u,x),M&512&&nr(x,x.return);break}case 27:case 5:ao(u,x),h===null&&M&4&&hm(x),M&512&&nr(x,x.return);break;case 12:ao(u,x);break;case 13:ao(u,x),M&4&&qh(u,x);break;case 22:if(w=x.memoizedState!==null||Nr,!w){h=h!==null&&h.memoizedState!==null||Di;var N=Nr,J=Di;Nr=w,(Di=h)&&!J?so(u,x,(x.subtreeFlags&8772)!==0):ao(u,x),Nr=N,Di=J}M&512&&(x.memoizedProps.mode==="manual"?nr(x,x.return):ts(x,x.return));break;default:ao(u,x)}}function gm(u){var h=u.alternate;h!==null&&(u.alternate=null,gm(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&aA(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function ga(u,h,x){for(x=x.child;x!==null;)Xo(u,h,x),x=x.sibling}function Xo(u,h,x){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(Fi,x)}catch{}switch(x.tag){case 26:if(ms){Di||ts(x,h),ga(u,h,x),x.memoizedState?zl(x.memoizedState):x.stateNode&&eu(x.stateNode);break}case 27:if(ci){Di||ts(x,h);var M=Kt,w=vn;Kt=x.stateNode,ga(u,h,x),il(x.stateNode),Kt=M,vn=w;break}case 5:Di||ts(x,h);case 6:if(Qi){if(M=Kt,w=vn,Kt=null,ga(u,h,x),Kt=M,vn=w,Kt!==null)if(vn)try{zv(Kt,x.stateNode)}catch(N){Kn(x,h,N)}else try{zm(Kt,x.stateNode)}catch(N){Kn(x,h,N)}}else ga(u,h,x);break;case 18:Qi&&Kt!==null&&(vn?Ef(Kt,x.stateNode):$v(Kt,x.stateNode));break;case 4:Qi?(M=Kt,w=vn,Kt=x.stateNode.containerInfo,vn=!0,ga(u,h,x),Kt=M,vn=w):(Gs&&jh(x.stateNode,x,Mf()),ga(u,h,x));break;case 0:case 11:case 14:case 15:Di||ko(2,x,h),Di||ko(4,x,h),ga(u,h,x);break;case 1:Di||(ts(x,h),M=x.stateNode,typeof M.componentWillUnmount=="function"&&es(x,h,M)),ga(u,h,x);break;case 21:ga(u,h,x);break;case 22:Di||ts(x,h),Di=(M=Di)||x.memoizedState!==null,ga(u,h,x),Di=M;break;default:ga(u,h,x)}}function qh(u,h){if(xa&&h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{cA(u)}catch(x){Kn(h,h.return,x)}}function _v(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new Wn),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new Wn),h;default:throw Error(a(435,u.tag))}}function io(u,h){var x=_v(u);h.forEach(function(M){var w=Zo.bind(null,u,M);x.has(M)||(x.add(M),M.then(w,w))})}function Ha(u,h){var x=h.deletions;if(x!==null)for(var M=0;M<x.length;M++){var w=x[M],N=u,J=h;if(Qi){var he=J;e:for(;he!==null;){switch(he.tag){case 27:case 5:Kt=he.stateNode,vn=!1;break e;case 3:Kt=he.stateNode.containerInfo,vn=!0;break e;case 4:Kt=he.stateNode.containerInfo,vn=!0;break e}he=he.return}if(Kt===null)throw Error(a(160));Xo(N,J,w),Kt=null,vn=!1}else Xo(N,J,w);N=w.alternate,N!==null&&(N.return=null),w.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)vm(h,u),h=h.sibling}function vm(u,h){var x=u.alternate,M=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Ha(h,u),ns(u),M&4&&(ko(3,u,u.return),rf(3,u),ko(5,u,u.return));break;case 1:Ha(h,u),ns(u),M&512&&(Di||x===null||ts(x,x.return)),M&64&&Nr&&(u=u.updateQueue,u!==null&&(M=u.callbacks,M!==null&&(x=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=x===null?M:x.concat(M))));break;case 26:if(ms){var w=Ti;Ha(h,u),ns(u),M&512&&(Di||x===null||ts(x,x.return)),M&4&&(M=x!==null?x.memoizedState:null,h=u.memoizedState,x===null?h===null?u.stateNode===null?u.stateNode=Cf(w,u.type,u.memoizedProps,u):wf(w,u.type,u.stateNode):u.stateNode=ty(w,h,u.memoizedProps):M!==h?(M===null?x.stateNode!==null&&eu(x.stateNode):zl(M),h===null?wf(w,u.type,u.stateNode):ty(w,h,u.memoizedProps)):h===null&&u.stateNode!==null&&dm(u,u.memoizedProps,x.memoizedProps));break}case 27:if(ci&&M&4&&u.alternate===null){w=u.stateNode;var N=u.memoizedProps;try{nl(w),sy(u.type,N,w,u)}catch(vt){Kn(u,u.return,vt)}}case 5:if(Ha(h,u),ns(u),M&512&&(Di||x===null||ts(x,x.return)),Qi){if(u.flags&32){h=u.stateNode;try{Hm(h)}catch(vt){Kn(u,u.return,vt)}}M&4&&u.stateNode!=null&&(h=u.memoizedProps,dm(u,h,x!==null?x.memoizedProps:h)),M&1024&&(Qm=!0)}break;case 6:if(Ha(h,u),ns(u),M&4&&Qi){if(u.stateNode===null)throw Error(a(162));M=u.memoizedProps,x=x!==null?x.memoizedProps:M,h=u.stateNode;try{Lv(h,x,M)}catch(vt){Kn(u,u.return,vt)}}break;case 3:if(ms?(ny(),w=Ti,Ti=gd(h.containerInfo),Ha(h,u),Ti=w):Ha(h,u),ns(u),M&4){if(Qi&&xa&&x!==null&&x.memoizedState.isDehydrated)try{lA(h.containerInfo)}catch(vt){Kn(u,u.return,vt)}if(Gs){M=h.containerInfo,x=h.pendingChildren;try{$c(M,x)}catch(vt){Kn(u,u.return,vt)}}}Qm&&(Qm=!1,bv(u));break;case 4:ms?(x=Ti,Ti=gd(u.stateNode.containerInfo),Ha(h,u),ns(u),Ti=x):(Ha(h,u),ns(u)),M&4&&Gs&&jh(u.stateNode,u,u.stateNode.pendingChildren);break;case 12:Ha(h,u),ns(u);break;case 13:Ha(h,u),ns(u),u.child.flags&8192&&u.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(Ya=Vs()),M&4&&(M=u.updateQueue,M!==null&&(u.updateQueue=null,io(u,M)));break;case 22:M&512&&(Di||x===null||ts(x,x.return)),w=u.memoizedState!==null;var J=x!==null&&x.memoizedState!==null,he=Nr,Te=Di;if(Nr=he||w,Di=Te||J,Ha(h,u),Di=Te,Nr=he,ns(u),h=u.stateNode,h._current=u,h._visibility&=-3,h._visibility|=h._pendingVisibility&2,M&8192&&(h._visibility=w?h._visibility&-2:h._visibility|1,w&&(h=Nr||Di,x===null||J||h||Fc(u)),Qi&&(u.memoizedProps===null||u.memoizedProps.mode!=="manual"))){e:if(x=null,Qi)for(h=u;;){if(h.tag===5||ms&&h.tag===26||ci&&h.tag===27){if(x===null){J=x=h;try{N=J.stateNode,w?Hv(N):Vv(J.stateNode,J.memoizedProps)}catch(vt){Kn(J,J.return,vt)}}}else if(h.tag===6){if(x===null){J=h;try{var We=J.stateNode;w?Gv(We):rA(We,J.memoizedProps)}catch(vt){Kn(J,J.return,vt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;x===h&&(x=null),h=h.return}x===h&&(x=null),h.sibling.return=h.return,h=h.sibling}}M&4&&(M=u.updateQueue,M!==null&&(x=M.retryQueue,x!==null&&(M.retryQueue=null,io(u,x))));break;case 19:Ha(h,u),ns(u),M&4&&(M=u.updateQueue,M!==null&&(u.updateQueue=null,io(u,M)));break;case 21:break;default:Ha(h,u),ns(u)}}function ns(u){var h=u.flags;if(h&2){try{if(Qi&&(!ci||u.tag!==27)){e:{for(var x=u.return;x!==null;){if(pm(x)){var M=x;break e}x=x.return}throw Error(a(160))}switch(M.tag){case 27:if(ci){var w=M.stateNode,N=of(u);no(u,N,w);break}case 5:var J=M.stateNode;M.flags&32&&(Hm(J),M.flags&=-33);var he=of(u);no(u,he,J);break;case 3:case 4:var Te=M.stateNode.containerInfo,We=of(u);mm(u,We,Te);break;default:throw Error(a(161))}}}catch(vt){Kn(u,u.return,vt)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function bv(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;bv(h),h.tag===5&&h.flags&1024&&cd(h.stateNode),u=u.sibling}}function ao(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Yh(u,h.alternate,h),h=h.sibling}function Fc(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:ko(4,h,h.return),Fc(h);break;case 1:ts(h,h.return);var x=h.stateNode;typeof x.componentWillUnmount=="function"&&es(h,h.return,x),Fc(h);break;case 26:case 27:case 5:ts(h,h.return),Fc(h);break;case 22:ts(h,h.return),h.memoizedState===null&&Fc(h);break;default:Fc(h)}u=u.sibling}}function so(u,h,x){for(x=x&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var M=h.alternate,w=u,N=h,J=N.flags;switch(N.tag){case 0:case 11:case 15:so(w,N,x),rf(4,N);break;case 1:if(so(w,N,x),M=N,w=M.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(We){Kn(M,M.return,We)}if(M=N,w=M.updateQueue,w!==null){var he=M.stateNode;try{var Te=w.shared.hiddenCallbacks;if(Te!==null)for(w.shared.hiddenCallbacks=null,w=0;w<Te.length;w++)ce(Te[w],he)}catch(We){Kn(M,M.return,We)}}x&&J&64&&xv(N),nr(N,N.return);break;case 26:case 27:case 5:so(w,N,x),x&&M===null&&J&4&&hm(N),nr(N,N.return);break;case 12:so(w,N,x);break;case 13:so(w,N,x),x&&J&4&&qh(w,N);break;case 22:N.memoizedState===null&&so(w,N,x),nr(N,N.return);break;default:so(w,N,x)}h=h.sibling}}function Kh(u,h){var x=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==x&&(u!=null&&u.refCount++,x!=null&&af(x))}function cf(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&af(u))}function ra(u,h,x,M){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)ym(u,h,x,M),h=h.sibling}function ym(u,h,x,M){var w=h.flags;switch(h.tag){case 0:case 11:case 15:ra(u,h,x,M),w&2048&&rf(9,h);break;case 3:ra(u,h,x,M),w&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&af(u)));break;case 12:if(w&2048){ra(u,h,x,M),u=h.stateNode;try{var N=h.memoizedProps,J=N.id,he=N.onPostCommit;typeof he=="function"&&he(J,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Te){Kn(h,h.return,Te)}}else ra(u,h,x,M);break;case 23:break;case 22:N=h.stateNode,h.memoizedState!==null?N._visibility&4?ra(u,h,x,M):Ca(u,h):N._visibility&4?ra(u,h,x,M):(N._visibility|=4,va(u,h,x,M,(h.subtreeFlags&10256)!==0)),w&2048&&Kh(h.alternate,h);break;case 24:ra(u,h,x,M),w&2048&&cf(h.alternate,h);break;default:ra(u,h,x,M)}}function va(u,h,x,M,w){for(w=w&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var N=u,J=h,he=x,Te=M,We=J.flags;switch(J.tag){case 0:case 11:case 15:va(N,J,he,Te,w),rf(8,J);break;case 23:break;case 22:var vt=J.stateNode;J.memoizedState!==null?vt._visibility&4?va(N,J,he,Te,w):Ca(N,J):(vt._visibility|=4,va(N,J,he,Te,w)),w&&We&2048&&Kh(J.alternate,J);break;case 24:va(N,J,he,Te,w),w&&We&2048&&cf(J.alternate,J);break;default:va(N,J,he,Te,w)}h=h.sibling}}function Ca(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var x=u,M=h,w=M.flags;switch(M.tag){case 22:Ca(x,M),w&2048&&Kh(M.alternate,M);break;case 24:Ca(x,M),w&2048&&cf(M.alternate,M);break;default:Ca(x,M)}h=h.sibling}}function Is(u){if(u.subtreeFlags&As)for(u=u.child;u!==null;)Wh(u),u=u.sibling}function Wh(u){switch(u.tag){case 26:Is(u),u.flags&As&&(u.memoizedState!==null?ay(Ti,u.memoizedState,u.memoizedProps):ka(u.type,u.memoizedProps));break;case 5:Is(u),u.flags&As&&ka(u.type,u.memoizedProps);break;case 3:case 4:if(ms){var h=Ti;Ti=gd(u.stateNode.containerInfo),Is(u),Ti=h}else Is(u);break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=As,As=16777216,Is(u),As=h):Is(u));break;default:Is(u)}}function uf(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function jo(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var x=0;x<h.length;x++){var M=h[x];hn=M,xm(M,u)}uf(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Jh(u),u=u.sibling}function Jh(u){switch(u.tag){case 0:case 11:case 15:jo(u),u.flags&2048&&ko(9,u,u.return);break;case 3:jo(u);break;case 12:jo(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&4&&(u.return===null||u.return.tag!==13)?(h._visibility&=-5,ro(u)):jo(u);break;default:jo(u)}}function ro(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var x=0;x<h.length;x++){var M=h[x];hn=M,xm(M,u)}uf(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:ko(8,h,h.return),ro(h);break;case 22:x=h.stateNode,x._visibility&4&&(x._visibility&=-5,ro(h));break;default:ro(h)}u=u.sibling}}function xm(u,h){for(;hn!==null;){var x=hn;switch(x.tag){case 0:case 11:case 15:ko(8,x,h);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var M=x.memoizedState.cachePool.pool;M!=null&&M.refCount++}break;case 24:af(x.memoizedState.cache)}if(M=x.child,M!==null)M.return=x,hn=M;else e:for(x=u;hn!==null;){M=hn;var w=M.sibling,N=M.return;if(gm(M),M===x){hn=null;break e}if(w!==null){w.return=N,hn=w;break e}hn=N}}}function zc(u){var h=Cv(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(a(364));return h}if(u=Im(u),u===null)throw Error(a(362));return u.stateNode.current}function Yo(u,h){var x=u.tag;switch(h.$$typeof){case cu:if(u.type===h.value)return!0;break;case Ys:e:{for(h=h.value,u=[u,0],x=0;x<u.length;){var M=u[x++],w=M.tag,N=u[x++],J=h[N];if(w!==5&&w!==26&&w!==27||!Zc(M)){for(;J!=null&&Yo(M,J);)N++,J=h[N];if(N===h.length){h=!0;break e}else for(M=M.child;M!==null;)u.push(M,N),M=M.sibling}}h=!1}return h;case bi:if((x===5||x===26||x===27)&&Bv(u.stateNode,h.value))return!0;break;case Or:if((x===5||x===6||x===26||x===27)&&(u=Dv(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case hr:if((x===5||x===26||x===27)&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function _m(u){switch(u.$$typeof){case cu:return"<"+(o(u.value)||"Unknown")+">";case Ys:return":has("+(_m(u)||"")+")";case bi:return'[role="'+u.value+'"]';case Or:return'"'+u.value+'"';case hr:return'[data-testname="'+u.value+'"]';default:throw Error(a(365))}}function is(u,h){var x=[];u=[u,0];for(var M=0;M<u.length;){var w=u[M++],N=w.tag,J=u[M++],he=h[J];if(N!==5&&N!==26&&N!==27||!Zc(w)){for(;he!=null&&Yo(w,he);)J++,he=h[J];if(J===h.length)x.push(w);else for(w=w.child;w!==null;)u.push(w,J),w=w.sibling}}return x}function ff(u,h){if(!tl)throw Error(a(363));u=zc(u),u=is(u,h),h=[],u=Array.from(u);for(var x=0;x<u.length;){var M=u[x++],w=M.tag;if(w===5||w===26||w===27)Zc(M)||h.push(M.stateNode);else for(M=M.child;M!==null;)u.push(M),M=M.sibling}return h}function Li(){if((Fn&2)!==0&&Dn!==0)return Dn&-Dn;if(an.T!==null){var u=ys;return u!==0?u:ke()}return wv()}function bm(){Es===0&&(Es=(Dn&536870912)===0||In?I():536870912);var u=xs.current;return u!==null&&(u.flags|=32),Es}function oa(u,h,x){(u===Jn&&si===2||u.cancelPendingCommit!==null)&&(ya(u,0),as(u,Dn,Es,!1)),Y(u,x),((Fn&2)===0||u!==Jn)&&(u===Jn&&((Fn&2)===0&&(bo|=x),hi===4&&as(u,Dn,Es,!1)),rt(u))}function qo(u,h,x){if((Fn&6)!==0)throw Error(a(327));var M=!x&&(h&60)===0&&(h&u.expiredLanes)===0||L(u,h),w=M?Sm(u,h):Qh(u,h,!0),N=M;do{if(w===0){Ss&&!M&&as(u,h,0,!1);break}else if(w===6)as(u,h,0,!Ks);else{if(x=u.current.alternate,N&&!Hc(x)){w=Qh(u,h,!1),N=!1;continue}if(w===2){if(N=h,u.errorRecoveryDisabledLanes&N)var J=0;else J=u.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){h=J;e:{var he=u;w=ec;var Te=xa&&he.current.memoizedState.isDehydrated;if(Te&&(ya(he,J).flags|=256),J=Qh(he,J,!1),J!==2){if(ta&&!Te){he.errorRecoveryDisabledLanes|=N,bo|=N,w=4;break e}N=Bi,Bi=w,N!==null&&hf(N)}w=J}if(N=!1,w!==2)continue}}if(w===1){ya(u,0),as(u,h,0,!0);break}e:{switch(M=u,w){case 0:case 1:throw Error(a(345));case 4:if((h&4194176)===h){as(M,h,Es,!Ks);break e}break;case 2:Bi=null;break;case 3:case 5:break;default:throw Error(a(329))}if(M.finishedWork=x,M.finishedLanes=h,(h&62914560)===h&&(N=Ya+300-Vs(),10<N)){if(as(M,h,Es,!Ks),U(M,0)!==0)break e;M.timeoutHandle=Yi(Zh.bind(null,M,x,Bi,Lf,Cd,h,Es,bo,Ur,Ks,2,-0,0),N);break e}Zh(M,x,Bi,Lf,Cd,h,Es,bo,Ur,Ks,0,-0,0)}}break}while(!0);rt(u)}function hf(u){Bi===null?Bi=u:Bi.push.apply(Bi,u)}function Zh(u,h,x,M,w,N,J,he,Te,We,vt,Ct,Bt){var dn=h.subtreeFlags;if((dn&8192||(dn&16785408)===16785408)&&(Um(),Wh(h),h=qi(),h!==null)){u.cancelPendingCommit=h(Wo.bind(null,u,x,M,w,J,he,Te,1,Ct,Bt)),as(u,N,J,!We);return}Wo(u,x,M,w,J,he,Te,vt,Ct,Bt)}function Hc(u){for(var h=u;;){var x=h.tag;if((x===0||x===11||x===15)&&h.flags&16384&&(x=h.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var M=0;M<x.length;M++){var w=x[M],N=w.getSnapshot;w=w.value;try{if(!rs(N(),w))return!1}catch{return!1}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function as(u,h,x,M){h&=~Uf,h&=~bo,u.suspendedLanes|=h,u.pingedLanes&=~h,M&&(u.warmLanes|=h),M=u.expirationTimes;for(var w=h;0<w;){var N=31-Xa(w),J=1<<N;M[N]=-1,w&=~J}x!==0&&se(u,x,h)}function df(){return(Fn&6)===0?(Ot(0),!1):!0}function Gc(){if(Zt!==null){if(si===0)var u=Zt.return;else u=Zt,bs=fr=null,V(u),ol=null,ll=0,u=Zt;for(;u!==null;)yv(u.alternate,u),u=u.return;Zt=null}}function ya(u,h){u.finishedWork=null,u.finishedLanes=0;var x=u.timeoutHandle;x!==$o&&(u.timeoutHandle=$o,od(x)),x=u.cancelPendingCommit,x!==null&&(u.cancelPendingCommit=null,x()),Gc(),Jn=u,Zt=x=Fs(u.current,null),Dn=h,si=0,Ra=null,Ks=!1,Ss=L(u,h),ta=!1,Ur=Es=Uf=bo=Ms=hi=0,Bi=ec=null,Cd=!1,(h&8)!==0&&(h|=h&32);var M=u.entangledLanes;if(M!==0)for(u=u.entanglements,M&=h;0<M;){var w=31-Xa(M),N=1<<w;h|=u[w],M&=~N}return Da=h,Ye(),x}function hs(u,h){bn=null,an.H=Ri,h===su?(h=_t(),si=3):h===Nf?(h=_t(),si=4):si=h===Ed?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Ra=h,Zt===null&&(hi=1,Nc(u,ge(h,u.current)))}function Ko(){var u=xs.current;return u===null?!0:(Dn&4194176)===Dn?ui===null:(Dn&62914560)===Dn||(Dn&536870912)!==0?u===ui:!1}function br(){var u=an.H;return an.H=Ri,u===null?Ri:u}function Ar(){var u=an.A;return an.A=lu,u}function oo(){hi=4,Ks||(Dn&4194176)!==Dn&&xs.current!==null||(Ss=!0),(Ms&134217727)===0&&(bo&134217727)===0||Jn===null||as(Jn,Dn,Es,!1)}function Qh(u,h,x){var M=Fn;Fn|=2;var w=br(),N=Ar();(Jn!==u||Dn!==h)&&(Lf=null,ya(u,h)),h=!1;var J=hi;e:do try{if(si!==0&&Zt!==null){var he=Zt,Te=Ra;switch(si){case 8:Gc(),J=6;break e;case 3:case 2:case 6:xs.current===null&&(h=!0);var We=si;if(si=0,Ra=null,Ps(u,he,Te,We),x&&Ss){J=0;break e}break;default:We=si,si=0,Ra=null,Ps(u,he,Te,We)}}Am(),J=hi;break}catch(vt){hs(u,vt)}while(!0);return h&&u.shellSuspendCounter++,bs=fr=null,Fn=M,an.H=w,an.A=N,Zt===null&&(Jn=null,Dn=0,Ye()),J}function Am(){for(;Zt!==null;)Ei(Zt)}function Sm(u,h){var x=Fn;Fn|=2;var M=br(),w=Ar();Jn!==u||Dn!==h?(Lf=null,uu=Vs()+500,ya(u,h)):Ss=L(u,h);e:do try{if(si!==0&&Zt!==null){h=Zt;var N=Ra;t:switch(si){case 1:si=0,Ra=null,Ps(u,h,N,1);break;case 2:if(ft(N)){si=0,Ra=null,Gn(h);break}h=function(){si===2&&Jn===u&&(si=7),rt(u)},N.then(h,h);break e;case 3:si=7;break e;case 4:si=5;break e;case 7:ft(N)?(si=0,Ra=null,Gn(h)):(si=0,Ra=null,Ps(u,h,N,7));break;case 5:var J=null;switch(Zt.tag){case 26:J=Zt.memoizedState;case 5:case 27:var he=Zt,Te=he.type,We=he.pendingProps;if(J?Hl(J):ld(Te,We)){si=0,Ra=null;var vt=he.sibling;if(vt!==null)Zt=vt;else{var Ct=he.return;Ct!==null?(Zt=Ct,ds(Ct)):Zt=null}break t}}si=0,Ra=null,Ps(u,h,N,5);break;case 6:si=0,Ra=null,Ps(u,h,N,6);break;case 8:Gc(),hi=6;break e;default:throw Error(a(462))}}Ga();break}catch(Bt){hs(u,Bt)}while(!0);return bs=fr=null,an.H=M,an.A=w,Fn=x,Zt!==null?0:(Jn=null,Dn=0,Ye(),hi)}function Ga(){for(;Zt!==null&&!ly();)Ei(Zt)}function Ei(u){var h=mv(u.alternate,u,Da);u.memoizedProps=u.pendingProps,h===null?ds(u):Zt=h}function Gn(u){var h=u,x=h.alternate;switch(h.tag){case 15:case 0:h=cv(x,h,h.pendingProps,h.type,void 0,Dn);break;case 11:h=cv(x,h,h.pendingProps,h.type.render,h.ref,Dn);break;case 5:V(h);default:yv(x,h),h=Zt=mf(h,Da),h=mv(x,h,Da)}u.memoizedProps=u.pendingProps,h===null?ds(u):Zt=h}function Ps(u,h,x,M){bs=fr=null,V(h),ol=null,ll=0;var w=h.return;try{if($b(u,w,h,x,Dn)){hi=1,Nc(u,ge(x,u.current)),Zt=null;return}}catch(N){if(w!==null)throw Zt=w,N;hi=1,Nc(u,ge(x,u.current)),Zt=null;return}h.flags&32768?(In||M===1?u=!0:Ss||(Dn&536870912)!==0?u=!1:(Ks=u=!0,(M===2||M===3||M===6)&&(M=xs.current,M!==null&&M.tag===13&&(M.flags|=16384))),$h(h,u)):ds(h)}function ds(u){var h=u;do{if((h.flags&32768)!==0){$h(h,Ks);return}u=h.return;var x=vv(h.alternate,h,Da);if(x!==null){Zt=x;return}if(h=h.sibling,h!==null){Zt=h;return}Zt=h=u}while(h!==null);hi===0&&(hi=5)}function $h(u,h){do{var x=tA(u.alternate,u);if(x!==null){x.flags&=32767,Zt=x;return}if(x=u.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!h&&(u=u.sibling,u!==null)){Zt=u;return}Zt=u=x}while(u!==null);hi=6,Zt=null}function Wo(u,h,x,M,w,N,J,he,Te,We){var vt=an.T,Ct=po();try{wa(2),an.T=null,Av(u,h,x,M,Ct,w,N,J,he,Te,We)}finally{an.T=vt,wa(Ct)}}function Av(u,h,x,M,w,N,J,he){do ir();while(Lr!==null);if((Fn&6)!==0)throw Error(a(327));var Te=u.finishedWork;if(M=u.finishedLanes,Te===null)return null;if(u.finishedWork=null,u.finishedLanes=0,Te===u.current)throw Error(a(177));u.callbackNode=null,u.callbackPriority=0,u.cancelPendingCommit=null;var We=Te.lanes|Te.childLanes;if(We|=cr,ie(u,M,We,N,J,he),u===Jn&&(Zt=Jn=null,Dn=0),(Te.subtreeFlags&10256)===0&&(Te.flags&10256)===0||dr||(dr=!0,dl=We,wd=x,co(bd,function(){return ir(),null})),x=(Te.flags&15990)!==0,(Te.subtreeFlags&15990)!==0||x?(x=an.T,an.T=null,N=po(),wa(2),J=Fn,Fn|=4,lf(u,Te),vm(Te,u),Tv(u.containerInfo),u.current=Te,Yh(u,Te.alternate,Te),xd(),Fn=J,wa(N),an.T=x):u.current=Te,dr?(dr=!1,Lr=u,tc=M):Mm(u,We),We=u.pendingLanes,We===0&&(hl=null),H(Te.stateNode),rt(u),h!==null)for(w=u.onRecoverableError,Te=0;Te<h.length;Te++)We=h[Te],w(We.value,{componentStack:We.stack});return(tc&3)!==0&&ir(),We=u.pendingLanes,(M&4194218)!==0&&(We&42)!==0?u===Rd?fu++:(fu=0,Rd=u):fu=0,Ot(0),null}function Mm(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,af(h)))}function ir(){if(Lr!==null){var u=Lr,h=dl;dl=0;var x=me(tc),M=32>x?32:x;x=an.T;var w=po();try{if(wa(M),an.T=null,Lr===null)var N=!1;else{M=wd,wd=null;var J=Lr,he=tc;if(Lr=null,tc=0,(Fn&6)!==0)throw Error(a(331));var Te=Fn;if(Fn|=4,Jh(J.current),ym(J,J.current,he,M),Fn=Te,Ot(0,!1),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(Fi,J)}catch{}N=!0}return N}finally{wa(w),an.T=x,Mm(u,h)}}return!1}function Vc(u,h,x){h=ge(x,h),h=Uc(u.stateNode,h,2),u=ut(u,h,2),u!==null&&(Y(u,2),rt(u))}function Kn(u,h,x){if(u.tag===3)Vc(u,u,x);else for(;h!==null;){if(h.tag===3){Vc(h,u,x);break}else if(h.tag===1){var M=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(hl===null||!hl.has(M))){u=ge(x,u),x=im(2),M=ut(h,x,2),M!==null&&(av(x,M,h,u),Y(M,2),rt(M));break}}h=h.return}}function Pl(u,h,x){var M=u.pingCache;if(M===null){M=u.pingCache=new qs;var w=new Set;M.set(h,w)}else w=M.get(h),w===void 0&&(w=new Set,M.set(h,w));w.has(x)||(ta=!0,w.add(x),u=Em.bind(null,u,h,x),h.then(u,u))}function Em(u,h,x){var M=u.pingCache;M!==null&&M.delete(h),u.pingedLanes|=u.suspendedLanes&x,u.warmLanes&=~x,Jn===u&&(Dn&x)===x&&(hi===4||hi===3&&(Dn&62914560)===Dn&&300>Vs()-Ya?(Fn&2)===0&&ya(u,0):Uf|=x,Ur===Dn&&(Ur=0)),rt(u)}function Jo(u,h){h===0&&(h=O()),u=He(u,h),u!==null&&(Y(u,h),rt(u))}function lo(u){var h=u.memoizedState,x=0;h!==null&&(x=h.retryLane),Jo(u,x)}function Zo(u,h){var x=0;switch(u.tag){case 13:var M=u.stateNode,w=u.memoizedState;w!==null&&(x=w.retryLane);break;case 19:M=u.stateNode;break;case 22:M=u.stateNode._retryCache;break;default:throw Error(a(314))}M!==null&&M.delete(h),Jo(u,x)}function co(u,h){return Rf(u,h)}function Tm(u,h,x,M){this.tag=u,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pf(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Fs(u,h){var x=u.alternate;return x===null?(x=t(u.tag,h,u.key,u.mode),x.elementType=u.elementType,x.type=u.type,x.stateNode=u.stateNode,x.alternate=u,u.alternate=x):(x.pendingProps=h,x.type=u.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=u.flags&31457280,x.childLanes=u.childLanes,x.lanes=u.lanes,x.child=u.child,x.memoizedProps=u.memoizedProps,x.memoizedState=u.memoizedState,x.updateQueue=u.updateQueue,h=u.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=u.sibling,x.index=u.index,x.ref=u.ref,x.refCleanup=u.refCleanup,x}function mf(u,h){u.flags&=31457282;var x=u.alternate;return x===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=x.childLanes,u.lanes=x.lanes,u.child=x.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=x.memoizedProps,u.memoizedState=x.memoizedState,u.updateQueue=x.updateQueue,u.type=x.type,h=x.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function Sr(u,h,x,M,w,N){var J=0;if(M=u,typeof u=="function")pf(u)&&(J=1);else if(typeof u=="string")J=ms&&ci?Tf(u,x,$i.current)?26:Er(u)?27:5:ms?Tf(u,x,$i.current)?26:5:ci&&Er(u)?27:5;else e:switch(u){case Qo:return wi(x.children,w,N,h);case xf:J=8,w|=24;break;case id:return u=t(12,x,h,w|2),u.elementType=id,u.lanes=N,u;case ad:return u=t(13,x,h,w),u.elementType=ad,u.lanes=N,u;case Yc:return u=t(19,x,h,w),u.elementType=Yc,u.lanes=N,u;case Rm:return gf(x,w,N,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case _f:case ar:J=10;break e;case wm:J=9;break e;case bf:J=11;break e;case sd:J=14;break e;case Hs:J=16,M=null;break e}J=29,x=Error(a(130,u===null?"null":typeof u,"")),M=null}return h=t(J,x,h,w),h.elementType=u,h.type=M,h.lanes=N,h}function wi(u,h,x,M){return u=t(7,u,M,h),u.lanes=x,u}function gf(u,h,x,M){u=t(22,u,M,h),u.elementType=Rm,u.lanes=x;var w={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var N=w._current;if(N===null)throw Error(a(456));if((w._pendingVisibility&2)===0){var J=He(N,2);J!==null&&(w._pendingVisibility|=2,oa(J,N,2))}},attach:function(){var N=w._current;if(N===null)throw Error(a(456));if((w._pendingVisibility&2)!==0){var J=He(N,2);J!==null&&(w._pendingVisibility&=-3,oa(J,N,2))}}};return u.stateNode=w,u}function ed(u,h,x){return u=t(6,u,null,h),u.lanes=x,u}function Cm(u,h,x){return h=t(4,u.children!==null?u.children:[],u.key,h),h.lanes=x,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function nA(u,h,x,M,w,N,J,he){this.tag=1,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=$o,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=P(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P(0),this.hiddenUpdates=P(null),this.identifierPrefix=M,this.onUncaughtError=w,this.onCaughtError=N,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function Sv(u,h,x,M,w,N,J,he,Te,We,vt,Ct){return u=new nA(u,h,x,J,he,Te,We,Ct),h=1,N===!0&&(h|=24),N=t(3,null,null,h),u.current=N,N.stateNode=u,h=Vo(),h.refCount++,u.pooledCache=h,h.refCount++,N.memoizedState={element:M,isDehydrated:x,cache:h},St(N),u}function ji(u){return u?(u=al,u):al}function td(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(a(188)):(u=Object.keys(u).join(","),Error(a(268,u)));return u=_(h),u=u!==null?A(u):null,u===null?null:Wc(u.stateNode)}function kc(u,h,x,M,w,N){w=ji(w),M.context===null?M.context=w:M.pendingContext=w,M=nt(h),M.payload={element:x},N=N===void 0?null:N,N!==null&&(M.callback=N),x=ut(u,M,h),x!==null&&(oa(x,u,h),Dt(x,u,h))}function Xc(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var x=u.retryLane;u.retryLane=x!==0&&x<h?x:h}}function vf(u,h){Xc(u,h),(u=u.alternate)&&Xc(u,h)}var pn={},jc=Ip(),ps=Cj(),nd=Object.assign,iA=Symbol.for("react.element"),yf=Symbol.for("react.transitional.element"),zs=Symbol.for("react.portal"),Qo=Symbol.for("react.fragment"),xf=Symbol.for("react.strict_mode"),id=Symbol.for("react.profiler"),_f=Symbol.for("react.provider"),wm=Symbol.for("react.consumer"),ar=Symbol.for("react.context"),bf=Symbol.for("react.forward_ref"),ad=Symbol.for("react.suspense"),Yc=Symbol.for("react.suspense_list"),sd=Symbol.for("react.memo"),Hs=Symbol.for("react.lazy"),Rm=Symbol.for("react.offscreen"),Mv=Symbol.for("react.memo_cache_sentinel"),uo=Symbol.iterator,Dm=Symbol.for("react.client.reference"),an=jc.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Mr,fo,Fl=!1,qc=Array.isArray,Bm=e.rendererVersion,Af=e.rendererPackageName,Kc=e.extraDevToolsConfig,Wc=e.getPublicInstance,Ev=e.getRootHostContext,Jc=e.getChildHostContext,rd=e.prepareForCommit,Tv=e.resetAfterCommit,Nm=e.createInstance,Sf=e.appendInitialChild,ho=e.finalizeInitialChildren,mn=e.shouldSetTextContent,$n=e.createTextInstance,Yi=e.scheduleTimeout,od=e.cancelTimeout,$o=e.noTimeout,Va=e.isPrimaryRenderer;e.warnsIfNotActing;var Qi=e.supportsMutation,Gs=e.supportsPersistence,xa=e.supportsHydration,Cv=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Ii=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var wa=e.setCurrentUpdatePriority,po=e.getCurrentUpdatePriority,wv=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Rv=e.shouldAttemptEagerTransition,aA=e.detachDeletedInstance;e.requestPostPaintCallback;var Om=e.maySuspendCommit,ld=e.preloadInstance,Um=e.startSuspendingCommit,ka=e.suspendInstance,qi=e.waitForCommitToBeReady,el=e.NotPendingTransition,sr=e.HostTransitionContext,cd=e.resetFormInstance;e.bindToConsole;var Lm=e.supportsMicrotasks,mo=e.scheduleMicrotask,tl=e.supportsTestSelectors,Im=e.findFiberRoot,Pm=e.getBoundingRect,Dv=e.getTextContent,Zc=e.isHiddenSubtree,Bv=e.matchAccessibilityRole,Nv=e.setFocusIfFocusable,Ov=e.setupIntersectionObserver,Uv=e.appendChild,Fm=e.appendChildToContainer,Lv=e.commitTextUpdate,sA=e.commitMount,Iv=e.commitUpdate,Pv=e.insertBefore,Fv=e.insertInContainerBefore,zm=e.removeChild,zv=e.removeChildFromContainer,Hm=e.resetTextContent,Hv=e.hideInstance,Gv=e.hideTextInstance,Vv=e.unhideInstance,rA=e.unhideTextInstance,kv=e.clearContainer,Qc=e.cloneInstance,Mf=e.createContainerChildSet,Gm=e.appendChildToContainerChildSet,ud=e.finalizeContainerChildren,$c=e.replaceContainerChildren,Vm=e.cloneHiddenInstance,km=e.cloneHiddenTextInstance,fd=e.isSuspenseInstancePending,hd=e.isSuspenseInstanceFallback,Xv=e.getSuspenseInstanceFallbackErrorDetails,jv=e.registerSuspenseInstanceRetry,Xm=e.canHydrateFormStateMarker,Yv=e.isFormStateMarkerMatching,jm=e.getNextHydratableSibling,dd=e.getFirstHydratableChild,qv=e.getFirstHydratableChildWithinContainer,Kv=e.getFirstHydratableChildWithinSuspenseInstance,oA=e.canHydrateInstance,Ym=e.canHydrateTextInstance,Wv=e.canHydrateSuspenseInstance,Jv=e.hydrateInstance,qm=e.hydrateTextInstance,Zv=e.hydrateSuspenseInstance,Qv=e.getNextHydratableInstanceAfterSuspenseInstance,lA=e.commitHydratedContainer,cA=e.commitHydratedSuspenseInstance,$v=e.clearSuspenseBoundary,Ef=e.clearSuspenseBoundaryFromContainer,pd=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var md=e.validateHydratableInstance,ey=e.validateHydratableTextInstance,ms=e.supportsResources,Tf=e.isHostHoistableType,gd=e.getHoistableRoot,Km=e.getResource,ty=e.acquireResource,zl=e.releaseResource,Cf=e.hydrateHoistable,wf=e.mountHoistable,eu=e.unmountHoistable,vd=e.createHoistableInstance,ny=e.prepareToCommitHoistables,iy=e.mayResourceSuspendCommit,Hl=e.preloadResource,ay=e.suspendResource,ci=e.supportsSingletons,rr=e.resolveSingletonInstance,nl=e.clearSingleton,sy=e.acquireSingletonInstance,il=e.releaseSingletonInstance,Er=e.isHostSingletonType,Pi=[],go=-1,al={},Xa=Math.clz32?Math.clz32:D,ry=Math.log,oy=Math.LN2,Tr=128,Gl=4194304,Rf=ps.unstable_scheduleCallback,yd=ps.unstable_cancelCallback,ly=ps.unstable_shouldYield,xd=ps.unstable_requestPaint,Vs=ps.unstable_now,_d=ps.unstable_ImmediatePriority,cy=ps.unstable_UserBlockingPriority,bd=ps.unstable_NormalPriority,uA=ps.unstable_IdlePriority,uy=ps.log,la=ps.unstable_setDisableYieldValue,Fi=null,ss=null,rs=typeof Object.is=="function"?Object.is:q,Wm=new WeakMap,Vl=[],kl=0,Xl=null,tu=0,gs=[],vs=0,sl=null,or=1,lr="",$i=E(null),nu=E(null),Cr=E(null),jl=E(null),_a=null,ba=null,In=!1,ks=null,ca=!1,Df=Error(a(519)),Xs=[],Yl=0,cr=0,Bf=null,vo=null,ql=!1,mi=!1,Jm=!1,iu=0,au=null,Kl=0,ys=0,Wl=null,yo=!1,Jl=!1,wr=Object.prototype.hasOwnProperty,su=Error(a(460)),Nf=Error(a(474)),Of={then:function(){}},rl=null,ol=null,ll=0,cl=cn(!0),Rr=cn(!1),gi=E(null),ru=E(0),xs=E(null),ui=null,ea=E(0),xo=0,bn=null,Jt=null,Pn=null,js=!1,Zl=!1,ul=!1,Ad=0,Ql=0,ua=null,ur=0,Sd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Ri={readContext:ma,use:ne,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useLayoutEffect:ai,useInsertionEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useSyncExternalStore:ai,useId:ai};Ri.useCacheRefresh=ai,Ri.useMemoCache=ai,Ri.useHostTransitionStatus=ai,Ri.useFormState=ai,Ri.useActionState=ai,Ri.useOptimistic=ai;var fl={readContext:ma,use:ne,useCallback:function(u,h){return te().memoizedState=[u,h===void 0?null:h],u},useContext:ma,useEffect:Uh,useImperativeHandle:function(u,h,x){x=x!=null?x.concat([u]):null,ju(4194308,4,Lh.bind(null,h,u),x)},useLayoutEffect:function(u,h){return ju(4194308,4,u,h)},useInsertionEffect:function(u,h){ju(4,2,u,h)},useMemo:function(u,h){var x=te();h=h===void 0?null:h;var M=u();if(ul){W(!0);try{u()}finally{W(!1)}}return x.memoizedState=[M,h],M},useReducer:function(u,h,x){var M=te();if(x!==void 0){var w=x(h);if(ul){W(!0);try{x(h)}finally{W(!1)}}}else w=h;return M.memoizedState=M.baseState=w,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:w},M.queue=u,u=u.dispatch=Ph.bind(null,bn,u),[M.memoizedState,u]},useRef:function(u){var h=te();return u={current:u},h.memoizedState=u},useState:function(u){u=Nt(u);var h=u.queue,x=nm.bind(null,bn,h);return h.dispatch=x,[u.memoizedState,x]},useDebugValue:Po,useDeferredValue:function(u,h){var x=te();return Ku(x,u,h)},useTransition:function(){var u=Nt(!1);return u=Cc.bind(null,bn,u.queue,!0,!1),te().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,x){var M=bn,w=te();if(In){if(x===void 0)throw Error(a(407));x=x()}else{if(x=h(),Jn===null)throw Error(a(349));(Dn&60)!==0||yt(M,h,x)}w.memoizedState=x;var N={value:x,getSnapshot:h};return w.queue=N,Uh(en.bind(null,M,N,u),[u]),M.flags|=2048,Zi(9,Ft.bind(null,M,N,x,h),{destroy:void 0},null),x},useId:function(){var u=te(),h=Jn.identifierPrefix;if(In){var x=lr,M=or;x=(M&~(1<<32-Xa(M)-1)).toString(32)+x,h=":"+h+"R"+x,x=Ad++,0<x&&(h+="H"+x.toString(32)),h+=":"}else x=ur++,h=":"+h+"r"+x.toString(32)+":";return u.memoizedState=h},useCacheRefresh:function(){return te().memoizedState=tm.bind(null,bn)}};fl.useMemoCache=$e,fl.useHostTransitionStatus=Wu,fl.useFormState=Qn,fl.useActionState=Qn,fl.useOptimistic=function(u){var h=te();h.memoizedState=h.baseState=u;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=x,h=Rc.bind(null,bn,!0,x),x.dispatch=h,[u,h]};var ja={readContext:ma,use:ne,useCallback:Ul,useContext:ma,useEffect:Qp,useImperativeHandle:Ih,useInsertionEffect:nv,useLayoutEffect:qu,useMemo:$p,useReducer:qe,useRef:tv,useState:function(){return qe(ze)},useDebugValue:Po,useDeferredValue:function(u,h){var x=oe();return em(x,Jt.memoizedState,u,h)},useTransition:function(){var u=qe(ze)[0],h=oe().memoizedState;return[typeof u=="boolean"?u:de(u),h]},useSyncExternalStore:At,useId:wc};ja.useCacheRefresh=Qr,ja.useMemoCache=$e,ja.useHostTransitionStatus=Wu,ja.useFormState=_i,ja.useActionState=_i,ja.useOptimistic=function(u,h){var x=oe();return Tt(x,Jt,u,h)};var _s={readContext:ma,use:ne,useCallback:Ul,useContext:ma,useEffect:Qp,useImperativeHandle:Ih,useInsertionEffect:nv,useLayoutEffect:qu,useMemo:$p,useReducer:dt,useRef:tv,useState:function(){return dt(ze)},useDebugValue:Po,useDeferredValue:function(u,h){var x=oe();return Jt===null?Ku(x,u,h):em(x,Jt.memoizedState,u,h)},useTransition:function(){var u=dt(ze)[0],h=oe().memoizedState;return[typeof u=="boolean"?u:de(u),h]},useSyncExternalStore:At,useId:wc};_s.useCacheRefresh=Qr,_s.useMemoCache=$e,_s.useHostTransitionStatus=Wu,_s.useFormState=Ol,_s.useActionState=Ol,_s.useOptimistic=function(u,h){var x=oe();return Jt!==null?Tt(x,Jt,u,h):(x.baseState=u,[u,x.queue.dispatch])};var Dr={isMounted:function(u){return(u=u._reactInternals)?g(u)===u:!1},enqueueSetState:function(u,h,x){u=u._reactInternals;var M=Li(),w=nt(M);w.payload=h,x!=null&&(w.callback=x),h=ut(u,w,M),h!==null&&(oa(h,u,M),Dt(h,u,M))},enqueueReplaceState:function(u,h,x){u=u._reactInternals;var M=Li(),w=nt(M);w.tag=1,w.payload=h,x!=null&&(w.callback=x),h=ut(u,w,M),h!==null&&(oa(h,u,M),Dt(h,u,M))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var x=Li(),M=nt(x);M.tag=2,h!=null&&(M.callback=h),h=ut(u,M,x),h!==null&&(oa(h,u,x),Dt(h,u,x))}},Md=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Ed=Error(a(461)),fi=!1,Td={dehydrated:null,treeContext:null,retryLane:0},_o=E(null),fr=null,bs=null,ou=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(x,M){u.push(M)}};this.abort=function(){h.aborted=!0,u.forEach(function(x){return x()})}},fy=ps.unstable_scheduleCallback,hy=ps.unstable_NormalPriority,vi={$$typeof:ar,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Zm=an.S;an.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&Le(u,h),Zm!==null&&Zm(u,h)};var Br=E(null),Nr=!1,Di=!1,Qm=!1,Wn=typeof WeakSet=="function"?WeakSet:Set,hn=null,En=!1,Kt=null,vn=!1,Ti=null,As=8192,lu={getCacheForType:function(u){var h=ma(vi),x=h.data.get(u);return x===void 0&&(x=u(),h.data.set(u,x)),x}},cu=0,Ys=1,bi=2,hr=3,Or=4;if(typeof Symbol=="function"&&Symbol.for){var $l=Symbol.for;cu=$l("selector.component"),Ys=$l("selector.has_pseudo_class"),bi=$l("selector.role"),hr=$l("selector.test_id"),Or=$l("selector.text")}var qs=typeof WeakMap=="function"?WeakMap:Map,Fn=0,Jn=null,Zt=null,Dn=0,si=0,Ra=null,Ks=!1,Ss=!1,ta=!1,Da=0,hi=0,Ms=0,bo=0,Uf=0,Es=0,Ur=0,ec=null,Bi=null,Cd=!1,Ya=0,uu=1/0,Lf=null,hl=null,dr=!1,Lr=null,tc=0,dl=0,wd=null,fu=0,Rd=null;return pn.attemptContinuousHydration=function(u){if(u.tag===13){var h=He(u,67108864);h!==null&&oa(h,u,67108864),vf(u,67108864)}},pn.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=Li(),x=He(u,h);x!==null&&oa(x,u,h),vf(u,h)}},pn.attemptSynchronousHydration=function(u){switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=B(u.pendingLanes);if(h!==0){for(u.pendingLanes|=2,u.entangledLanes|=2;h;){var x=1<<31-Xa(h);u.entanglements[1]|=x,h&=~x}rt(u),(Fn&6)===0&&(uu=Vs()+500,Ot(0))}}break;case 13:h=He(u,2),h!==null&&oa(h,u,2),df(),vf(u,2)}},pn.batchedUpdates=function(u,h){return u(h)},pn.createComponentSelector=function(u){return{$$typeof:cu,value:u}},pn.createContainer=function(u,h,x,M,w,N,J,he,Te,We){return Sv(u,h,!1,null,x,M,N,J,he,Te,We,null)},pn.createHasPseudoClassSelector=function(u){return{$$typeof:Ys,value:u}},pn.createHydrationContainer=function(u,h,x,M,w,N,J,he,Te,We,vt,Ct,Bt){return u=Sv(x,M,!0,u,w,N,he,Te,We,vt,Ct,Bt),u.context=ji(null),x=u.current,M=Li(),w=nt(M),w.callback=h??null,ut(x,w,M),u.current.lanes=M,Y(u,M),rt(u),u},pn.createPortal=function(u,h,x){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:M==null?null:""+M,children:u,containerInfo:h,implementation:x}},pn.createRoleSelector=function(u){return{$$typeof:bi,value:u}},pn.createTestNameSelector=function(u){return{$$typeof:hr,value:u}},pn.createTextSelector=function(u){return{$$typeof:Or,value:u}},pn.defaultOnCaughtError=function(u){console.error(u)},pn.defaultOnRecoverableError=function(u){Md(u)},pn.defaultOnUncaughtError=function(u){Md(u)},pn.deferredUpdates=function(u){var h=an.T,x=po();try{return wa(32),an.T=null,u()}finally{wa(x),an.T=h}},pn.discreteUpdates=function(u,h,x,M,w){var N=an.T,J=po();try{return wa(2),an.T=null,u(h,x,M,w)}finally{wa(J),an.T=N,Fn===0&&(uu=Vs()+500)}},pn.findAllNodes=ff,pn.findBoundingRects=function(u,h){if(!tl)throw Error(a(363));h=ff(u,h),u=[];for(var x=0;x<h.length;x++)u.push(Pm(h[x]));for(h=u.length-1;0<h;h--){x=u[h];for(var M=x.x,w=M+x.width,N=x.y,J=N+x.height,he=h-1;0<=he;he--)if(h!==he){var Te=u[he],We=Te.x,vt=We+Te.width,Ct=Te.y,Bt=Ct+Te.height;if(M>=We&&N>=Ct&&w<=vt&&J<=Bt){u.splice(h,1);break}else if(M!==We||x.width!==Te.width||Bt<N||Ct>J){if(!(N!==Ct||x.height!==Te.height||vt<M||We>w)){We>M&&(Te.width+=We-M,Te.x=M),vt<w&&(Te.width=w-We),u.splice(h,1);break}}else{Ct>N&&(Te.height+=Ct-N,Te.y=N),Bt<J&&(Te.height=J-Ct),u.splice(h,1);break}}}return u},pn.findHostInstance=td,pn.findHostInstanceWithNoPortals=function(u){return u=_(u),u=u!==null?T(u):null,u===null?null:Wc(u.stateNode)},pn.findHostInstanceWithWarning=function(u){return td(u)},pn.flushPassiveEffects=ir,pn.flushSyncFromReconciler=function(u){var h=Fn;Fn|=1;var x=an.T,M=po();try{if(wa(2),an.T=null,u)return u()}finally{wa(M),an.T=x,Fn=h,(Fn&6)===0&&Ot(0)}},pn.flushSyncWork=df,pn.focusWithin=function(u,h){if(!tl)throw Error(a(363));for(u=zc(u),h=is(u,h),h=Array.from(h),u=0;u<h.length;){var x=h[u++],M=x.tag;if(!Zc(x)){if((M===5||M===26||M===27)&&Nv(x.stateNode))return!0;for(x=x.child;x!==null;)h.push(x),x=x.sibling}}return!1},pn.getFindAllNodesFailureDescription=function(u,h){if(!tl)throw Error(a(363));var x=0,M=[];u=[zc(u),0];for(var w=0;w<u.length;){var N=u[w++],J=N.tag,he=u[w++],Te=h[he];if((J!==5&&J!==26&&J!==27||!Zc(N))&&(Yo(N,Te)&&(M.push(_m(Te)),he++,he>x&&(x=he)),he<h.length))for(N=N.child;N!==null;)u.push(N,he),N=N.sibling}if(x<h.length){for(u=[];x<h.length;x++)u.push(_m(h[x]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},pn.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 27:case 5:return Wc(u.child.stateNode);default:return u.child.stateNode}},pn.injectIntoDevTools=function(){var u={bundleType:0,version:Bm,rendererPackageName:Af,currentDispatcherRef:an,findFiberByHostInstance:Cv,reconcilerVersion:"19.0.0"};if(Kc!==null&&(u.rendererConfig=Kc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{Fi=h.inject(u),ss=h}catch{}u=!!h.checkDCE}}return u},pn.isAlreadyRendering=function(){return!1},pn.observeVisibleRects=function(u,h,x,M){if(!tl)throw Error(a(363));u=ff(u,h);var w=Ov(u,x,M).disconnect;return{disconnect:function(){w()}}},pn.shouldError=function(){return null},pn.shouldSuspend=function(){return!1},pn.startHostTransition=function(u,h,x,M){if(u.tag!==5)throw Error(a(476));var w=_r(u).queue;Cc(u,w,h,el,x===null?i:function(){var N=_r(u).next.queue;return Fo(u,N,{},Li()),x(M)})},pn.updateContainer=function(u,h,x,M){var w=h.current,N=Li();return kc(w,N,u,h,x,M),N},pn.updateContainerSync=function(u,h,x,M){return h.tag===0&&ir(),kc(h.current,2,u,h,x,M),2},pn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(n1)),n1.exports}var z2;function Rj(){return z2||(z2=1,t1.exports=wj()),t1.exports}var Dj=Rj();const Bj=TM(Dj);var s1={exports:{}},r1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H2;function Nj(){return H2||(H2=1,(function(n){function e(H,W){var q=H.length;H.push(W);e:for(;0<q;){var ge=q-1>>>1,j=H[ge];if(0<a(j,W))H[ge]=W,H[q]=j,q=ge;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var W=H[0],q=H.pop();if(q!==W){H[0]=q;e:for(var ge=0,j=H.length,fe=j>>>1;ge<fe;){var _e=2*(ge+1)-1,Ae=H[_e],De=_e+1,ot=H[De];if(0>a(Ae,q))De<j&&0>a(ot,Ae)?(H[ge]=ot,H[De]=q,ge=De):(H[ge]=Ae,H[_e]=q,ge=_e);else if(De<j&&0>a(ot,q))H[ge]=ot,H[De]=q,ge=De;else break e}}return W}function a(H,W){var q=H.sortIndex-W.sortIndex;return q!==0?q:H.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var f=[],d=[],m=1,g=null,y=3,_=!1,A=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(H){for(var W=t(d);W!==null;){if(W.callback===null)i(d);else if(W.startTime<=H)i(d),W.sortIndex=W.expirationTime,e(f,W);else break;W=t(d)}}function B(H){if(T=!1,D(H),!A)if(t(f)!==null)A=!0,ue();else{var W=t(d);W!==null&&me(B,W.startTime-H)}}var U=!1,L=-1,z=5,I=-1;function O(){return!(n.unstable_now()-I<z)}function P(){if(U){var H=n.unstable_now();I=H;var W=!0;try{e:{A=!1,T&&(T=!1,b(L),L=-1),_=!0;var q=y;try{t:{for(D(H),g=t(f);g!==null&&!(g.expirationTime>H&&O());){var ge=g.callback;if(typeof ge=="function"){g.callback=null,y=g.priorityLevel;var j=ge(g.expirationTime<=H);if(H=n.unstable_now(),typeof j=="function"){g.callback=j,D(H),W=!0;break t}g===t(f)&&i(f),D(H)}else i(f);g=t(f)}if(g!==null)W=!0;else{var fe=t(d);fe!==null&&me(B,fe.startTime-H),W=!1}}break e}finally{g=null,y=q,_=!1}W=void 0}}finally{W?Y():U=!1}}}var Y;if(typeof R=="function")Y=function(){R(P)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,se=ie.port2;ie.port1.onmessage=P,Y=function(){se.postMessage(null)}}else Y=function(){E(P,0)};function ue(){U||(U=!0,Y())}function me(H,W){L=E(function(){H(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){A||_||(A=!0,ue())},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(H){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var q=y;y=W;try{return H()}finally{y=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var q=y;y=H;try{return W()}finally{y=q}},n.unstable_scheduleCallback=function(H,W,q){var ge=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ge+q:ge):q=ge,H){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=q+j,H={id:m++,callback:W,priorityLevel:H,startTime:q,expirationTime:j,sortIndex:-1},q>ge?(H.sortIndex=q,e(d,H),t(f)===null&&H===t(d)&&(T?(b(L),L=-1):T=!0,me(B,q-ge))):(H.sortIndex=j,e(f,H),A||_||(A=!0,ue())),H},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(H){var W=y;return function(){var q=y;y=W;try{return H.apply(this,arguments)}finally{y=q}}}})(r1)),r1}var G2;function Oj(){return G2||(G2=1,s1.exports=Nj()),s1.exports}var V2=Oj();function sT(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const a=sT(i,e,t);if(a)return a;i=e?null:i.sibling}}function OO(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const rT=OO(G.createContext(null));class UO extends G.Component{render(){return G.createElement(rT.Provider,{value:this._reactInternals},this.props.children)}}function LO(){const n=G.useContext(rT);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=G.useId();return G.useMemo(()=>{for(const t of[n,n?.alternate]){if(!t)continue;const i=sT(t,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}const Uj=Symbol.for("react.context"),Lj=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===Uj;function Ij(){const n=LO(),[e]=G.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;Lj(i)&&i!==rT&&!e.has(i)&&e.set(i,G.use(OO(i))),t=t.return}return e}function Pj(){const n=Ij();return G.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>G.createElement(e,null,G.createElement(t.Provider,{...i,value:n.get(t)})),e=>G.createElement(UO,{...e})),[n])}function IO(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const PO=n=>n&&n.isOrthographicCamera,Fj=n=>n&&n.hasOwnProperty("current"),zj=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),K0=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?G.useLayoutEffect:G.useEffect;function oT(n){const e=G.useRef(n);return K0(()=>void(e.current=n),[n]),e}function Hj(){const n=LO(),e=Pj();return G.useMemo(()=>({children:t})=>{const a=!!sT(n,!0,s=>s.type===G.StrictMode)?G.StrictMode:G.Fragment;return ee.jsx(a,{children:ee.jsx(e,{children:t})})},[n,e])}function Gj({set:n}){return K0(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const Vj=(n=>(n=class extends G.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function FO(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function ip(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const Ni={obj:n=>n===Object(n)&&!Ni.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:a=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Ni.str(n)||Ni.num(n)||Ni.boo(n))return n===e;const s=Ni.obj(n);if(s&&i==="reference")return n===e;const o=Ni.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let c;for(c in n)if(!(c in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(c in a?e:n)if(!Ni.equ(n[c],e[c],{strict:a,objects:"reference"}))return!1}else for(c in a?e:n)if(n[c]!==e[c])return!1;if(Ni.und(c)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function kj(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function Xj(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const zO=["children","key","ref"];function jj(n){const e={};for(const t in n)zO.includes(t)||(e[t]=n[t]);return e}function Y_(n,e,t,i){const a=n;let s=a?.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:jj(i),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=s)),s}function x0(n,e){let t=n[e];if(!e.includes("-"))return{root:n,key:e,target:t};t=n;for(const a of e.split("-")){var i;e=a,n=t,t=(i=t)==null?void 0:i[e]}return{root:n,key:e,target:t}}const k2=/-\d+$/;function q_(n,e){if(Ni.str(e.props.attach)){if(k2.test(e.props.attach)){const a=e.props.attach.replace(k2,""),{root:s,key:o}=x0(n.object,a);Array.isArray(s[o])||(s[o]=[])}const{root:t,key:i}=x0(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else Ni.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function K_(n,e){if(Ni.str(e.props.attach)){const{root:t,key:i}=x0(n.object,e.props.attach),a=e.previousAttach;a===void 0?delete t[i]:t[i]=a}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const pM=[...zO,"args","dispose","attach","object","onUpdate","dispose"],X2=new Map;function Yj(n){let e=X2.get(n.constructor);try{e||(e=new n.constructor,X2.set(n.constructor,e))}catch{}return e}function qj(n,e){const t={};for(const i in e)if(!pM.includes(i)&&!Ni.equ(e[i],n.props[i])){t[i]=e[i];for(const a in e)a.startsWith(`${i}-`)&&(t[a]=e[a])}for(const i in n.props){if(pM.includes(i)||e.hasOwnProperty(i))continue;const{root:a,key:s}=x0(n.object,i);if(a.constructor&&a.constructor.length===0){const o=Yj(a);Ni.und(o)||(t[s]=o[s])}else t[s]=0}return t}const Kj=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Wj=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function xl(n,e){var t;const i=n.__r3f,a=i&&IO(i).getState(),s=i?.eventCount;for(const c in e){let f=e[c];if(pM.includes(c))continue;if(i&&Wj.test(c)){typeof f=="function"?i.handlers[c]=f:delete i.handlers[c],i.eventCount=Object.keys(i.handlers).length;continue}if(f===void 0)continue;let{root:d,key:m,target:g}=x0(n,c);if(g instanceof Bp&&f instanceof Bp)g.mask=f.mask;else if(g instanceof Et&&zj(f))g.set(f);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&f!=null&&f.constructor&&g.constructor===f.constructor)g.copy(f);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(f))typeof g.fromArray=="function"?g.fromArray(f):g.set(...f);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof f=="number")typeof g.setScalar=="function"?g.setScalar(f):g.set(f);else{var o;d[m]=f,a&&!a.linear&&Kj.includes(m)&&(o=d[m])!=null&&o.isTexture&&d[m].format===sa&&d[m].type===Us&&(d[m].colorSpace=Wa)}}if(i!=null&&i.parent&&a!=null&&a.internal&&(t=i.object)!=null&&t.isObject3D&&s!==i.eventCount){const c=i.object,f=a.internal.interaction.indexOf(c);f>-1&&a.internal.interaction.splice(f,1),i.eventCount&&c.raycast!==null&&a.internal.interaction.push(c)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Kp(i),n}function Kp(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function HO(n,e){n.manual||(PO(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const Rs=n=>n?.isObject3D;function Cx(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function GO(n,e,t,i){const a=t.get(e);a&&(t.delete(e),t.size===0&&(n.delete(i),a.target.releasePointerCapture(i)))}function Jj(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,a)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(a)}),t.capturedMap.forEach((i,a)=>{GO(t.capturedMap,e,i,a)})}function Zj(n){function e(f){const{internal:d}=n.getState(),m=f.offsetX-d.initialClick[0],g=f.offsetY-d.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function t(f){return f.filter(d=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=d.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function i(f,d){const m=n.getState(),g=new Set,y=[],_=d?d(m.internal.interaction):m.internal.interaction;for(let b=0;b<_.length;b++){const R=ip(_[b]);R&&(R.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(f,m);function A(b){const R=ip(b);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var D;R.events.compute==null||R.events.compute(f,R,(D=R.previousRoot)==null?void 0:D.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(b,!0):[]}let T=_.flatMap(A).sort((b,R)=>{const D=ip(b.object),B=ip(R.object);return!D||!B?b.distance-R.distance:B.events.priority-D.events.priority||b.distance-R.distance}).filter(b=>{const R=Cx(b);return g.has(R)?!1:(g.add(R),!0)});m.events.filter&&(T=m.events.filter(T,m));for(const b of T){let R=b.object;for(;R;){var E;(E=R.__r3f)!=null&&E.eventCount&&y.push({...b,eventObject:R}),R=R.parent}}if("pointerId"in f&&m.internal.capturedMap.has(f.pointerId))for(let b of m.internal.capturedMap.get(f.pointerId).values())g.has(Cx(b.intersection))||y.push(b.intersection);return y}function a(f,d,m,g){if(f.length){const y={stopped:!1};for(const _ of f){let A=ip(_.object);if(A||_.object.traverseAncestors(T=>{const E=ip(T);if(E)return A=E,!1}),A){const{raycaster:T,pointer:E,camera:b,internal:R}=A,D=new Q(E.x,E.y,0).unproject(b),B=O=>{var P,Y;return(P=(Y=R.capturedMap.get(O))==null?void 0:Y.has(_.eventObject))!=null?P:!1},U=O=>{const P={intersection:_,target:d.target};R.capturedMap.has(O)?R.capturedMap.get(O).set(_.eventObject,P):R.capturedMap.set(O,new Map([[_.eventObject,P]])),d.target.setPointerCapture(O)},L=O=>{const P=R.capturedMap.get(O);P&&GO(R.capturedMap,_.eventObject,P,O)};let z={};for(let O in d){let P=d[O];typeof P!="function"&&(z[O]=P)}let I={..._,...z,pointer:E,intersections:f,stopped:y.stopped,delta:m,unprojectedPoint:D,ray:T.ray,camera:b,stopPropagation(){const O="pointerId"in d&&R.capturedMap.get(d.pointerId);if((!O||O.has(_.eventObject))&&(I.stopped=y.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(P=>P.eventObject===_.eventObject))){const P=f.slice(0,f.indexOf(_));s([...P,_])}},target:{hasPointerCapture:B,setPointerCapture:U,releasePointerCapture:L},currentTarget:{hasPointerCapture:B,setPointerCapture:U,releasePointerCapture:L},nativeEvent:d};if(g(I),y.stopped===!0)break}}}return f}function s(f){const{internal:d}=n.getState();for(const m of d.hovered.values())if(!f.length||!f.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const y=m.eventObject.__r3f;if(d.hovered.delete(Cx(m)),y!=null&&y.eventCount){const _=y.handlers,A={...m,intersections:f};_.onPointerOut==null||_.onPointerOut(A),_.onPointerLeave==null||_.onPointerLeave(A)}}}function o(f,d){for(let m=0;m<d.length;m++){const g=d[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(f)}}function c(f){switch(f){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return d=>{const{internal:m}=n.getState();"pointerId"in d&&m.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(d.pointerId)&&(m.capturedMap.delete(d.pointerId),s([]))})}}return function(m){const{onPointerMissed:g,internal:y}=n.getState();y.lastEvent.current=m;const _=f==="onPointerMove",A=f==="onClick"||f==="onContextMenu"||f==="onDoubleClick",E=i(m,_?t:void 0),b=A?e(m):0;f==="onPointerDown"&&(y.initialClick=[m.offsetX,m.offsetY],y.initialHits=E.map(D=>D.eventObject)),A&&!E.length&&b<=2&&(o(m,y.interaction),g&&g(m)),_&&s(E);function R(D){const B=D.eventObject,U=B.__r3f;if(!(U!=null&&U.eventCount))return;const L=U.handlers;if(_){if(L.onPointerOver||L.onPointerEnter||L.onPointerOut||L.onPointerLeave){const z=Cx(D),I=y.hovered.get(z);I?I.stopped&&D.stopPropagation():(y.hovered.set(z,D),L.onPointerOver==null||L.onPointerOver(D),L.onPointerEnter==null||L.onPointerEnter(D))}L.onPointerMove==null||L.onPointerMove(D)}else{const z=L[f];z?(!A||y.initialHits.includes(B))&&(o(m,y.interaction.filter(I=>!y.initialHits.includes(I))),z(D)):A&&y.initialHits.includes(B)&&o(m,y.interaction.filter(I=>!y.initialHits.includes(I)))}}a(E,m,b,R)}}return{handlePointer:c}}const j2=n=>!!(n!=null&&n.render),lT=G.createContext(null),Qj=(n,e)=>{const t=DO((c,f)=>{const d=new Q,m=new Q,g=new Q;function y(b=f().camera,R=m,D=f().size){const{width:B,height:U,top:L,left:z}=D,I=B/U;R.isVector3?g.copy(R):g.set(...R);const O=b.getWorldPosition(d).distanceTo(g);if(PO(b))return{width:B/b.zoom,height:U/b.zoom,top:L,left:z,factor:1,distance:O,aspect:I};{const P=b.fov*Math.PI/180,Y=2*Math.tan(P/2)*O,ie=Y*(B/U);return{width:ie,height:Y,top:L,left:z,factor:B/ie,distance:O,aspect:I}}}let _;const A=b=>c(R=>({performance:{...R.performance,current:b}})),T=new Ze;return{set:c,get:f,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(b=1)=>n(f(),b),advance:(b,R)=>e(b,R,f()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new ZE,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const b=f();_&&clearTimeout(_),b.performance.current!==b.performance.min&&A(b.performance.min),_=setTimeout(()=>A(f().performance.max),b.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:b=>c(R=>({...R,events:{...R.events,...b}})),setSize:(b,R,D=0,B=0)=>{const U=f().camera,L={width:b,height:R,top:D,left:B};c(z=>({size:L,viewport:{...z.viewport,...y(U,m,L)}}))},setDpr:b=>c(R=>{const D=FO(b);return{viewport:{...R.viewport,dpr:D,initialDpr:R.viewport.initialDpr||D}}}),setFrameloop:(b="always")=>{const R=f().clock;R.stop(),R.elapsedTime=0,b!=="never"&&(R.start(),R.elapsedTime=0),c(()=>({frameloop:b}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:G.createRef(),active:!1,frames:0,priority:0,subscribe:(b,R,D)=>{const B=f().internal;return B.priority=B.priority+(R>0?1:0),B.subscribers.push({ref:b,priority:R,store:D}),B.subscribers=B.subscribers.sort((U,L)=>U.priority-L.priority),()=>{const U=f().internal;U!=null&&U.subscribers&&(U.priority=U.priority-(R>0?1:0),U.subscribers=U.subscribers.filter(L=>L.ref!==b))}}}}}),i=t.getState();let a=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:c,size:f,viewport:d,gl:m,set:g}=t.getState();if(f.width!==a.width||f.height!==a.height||d.dpr!==s){a=f,s=d.dpr,HO(c,f),d.dpr>0&&m.setPixelRatio(d.dpr);const y=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(f.width,f.height,y)}c!==o&&(o=c,g(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>n(c)),t};function cT(){const n=G.useContext(lT);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function gr(n=t=>t,e){return cT()(n,e)}function VO(n,e=0){const t=cT(),i=t.getState().internal.subscribe,a=oT(n);return K0(()=>i(a,e,t),[e,i,t]),null}const Y2=new WeakMap,$j=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function kO(n,e){return function(t,...i){let a;return $j(t)?(a=Y2.get(t),a||(a=new t,Y2.set(t,a))):a=t,n&&n(a),Promise.all(i.map(s=>new Promise((o,c)=>a.load(s,f=>{Rs(f?.scene)&&Object.assign(f,kj(f.scene)),o(f)},e,f=>c(new Error(`Could not load ${s}: ${f?.message}`))))))}}function Mc(n,e,t,i){const a=Array.isArray(e)?e:[e],s=Sj(kO(t,i),[n,...a],{equal:Ni.equ});return Array.isArray(e)?s:s[0]}Mc.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return Mj(kO(t),[n,...i])};Mc.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Ej([n,...t])};function eY(n){const e=Bj(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:G.version}),e}const XO=0,Lp={},tY=/^three(?=[A-Z])/,Yb=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let nY=0;const iY=n=>typeof n=="function";function jO(n){if(iY(n)){const e=`${nY++}`;return Lp[e]=n,e}else Object.assign(Lp,n)}function YO(n,e){const t=Yb(n),i=Lp[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function aY(n,e,t){var i;return n=Yb(n)in Lp?n:n.replace(tY,""),YO(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,Y_(e.object,t,n,e)}function sY(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?K_(n.parent,n):Rs(n.object)&&(n.object.visible=!1),n.isHidden=!0,Kp(n)}}function qO(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?q_(n.parent,n):Rs(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Kp(n)}}function uT(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var a,s;const o=Lp[Yb(e.type)];e.object=(a=e.props.object)!=null?a:new o(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(xl(e.object,e.props),e.props.attach)q_(n,e);else if(Rs(e.object)&&Rs(n.object)){const o=n.object.children.indexOf(t?.object);if(t&&o!==-1){const c=n.object.children.indexOf(e.object);if(c!==-1){n.object.children.splice(c,1);const f=c<o?o-1:o;n.object.children.splice(f,0,e.object)}else e.object.parent=n.object,n.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const o of e.children)uT(e,o);Kp(e)}}function o1(n,e){e&&(e.parent=n,n.children.push(e),uT(n,e))}function q2(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),uT(n,e,t)}function KO(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():V2.unstable_scheduleCallback(V2.unstable_IdlePriority,e)}}function mM(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?K_(n,e):Rs(e.object)&&Rs(n.object)&&(n.object.remove(e.object),Jj(IO(e),e.object));const a=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const o=e.children[s];mM(e,o,a)}e.children.length=0,delete e.object.__r3f,a&&e.type!=="primitive"&&e.object.type!=="Scene"&&KO(e.object),t===void 0&&Kp(e)}function rY(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const qx=[];function oY(){for(const[t]of qx){const i=t.parent;if(i){t.props.attach?K_(i,t):Rs(t.object)&&Rs(i.object)&&i.object.remove(t.object);for(const a of t.children)a.props.attach?K_(t,a):Rs(a.object)&&Rs(t.object)&&t.object.remove(a.object)}t.isHidden&&qO(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&KO(t.object)}for(const[t,i,a]of qx){t.props=i;const s=t.parent;if(s){var n,e;const o=Lp[Yb(t.type)];t.object=(n=t.props.object)!=null?n:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,rY(a,t.object),xl(t.object,t.props),t.props.attach?q_(s,t):Rs(t.object)&&Rs(s.object)&&s.object.add(t.object);for(const c of t.children)c.props.attach?q_(t,c):Rs(c.object)&&Rs(t.object)&&t.object.add(c.object);Kp(t)}}qx.length=0}const l1=()=>{},K2={};let wx=XO;const lY=0,cY=4,W_=eY({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:aY,removeChild:mM,appendChild:o1,appendInitialChild:o1,insertBefore:q2,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||o1(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||mM(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||q2(i,e,t)},getRootHostContext:()=>K2,getChildHostContext:()=>K2,commitUpdate(n,e,t,i,a){var s,o,c;YO(e,i);let f=!1;if((n.type==="primitive"&&t.object!==i.object||((s=i.args)==null?void 0:s.length)!==((o=t.args)==null?void 0:o.length)||(c=i.args)!=null&&c.some((m,g)=>{var y;return m!==((y=t.args)==null?void 0:y[g])}))&&(f=!0),f)qx.push([n,{...i},a]);else{const m=qj(n,i);Object.keys(m).length&&(Object.assign(n.props,m),xl(n.object,m))}(a.sibling===null||(a.flags&cY)===lY)&&oY()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n?.object,prepareForCommit:()=>null,preparePortalMount:n=>Y_(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:sY,unhideInstance:qO,createTextInstance:l1,hideTextInstance:l1,unhideTextInstance:l1,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:G.createContext(null),setCurrentUpdatePriority(n){wx=n},getCurrentUpdatePriority(){return wx},resolveUpdatePriority(){var n;if(wx!==XO)return wx;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return kx.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return kx.ContinuousEventPriority;default:return kx.DefaultEventPriority}},resetFormInstance(){}}),wh=new Map,ap={objects:"shallow",strict:!1};function uY(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:a,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:a,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function fY(n){const e=wh.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,s=i||Qj(yM,J2),o=t||W_.createContainer(s,kx.ConcurrentRoot,null,!1,null,"",a,a,a,null);e||wh.set(n,{fiber:o,store:s});let c,f,d=!1,m=null;return{async configure(g={}){let y;m=new Promise(fe=>y=fe);let{gl:_,size:A,scene:T,events:E,onCreated:b,shadows:R=!1,linear:D=!1,flat:B=!1,legacy:U=!1,orthographic:L=!1,frameloop:z="always",dpr:I=[1,2],performance:O,raycaster:P,camera:Y,onPointerMissed:ie}=g,se=s.getState(),ue=se.gl;if(!se.gl){const fe={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},_e=typeof _=="function"?await _(fe):_;j2(_e)?ue=_e:ue=new aT({...fe,..._}),se.set({gl:ue})}let me=se.raycaster;me||se.set({raycaster:me=new tT});const{params:H,...W}=P||{};if(Ni.equ(W,me,ap)||xl(me,{...W}),Ni.equ(H,me.params,ap)||xl(me,{params:{...me.params,...H}}),!se.camera||se.camera===f&&!Ni.equ(f,Y,ap)){f=Y;const fe=Y?.isCamera,_e=fe?Y:L?new Tl(0,0,0,0,.1,1e3):new Ji(75,0,.1,1e3);fe||(_e.position.z=5,Y&&(xl(_e,Y),_e.manual||("aspect"in Y||"left"in Y||"right"in Y||"bottom"in Y||"top"in Y)&&(_e.manual=!0,_e.updateProjectionMatrix())),!se.camera&&!(Y!=null&&Y.rotation)&&_e.lookAt(0,0,0)),se.set({camera:_e}),me.camera=_e}if(!se.scene){let fe;T!=null&&T.isScene?(fe=T,Y_(fe,s,"",{})):(fe=new z0,Y_(fe,s,"",{}),T&&xl(fe,T)),se.set({scene:fe})}E&&!se.events.handlers&&se.set({events:E(s)});const q=uY(n,A);if(Ni.equ(q,se.size,ap)||se.setSize(q.width,q.height,q.top,q.left),I&&se.viewport.dpr!==FO(I)&&se.setDpr(I),se.frameloop!==z&&se.setFrameloop(z),se.onPointerMissed||se.set({onPointerMissed:ie}),O&&!Ni.equ(O,se.performance,ap)&&se.set(fe=>({performance:{...fe.performance,...O}})),!se.xr){var ge;const fe=(De,ot)=>{const ve=s.getState();ve.frameloop!=="never"&&J2(De,!0,ve,ot)},_e=()=>{const De=s.getState();De.gl.xr.enabled=De.gl.xr.isPresenting,De.gl.xr.setAnimationLoop(De.gl.xr.isPresenting?fe:null),De.gl.xr.isPresenting||yM(De)},Ae={connect(){const De=s.getState().gl;De.xr.addEventListener("sessionstart",_e),De.xr.addEventListener("sessionend",_e)},disconnect(){const De=s.getState().gl;De.xr.removeEventListener("sessionstart",_e),De.xr.removeEventListener("sessionend",_e)}};typeof((ge=ue.xr)==null?void 0:ge.addEventListener)=="function"&&Ae.connect(),se.set({xr:Ae})}if(ue.shadowMap){const fe=ue.shadowMap.enabled,_e=ue.shadowMap.type;if(ue.shadowMap.enabled=!!R,Ni.boo(R))ue.shadowMap.type=Vg;else if(Ni.str(R)){var j;const Ae={basic:P3,percentage:db,soft:Vg,variance:wo};ue.shadowMap.type=(j=Ae[R])!=null?j:Vg}else Ni.obj(R)&&Object.assign(ue.shadowMap,R);(fe!==ue.shadowMap.enabled||_e!==ue.shadowMap.type)&&(ue.shadowMap.needsUpdate=!0)}return zn.enabled=!U,d||(ue.outputColorSpace=D?No:Wa,ue.toneMapping=B?El:dE),se.legacy!==U&&se.set(()=>({legacy:U})),se.linear!==D&&se.set(()=>({linear:D})),se.flat!==B&&se.set(()=>({flat:B})),_&&!Ni.fun(_)&&!j2(_)&&!Ni.equ(_,ue,ap)&&xl(ue,_),c=b,d=!0,y(),this},render(g){return!d&&!m&&this.configure(),m.then(()=>{W_.updateContainer(ee.jsx(hY,{store:s,children:g,onCreated:c,rootElement:n}),o,null,()=>{})}),s},unmount(){WO(n)}}}function hY({store:n,children:e,onCreated:t,rootElement:i}){return K0(()=>{const a=n.getState();a.set(s=>({internal:{...s.internal,active:!0}})),t&&t(a),n.getState().events.connected||a.events.connect==null||a.events.connect(i)},[]),ee.jsx(lT.Provider,{value:n,children:e})}function WO(n,e){const t=wh.get(n),i=t?.fiber;if(i){const a=t?.store.getState();a&&(a.internal.active=!1),W_.updateContainer(null,i,null,()=>{a&&setTimeout(()=>{try{var s,o,c,f;a.events.disconnect==null||a.events.disconnect(),(s=a.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(c=a.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(f=a.gl)!=null&&f.xr&&a.xr.disconnect(),Xj(a.scene),wh.delete(n)}catch{}},500)})}}function dY(n,e,t){return ee.jsx(pY,{children:n,container:e,state:t})}function pY({state:n={},children:e,container:t}){const{events:i,size:a,...s}=n,o=cT(),[c]=G.useState(()=>new tT),[f]=G.useState(()=>new Ze),d=oT((g,y)=>{let _;if(y.camera&&a){const A=y.camera;_=g.viewport.getCurrentViewport(A,new Q,a),A!==g.camera&&HO(A,a)}return{...g,...y,scene:t,raycaster:c,pointer:f,mouse:f,previousRoot:o,events:{...g.events,...y.events,...i},size:{...g.size,...a},viewport:{...g.viewport,..._},setEvents:A=>y.set(T=>({...T,events:{...T.events,...A}}))}}),m=G.useMemo(()=>{const g=DO((_,A)=>({...s,set:_,get:A})),y=_=>g.setState(A=>d.current(_,A));return y(o.getState()),o.subscribe(y),g},[o,t]);return ee.jsx(ee.Fragment,{children:W_.createPortal(ee.jsx(lT.Provider,{value:m,children:e}),m,null)})}const mY=new Set,gY=new Set,vY=new Set;function c1(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Jg(n,e){switch(n){case"before":return c1(mY,e);case"after":return c1(gY,e);case"tail":return c1(vY,e)}}let u1,f1;function gM(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),u1=e.internal.subscribers;for(let a=0;a<u1.length;a++)f1=u1[a],f1.ref.current(f1.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let J_=!1,vM=!1,h1,W2,sp;function JO(n){W2=requestAnimationFrame(JO),J_=!0,h1=0,Jg("before",n),vM=!0;for(const t of wh.values()){var e;sp=t.store.getState(),sp.internal.active&&(sp.frameloop==="always"||sp.internal.frames>0)&&!((e=sp.gl.xr)!=null&&e.isPresenting)&&(h1+=gM(n,sp))}if(vM=!1,Jg("after",n),h1===0)return Jg("tail",n),J_=!1,cancelAnimationFrame(W2)}function yM(n,e=1){var t;if(!n)return wh.forEach(i=>yM(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):vM?n.internal.frames=2:n.internal.frames=1,J_||(J_=!0,requestAnimationFrame(JO)))}function J2(n,e=!0,t,i){if(e&&Jg("before",n),t)gM(n,t,i);else for(const a of wh.values())gM(n,a.store.getState());e&&Jg("after",n)}const d1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function yY(n){const{handlePointer:e}=Zj(n);return{priority:1,enabled:!0,compute(t,i,a){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(d1).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:a}=n.getState();(t=a.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(a.lastEvent.current)},connect:t=>{const{set:i,events:a}=n.getState();if(a.disconnect==null||a.disconnect(),i(s=>({events:{...s.events,connected:t}})),a.handlers)for(const s in a.handlers){const o=a.handlers[s],[c,f]=d1[s];t.addEventListener(c,o,{passive:f})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const a in i.handlers){const s=i.handlers[a],[o]=d1[a];i.connected.removeEventListener(o,s)}t(a=>({events:{...a.events,connected:void 0}}))}}}}function Z2(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function xY({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const a=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=G.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=G.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),f=n?typeof n=="number"?n:n.scroll:null,d=n?typeof n=="number"?n:n.resize:null,m=G.useRef(!1);G.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,y,_]=G.useMemo(()=>{const b=()=>{if(!c.current.element)return;const{left:R,top:D,width:B,height:U,bottom:L,right:z,x:I,y:O}=c.current.element.getBoundingClientRect(),P={left:R,top:D,width:B,height:U,bottom:L,right:z,x:I,y:O};c.current.element instanceof HTMLElement&&i&&(P.height=c.current.element.offsetHeight,P.width=c.current.element.offsetWidth),Object.freeze(P),m.current&&!SY(c.current.lastBounds,P)&&o(c.current.lastBounds=P)};return[b,d?Z2(b,d):b,f?Z2(b,f):b]},[o,i,f,d]);function A(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(b=>b.removeEventListener("scroll",_,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function T(){c.current.element&&(c.current.resizeObserver=new a(_),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(b=>b.addEventListener("scroll",_,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const E=b=>{!b||b===c.current.element||(A(),c.current.element=b,c.current.scrollContainers=ZO(b),T())};return bY(_,!!e),_Y(y),G.useEffect(()=>{A(),T()},[e,_,y]),G.useEffect(()=>A,[]),[E,s,g]}function _Y(n){G.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function bY(n,e){G.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function ZO(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:a}=window.getComputedStyle(n);return[t,i,a].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...ZO(n.parentElement)]}const AY=["x","y","top","bottom","left","right","width","height"],SY=(n,e)=>AY.every(t=>n[t]===e[t]);function MY({ref:n,children:e,fallback:t,resize:i,style:a,gl:s,events:o=yY,eventSource:c,eventPrefix:f,shadows:d,linear:m,flat:g,legacy:y,orthographic:_,frameloop:A,dpr:T,performance:E,raycaster:b,camera:R,scene:D,onPointerMissed:B,onCreated:U,...L}){G.useMemo(()=>jO(fj),[]);const z=Hj(),[I,O]=xY({scroll:!0,debounce:{scroll:50,resize:0},...i}),P=G.useRef(null),Y=G.useRef(null);G.useImperativeHandle(n,()=>P.current);const ie=oT(B),[se,ue]=G.useState(!1),[me,H]=G.useState(!1);if(se)throw se;if(me)throw me;const W=G.useRef(null);K0(()=>{const ge=P.current;if(O.width>0&&O.height>0&&ge){W.current||(W.current=fY(ge));async function j(){await W.current.configure({gl:s,scene:D,events:o,shadows:d,linear:m,flat:g,legacy:y,orthographic:_,frameloop:A,dpr:T,performance:E,raycaster:b,camera:R,size:O,onPointerMissed:(...fe)=>ie.current==null?void 0:ie.current(...fe),onCreated:fe=>{fe.events.connect==null||fe.events.connect(c?Fj(c)?c.current:c:Y.current),f&&fe.setEvents({compute:(_e,Ae)=>{const De=_e[f+"X"],ot=_e[f+"Y"];Ae.pointer.set(De/Ae.size.width*2-1,-(ot/Ae.size.height)*2+1),Ae.raycaster.setFromCamera(Ae.pointer,Ae.camera)}}),U?.(fe)}}),W.current.render(ee.jsx(z,{children:ee.jsx(Vj,{set:H,children:ee.jsx(G.Suspense,{fallback:ee.jsx(Gj,{set:ue}),children:e??null})})}))}j()}}),G.useEffect(()=>{const ge=P.current;if(ge)return()=>WO(ge)},[]);const q=c?"none":"auto";return ee.jsx("div",{ref:Y,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:q,...a},...L,children:ee.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:ee.jsx("canvas",{ref:P,style:{display:"block"},children:t})})})}function EY(n){return ee.jsx(UO,{children:ee.jsx(MY,{...n})})}function Z_(){return Z_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Z_.apply(null,arguments)}const fT=parseInt(O0.replace(/\D+/g,""));function Q2(n,e){if(e===pN)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===G_||e===_E){let t=n.getIndex();if(t===null){const o=[],c=n.getAttribute("position");if(c!==void 0){for(let f=0;f<c.count;f++)o.push(f);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,a=[];if(t)if(e===G_)for(let o=1;o<=i;o++)a.push(t.getX(0)),a.push(t.getX(o)),a.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(a.push(t.getX(o)),a.push(t.getX(o+1)),a.push(t.getX(o+2))):(a.push(t.getX(o+2)),a.push(t.getX(o+1)),a.push(t.getX(o)));a.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(a),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Xr=Uint8Array,Nu=Uint16Array,xM=Uint32Array,QO=new Xr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$O=new Xr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),TY=new Xr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eU=function(n,e){for(var t=new Nu(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var a=new xM(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)a[s]=s-t[i]<<5|i;return[t,a]},tU=eU(QO,2),nU=tU[0],CY=tU[1];nU[28]=258,CY[258]=28;var wY=eU($O,0),RY=wY[0],_M=new Nu(32768);for(var Ci=0;Ci<32768;++Ci){var Tu=(Ci&43690)>>>1|(Ci&21845)<<1;Tu=(Tu&52428)>>>2|(Tu&13107)<<2,Tu=(Tu&61680)>>>4|(Tu&3855)<<4,_M[Ci]=((Tu&65280)>>>8|(Tu&255)<<8)>>>1}var Zg=(function(n,e,t){for(var i=n.length,a=0,s=new Nu(e);a<i;++a)++s[n[a]-1];var o=new Nu(e);for(a=0;a<e;++a)o[a]=o[a-1]+s[a-1]<<1;var c;if(t){c=new Nu(1<<e);var f=15-e;for(a=0;a<i;++a)if(n[a])for(var d=a<<4|n[a],m=e-n[a],g=o[n[a]-1]++<<m,y=g|(1<<m)-1;g<=y;++g)c[_M[g]>>>f]=d}else for(c=new Nu(i),a=0;a<i;++a)n[a]&&(c[a]=_M[o[n[a]-1]++]>>>15-n[a]);return c}),W0=new Xr(288);for(var Ci=0;Ci<144;++Ci)W0[Ci]=8;for(var Ci=144;Ci<256;++Ci)W0[Ci]=9;for(var Ci=256;Ci<280;++Ci)W0[Ci]=7;for(var Ci=280;Ci<288;++Ci)W0[Ci]=8;var iU=new Xr(32);for(var Ci=0;Ci<32;++Ci)iU[Ci]=5;var DY=Zg(W0,9,1),BY=Zg(iU,5,1),p1=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},To=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},m1=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},NY=function(n){return(n/8|0)+(n&7&&1)},OY=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Nu?Nu:n instanceof xM?xM:Xr)(t-e);return i.set(n.subarray(e,t)),i},UY=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Xr(0);var a=!e||t,s=!t||t.i;t||(t={}),e||(e=new Xr(i*3));var o=function(ve){var Ne=e.length;if(ve>Ne){var Qe=new Xr(Math.max(Ne*2,ve));Qe.set(e),e=Qe}},c=t.f||0,f=t.p||0,d=t.b||0,m=t.l,g=t.d,y=t.m,_=t.n,A=i*8;do{if(!m){t.f=c=To(n,f,1);var T=To(n,f+1,3);if(f+=3,T)if(T==1)m=DY,g=BY,y=9,_=5;else if(T==2){var D=To(n,f,31)+257,B=To(n,f+10,15)+4,U=D+To(n,f+5,31)+1;f+=14;for(var L=new Xr(U),z=new Xr(19),I=0;I<B;++I)z[TY[I]]=To(n,f+I*3,7);f+=B*3;for(var O=p1(z),P=(1<<O)-1,Y=Zg(z,O,1),I=0;I<U;){var ie=Y[To(n,f,P)];f+=ie&15;var E=ie>>>4;if(E<16)L[I++]=E;else{var se=0,ue=0;for(E==16?(ue=3+To(n,f,3),f+=2,se=L[I-1]):E==17?(ue=3+To(n,f,7),f+=3):E==18&&(ue=11+To(n,f,127),f+=7);ue--;)L[I++]=se}}var me=L.subarray(0,D),H=L.subarray(D);y=p1(me),_=p1(H),m=Zg(me,y,1),g=Zg(H,_,1)}else throw"invalid block type";else{var E=NY(f)+4,b=n[E-4]|n[E-3]<<8,R=E+b;if(R>i){if(s)throw"unexpected EOF";break}a&&o(d+b),e.set(n.subarray(E,R),d),t.b=d+=b,t.p=f=R*8;continue}if(f>A){if(s)throw"unexpected EOF";break}}a&&o(d+131072);for(var W=(1<<y)-1,q=(1<<_)-1,ge=f;;ge=f){var se=m[m1(n,f)&W],j=se>>>4;if(f+=se&15,f>A){if(s)throw"unexpected EOF";break}if(!se)throw"invalid length/literal";if(j<256)e[d++]=j;else if(j==256){ge=f,m=null;break}else{var fe=j-254;if(j>264){var I=j-257,_e=QO[I];fe=To(n,f,(1<<_e)-1)+nU[I],f+=_e}var Ae=g[m1(n,f)&q],De=Ae>>>4;if(!Ae)throw"invalid distance";f+=Ae&15;var H=RY[De];if(De>3){var _e=$O[De];H+=m1(n,f)&(1<<_e)-1,f+=_e}if(f>A){if(s)throw"unexpected EOF";break}a&&o(d+131072);for(var ot=d+fe;d<ot;d+=4)e[d]=e[d-H],e[d+1]=e[d+1-H],e[d+2]=e[d+2-H],e[d+3]=e[d+3-H];d=ot}}t.l=m,t.p=ge,t.b=d,m&&(c=1,t.m=y,t.d=g,t.n=_)}while(!c);return d==e.length?e:OY(e,0,d)},LY=new Xr(0),IY=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Rx(n,e){return UY((IY(n),n.subarray(2,-4)),e)}var PY=typeof TextDecoder<"u"&&new TextDecoder,FY=0;try{PY.decode(LY,{stream:!0}),FY=1}catch{}const zY=n=>n&&n.isCubeTexture;class HY extends Oi{constructor(e,t){var i,a;const s=zY(e),c=((a=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?a:1024)/4,f=Math.floor(Math.log2(c)),d=Math.pow(2,f),m=3*Math.max(d,112),g=4*d,y=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/m}`,`#define CUBEUV_TEXEL_HEIGHT ${1/g}`,`#define CUBEUV_MAX_MIP ${f}.0`],_=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,A=y.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${fT>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,T={map:{value:e},height:{value:t?.height||15},radius:{value:t?.radius||100}},E=new X0(1,16),b=new tr({uniforms:T,fragmentShader:A,vertexShader:_,side:kr});super(E,b)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var GY=Object.defineProperty,VY=(n,e,t)=>e in n?GY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kY=(n,e,t)=>(VY(n,e+"",t),t);class XY{constructor(){kY(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const s=a.indexOf(t);s!==-1&&a.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const a=i.slice(0);for(let s=0,o=a.length;s<o;s++)a[s].call(this,e);e.target=null}}}var jY=Object.defineProperty,YY=(n,e,t)=>e in n?jY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qt=(n,e,t)=>(YY(n,typeof e!="symbol"?e+"":e,t),t);const Dx=new Dh,$2=new hc,qY=Math.cos(70*(Math.PI/180)),eD=(n,e)=>(n%e+e)%e;let KY=class extends XY{constructor(e,t){super(),Qt(this,"object"),Qt(this,"domElement"),Qt(this,"enabled",!0),Qt(this,"target",new Q),Qt(this,"minDistance",0),Qt(this,"maxDistance",1/0),Qt(this,"minZoom",0),Qt(this,"maxZoom",1/0),Qt(this,"minPolarAngle",0),Qt(this,"maxPolarAngle",Math.PI),Qt(this,"minAzimuthAngle",-1/0),Qt(this,"maxAzimuthAngle",1/0),Qt(this,"enableDamping",!1),Qt(this,"dampingFactor",.05),Qt(this,"enableZoom",!0),Qt(this,"zoomSpeed",1),Qt(this,"enableRotate",!0),Qt(this,"rotateSpeed",1),Qt(this,"enablePan",!0),Qt(this,"panSpeed",1),Qt(this,"screenSpacePanning",!0),Qt(this,"keyPanSpeed",7),Qt(this,"zoomToCursor",!1),Qt(this,"autoRotate",!1),Qt(this,"autoRotateSpeed",2),Qt(this,"reverseOrbit",!1),Qt(this,"reverseHorizontalOrbit",!1),Qt(this,"reverseVerticalOrbit",!1),Qt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Qt(this,"mouseButtons",{LEFT:nh.ROTATE,MIDDLE:nh.DOLLY,RIGHT:nh.PAN}),Qt(this,"touches",{ONE:ih.ROTATE,TWO:ih.DOLLY_PAN}),Qt(this,"target0"),Qt(this,"position0"),Qt(this,"zoom0"),Qt(this,"_domElementKeyEvents",null),Qt(this,"getPolarAngle"),Qt(this,"getAzimuthalAngle"),Qt(this,"setPolarAngle"),Qt(this,"setAzimuthalAngle"),Qt(this,"getDistance"),Qt(this,"getZoomScale"),Qt(this,"listenToKeyEvents"),Qt(this,"stopListenToKeyEvents"),Qt(this,"saveState"),Qt(this,"reset"),Qt(this,"update"),Qt(this,"connect"),Qt(this,"dispose"),Qt(this,"dollyIn"),Qt(this,"dollyOut"),Qt(this,"getScale"),Qt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=re=>{let Se=eD(re,2*Math.PI),tt=m.phi;tt<0&&(tt+=2*Math.PI),Se<0&&(Se+=2*Math.PI);let ce=Math.abs(Se-tt);2*Math.PI-ce<ce&&(Se<tt?Se+=2*Math.PI:tt+=2*Math.PI),g.phi=Se-tt,i.update()},this.setAzimuthalAngle=re=>{let Se=eD(re,2*Math.PI),tt=m.theta;tt<0&&(tt+=2*Math.PI),Se<0&&(Se+=2*Math.PI);let ce=Math.abs(Se-tt);2*Math.PI-ce<ce&&(Se<tt?Se+=2*Math.PI:tt+=2*Math.PI),g.theta=Se-tt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=re=>{re.addEventListener("keydown",Le),this._domElementKeyEvents=re},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Le),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(a),i.update(),f=c.NONE},this.update=(()=>{const re=new Q,Se=new Q(0,1,0),tt=new Pa().setFromUnitVectors(e.up,Se),ce=tt.clone().invert(),be=new Q,lt=new Pa,ft=2*Math.PI;return function(){const Ve=i.object.position;tt.setFromUnitVectors(e.up,Se),ce.copy(tt).invert(),re.copy(Ve).sub(i.target),re.applyQuaternion(tt),m.setFromVector3(re),i.autoRotate&&f===c.NONE&&ue(ie()),i.enableDamping?(m.theta+=g.theta*i.dampingFactor,m.phi+=g.phi*i.dampingFactor):(m.theta+=g.theta,m.phi+=g.phi);let _t=i.minAzimuthAngle,Mt=i.maxAzimuthAngle;isFinite(_t)&&isFinite(Mt)&&(_t<-Math.PI?_t+=ft:_t>Math.PI&&(_t-=ft),Mt<-Math.PI?Mt+=ft:Mt>Math.PI&&(Mt-=ft),_t<=Mt?m.theta=Math.max(_t,Math.min(Mt,m.theta)):m.theta=m.theta>(_t+Mt)/2?Math.max(_t,m.theta):Math.min(Mt,m.theta)),m.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,m.phi)),m.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(_,i.dampingFactor):i.target.add(_),i.zoomToCursor&&O||i.object.isOrthographicCamera?m.radius=Ae(m.radius):m.radius=Ae(m.radius*y),re.setFromSpherical(m),re.applyQuaternion(ce),Ve.copy(i.target).add(re),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(g.theta*=1-i.dampingFactor,g.phi*=1-i.dampingFactor,_.multiplyScalar(1-i.dampingFactor)):(g.set(0,0,0),_.set(0,0,0));let Vt=!1;if(i.zoomToCursor&&O){let jt=null;if(i.object instanceof Ji&&i.object.isPerspectiveCamera){const oi=re.length();jt=Ae(oi*y);const cn=oi-jt;i.object.position.addScaledVector(z,cn),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const oi=new Q(I.x,I.y,0);oi.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/y)),i.object.updateProjectionMatrix(),Vt=!0;const cn=new Q(I.x,I.y,0);cn.unproject(i.object),i.object.position.sub(cn).add(oi),i.object.updateMatrixWorld(),jt=re.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;jt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(jt).add(i.object.position):(Dx.origin.copy(i.object.position),Dx.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Dx.direction))<qY?e.lookAt(i.target):($2.setFromNormalAndCoplanarPoint(i.object.up,i.target),Dx.intersectPlane($2,i.target))))}else i.object instanceof Tl&&i.object.isOrthographicCamera&&(Vt=y!==1,Vt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/y)),i.object.updateProjectionMatrix()));return y=1,O=!1,Vt||be.distanceToSquared(i.object.position)>d||8*(1-lt.dot(i.object.quaternion))>d?(i.dispatchEvent(a),be.copy(i.object.position),lt.copy(i.object.quaternion),Vt=!1,!0):!1}})(),this.connect=re=>{i.domElement=re,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",St),i.domElement.addEventListener("pointerdown",Gt),i.domElement.addEventListener("pointercancel",X),i.domElement.addEventListener("wheel",ke)},this.dispose=()=>{var re,Se,tt,ce,be,lt;i.domElement&&(i.domElement.style.touchAction="auto"),(re=i.domElement)==null||re.removeEventListener("contextmenu",St),(Se=i.domElement)==null||Se.removeEventListener("pointerdown",Gt),(tt=i.domElement)==null||tt.removeEventListener("pointercancel",X),(ce=i.domElement)==null||ce.removeEventListener("wheel",ke),(be=i.domElement)==null||be.ownerDocument.removeEventListener("pointermove",$),(lt=i.domElement)==null||lt.ownerDocument.removeEventListener("pointerup",X),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Le)};const i=this,a={type:"change"},s={type:"start"},o={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let f=c.NONE;const d=1e-6,m=new uM,g=new uM;let y=1;const _=new Q,A=new Ze,T=new Ze,E=new Ze,b=new Ze,R=new Ze,D=new Ze,B=new Ze,U=new Ze,L=new Ze,z=new Q,I=new Ze;let O=!1;const P=[],Y={};function ie(){return 2*Math.PI/60/60*i.autoRotateSpeed}function se(){return Math.pow(.95,i.zoomSpeed)}function ue(re){i.reverseOrbit||i.reverseHorizontalOrbit?g.theta+=re:g.theta-=re}function me(re){i.reverseOrbit||i.reverseVerticalOrbit?g.phi+=re:g.phi-=re}const H=(()=>{const re=new Q;return function(tt,ce){re.setFromMatrixColumn(ce,0),re.multiplyScalar(-tt),_.add(re)}})(),W=(()=>{const re=new Q;return function(tt,ce){i.screenSpacePanning===!0?re.setFromMatrixColumn(ce,1):(re.setFromMatrixColumn(ce,0),re.crossVectors(i.object.up,re)),re.multiplyScalar(tt),_.add(re)}})(),q=(()=>{const re=new Q;return function(tt,ce){const be=i.domElement;if(be&&i.object instanceof Ji&&i.object.isPerspectiveCamera){const lt=i.object.position;re.copy(lt).sub(i.target);let ft=re.length();ft*=Math.tan(i.object.fov/2*Math.PI/180),H(2*tt*ft/be.clientHeight,i.object.matrix),W(2*ce*ft/be.clientHeight,i.object.matrix)}else be&&i.object instanceof Tl&&i.object.isOrthographicCamera?(H(tt*(i.object.right-i.object.left)/i.object.zoom/be.clientWidth,i.object.matrix),W(ce*(i.object.top-i.object.bottom)/i.object.zoom/be.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function ge(re){i.object instanceof Ji&&i.object.isPerspectiveCamera||i.object instanceof Tl&&i.object.isOrthographicCamera?y=re:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function j(re){ge(y/re)}function fe(re){ge(y*re)}function _e(re){if(!i.zoomToCursor||!i.domElement)return;O=!0;const Se=i.domElement.getBoundingClientRect(),tt=re.clientX-Se.left,ce=re.clientY-Se.top,be=Se.width,lt=Se.height;I.x=tt/be*2-1,I.y=-(ce/lt)*2+1,z.set(I.x,I.y,1).unproject(i.object).sub(i.object.position).normalize()}function Ae(re){return Math.max(i.minDistance,Math.min(i.maxDistance,re))}function De(re){A.set(re.clientX,re.clientY)}function ot(re){_e(re),B.set(re.clientX,re.clientY)}function ve(re){b.set(re.clientX,re.clientY)}function Ne(re){T.set(re.clientX,re.clientY),E.subVectors(T,A).multiplyScalar(i.rotateSpeed);const Se=i.domElement;Se&&(ue(2*Math.PI*E.x/Se.clientHeight),me(2*Math.PI*E.y/Se.clientHeight)),A.copy(T),i.update()}function Qe(re){U.set(re.clientX,re.clientY),L.subVectors(U,B),L.y>0?j(se()):L.y<0&&fe(se()),B.copy(U),i.update()}function bt(re){R.set(re.clientX,re.clientY),D.subVectors(R,b).multiplyScalar(i.panSpeed),q(D.x,D.y),b.copy(R),i.update()}function ct(re){_e(re),re.deltaY<0?fe(se()):re.deltaY>0&&j(se()),i.update()}function zt(re){let Se=!1;switch(re.code){case i.keys.UP:q(0,i.keyPanSpeed),Se=!0;break;case i.keys.BOTTOM:q(0,-i.keyPanSpeed),Se=!0;break;case i.keys.LEFT:q(i.keyPanSpeed,0),Se=!0;break;case i.keys.RIGHT:q(-i.keyPanSpeed,0),Se=!0;break}Se&&(re.preventDefault(),i.update())}function Xt(){if(P.length==1)A.set(P[0].pageX,P[0].pageY);else{const re=.5*(P[0].pageX+P[1].pageX),Se=.5*(P[0].pageY+P[1].pageY);A.set(re,Se)}}function ae(){if(P.length==1)b.set(P[0].pageX,P[0].pageY);else{const re=.5*(P[0].pageX+P[1].pageX),Se=.5*(P[0].pageY+P[1].pageY);b.set(re,Se)}}function Ye(){const re=P[0].pageX-P[1].pageX,Se=P[0].pageY-P[1].pageY,tt=Math.sqrt(re*re+Se*Se);B.set(0,tt)}function je(){i.enableZoom&&Ye(),i.enablePan&&ae()}function Xe(){i.enableZoom&&Ye(),i.enableRotate&&Xt()}function He(re){if(P.length==1)T.set(re.pageX,re.pageY);else{const tt=Dt(re),ce=.5*(re.pageX+tt.x),be=.5*(re.pageY+tt.y);T.set(ce,be)}E.subVectors(T,A).multiplyScalar(i.rotateSpeed);const Se=i.domElement;Se&&(ue(2*Math.PI*E.x/Se.clientHeight),me(2*Math.PI*E.y/Se.clientHeight)),A.copy(T)}function gt(re){if(P.length==1)R.set(re.pageX,re.pageY);else{const Se=Dt(re),tt=.5*(re.pageX+Se.x),ce=.5*(re.pageY+Se.y);R.set(tt,ce)}D.subVectors(R,b).multiplyScalar(i.panSpeed),q(D.x,D.y),b.copy(R)}function st(re){const Se=Dt(re),tt=re.pageX-Se.x,ce=re.pageY-Se.y,be=Math.sqrt(tt*tt+ce*ce);U.set(0,be),L.set(0,Math.pow(U.y/B.y,i.zoomSpeed)),j(L.y),B.copy(U)}function rt(re){i.enableZoom&&st(re),i.enablePan&&gt(re)}function Ot(re){i.enableZoom&&st(re),i.enableRotate&&He(re)}function Gt(re){var Se,tt;i.enabled!==!1&&(P.length===0&&((Se=i.domElement)==null||Se.ownerDocument.addEventListener("pointermove",$),(tt=i.domElement)==null||tt.ownerDocument.addEventListener("pointerup",X)),Rt(re),re.pointerType==="touch"?xt(re):Ee(re))}function $(re){i.enabled!==!1&&(re.pointerType==="touch"?pt(re):Fe(re))}function X(re){var Se,tt,ce;nt(re),P.length===0&&((Se=i.domElement)==null||Se.releasePointerCapture(re.pointerId),(tt=i.domElement)==null||tt.ownerDocument.removeEventListener("pointermove",$),(ce=i.domElement)==null||ce.ownerDocument.removeEventListener("pointerup",X)),i.dispatchEvent(o),f=c.NONE}function Ee(re){let Se;switch(re.button){case 0:Se=i.mouseButtons.LEFT;break;case 1:Se=i.mouseButtons.MIDDLE;break;case 2:Se=i.mouseButtons.RIGHT;break;default:Se=-1}switch(Se){case nh.DOLLY:if(i.enableZoom===!1)return;ot(re),f=c.DOLLY;break;case nh.ROTATE:if(re.ctrlKey||re.metaKey||re.shiftKey){if(i.enablePan===!1)return;ve(re),f=c.PAN}else{if(i.enableRotate===!1)return;De(re),f=c.ROTATE}break;case nh.PAN:if(re.ctrlKey||re.metaKey||re.shiftKey){if(i.enableRotate===!1)return;De(re),f=c.ROTATE}else{if(i.enablePan===!1)return;ve(re),f=c.PAN}break;default:f=c.NONE}f!==c.NONE&&i.dispatchEvent(s)}function Fe(re){if(i.enabled!==!1)switch(f){case c.ROTATE:if(i.enableRotate===!1)return;Ne(re);break;case c.DOLLY:if(i.enableZoom===!1)return;Qe(re);break;case c.PAN:if(i.enablePan===!1)return;bt(re);break}}function ke(re){i.enabled===!1||i.enableZoom===!1||f!==c.NONE&&f!==c.ROTATE||(re.preventDefault(),i.dispatchEvent(s),ct(re),i.dispatchEvent(o))}function Le(re){i.enabled===!1||i.enablePan===!1||zt(re)}function xt(re){switch(ut(re),P.length){case 1:switch(i.touches.ONE){case ih.ROTATE:if(i.enableRotate===!1)return;Xt(),f=c.TOUCH_ROTATE;break;case ih.PAN:if(i.enablePan===!1)return;ae(),f=c.TOUCH_PAN;break;default:f=c.NONE}break;case 2:switch(i.touches.TWO){case ih.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;je(),f=c.TOUCH_DOLLY_PAN;break;case ih.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Xe(),f=c.TOUCH_DOLLY_ROTATE;break;default:f=c.NONE}break;default:f=c.NONE}f!==c.NONE&&i.dispatchEvent(s)}function pt(re){switch(ut(re),f){case c.TOUCH_ROTATE:if(i.enableRotate===!1)return;He(re),i.update();break;case c.TOUCH_PAN:if(i.enablePan===!1)return;gt(re),i.update();break;case c.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;rt(re),i.update();break;case c.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ot(re),i.update();break;default:f=c.NONE}}function St(re){i.enabled!==!1&&re.preventDefault()}function Rt(re){P.push(re)}function nt(re){delete Y[re.pointerId];for(let Se=0;Se<P.length;Se++)if(P[Se].pointerId==re.pointerId){P.splice(Se,1);return}}function ut(re){let Se=Y[re.pointerId];Se===void 0&&(Se=new Ze,Y[re.pointerId]=Se),Se.set(re.pageX,re.pageY)}function Dt(re){const Se=re.pointerId===P[0].pointerId?P[1]:P[0];return Y[Se.pointerId]}this.dollyIn=(re=se())=>{fe(re),i.update()},this.dollyOut=(re=se())=>{j(re),i.update()},this.getScale=()=>y,this.setScale=re=>{ge(re),i.update()},this.getZoomScale=()=>se(),t!==void 0&&this.connect(t),this.update()}};function Q_(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const mh="srgb",yc="srgb-linear",tD=3001,WY=3e3;class hT extends Qa{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new eq(t)}),this.register(function(t){return new tq(t)}),this.register(function(t){return new uq(t)}),this.register(function(t){return new fq(t)}),this.register(function(t){return new hq(t)}),this.register(function(t){return new iq(t)}),this.register(function(t){return new aq(t)}),this.register(function(t){return new sq(t)}),this.register(function(t){return new rq(t)}),this.register(function(t){return new $Y(t)}),this.register(function(t){return new oq(t)}),this.register(function(t){return new nq(t)}),this.register(function(t){return new cq(t)}),this.register(function(t){return new lq(t)}),this.register(function(t){return new ZY(t)}),this.register(function(t){return new dq(t)}),this.register(function(t){return new pq(t)})}load(e,t,i,a){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const d=Ou.extractUrlBase(e);o=Ou.resolveURL(d,this.path)}else o=Ou.extractUrlBase(e);this.manager.itemStart(e);const c=function(d){a?a(d):console.error(d),s.manager.itemError(e),s.manager.itemEnd(e)},f=new Za(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,function(d){try{s.parse(d,o,function(m){t(m),s.manager.itemEnd(e)},c)}catch(m){c(m)}},i,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,a){let s;const o={},c={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Q_(new Uint8Array(e.slice(0,4)))===aU){try{o[Un.KHR_BINARY_GLTF]=new mq(e)}catch(m){a&&a(m);return}s=JSON.parse(o[Un.KHR_BINARY_GLTF].content)}else s=JSON.parse(Q_(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){a&&a(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const f=new wq(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});f.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const m=this.pluginCallbacks[d](f);m.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),c[m.name]=m,o[m.name]=!0}if(s.extensionsUsed)for(let d=0;d<s.extensionsUsed.length;++d){const m=s.extensionsUsed[d],g=s.extensionsRequired||[];switch(m){case Un.KHR_MATERIALS_UNLIT:o[m]=new QY;break;case Un.KHR_DRACO_MESH_COMPRESSION:o[m]=new gq(s,this.dracoLoader);break;case Un.KHR_TEXTURE_TRANSFORM:o[m]=new vq;break;case Un.KHR_MESH_QUANTIZATION:o[m]=new yq;break;default:g.indexOf(m)>=0&&c[m]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+m+'".')}}f.setExtensions(o),f.setPlugins(c),f.parse(i,a)}parseAsync(e,t){const i=this;return new Promise(function(a,s){i.parse(e,t,a,s)})}}function JY(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Un={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ZY{constructor(e){this.parser=e,this.name=Un.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,a=t.length;i<a;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let a=t.cache.get(i);if(a)return a;const s=t.json,f=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let d;const m=new Et(16777215);f.color!==void 0&&m.setRGB(f.color[0],f.color[1],f.color[2],yc);const g=f.range!==void 0?f.range:0;switch(f.type){case"directional":d=new WE(m),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new KE(m),d.distance=g;break;case"spot":d=new qE(m),d.distance=g,f.spot=f.spot||{},f.spot.innerConeAngle=f.spot.innerConeAngle!==void 0?f.spot.innerConeAngle:0,f.spot.outerConeAngle=f.spot.outerConeAngle!==void 0?f.spot.outerConeAngle:Math.PI/4,d.angle=f.spot.outerConeAngle,d.penumbra=1-f.spot.innerConeAngle/f.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+f.type)}return d.position.set(0,0,0),d.decay=2,fc(d,f),f.intensity!==void 0&&(d.intensity=f.intensity),d.name=t.createUniqueName(f.name||"light_"+e),a=Promise.resolve(d),t.cache.add(i,a),a}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],c=(s.extensions&&s.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(f){return i._getNodeRef(t.cache,c,f)})}}class QY{constructor(){this.name=Un.KHR_MATERIALS_UNLIT}getMaterialType(){return er}extendParams(e,t,i){const a=[];e.color=new Et(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],yc),e.opacity=o[3]}s.baseColorTexture!==void 0&&a.push(i.assignTexture(e,"map",s.baseColorTexture,mh))}return Promise.all(a)}}class $Y{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=a.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class eq{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Jr}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],o=a.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const c=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ze(c,c)}return Promise.all(s)}}class tq{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Jr}extendMaterialParams(e,t){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=a.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class nq{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Jr}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],o=a.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class iq{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Jr}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Et(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=a.extensions[this.name];if(o.sheenColorFactor!==void 0){const c=o.sheenColorFactor;t.sheenColor.setRGB(c[0],c[1],c[2],yc)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,mh)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class aq{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Jr}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],o=a.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class sq{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Jr}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],o=a.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const c=o.attenuationColor||[1,1,1];return t.attenuationColor=new Et().setRGB(c[0],c[1],c[2],yc),Promise.all(s)}}class rq{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Jr}extendMaterialParams(e,t){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=a.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class oq{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Jr}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],o=a.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const c=o.specularColorFactor||[1,1,1];return t.specularColor=new Et().setRGB(c[0],c[1],c[2],yc),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,mh)),Promise.all(s)}}class lq{constructor(e){this.parser=e,this.name=Un.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Jr}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],o=a.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class cq{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Jr}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],o=a.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class uq{constructor(e){this.parser=e,this.name=Un.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,a=i.textures[e];if(!a.extensions||!a.extensions[this.name])return null;const s=a.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class fq{constructor(e){this.parser=e,this.name=Un.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,a=i.json,s=a.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],c=a.images[o.source];let f=i.textureLoader;if(c.uri){const d=i.options.manager.getHandler(c.uri);d!==null&&(f=d)}return this.detectSupport().then(function(d){if(d)return i.loadTextureImage(e,o.source,f);if(a.extensionsRequired&&a.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class hq{constructor(e){this.parser=e,this.name=Un.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,a=i.json,s=a.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],c=a.images[o.source];let f=i.textureLoader;if(c.uri){const d=i.options.manager.getHandler(c.uri);d!==null&&(f=d)}return this.detectSupport().then(function(d){if(d)return i.loadTextureImage(e,o.source,f);if(a.extensionsRequired&&a.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class dq{constructor(e){this.name=Un.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const a=i.extensions[this.name],s=this.parser.getDependency("buffer",a.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(c){const f=a.byteOffset||0,d=a.byteLength||0,m=a.count,g=a.byteStride,y=new Uint8Array(c,f,d);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(m,g,y,a.mode,a.filter).then(function(_){return _.buffer}):o.ready.then(function(){const _=new ArrayBuffer(m*g);return o.decodeGltfBuffer(new Uint8Array(_),m,g,y,a.mode,a.filter),_})})}else return null}}class pq{constructor(e){this.name=Un.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const a=t.meshes[i.mesh];for(const d of a.primitives)if(d.mode!==Gr.TRIANGLES&&d.mode!==Gr.TRIANGLE_STRIP&&d.mode!==Gr.TRIANGLE_FAN&&d.mode!==void 0)return null;const o=i.extensions[this.name].attributes,c=[],f={};for(const d in o)c.push(this.parser.getDependency("accessor",o[d]).then(m=>(f[d]=m,f[d])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(d=>{const m=d.pop(),g=m.isGroup?m.children:[m],y=d[0].count,_=[];for(const A of g){const T=new $t,E=new Q,b=new Pa,R=new Q(1,1,1),D=new RE(A.geometry,A.material,y);for(let B=0;B<y;B++)f.TRANSLATION&&E.fromBufferAttribute(f.TRANSLATION,B),f.ROTATION&&b.fromBufferAttribute(f.ROTATION,B),f.SCALE&&R.fromBufferAttribute(f.SCALE,B),D.setMatrixAt(B,T.compose(E,b,R));for(const B in f)if(B==="_COLOR_0"){const U=f[B];D.instanceColor=new Sh(U.array,U.itemSize,U.normalized)}else B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&A.geometry.setAttribute(B,f[B]);Hn.prototype.copy.call(D,A),this.parser.assignFinalMaterial(D),_.push(D)}return m.isGroup?(m.clear(),m.add(..._),m):_[0]}))}}const aU="glTF",wg=12,nD={JSON:1313821514,BIN:5130562};class mq{constructor(e){this.name=Un.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,wg);if(this.header={magic:Q_(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==aU)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-wg,a=new DataView(e,wg);let s=0;for(;s<i;){const o=a.getUint32(s,!0);s+=4;const c=a.getUint32(s,!0);if(s+=4,c===nD.JSON){const f=new Uint8Array(e,wg+s,o);this.content=Q_(f)}else if(c===nD.BIN){const f=wg+s;this.body=e.slice(f,f+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class gq{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Un.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,a=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,c={},f={},d={};for(const m in o){const g=bM[m]||m.toLowerCase();c[g]=o[m]}for(const m in e.attributes){const g=bM[m]||m.toLowerCase();if(o[m]!==void 0){const y=i.accessors[e.attributes[m]],_=gp[y.componentType];d[g]=_.name,f[g]=y.normalized===!0}}return t.getDependency("bufferView",s).then(function(m){return new Promise(function(g,y){a.decodeDracoFile(m,function(_){for(const A in _.attributes){const T=_.attributes[A],E=f[A];E!==void 0&&(T.normalized=E)}g(_)},c,d,yc,y)})})}}class vq{constructor(){this.name=Un.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class yq{constructor(){this.name=Un.KHR_MESH_QUANTIZATION}}class sU extends Yp{constructor(e,t,i,a){super(e,t,i,a)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,a=this.valueSize,s=e*a*3+a;for(let o=0;o!==a;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,a){const s=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=c*2,d=c*3,m=a-t,g=(i-t)/m,y=g*g,_=y*g,A=e*d,T=A-d,E=-2*_+3*y,b=_-y,R=1-E,D=b-y+g;for(let B=0;B!==c;B++){const U=o[T+B+c],L=o[T+B+f]*m,z=o[A+B+c],I=o[A+B]*m;s[B]=R*U+D*L+E*z+b*I}return s}}const xq=new Pa;class _q extends sU{interpolate_(e,t,i,a){const s=super.interpolate_(e,t,i,a);return xq.fromArray(s).normalize().toArray(s),s}}const Gr={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},gp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},iD={9728:Ia,9729:ni,9984:pb,9985:pp,9986:ch,9987:Yr},aD={33071:aa,33648:Ap,10497:Pu},g1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},bM={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...fT>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Cu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},bq={CUBICSPLINE:void 0,LINEAR:wp,STEP:Cp},v1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Aq(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new q0({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:wl})),n.DefaultMaterial}function $f(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function fc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Sq(n,e,t){let i=!1,a=!1,s=!1;for(let d=0,m=e.length;d<m;d++){const g=e[d];if(g.POSITION!==void 0&&(i=!0),g.NORMAL!==void 0&&(a=!0),g.COLOR_0!==void 0&&(s=!0),i&&a&&s)break}if(!i&&!a&&!s)return Promise.resolve(n);const o=[],c=[],f=[];for(let d=0,m=e.length;d<m;d++){const g=e[d];if(i){const y=g.POSITION!==void 0?t.getDependency("accessor",g.POSITION):n.attributes.position;o.push(y)}if(a){const y=g.NORMAL!==void 0?t.getDependency("accessor",g.NORMAL):n.attributes.normal;c.push(y)}if(s){const y=g.COLOR_0!==void 0?t.getDependency("accessor",g.COLOR_0):n.attributes.color;f.push(y)}}return Promise.all([Promise.all(o),Promise.all(c),Promise.all(f)]).then(function(d){const m=d[0],g=d[1],y=d[2];return i&&(n.morphAttributes.position=m),a&&(n.morphAttributes.normal=g),s&&(n.morphAttributes.color=y),n.morphTargetsRelative=!0,n})}function Mq(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,a=t.length;i<a;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Eq(n){let e;const t=n.extensions&&n.extensions[Un.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+y1(t.attributes):e=n.indices+":"+y1(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,a=n.targets.length;i<a;i++)e+=":"+y1(n.targets[i]);return e}function y1(n){let e="";const t=Object.keys(n).sort();for(let i=0,a=t.length;i<a;i++)e+=t[i]+":"+n[t[i]]+";";return e}function AM(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Tq(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Cq=new $t;class wq{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new JY,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,a=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,a=navigator.userAgent.indexOf("Firefox")>-1,s=a?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||a&&s<98?this.textureLoader=new uO(this.options.manager):this.textureLoader=new yO(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Za(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,a=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const c={scene:o[0][a.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:a.asset,parser:i,userData:{}};return $f(s,c,a),fc(c,a),Promise.all(i._invokeAll(function(f){return f.afterRoot&&f.afterRoot(c)})).then(function(){for(const f of c.scenes)f.updateMatrixWorld();e(c)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let a=0,s=t.length;a<s;a++){const o=t[a].joints;for(let c=0,f=o.length;c<f;c++)e[o[c]].isBone=!0}for(let a=0,s=e.length;a<s;a++){const o=e[a];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const a=i.clone(),s=(o,c)=>{const f=this.associations.get(o);f!=null&&this.associations.set(c,f);for(const[d,m]of o.children.entries())s(m,c.children[d])};return s(i,a),a.name+="_instance_"+e.uses[t]++,a}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const a=e(t[i]);if(a)return a}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let a=0;a<t.length;a++){const s=e(t[a]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let a=this.cache.get(i);if(!a){switch(e){case"scene":a=this.loadScene(t);break;case"node":a=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":a=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":a=this.loadAccessor(t);break;case"bufferView":a=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":a=this.loadBuffer(t);break;case"material":a=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":a=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":a=this.loadSkin(t);break;case"animation":a=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":a=this.loadCamera(t);break;default:if(a=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!a)throw new Error("Unknown type: "+e);break}this.cache.add(i,a)}return a}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,a=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(a.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Un.KHR_BINARY_GLTF].body);const a=this.options;return new Promise(function(s,o){i.load(Ou.resolveURL(t.uri,a.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const a=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+a)})}loadAccessor(e){const t=this,i=this.json,a=this.json.accessors[e];if(a.bufferView===void 0&&a.sparse===void 0){const o=g1[a.type],c=gp[a.componentType],f=a.normalized===!0,d=new c(a.count*o);return Promise.resolve(new Yn(d,o,f))}const s=[];return a.bufferView!==void 0?s.push(this.getDependency("bufferView",a.bufferView)):s.push(null),a.sparse!==void 0&&(s.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(s).then(function(o){const c=o[0],f=g1[a.type],d=gp[a.componentType],m=d.BYTES_PER_ELEMENT,g=m*f,y=a.byteOffset||0,_=a.bufferView!==void 0?i.bufferViews[a.bufferView].byteStride:void 0,A=a.normalized===!0;let T,E;if(_&&_!==g){const b=Math.floor(y/_),R="InterleavedBuffer:"+a.bufferView+":"+a.componentType+":"+b+":"+a.count;let D=t.cache.get(R);D||(T=new d(c,b*_,a.count*_/m),D=new H0(T,_/m),t.cache.add(R,D)),E=new Fu(D,f,y%_/m,A)}else c===null?T=new d(a.count*f):T=new d(c,y,a.count*f),E=new Yn(T,f,A);if(a.sparse!==void 0){const b=g1.SCALAR,R=gp[a.sparse.indices.componentType],D=a.sparse.indices.byteOffset||0,B=a.sparse.values.byteOffset||0,U=new R(o[1],D,a.sparse.count*b),L=new d(o[2],B,a.sparse.count*f);c!==null&&(E=new Yn(E.array.slice(),E.itemSize,E.normalized));for(let z=0,I=U.length;z<I;z++){const O=U[z];if(E.setX(O,L[z*f]),f>=2&&E.setY(O,L[z*f+1]),f>=3&&E.setZ(O,L[z*f+2]),f>=4&&E.setW(O,L[z*f+3]),f>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return E})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let c=this.textureLoader;if(o.uri){const f=i.manager.getHandler(o.uri);f!==null&&(c=f)}return this.loadTextureImage(e,s,c)}loadTextureImage(e,t,i){const a=this,s=this.json,o=s.textures[e],c=s.images[t],f=(c.uri||c.bufferView)+":"+o.sampler;if(this.textureCache[f])return this.textureCache[f];const d=this.loadImageSource(t,i).then(function(m){m.flipY=!1,m.name=o.name||c.name||"",m.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(m.name=c.uri);const y=(s.samplers||{})[o.sampler]||{};return m.magFilter=iD[y.magFilter]||ni,m.minFilter=iD[y.minFilter]||Yr,m.wrapS=aD[y.wrapS]||Pu,m.wrapT=aD[y.wrapT]||Pu,a.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[f]=d,d}loadImageSource(e,t){const i=this,a=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(g=>g.clone());const o=a.images[e],c=self.URL||self.webkitURL;let f=o.uri||"",d=!1;if(o.bufferView!==void 0)f=i.getDependency("bufferView",o.bufferView).then(function(g){d=!0;const y=new Blob([g],{type:o.mimeType});return f=c.createObjectURL(y),f});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(f).then(function(g){return new Promise(function(y,_){let A=y;t.isImageBitmapLoader===!0&&(A=function(T){const E=new ri(T);E.needsUpdate=!0,y(E)}),t.load(Ou.resolveURL(g,s.path),A,void 0,_)})}).then(function(g){return d===!0&&c.revokeObjectURL(f),fc(g,o),g.userData.mimeType=o.mimeType||Tq(o.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",f),g});return this.sourceCache[e]=m,m}assignTexture(e,t,i,a){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Un.KHR_TEXTURE_TRANSFORM]){const c=i.extensions!==void 0?i.extensions[Un.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const f=s.associations.get(o);o=s.extensions[Un.KHR_TEXTURE_TRANSFORM].extendTexture(o,c),s.associations.set(o,f)}}return a!==void 0&&(typeof a=="number"&&(a=a===tD?mh:yc),"colorSpace"in o?o.colorSpace=a:o.encoding=a===mh?tD:WY),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const a=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+i.uuid;let f=this.cache.get(c);f||(f=new Rb,Ma.prototype.copy.call(f,i),f.color.copy(i.color),f.map=i.map,f.sizeAttenuation=!1,this.cache.add(c,f)),i=f}else if(e.isLine){const c="LineBasicMaterial:"+i.uuid;let f=this.cache.get(c);f||(f=new fs,Ma.prototype.copy.call(f,i),f.color.copy(i.color),f.map=i.map,this.cache.add(c,f)),i=f}if(a||s||o){let c="ClonedMaterial:"+i.uuid+":";a&&(c+="derivative-tangents:"),s&&(c+="vertex-colors:"),o&&(c+="flat-shading:");let f=this.cache.get(c);f||(f=i.clone(),s&&(f.vertexColors=!0),o&&(f.flatShading=!0),a&&(f.normalScale&&(f.normalScale.y*=-1),f.clearcoatNormalScale&&(f.clearcoatNormalScale.y*=-1)),this.cache.add(c,f),this.associations.set(f,this.associations.get(i))),i=f}e.material=i}getMaterialType(){return q0}loadMaterial(e){const t=this,i=this.json,a=this.extensions,s=i.materials[e];let o;const c={},f=s.extensions||{},d=[];if(f[Un.KHR_MATERIALS_UNLIT]){const g=a[Un.KHR_MATERIALS_UNLIT];o=g.getMaterialType(),d.push(g.extendParams(c,s,t))}else{const g=s.pbrMetallicRoughness||{};if(c.color=new Et(1,1,1),c.opacity=1,Array.isArray(g.baseColorFactor)){const y=g.baseColorFactor;c.color.setRGB(y[0],y[1],y[2],yc),c.opacity=y[3]}g.baseColorTexture!==void 0&&d.push(t.assignTexture(c,"map",g.baseColorTexture,mh)),c.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,c.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(d.push(t.assignTexture(c,"metalnessMap",g.metallicRoughnessTexture)),d.push(t.assignTexture(c,"roughnessMap",g.metallicRoughnessTexture))),o=this._invokeOne(function(y){return y.getMaterialType&&y.getMaterialType(e)}),d.push(Promise.all(this._invokeAll(function(y){return y.extendMaterialParams&&y.extendMaterialParams(e,c)})))}s.doubleSided===!0&&(c.side=kr);const m=s.alphaMode||v1.OPAQUE;if(m===v1.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,m===v1.MASK&&(c.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==er&&(d.push(t.assignTexture(c,"normalMap",s.normalTexture)),c.normalScale=new Ze(1,1),s.normalTexture.scale!==void 0)){const g=s.normalTexture.scale;c.normalScale.set(g,g)}if(s.occlusionTexture!==void 0&&o!==er&&(d.push(t.assignTexture(c,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==er){const g=s.emissiveFactor;c.emissive=new Et().setRGB(g[0],g[1],g[2],yc)}return s.emissiveTexture!==void 0&&o!==er&&d.push(t.assignTexture(c,"emissiveMap",s.emissiveTexture,mh)),Promise.all(d).then(function(){const g=new o(c);return s.name&&(g.name=s.name),fc(g,s),t.associations.set(g,{materials:e}),s.extensions&&$f(a,g,s),g})}createUniqueName(e){const t=kn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,a=this.primitiveCache;function s(c){return i[Un.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,t).then(function(f){return sD(f,c,t)})}const o=[];for(let c=0,f=e.length;c<f;c++){const d=e[c],m=Eq(d),g=a[m];if(g)o.push(g.promise);else{let y;d.extensions&&d.extensions[Un.KHR_DRACO_MESH_COMPRESSION]?y=s(d):y=sD(new gn,d,t),a[m]={primitive:d,promise:y},o.push(y)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,a=this.extensions,s=i.meshes[e],o=s.primitives,c=[];for(let f=0,d=o.length;f<d;f++){const m=o[f].material===void 0?Aq(this.cache):this.getDependency("material",o[f].material);c.push(m)}return c.push(t.loadGeometries(o)),Promise.all(c).then(function(f){const d=f.slice(0,f.length-1),m=f[f.length-1],g=[];for(let _=0,A=m.length;_<A;_++){const T=m[_],E=o[_];let b;const R=d[_];if(E.mode===Gr.TRIANGLES||E.mode===Gr.TRIANGLE_STRIP||E.mode===Gr.TRIANGLE_FAN||E.mode===void 0)b=s.isSkinnedMesh===!0?new wE(T,R):new Oi(T,R),b.isSkinnedMesh===!0&&b.normalizeSkinWeights(),E.mode===Gr.TRIANGLE_STRIP?b.geometry=Q2(b.geometry,_E):E.mode===Gr.TRIANGLE_FAN&&(b.geometry=Q2(b.geometry,G_));else if(E.mode===Gr.LINES)b=new Lo(T,R);else if(E.mode===Gr.LINE_STRIP)b=new Sc(T,R);else if(E.mode===Gr.LINE_LOOP)b=new DE(T,R);else if(E.mode===Gr.POINTS)b=new BE(T,R);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+E.mode);Object.keys(b.geometry.morphAttributes).length>0&&Mq(b,s),b.name=t.createUniqueName(s.name||"mesh_"+e),fc(b,s),E.extensions&&$f(a,b,E),t.assignFinalMaterial(b),g.push(b)}for(let _=0,A=g.length;_<A;_++)t.associations.set(g[_],{meshes:e,primitives:_});if(g.length===1)return s.extensions&&$f(a,g[0],s),g[0];const y=new mc;s.extensions&&$f(a,y,s),t.associations.set(y,{meshes:e});for(let _=0,A=g.length;_<A;_++)y.add(g[_]);return y})}loadCamera(e){let t;const i=this.json.cameras[e],a=i[i.type];if(!a){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Ji(EN.radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):i.type==="orthographic"&&(t=new Tl(-a.xmag,a.xmag,a.ymag,-a.ymag,a.znear,a.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),fc(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let a=0,s=t.joints.length;a<s;a++)i.push(this._loadNodeShallow(t.joints[a]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(a){const s=a.pop(),o=a,c=[],f=[];for(let d=0,m=o.length;d<m;d++){const g=o[d];if(g){c.push(g);const y=new $t;s!==null&&y.fromArray(s.array,d*16),f.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[d])}return new G0(c,f)})}loadAnimation(e){const t=this.json,i=this,a=t.animations[e],s=a.name?a.name:"animation_"+e,o=[],c=[],f=[],d=[],m=[];for(let g=0,y=a.channels.length;g<y;g++){const _=a.channels[g],A=a.samplers[_.sampler],T=_.target,E=T.node,b=a.parameters!==void 0?a.parameters[A.input]:A.input,R=a.parameters!==void 0?a.parameters[A.output]:A.output;T.node!==void 0&&(o.push(this.getDependency("node",E)),c.push(this.getDependency("accessor",b)),f.push(this.getDependency("accessor",R)),d.push(A),m.push(T))}return Promise.all([Promise.all(o),Promise.all(c),Promise.all(f),Promise.all(d),Promise.all(m)]).then(function(g){const y=g[0],_=g[1],A=g[2],T=g[3],E=g[4],b=[];for(let R=0,D=y.length;R<D;R++){const B=y[R],U=_[R],L=A[R],z=T[R],I=E[R];if(B===void 0)continue;B.updateMatrix&&B.updateMatrix();const O=i._createAnimationTracks(B,U,L,z,I);if(O)for(let P=0;P<O.length;P++)b.push(O[P])}return new Up(s,void 0,b)})}createNodeMesh(e){const t=this.json,i=this,a=t.nodes[e];return a.mesh===void 0?null:i.getDependency("mesh",a.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,a.mesh,s);return a.weights!==void 0&&o.traverse(function(c){if(c.isMesh)for(let f=0,d=a.weights.length;f<d;f++)c.morphTargetInfluences[f]=a.weights[f]}),o})}loadNode(e){const t=this.json,i=this,a=t.nodes[e],s=i._loadNodeShallow(e),o=[],c=a.children||[];for(let d=0,m=c.length;d<m;d++)o.push(i.getDependency("node",c[d]));const f=a.skin===void 0?Promise.resolve(null):i.getDependency("skin",a.skin);return Promise.all([s,Promise.all(o),f]).then(function(d){const m=d[0],g=d[1],y=d[2];y!==null&&m.traverse(function(_){_.isSkinnedMesh&&_.bind(y,Cq)});for(let _=0,A=g.length;_<A;_++)m.add(g[_]);return m})}_loadNodeShallow(e){const t=this.json,i=this.extensions,a=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?a.createUniqueName(s.name):"",c=[],f=a._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});return f&&c.push(f),s.camera!==void 0&&c.push(a.getDependency("camera",s.camera).then(function(d){return a._getNodeRef(a.cameraCache,s.camera,d)})),a._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){c.push(d)}),this.nodeCache[e]=Promise.all(c).then(function(d){let m;if(s.isBone===!0?m=new Cb:d.length>1?m=new mc:d.length===1?m=d[0]:m=new Hn,m!==d[0])for(let g=0,y=d.length;g<y;g++)m.add(d[g]);if(s.name&&(m.userData.name=s.name,m.name=o),fc(m,s),s.extensions&&$f(i,m,s),s.matrix!==void 0){const g=new $t;g.fromArray(s.matrix),m.applyMatrix4(g)}else s.translation!==void 0&&m.position.fromArray(s.translation),s.rotation!==void 0&&m.quaternion.fromArray(s.rotation),s.scale!==void 0&&m.scale.fromArray(s.scale);return a.associations.has(m)||a.associations.set(m,{}),a.associations.get(m).nodes=e,m}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],a=this,s=new mc;i.name&&(s.name=a.createUniqueName(i.name)),fc(s,i),i.extensions&&$f(t,s,i);const o=i.nodes||[],c=[];for(let f=0,d=o.length;f<d;f++)c.push(a.getDependency("node",o[f]));return Promise.all(c).then(function(f){for(let m=0,g=f.length;m<g;m++)s.add(f[m]);const d=m=>{const g=new Map;for(const[y,_]of a.associations)(y instanceof Ma||y instanceof ri)&&g.set(y,_);return m.traverse(y=>{const _=a.associations.get(y);_!=null&&g.set(y,_)}),g};return a.associations=d(s),s})}_createAnimationTracks(e,t,i,a,s){const o=[],c=e.name?e.name:e.uuid,f=[];Cu[s.path]===Cu.weights?e.traverse(function(y){y.morphTargetInfluences&&f.push(y.name?y.name:y.uuid)}):f.push(c);let d;switch(Cu[s.path]){case Cu.weights:d=Eh;break;case Cu.rotation:d=Th;break;case Cu.position:case Cu.scale:d=Ch;break;default:switch(i.itemSize){case 1:d=Eh;break;case 2:case 3:default:d=Ch;break}break}const m=a.interpolation!==void 0?bq[a.interpolation]:wp,g=this._getArrayFromAccessor(i);for(let y=0,_=f.length;y<_;y++){const A=new d(f[y]+"."+Cu[s.path],t.array,g,m);a.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(A),o.push(A)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=AM(t.constructor),a=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)a[s]=t[s]*i;t=a}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const a=this instanceof Th?_q:sU;return new a(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Rq(n,e,t){const i=e.attributes,a=new Ja;if(i.POSITION!==void 0){const c=t.json.accessors[i.POSITION],f=c.min,d=c.max;if(f!==void 0&&d!==void 0){if(a.set(new Q(f[0],f[1],f[2]),new Q(d[0],d[1],d[2])),c.normalized){const m=AM(gp[c.componentType]);a.min.multiplyScalar(m),a.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const c=new Q,f=new Q;for(let d=0,m=s.length;d<m;d++){const g=s[d];if(g.POSITION!==void 0){const y=t.json.accessors[g.POSITION],_=y.min,A=y.max;if(_!==void 0&&A!==void 0){if(f.setX(Math.max(Math.abs(_[0]),Math.abs(A[0]))),f.setY(Math.max(Math.abs(_[1]),Math.abs(A[1]))),f.setZ(Math.max(Math.abs(_[2]),Math.abs(A[2]))),y.normalized){const T=AM(gp[y.componentType]);f.multiplyScalar(T)}c.max(f)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(c)}n.boundingBox=a;const o=new Fa;a.getCenter(o.center),o.radius=a.min.distanceTo(a.max)/2,n.boundingSphere=o}function sD(n,e,t){const i=e.attributes,a=[];function s(o,c){return t.getDependency("accessor",o).then(function(f){n.setAttribute(c,f)})}for(const o in i){const c=bM[o]||o.toLowerCase();c in n.attributes||a.push(s(i[o],c))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(c){n.setIndex(c)});a.push(o)}return fc(n,e),Rq(n,e,t),Promise.all(a).then(function(){return e.targets!==void 0?Sq(n,e.targets,t):n})}class Dq extends jE{constructor(e){super(e),this.type=La}parse(e){const o=function(I,O){switch(I){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(O||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(O||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(O||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(O||""))}},g=function(I,O,P){O=O||1024;let ie=I.pos,se=-1,ue=0,me="",H=String.fromCharCode.apply(null,new Uint16Array(I.subarray(ie,ie+128)));for(;0>(se=H.indexOf(`
`))&&ue<O&&ie<I.byteLength;)me+=H,ue+=H.length,ie+=128,H+=String.fromCharCode.apply(null,new Uint16Array(I.subarray(ie,ie+128)));return-1<se?(I.pos+=ue+se+1,me+H.slice(0,se)):!1},y=function(I){const O=/^#\?(\S+)/,P=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Y=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,ie=/^\s*FORMAT=(\S+)\s*$/,se=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,ue={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let me,H;for((I.pos>=I.byteLength||!(me=g(I)))&&o(1,"no header found"),(H=me.match(O))||o(3,"bad initial token"),ue.valid|=1,ue.programtype=H[1],ue.string+=me+`
`;me=g(I),me!==!1;){if(ue.string+=me+`
`,me.charAt(0)==="#"){ue.comments+=me+`
`;continue}if((H=me.match(P))&&(ue.gamma=parseFloat(H[1])),(H=me.match(Y))&&(ue.exposure=parseFloat(H[1])),(H=me.match(ie))&&(ue.valid|=2,ue.format=H[1]),(H=me.match(se))&&(ue.valid|=4,ue.height=parseInt(H[1],10),ue.width=parseInt(H[2],10)),ue.valid&2&&ue.valid&4)break}return ue.valid&2||o(3,"missing format specifier"),ue.valid&4||o(3,"missing image size specifier"),ue},_=function(I,O,P){const Y=O;if(Y<8||Y>32767||I[0]!==2||I[1]!==2||I[2]&128)return new Uint8Array(I);Y!==(I[2]<<8|I[3])&&o(3,"wrong scanline width");const ie=new Uint8Array(4*O*P);ie.length||o(4,"unable to allocate buffer space");let se=0,ue=0;const me=4*Y,H=new Uint8Array(4),W=new Uint8Array(me);let q=P;for(;q>0&&ue<I.byteLength;){ue+4>I.byteLength&&o(1),H[0]=I[ue++],H[1]=I[ue++],H[2]=I[ue++],H[3]=I[ue++],(H[0]!=2||H[1]!=2||(H[2]<<8|H[3])!=Y)&&o(3,"bad rgbe scanline format");let ge=0,j;for(;ge<me&&ue<I.byteLength;){j=I[ue++];const _e=j>128;if(_e&&(j-=128),(j===0||ge+j>me)&&o(3,"bad scanline data"),_e){const Ae=I[ue++];for(let De=0;De<j;De++)W[ge++]=Ae}else W.set(I.subarray(ue,ue+j),ge),ge+=j,ue+=j}const fe=Y;for(let _e=0;_e<fe;_e++){let Ae=0;ie[se]=W[_e+Ae],Ae+=Y,ie[se+1]=W[_e+Ae],Ae+=Y,ie[se+2]=W[_e+Ae],Ae+=Y,ie[se+3]=W[_e+Ae],se+=4}q--}return ie},A=function(I,O,P,Y){const ie=I[O+3],se=Math.pow(2,ie-128)/255;P[Y+0]=I[O+0]*se,P[Y+1]=I[O+1]*se,P[Y+2]=I[O+2]*se,P[Y+3]=1},T=function(I,O,P,Y){const ie=I[O+3],se=Math.pow(2,ie-128)/255;P[Y+0]=hh.toHalfFloat(Math.min(I[O+0]*se,65504)),P[Y+1]=hh.toHalfFloat(Math.min(I[O+1]*se,65504)),P[Y+2]=hh.toHalfFloat(Math.min(I[O+2]*se,65504)),P[Y+3]=hh.toHalfFloat(1)},E=new Uint8Array(e);E.pos=0;const b=y(E),R=b.width,D=b.height,B=_(E.subarray(E.pos),R,D);let U,L,z;switch(this.type){case Vi:z=B.length/4;const I=new Float32Array(z*4);for(let P=0;P<z;P++)A(B,P*4,I,P*4);U=I,L=Vi;break;case La:z=B.length/4;const O=new Uint16Array(z*4);for(let P=0;P<z;P++)T(B,P*4,O,P*4);U=O,L=La;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:R,height:D,data:U,header:b.string,gamma:b.gamma,exposure:b.exposure,type:L}}setDataType(e){return this.type=e,this}load(e,t,i,a){function s(o,c){switch(o.type){case Vi:case La:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=ni,o.magFilter=ni,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,c)}return super.load(e,s,i,a)}}const Rg=fT>=152;class Bq extends jE{constructor(e){super(e),this.type=La}parse(e){const O=Math.pow(2.7182818,2.2);function P(k,Z){for(var pe=0,Re=0;Re<65536;++Re)(Re==0||k[Re>>3]&1<<(Re&7))&&(Z[pe++]=Re);for(var Oe=pe-1;pe<65536;)Z[pe++]=0;return Oe}function Y(k){for(var Z=0;Z<16384;Z++)k[Z]={},k[Z].len=0,k[Z].lit=0,k[Z].p=null}const ie={l:0,c:0,lc:0};function se(k,Z,pe,Re,Oe){for(;pe<k;)Z=Z<<8|Dt(Re,Oe),pe+=8;pe-=k,ie.l=Z>>pe&(1<<k)-1,ie.c=Z,ie.lc=pe}const ue=new Array(59);function me(k){for(var Z=0;Z<=58;++Z)ue[Z]=0;for(var Z=0;Z<65537;++Z)ue[k[Z]]+=1;for(var pe=0,Z=58;Z>0;--Z){var Re=pe+ue[Z]>>1;ue[Z]=pe,pe=Re}for(var Z=0;Z<65537;++Z){var Oe=k[Z];Oe>0&&(k[Z]=Oe|ue[Oe]++<<6)}}function H(k,Z,pe,Re,Oe,Ge,ht){for(var V=pe,te=0,oe=0;Oe<=Ge;Oe++){if(V.value-pe.value>Re)return!1;se(6,te,oe,k,V);var de=ie.l;if(te=ie.c,oe=ie.lc,ht[Oe]=de,de==63){if(V.value-pe.value>Re)throw"Something wrong with hufUnpackEncTable";se(8,te,oe,k,V);var ne=ie.l+6;if(te=ie.c,oe=ie.lc,Oe+ne>Ge+1)throw"Something wrong with hufUnpackEncTable";for(;ne--;)ht[Oe++]=0;Oe--}else if(de>=59){var ne=de-59+2;if(Oe+ne>Ge+1)throw"Something wrong with hufUnpackEncTable";for(;ne--;)ht[Oe++]=0;Oe--}}me(ht)}function W(k){return k&63}function q(k){return k>>6}function ge(k,Z,pe,Re){for(;Z<=pe;Z++){var Oe=q(k[Z]),Ge=W(k[Z]);if(Oe>>Ge)throw"Invalid table entry";if(Ge>14){var ht=Re[Oe>>Ge-14];if(ht.len)throw"Invalid table entry";if(ht.lit++,ht.p){var V=ht.p;ht.p=new Array(ht.lit);for(var te=0;te<ht.lit-1;++te)ht.p[te]=V[te]}else ht.p=new Array(1);ht.p[ht.lit-1]=Z}else if(Ge)for(var oe=0,te=1<<14-Ge;te>0;te--){var ht=Re[(Oe<<14-Ge)+oe];if(ht.len||ht.p)throw"Invalid table entry";ht.len=Ge,ht.lit=Z,oe++}}return!0}const j={c:0,lc:0};function fe(k,Z,pe,Re){k=k<<8|Dt(pe,Re),Z+=8,j.c=k,j.lc=Z}const _e={c:0,lc:0};function Ae(k,Z,pe,Re,Oe,Ge,ht,V,te,oe){if(k==Z){Re<8&&(fe(pe,Re,Oe,ht),pe=j.c,Re=j.lc),Re-=8;var de=pe>>Re,de=new Uint8Array([de])[0];if(te.value+de>oe)return!1;for(var ne=V[te.value-1];de-- >0;)V[te.value++]=ne}else if(te.value<oe)V[te.value++]=k;else return!1;_e.c=pe,_e.lc=Re}function De(k){return k&65535}function ot(k){var Z=De(k);return Z>32767?Z-65536:Z}const ve={a:0,b:0};function Ne(k,Z){var pe=ot(k),Re=ot(Z),Oe=Re,Ge=pe+(Oe&1)+(Oe>>1),ht=Ge,V=Ge-Oe;ve.a=ht,ve.b=V}function Qe(k,Z){var pe=De(k),Re=De(Z),Oe=pe-(Re>>1)&65535,Ge=Re+Oe-32768&65535;ve.a=Ge,ve.b=Oe}function bt(k,Z,pe,Re,Oe,Ge,ht){for(var V=ht<16384,te=pe>Oe?Oe:pe,oe=1,de;oe<=te;)oe<<=1;for(oe>>=1,de=oe,oe>>=1;oe>=1;){for(var ne=0,$e=ne+Ge*(Oe-de),ze=Ge*oe,qe=Ge*de,Ke=Re*oe,dt=Re*de,At,yt,Ft,en;ne<=$e;ne+=qe){for(var Wt=ne,xn=ne+Re*(pe-de);Wt<=xn;Wt+=dt){var Nt=Wt+Ke,Tt=Wt+ze,Nn=Tt+Ke;V?(Ne(k[Wt+Z],k[Tt+Z]),At=ve.a,Ft=ve.b,Ne(k[Nt+Z],k[Nn+Z]),yt=ve.a,en=ve.b,Ne(At,yt),k[Wt+Z]=ve.a,k[Nt+Z]=ve.b,Ne(Ft,en),k[Tt+Z]=ve.a,k[Nn+Z]=ve.b):(Qe(k[Wt+Z],k[Tt+Z]),At=ve.a,Ft=ve.b,Qe(k[Nt+Z],k[Nn+Z]),yt=ve.a,en=ve.b,Qe(At,yt),k[Wt+Z]=ve.a,k[Nt+Z]=ve.b,Qe(Ft,en),k[Tt+Z]=ve.a,k[Nn+Z]=ve.b)}if(pe&oe){var Tt=Wt+ze;V?Ne(k[Wt+Z],k[Tt+Z]):Qe(k[Wt+Z],k[Tt+Z]),At=ve.a,k[Tt+Z]=ve.b,k[Wt+Z]=At}}if(Oe&oe)for(var Wt=ne,xn=ne+Re*(pe-de);Wt<=xn;Wt+=dt){var Nt=Wt+Ke;V?Ne(k[Wt+Z],k[Nt+Z]):Qe(k[Wt+Z],k[Nt+Z]),At=ve.a,k[Nt+Z]=ve.b,k[Wt+Z]=At}de=oe,oe>>=1}return ne}function ct(k,Z,pe,Re,Oe,Ge,ht,V,te,oe){for(var de=0,ne=0,$e=V,ze=Math.trunc(Oe.value+(Ge+7)/8);Oe.value<ze;)for(fe(de,ne,pe,Oe),de=j.c,ne=j.lc;ne>=14;){var qe=de>>ne-14&16383,Ke=Z[qe];if(Ke.len)ne-=Ke.len,Ae(Ke.lit,ht,de,ne,pe,Re,Oe,te,oe,$e),de=_e.c,ne=_e.lc;else{if(!Ke.p)throw"hufDecode issues";var dt;for(dt=0;dt<Ke.lit;dt++){for(var At=W(k[Ke.p[dt]]);ne<At&&Oe.value<ze;)fe(de,ne,pe,Oe),de=j.c,ne=j.lc;if(ne>=At&&q(k[Ke.p[dt]])==(de>>ne-At&(1<<At)-1)){ne-=At,Ae(Ke.p[dt],ht,de,ne,pe,Re,Oe,te,oe,$e),de=_e.c,ne=_e.lc;break}}if(dt==Ke.lit)throw"hufDecode issues"}}var yt=8-Ge&7;for(de>>=yt,ne-=yt;ne>0;){var Ke=Z[de<<14-ne&16383];if(Ke.len)ne-=Ke.len,Ae(Ke.lit,ht,de,ne,pe,Re,Oe,te,oe,$e),de=_e.c,ne=_e.lc;else throw"hufDecode issues"}return!0}function zt(k,Z,pe,Re,Oe,Ge){var ht={value:0},V=pe.value,te=ut(Z,pe),oe=ut(Z,pe);pe.value+=4;var de=ut(Z,pe);if(pe.value+=4,te<0||te>=65537||oe<0||oe>=65537)throw"Something wrong with HUF_ENCSIZE";var ne=new Array(65537),$e=new Array(16384);Y($e);var ze=Re-(pe.value-V);if(H(k,Z,pe,ze,te,oe,ne),de>8*(Re-(pe.value-V)))throw"Something wrong with hufUncompress";ge(ne,te,oe,$e),ct(ne,$e,k,Z,pe,de,oe,Ge,Oe,ht)}function Xt(k,Z,pe){for(var Re=0;Re<pe;++Re)Z[Re]=k[Z[Re]]}function ae(k){for(var Z=1;Z<k.length;Z++){var pe=k[Z-1]+k[Z]-128;k[Z]=pe}}function Ye(k,Z){for(var pe=0,Re=Math.floor((k.length+1)/2),Oe=0,Ge=k.length-1;!(Oe>Ge||(Z[Oe++]=k[pe++],Oe>Ge));)Z[Oe++]=k[Re++]}function je(k){for(var Z=k.byteLength,pe=new Array,Re=0,Oe=new DataView(k);Z>0;){var Ge=Oe.getInt8(Re++);if(Ge<0){var ht=-Ge;Z-=ht+1;for(var V=0;V<ht;V++)pe.push(Oe.getUint8(Re++))}else{var ht=Ge;Z-=2;for(var te=Oe.getUint8(Re++),V=0;V<ht+1;V++)pe.push(te)}}return pe}function Xe(k,Z,pe,Re,Oe,Ge){var Nt=new DataView(Ge.buffer),ht=pe[k.idx[0]].width,V=pe[k.idx[0]].height,te=3,oe=Math.floor(ht/8),de=Math.ceil(ht/8),ne=Math.ceil(V/8),$e=ht-(de-1)*8,ze=V-(ne-1)*8,qe={value:0},Ke=new Array(te),dt=new Array(te),At=new Array(te),yt=new Array(te),Ft=new Array(te);for(let _n=0;_n<te;++_n)Ft[_n]=Z[k.idx[_n]],Ke[_n]=_n<1?0:Ke[_n-1]+de*ne,dt[_n]=new Float32Array(64),At[_n]=new Uint16Array(64),yt[_n]=new Uint16Array(de*64);for(let _n=0;_n<ne;++_n){var en=8;_n==ne-1&&(en=ze);var Wt=8;for(let fn=0;fn<de;++fn){fn==de-1&&(Wt=$e);for(let Ht=0;Ht<te;++Ht)At[Ht].fill(0),At[Ht][0]=Oe[Ke[Ht]++],He(qe,Re,At[Ht]),gt(At[Ht],dt[Ht]),st(dt[Ht]);rt(dt);for(let Ht=0;Ht<te;++Ht)Ot(dt[Ht],yt[Ht],fn*64)}let Ln=0;for(let fn=0;fn<te;++fn){const Ht=pe[k.idx[fn]].type;for(let Qn=8*_n;Qn<8*_n+en;++Qn){Ln=Ft[fn][Qn];for(let _i=0;_i<oe;++_i){const Cn=_i*64+(Qn&7)*8;Nt.setUint16(Ln+0*Ht,yt[fn][Cn+0],!0),Nt.setUint16(Ln+2*Ht,yt[fn][Cn+1],!0),Nt.setUint16(Ln+4*Ht,yt[fn][Cn+2],!0),Nt.setUint16(Ln+6*Ht,yt[fn][Cn+3],!0),Nt.setUint16(Ln+8*Ht,yt[fn][Cn+4],!0),Nt.setUint16(Ln+10*Ht,yt[fn][Cn+5],!0),Nt.setUint16(Ln+12*Ht,yt[fn][Cn+6],!0),Nt.setUint16(Ln+14*Ht,yt[fn][Cn+7],!0),Ln+=16*Ht}}if(oe!=de)for(let Qn=8*_n;Qn<8*_n+en;++Qn){const _i=Ft[fn][Qn]+8*oe*2*Ht,Cn=oe*64+(Qn&7)*8;for(let pi=0;pi<Wt;++pi)Nt.setUint16(_i+pi*2*Ht,yt[fn][Cn+pi],!0)}}}for(var xn=new Uint16Array(ht),Nt=new DataView(Ge.buffer),Tt=0;Tt<te;++Tt){pe[k.idx[Tt]].decoded=!0;var Nn=pe[k.idx[Tt]].type;if(pe[Tt].type==2)for(var un=0;un<V;++un){const _n=Ft[Tt][un];for(var qn=0;qn<ht;++qn)xn[qn]=Nt.getUint16(_n+qn*2*Nn,!0);for(var qn=0;qn<ht;++qn)Nt.setFloat32(_n+qn*2*Nn,be(xn[qn]),!0)}}}function He(k,Z,pe){for(var Re,Oe=1;Oe<64;)Re=Z[k.value],Re==65280?Oe=64:Re>>8==255?Oe+=Re&255:(pe[Oe]=Re,Oe++),k.value++}function gt(k,Z){Z[0]=be(k[0]),Z[1]=be(k[1]),Z[2]=be(k[5]),Z[3]=be(k[6]),Z[4]=be(k[14]),Z[5]=be(k[15]),Z[6]=be(k[27]),Z[7]=be(k[28]),Z[8]=be(k[2]),Z[9]=be(k[4]),Z[10]=be(k[7]),Z[11]=be(k[13]),Z[12]=be(k[16]),Z[13]=be(k[26]),Z[14]=be(k[29]),Z[15]=be(k[42]),Z[16]=be(k[3]),Z[17]=be(k[8]),Z[18]=be(k[12]),Z[19]=be(k[17]),Z[20]=be(k[25]),Z[21]=be(k[30]),Z[22]=be(k[41]),Z[23]=be(k[43]),Z[24]=be(k[9]),Z[25]=be(k[11]),Z[26]=be(k[18]),Z[27]=be(k[24]),Z[28]=be(k[31]),Z[29]=be(k[40]),Z[30]=be(k[44]),Z[31]=be(k[53]),Z[32]=be(k[10]),Z[33]=be(k[19]),Z[34]=be(k[23]),Z[35]=be(k[32]),Z[36]=be(k[39]),Z[37]=be(k[45]),Z[38]=be(k[52]),Z[39]=be(k[54]),Z[40]=be(k[20]),Z[41]=be(k[22]),Z[42]=be(k[33]),Z[43]=be(k[38]),Z[44]=be(k[46]),Z[45]=be(k[51]),Z[46]=be(k[55]),Z[47]=be(k[60]),Z[48]=be(k[21]),Z[49]=be(k[34]),Z[50]=be(k[37]),Z[51]=be(k[47]),Z[52]=be(k[50]),Z[53]=be(k[56]),Z[54]=be(k[59]),Z[55]=be(k[61]),Z[56]=be(k[35]),Z[57]=be(k[36]),Z[58]=be(k[48]),Z[59]=be(k[49]),Z[60]=be(k[57]),Z[61]=be(k[58]),Z[62]=be(k[62]),Z[63]=be(k[63])}function st(k){const Z=.5*Math.cos(.7853975),pe=.5*Math.cos(3.14159/16),Re=.5*Math.cos(3.14159/8),Oe=.5*Math.cos(3*3.14159/16),Ge=.5*Math.cos(5*3.14159/16),ht=.5*Math.cos(3*3.14159/8),V=.5*Math.cos(7*3.14159/16);for(var te=new Array(4),oe=new Array(4),de=new Array(4),ne=new Array(4),$e=0;$e<8;++$e){var ze=$e*8;te[0]=Re*k[ze+2],te[1]=ht*k[ze+2],te[2]=Re*k[ze+6],te[3]=ht*k[ze+6],oe[0]=pe*k[ze+1]+Oe*k[ze+3]+Ge*k[ze+5]+V*k[ze+7],oe[1]=Oe*k[ze+1]-V*k[ze+3]-pe*k[ze+5]-Ge*k[ze+7],oe[2]=Ge*k[ze+1]-pe*k[ze+3]+V*k[ze+5]+Oe*k[ze+7],oe[3]=V*k[ze+1]-Ge*k[ze+3]+Oe*k[ze+5]-pe*k[ze+7],de[0]=Z*(k[ze+0]+k[ze+4]),de[3]=Z*(k[ze+0]-k[ze+4]),de[1]=te[0]+te[3],de[2]=te[1]-te[2],ne[0]=de[0]+de[1],ne[1]=de[3]+de[2],ne[2]=de[3]-de[2],ne[3]=de[0]-de[1],k[ze+0]=ne[0]+oe[0],k[ze+1]=ne[1]+oe[1],k[ze+2]=ne[2]+oe[2],k[ze+3]=ne[3]+oe[3],k[ze+4]=ne[3]-oe[3],k[ze+5]=ne[2]-oe[2],k[ze+6]=ne[1]-oe[1],k[ze+7]=ne[0]-oe[0]}for(var qe=0;qe<8;++qe)te[0]=Re*k[16+qe],te[1]=ht*k[16+qe],te[2]=Re*k[48+qe],te[3]=ht*k[48+qe],oe[0]=pe*k[8+qe]+Oe*k[24+qe]+Ge*k[40+qe]+V*k[56+qe],oe[1]=Oe*k[8+qe]-V*k[24+qe]-pe*k[40+qe]-Ge*k[56+qe],oe[2]=Ge*k[8+qe]-pe*k[24+qe]+V*k[40+qe]+Oe*k[56+qe],oe[3]=V*k[8+qe]-Ge*k[24+qe]+Oe*k[40+qe]-pe*k[56+qe],de[0]=Z*(k[qe]+k[32+qe]),de[3]=Z*(k[qe]-k[32+qe]),de[1]=te[0]+te[3],de[2]=te[1]-te[2],ne[0]=de[0]+de[1],ne[1]=de[3]+de[2],ne[2]=de[3]-de[2],ne[3]=de[0]-de[1],k[0+qe]=ne[0]+oe[0],k[8+qe]=ne[1]+oe[1],k[16+qe]=ne[2]+oe[2],k[24+qe]=ne[3]+oe[3],k[32+qe]=ne[3]-oe[3],k[40+qe]=ne[2]-oe[2],k[48+qe]=ne[1]-oe[1],k[56+qe]=ne[0]-oe[0]}function rt(k){for(var Z=0;Z<64;++Z){var pe=k[0][Z],Re=k[1][Z],Oe=k[2][Z];k[0][Z]=pe+1.5747*Oe,k[1][Z]=pe-.1873*Re-.4682*Oe,k[2][Z]=pe+1.8556*Re}}function Ot(k,Z,pe){for(var Re=0;Re<64;++Re)Z[pe+Re]=hh.toHalfFloat(Gt(k[Re]))}function Gt(k){return k<=1?Math.sign(k)*Math.pow(Math.abs(k),2.2):Math.sign(k)*Math.pow(O,Math.abs(k)-1)}function $(k){return new DataView(k.array.buffer,k.offset.value,k.size)}function X(k){var Z=k.viewer.buffer.slice(k.offset.value,k.offset.value+k.size),pe=new Uint8Array(je(Z)),Re=new Uint8Array(pe.length);return ae(pe),Ye(pe,Re),new DataView(Re.buffer)}function Ee(k){var Z=k.array.slice(k.offset.value,k.offset.value+k.size),pe=Rx(Z),Re=new Uint8Array(pe.length);return ae(pe),Ye(pe,Re),new DataView(Re.buffer)}function Fe(k){for(var Z=k.viewer,pe={value:k.offset.value},Re=new Uint16Array(k.width*k.scanlineBlockSize*(k.channels*k.type)),Oe=new Uint8Array(8192),Ge=0,ht=new Array(k.channels),V=0;V<k.channels;V++)ht[V]={},ht[V].start=Ge,ht[V].end=ht[V].start,ht[V].nx=k.width,ht[V].ny=k.lines,ht[V].size=k.type,Ge+=ht[V].nx*ht[V].ny*ht[V].size;var te=lt(Z,pe),oe=lt(Z,pe);if(oe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(te<=oe)for(var V=0;V<oe-te+1;V++)Oe[V+te]=re(Z,pe);var de=new Uint16Array(65536),ne=P(Oe,de),$e=ut(Z,pe);zt(k.array,Z,pe,$e,Re,Ge);for(var V=0;V<k.channels;++V)for(var ze=ht[V],qe=0;qe<ht[V].size;++qe)bt(Re,ze.start+qe,ze.nx,ze.size,ze.ny,ze.nx*ze.size,ne);Xt(de,Re,Ge);for(var Ke=0,dt=new Uint8Array(Re.buffer.byteLength),At=0;At<k.lines;At++)for(var yt=0;yt<k.channels;yt++){var ze=ht[yt],Ft=ze.nx*ze.size,en=new Uint8Array(Re.buffer,ze.end*2,Ft*2);dt.set(en,Ke),Ke+=Ft*2,ze.end+=Ft}return new DataView(dt.buffer)}function ke(k){var Z=k.array.slice(k.offset.value,k.offset.value+k.size),pe=Rx(Z);const Re=k.lines*k.channels*k.width,Oe=k.type==1?new Uint16Array(Re):new Uint32Array(Re);let Ge=0,ht=0;const V=new Array(4);for(let te=0;te<k.lines;te++)for(let oe=0;oe<k.channels;oe++){let de=0;switch(k.type){case 1:V[0]=Ge,V[1]=V[0]+k.width,Ge=V[1]+k.width;for(let ne=0;ne<k.width;++ne){const $e=pe[V[0]++]<<8|pe[V[1]++];de+=$e,Oe[ht]=de,ht++}break;case 2:V[0]=Ge,V[1]=V[0]+k.width,V[2]=V[1]+k.width,Ge=V[2]+k.width;for(let ne=0;ne<k.width;++ne){const $e=pe[V[0]++]<<24|pe[V[1]++]<<16|pe[V[2]++]<<8;de+=$e,Oe[ht]=de,ht++}break}}return new DataView(Oe.buffer)}function Le(k){var Z=k.viewer,pe={value:k.offset.value},Re=new Uint8Array(k.width*k.lines*(k.channels*k.type*2)),Oe={version:Se(Z,pe),unknownUncompressedSize:Se(Z,pe),unknownCompressedSize:Se(Z,pe),acCompressedSize:Se(Z,pe),dcCompressedSize:Se(Z,pe),rleCompressedSize:Se(Z,pe),rleUncompressedSize:Se(Z,pe),rleRawSize:Se(Z,pe),totalAcUncompressedCount:Se(Z,pe),totalDcUncompressedCount:Se(Z,pe),acCompression:Se(Z,pe)};if(Oe.version<2)throw"EXRLoader.parse: "+ii.compression+" version "+Oe.version+" is unsupported";for(var Ge=new Array,ht=lt(Z,pe)-2;ht>0;){var V=xt(Z.buffer,pe),te=re(Z,pe),oe=te>>2&3,de=(te>>4)-1,ne=new Int8Array([de])[0],$e=re(Z,pe);Ge.push({name:V,index:ne,type:$e,compression:oe}),ht-=V.length+3}for(var ze=ii.channels,qe=new Array(k.channels),Ke=0;Ke<k.channels;++Ke){var dt=qe[Ke]={},At=ze[Ke];dt.name=At.name,dt.compression=0,dt.decoded=!1,dt.type=At.pixelType,dt.pLinear=At.pLinear,dt.width=k.width,dt.height=k.lines}for(var yt={idx:new Array(3)},Ft=0;Ft<k.channels;++Ft)for(var dt=qe[Ft],Ke=0;Ke<Ge.length;++Ke){var en=Ge[Ke];dt.name==en.name&&(dt.compression=en.compression,en.index>=0&&(yt.idx[en.index]=Ft),dt.offset=Ft)}if(Oe.acCompressedSize>0)switch(Oe.acCompression){case 0:var Nt=new Uint16Array(Oe.totalAcUncompressedCount);zt(k.array,Z,pe,Oe.acCompressedSize,Nt,Oe.totalAcUncompressedCount);break;case 1:var Wt=k.array.slice(pe.value,pe.value+Oe.totalAcUncompressedCount),xn=Rx(Wt),Nt=new Uint16Array(xn.buffer);pe.value+=Oe.totalAcUncompressedCount;break}if(Oe.dcCompressedSize>0){var Tt={array:k.array,offset:pe,size:Oe.dcCompressedSize},Nn=new Uint16Array(Ee(Tt).buffer);pe.value+=Oe.dcCompressedSize}if(Oe.rleRawSize>0){var Wt=k.array.slice(pe.value,pe.value+Oe.rleCompressedSize),xn=Rx(Wt),un=je(xn.buffer);pe.value+=Oe.rleCompressedSize}for(var qn=0,_n=new Array(qe.length),Ke=0;Ke<_n.length;++Ke)_n[Ke]=new Array;for(var Ln=0;Ln<k.lines;++Ln)for(var fn=0;fn<qe.length;++fn)_n[fn].push(qn),qn+=qe[fn].width*k.type*2;Xe(yt,_n,qe,Nt,Nn,Re);for(var Ke=0;Ke<qe.length;++Ke){var dt=qe[Ke];if(!dt.decoded)switch(dt.compression){case 2:for(var Ht=0,Qn=0,Ln=0;Ln<k.lines;++Ln){for(var _i=_n[Ke][Ht],Cn=0;Cn<dt.width;++Cn){for(var pi=0;pi<2*dt.type;++pi)Re[_i++]=un[Qn+pi*dt.width*dt.height];Qn++}Ht++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Re.buffer)}function xt(k,Z){for(var pe=new Uint8Array(k),Re=0;pe[Z.value+Re]!=0;)Re+=1;var Oe=new TextDecoder().decode(pe.slice(Z.value,Z.value+Re));return Z.value=Z.value+Re+1,Oe}function pt(k,Z,pe){var Re=new TextDecoder().decode(new Uint8Array(k).slice(Z.value,Z.value+pe));return Z.value=Z.value+pe,Re}function St(k,Z){var pe=nt(k,Z),Re=ut(k,Z);return[pe,Re]}function Rt(k,Z){var pe=ut(k,Z),Re=ut(k,Z);return[pe,Re]}function nt(k,Z){var pe=k.getInt32(Z.value,!0);return Z.value=Z.value+4,pe}function ut(k,Z){var pe=k.getUint32(Z.value,!0);return Z.value=Z.value+4,pe}function Dt(k,Z){var pe=k[Z.value];return Z.value=Z.value+1,pe}function re(k,Z){var pe=k.getUint8(Z.value);return Z.value=Z.value+1,pe}const Se=function(k,Z){let pe;return"getBigInt64"in DataView.prototype?pe=Number(k.getBigInt64(Z.value,!0)):pe=k.getUint32(Z.value+4,!0)+Number(k.getUint32(Z.value,!0)<<32),Z.value+=8,pe};function tt(k,Z){var pe=k.getFloat32(Z.value,!0);return Z.value+=4,pe}function ce(k,Z){return hh.toHalfFloat(tt(k,Z))}function be(k){var Z=(k&31744)>>10,pe=k&1023;return(k>>15?-1:1)*(Z?Z===31?pe?NaN:1/0:Math.pow(2,Z-15)*(1+pe/1024):6103515625e-14*(pe/1024))}function lt(k,Z){var pe=k.getUint16(Z.value,!0);return Z.value+=2,pe}function ft(k,Z){return be(lt(k,Z))}function it(k,Z,pe,Re){for(var Oe=pe.value,Ge=[];pe.value<Oe+Re-1;){var ht=xt(Z,pe),V=nt(k,pe),te=re(k,pe);pe.value+=3;var oe=nt(k,pe),de=nt(k,pe);Ge.push({name:ht,pixelType:V,pLinear:te,xSampling:oe,ySampling:de})}return pe.value+=1,Ge}function Ve(k,Z){var pe=tt(k,Z),Re=tt(k,Z),Oe=tt(k,Z),Ge=tt(k,Z),ht=tt(k,Z),V=tt(k,Z),te=tt(k,Z),oe=tt(k,Z);return{redX:pe,redY:Re,greenX:Oe,greenY:Ge,blueX:ht,blueY:V,whiteX:te,whiteY:oe}}function _t(k,Z){var pe=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Re=re(k,Z);return pe[Re]}function Mt(k,Z){var pe=ut(k,Z),Re=ut(k,Z),Oe=ut(k,Z),Ge=ut(k,Z);return{xMin:pe,yMin:Re,xMax:Oe,yMax:Ge}}function Vt(k,Z){var pe=["INCREASING_Y"],Re=re(k,Z);return pe[Re]}function jt(k,Z){var pe=tt(k,Z),Re=tt(k,Z);return[pe,Re]}function oi(k,Z){var pe=tt(k,Z),Re=tt(k,Z),Oe=tt(k,Z);return[pe,Re,Oe]}function cn(k,Z,pe,Re,Oe){if(Re==="string"||Re==="stringvector"||Re==="iccProfile")return pt(Z,pe,Oe);if(Re==="chlist")return it(k,Z,pe,Oe);if(Re==="chromaticities")return Ve(k,pe);if(Re==="compression")return _t(k,pe);if(Re==="box2i")return Mt(k,pe);if(Re==="lineOrder")return Vt(k,pe);if(Re==="float")return tt(k,pe);if(Re==="v2f")return jt(k,pe);if(Re==="v3f")return oi(k,pe);if(Re==="int")return nt(k,pe);if(Re==="rational")return St(k,pe);if(Re==="timecode")return Rt(k,pe);if(Re==="preview")return pe.value+=Oe,"skipped";pe.value+=Oe}function Xn(k,Z,pe){const Re={};if(k.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Re.version=k.getUint8(4);const Oe=k.getUint8(5);Re.spec={singleTile:!!(Oe&2),longName:!!(Oe&4),deepFormat:!!(Oe&8),multiPart:!!(Oe&16)},pe.value=8;for(var Ge=!0;Ge;){var ht=xt(Z,pe);if(ht==0)Ge=!1;else{var V=xt(Z,pe),te=ut(k,pe),oe=cn(k,Z,pe,V,te);oe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${V}'.`):Re[ht]=oe}}if((Oe&-5)!=0)throw console.error("EXRHeader:",Re),"THREE.EXRLoader: provided file is currently unsupported.";return Re}function Tn(k,Z,pe,Re,Oe){const Ge={size:0,viewer:Z,array:pe,offset:Re,width:k.dataWindow.xMax-k.dataWindow.xMin+1,height:k.dataWindow.yMax-k.dataWindow.yMin+1,channels:k.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:k.channels[0].pixelType,uncompress:null,getter:null,format:null,[Rg?"colorSpace":"encoding"]:null};switch(k.compression){case"NO_COMPRESSION":Ge.lines=1,Ge.uncompress=$;break;case"RLE_COMPRESSION":Ge.lines=1,Ge.uncompress=X;break;case"ZIPS_COMPRESSION":Ge.lines=1,Ge.uncompress=Ee;break;case"ZIP_COMPRESSION":Ge.lines=16,Ge.uncompress=Ee;break;case"PIZ_COMPRESSION":Ge.lines=32,Ge.uncompress=Fe;break;case"PXR24_COMPRESSION":Ge.lines=16,Ge.uncompress=ke;break;case"DWAA_COMPRESSION":Ge.lines=32,Ge.uncompress=Le;break;case"DWAB_COMPRESSION":Ge.lines=256,Ge.uncompress=Le;break;default:throw"EXRLoader.parse: "+k.compression+" is unsupported"}if(Ge.scanlineBlockSize=Ge.lines,Ge.type==1)switch(Oe){case Vi:Ge.getter=ft,Ge.inputSize=2;break;case La:Ge.getter=lt,Ge.inputSize=2;break}else if(Ge.type==2)switch(Oe){case Vi:Ge.getter=tt,Ge.inputSize=4;break;case La:Ge.getter=ce,Ge.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Ge.type+" for "+k.compression+".";Ge.blockCount=(k.dataWindow.yMax+1)/Ge.scanlineBlockSize;for(var ht=0;ht<Ge.blockCount;ht++)Se(Z,Re);Ge.outputChannels=Ge.channels==3?4:Ge.channels;const V=Ge.width*Ge.height*Ge.outputChannels;switch(Oe){case Vi:Ge.byteArray=new Float32Array(V),Ge.channels<Ge.outputChannels&&Ge.byteArray.fill(1,0,V);break;case La:Ge.byteArray=new Uint16Array(V),Ge.channels<Ge.outputChannels&&Ge.byteArray.fill(15360,0,V);break;default:console.error("THREE.EXRLoader: unsupported type: ",Oe);break}return Ge.bytesPerLine=Ge.width*Ge.inputSize*Ge.channels,Ge.outputChannels==4?Ge.format=sa:Ge.format=I0,Rg?Ge.colorSpace="srgb-linear":Ge.encoding=3e3,Ge}const li=new DataView(e),Ui=new Uint8Array(e),da={value:0},ii=Xn(li,e,da),Yt=Tn(ii,li,Ui,da,this.type),Xi={value:0},ai={R:0,G:1,B:2,A:3,Y:0};for(let k=0;k<Yt.height/Yt.scanlineBlockSize;k++){const Z=ut(li,da);Yt.size=ut(li,da),Yt.lines=Z+Yt.scanlineBlockSize>Yt.height?Yt.height-Z:Yt.scanlineBlockSize;const Re=Yt.size<Yt.lines*Yt.bytesPerLine?Yt.uncompress(Yt):$(Yt);da.value+=Yt.size;for(let Oe=0;Oe<Yt.scanlineBlockSize;Oe++){const Ge=Oe+k*Yt.scanlineBlockSize;if(Ge>=Yt.height)break;for(let ht=0;ht<Yt.channels;ht++){const V=ai[ii.channels[ht].name];for(let te=0;te<Yt.width;te++){Xi.value=(Oe*(Yt.channels*Yt.width)+ht*Yt.width+te)*Yt.inputSize;const oe=(Yt.height-1-Ge)*(Yt.width*Yt.outputChannels)+te*Yt.outputChannels+V;Yt.byteArray[oe]=Yt.getter(Re,Xi)}}}}return{header:ii,width:Yt.width,height:Yt.height,data:Yt.byteArray,format:Yt.format,[Rg?"colorSpace":"encoding"]:Yt[Rg?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,a){function s(o,c){Rg?o.colorSpace=c.colorSpace:o.encoding=c.encoding,o.minFilter=ni,o.magFilter=ni,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,c)}return super.load(e,s,i,a)}}const x1=new WeakMap;class Nq extends Qa{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,a){const s=new Za(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const c={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,c).then(t).catch(a)},i,a)}decodeDracoFile(e,t,i,a){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:a||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const f in t.attributeTypes){const d=t.attributeTypes[f];d.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[f]=d.name)}const i=JSON.stringify(t);if(x1.has(e)){const f=x1.get(e);if(f.key===i)return f.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let a;const s=this.workerNextTaskID++,o=e.byteLength,c=this._getWorker(s,o).then(f=>(a=f,new Promise((d,m)=>{a._callbacks[s]={resolve:d,reject:m},a.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(f=>this._createGeometry(f.geometry));return c.catch(()=>!0).then(()=>{a&&s&&this._releaseTask(a,s)}),x1.set(e,{key:i,promise:c}),c}_createGeometry(e){const t=new gn;e.index&&t.setIndex(new Yn(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const a=e.attributes[i],s=a.name,o=a.array,c=a.itemSize;t.setAttribute(s,new Yn(o,c))}return t}_loadLibrary(e,t){const i=new Za(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((a,s)=>{i.load(e,a,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const a=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=Oq.toString(),o=["/* draco decoder */",a,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const a=new Worker(this.workerSourceURL);a._callbacks={},a._taskCosts={},a._taskLoad=0,a.postMessage({type:"init",decoderConfig:this.decoderConfig}),a.onmessage=function(s){const o=s.data;switch(o.type){case"decode":a._callbacks[o.id].resolve(o);break;case"error":a._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(a)}else this.workerPool.sort(function(a,s){return a._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Oq(){let n,e;onmessage=function(o){const c=o.data;switch(c.type){case"init":n=c.decoderConfig,e=new Promise(function(m){n.onModuleLoaded=function(g){m({draco:g})},DracoDecoderModule(n)});break;case"decode":const f=c.buffer,d=c.taskConfig;e.then(m=>{const g=m.draco,y=new g.Decoder,_=new g.DecoderBuffer;_.Init(new Int8Array(f),f.byteLength);try{const A=t(g,y,_,d),T=A.attributes.map(E=>E.array.buffer);A.index&&T.push(A.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:A},T)}catch(A){console.error(A),self.postMessage({type:"error",id:c.id,error:A.message})}finally{g.destroy(_),g.destroy(y)}});break}};function t(o,c,f,d){const m=d.attributeIDs,g=d.attributeTypes;let y,_;const A=c.GetEncodedGeometryType(f);if(A===o.TRIANGULAR_MESH)y=new o.Mesh,_=c.DecodeBufferToMesh(f,y);else if(A===o.POINT_CLOUD)y=new o.PointCloud,_=c.DecodeBufferToPointCloud(f,y);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!_.ok()||y.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+_.error_msg());const T={index:null,attributes:[]};for(const E in m){const b=self[g[E]];let R,D;if(d.useUniqueIDs)D=m[E],R=c.GetAttributeByUniqueId(y,D);else{if(D=c.GetAttributeId(y,o[m[E]]),D===-1)continue;R=c.GetAttribute(y,D)}T.attributes.push(a(o,c,y,E,b,R))}return A===o.TRIANGULAR_MESH&&(T.index=i(o,c,y)),o.destroy(y),T}function i(o,c,f){const m=f.num_faces()*3,g=m*4,y=o._malloc(g);c.GetTrianglesUInt32Array(f,g,y);const _=new Uint32Array(o.HEAPF32.buffer,y,m).slice();return o._free(y),{array:_,itemSize:1}}function a(o,c,f,d,m,g){const y=g.num_components(),A=f.num_points()*y,T=A*m.BYTES_PER_ELEMENT,E=s(o,m),b=o._malloc(T);c.GetAttributeDataArrayForAllPoints(f,g,E,T,b);const R=new m(o.HEAPF32.buffer,b,A).slice();return o._free(b),{name:d,array:R,itemSize:y}}function s(o,c){switch(c){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Bx;const _1=()=>{if(Bx)return Bx;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let a=n;WebAssembly.validate(t)&&(a=e);let s;const o=WebAssembly.instantiate(c(a),{}).then(g=>{s=g.instance,s.exports.__wasm_call_ctors()});function c(g){const y=new Uint8Array(g.length);for(let A=0;A<g.length;++A){const T=g.charCodeAt(A);y[A]=T>96?T-71:T>64?T-65:T>47?T+4:T>46?63:62}let _=0;for(let A=0;A<g.length;++A)y[_++]=y[A]<60?i[y[A]]:(y[A]-60)*64+y[++A];return y.buffer.slice(0,_)}function f(g,y,_,A,T,E){const b=s.exports.sbrk,R=_+3&-4,D=b(R*A),B=b(T.length),U=new Uint8Array(s.exports.memory.buffer);U.set(T,B);const L=g(D,_,A,B,T.length);if(L===0&&E&&E(D,R,A),y.set(U.subarray(D,D+_*A)),b(D-b(0)),L!==0)throw new Error(`Malformed buffer data: ${L}`)}const d={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},m={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Bx={ready:o,supported:!0,decodeVertexBuffer(g,y,_,A,T){f(s.exports.meshopt_decodeVertexBuffer,g,y,_,A,s.exports[d[T]])},decodeIndexBuffer(g,y,_,A){f(s.exports.meshopt_decodeIndexBuffer,g,y,_,A)},decodeIndexSequence(g,y,_,A){f(s.exports.meshopt_decodeIndexSequence,g,y,_,A)},decodeGltfBuffer(g,y,_,A,T,E){f(s.exports[m[T]],g,y,_,A,s.exports[d[E]])}},Bx};let Nx=null,rU="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function oU(n=!0,e=!0,t){return i=>{t&&t(i),n&&(Nx||(Nx=new Nq),Nx.setDecoderPath(typeof n=="string"?n:rU),i.setDRACOLoader(Nx)),e&&i.setMeshoptDecoder(typeof _1=="function"?_1():_1)}}const J0=(n,e,t,i)=>Mc(hT,n,oU(e,t,i));J0.preload=(n,e,t,i)=>Mc.preload(hT,n,oU(e,t,i));J0.clear=n=>Mc.clear(hT,n);J0.setDecoderPath=n=>{rU=n};const Uq=G.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:a=!0,keyEvents:s=!1,onChange:o,onStart:c,onEnd:f,...d},m)=>{const g=gr(L=>L.invalidate),y=gr(L=>L.camera),_=gr(L=>L.gl),A=gr(L=>L.events),T=gr(L=>L.setEvents),E=gr(L=>L.set),b=gr(L=>L.get),R=gr(L=>L.performance),D=e||y,B=i||A.connected||_.domElement,U=G.useMemo(()=>new KY(D),[D]);return VO(()=>{U.enabled&&U.update()},-1),G.useEffect(()=>(s&&U.connect(s===!0?B:s),U.connect(B),()=>void U.dispose()),[s,B,t,U,g]),G.useEffect(()=>{const L=O=>{g(),t&&R.regress(),o&&o(O)},z=O=>{c&&c(O)},I=O=>{f&&f(O)};return U.addEventListener("change",L),U.addEventListener("start",z),U.addEventListener("end",I),()=>{U.removeEventListener("start",z),U.removeEventListener("end",I),U.removeEventListener("change",L)}},[o,c,f,U,g,T]),G.useEffect(()=>{if(n){const L=b().controls;return E({controls:U}),()=>E({controls:L})}},[n,U]),G.createElement("primitive",Z_({ref:m,object:U,enableDamping:a},d))}),lU=(n,e,t)=>{let i;switch(n){case Us:i=new Uint8ClampedArray(e*t*4);break;case La:i=new Uint16Array(e*t*4);break;case Dl:i=new Uint32Array(e*t*4);break;case mb:i=new Int8Array(e*t*4);break;case gb:i=new Int16Array(e*t*4);break;case L0:i=new Int32Array(e*t*4);break;case Vi:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let Ox;const Lq=(n,e,t,i)=>{if(Ox!==void 0)return Ox;const a=new Kr(1,1,i);e.setRenderTarget(a);const s=new Oi(new ku,new er({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=lU(n,a.width,a.height);return e.readRenderTargetPixels(a,0,0,a.width,a.height,o),a.dispose(),s.geometry.dispose(),s.material.dispose(),Ox=o[0]!==0,Ox};class dT{constructor(e){var t,i,a,s,o,c,f,d,m,g,y,_,A,T,E,b;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(D){throw this._renderer.setRenderTarget(null),D}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const R={format:sa,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.magFilter:ni,minFilter:((f=e.renderTargetOptions)===null||f===void 0?void 0:f.minFilter)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.minFilter:ni,samples:((m=e.renderTargetOptions)===null||m===void 0?void 0:m.samples)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.samples:void 0,wrapS:((y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapS)!==void 0?(_=e.renderTargetOptions)===null||_===void 0?void 0:_.wrapS:aa,wrapT:((A=e.renderTargetOptions)===null||A===void 0?void 0:A.wrapT)!==void 0?(T=e.renderTargetOptions)===null||T===void 0?void 0:T.wrapT:aa};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=dT.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new z0,this._camera=new Tl,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Lq(this._type,this._renderer,this._camera,R)){let D;switch(this._type){case La:D=this._renderer.extensions.has("EXT_color_buffer_float")?Vi:void 0;break}D!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Vi}`),this._type=D):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Oi(new ku,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Kr(this.width,this.height,R),this._renderTarget.texture.mapping=((E=e.renderTargetOptions)===null||E===void 0?void 0:E.mapping)!==void 0?(b=e.renderTargetOptions)===null||b===void 0?void 0:b.mapping:Lu}static instantiateRenderer(){const e=new aT;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=lU(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Bo(this.toArray(),this.width,this.height,sa,this._type,e?.mapping||Lu,e?.wrapS||aa,e?.wrapT||aa,e?.magFilter||ni,e?.minFilter||ni,e?.anisotropy||1,No);return t.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof tr&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof ri&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof ri&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const Iq=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Pq=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Fq extends tr{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:a,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:c,hdrCapacityMax:f,sdr:d,gainMap:m}){super({name:"GainMapDecoderMaterial",vertexShader:Iq,fragmentShader:Pq,uniforms:{sdr:{value:d},gainMap:{value:m},gamma:{value:new Q(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new Q().fromArray(t)},offsetSdr:{value:new Q().fromArray(i)},gainMapMin:{value:new Q().fromArray(a)},gainMapMax:{value:new Q().fromArray(s)},weightFactor:{value:(Math.log2(o)-c)/(f-c)}},blending:Ml,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=c,this._hdrCapacityMax=f,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class cU extends Error{}class uU extends Error{}const Dg=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const a=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(a){const s=a[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):a[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},zq=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),a=e.slice(t,i+10);try{const s=Dg(a,"hdrgm:GainMapMin","0"),o=Dg(a,"hdrgm:GainMapMax"),c=Dg(a,"hdrgm:Gamma","1"),f=Dg(a,"hdrgm:OffsetSDR","0.015625"),d=Dg(a,"hdrgm:OffsetHDR","0.015625"),m=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(a),g=m?m[1]:"0",y=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(a);if(!y)throw new Error("Incomplete gainmap metadata");const _=y[1];return{gainMapMin:Array.isArray(s)?s.map(A=>parseFloat(A)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(A=>parseFloat(A)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(c)?c.map(A=>parseFloat(A)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetSdr:Array.isArray(f)?f.map(A=>parseFloat(A)):[parseFloat(f),parseFloat(f),parseFloat(f)],offsetHdr:Array.isArray(d)?d.map(A=>parseFloat(A)):[parseFloat(d),parseFloat(d),parseFloat(d)],hdrCapacityMin:parseFloat(g),hdrCapacityMax:parseFloat(_)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class Hq{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const a=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let c=2,f=0,d;for(;c<o;){if(++f>250){i(new Error(`Found no marker after ${f} loops `));return}if(s.getUint8(c)!==255){i(new Error(`Not a valid marker at offset 0x${c.toString(16)}, found: 0x${s.getUint8(c).toString(16)}`));return}if(d=s.getUint8(c+1),a&&console.log(`Marker: ${d.toString(16)}`),d===226){a&&console.log("Found APP2 marker (0xffe2)");const m=c+4;if(s.getUint32(m)===1297106432){const g=m+4;let y;if(s.getUint16(g)===18761)y=!1;else if(s.getUint16(g)===19789)y=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(g+2,!y)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const _=s.getUint32(g+4,!y);if(_<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const A=g+_,T=s.getUint16(A,!y),E=A+2;let b=0;for(let U=E;U<E+12*T;U+=12)s.getUint16(U,!y)===45057&&(b=s.getUint32(U+8,!y));const D=A+2+T*12+4,B=[];for(let U=D;U<D+b*16;U+=16){const L={MPType:s.getUint32(U,!y),size:s.getUint32(U+4,!y),dataOffset:s.getUint32(U+8,!y),dependantImages:s.getUint32(U+12,!y),start:-1,end:-1,isFII:!1};L.dataOffset?(L.start=g+L.dataOffset,L.isFII=!1):(L.start=0,L.isFII=!0),L.end=L.start+L.size,B.push(L)}if(this.options.extractNonFII&&B.length){const U=new Blob([s]),L=[];for(const z of B){if(z.isFII&&!this.options.extractFII)continue;const I=U.slice(z.start,z.end+1,"image/jpeg");L.push(I)}t(L)}}}c+=2+s.getUint16(c+2)}})}}const Gq=async n=>{const e=zq(n);if(!e)throw new uU("Gain map XMP metadata not found");const i=await new Hq({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new cU("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},rD=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=a=>{t(a)},i.src=URL.createObjectURL(n)});class fU extends Qa{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new kb}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new Fq({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new ri,sdr:new ri});return new dT({width:16,height:16,type:La,colorSpace:No,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,a){const s=a?new Blob([a],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let c,f,d=!1;if(typeof createImageBitmap>"u"){const y=await Promise.all([s?rD(s):Promise.resolve(void 0),rD(o)]);f=y[0],c=y[1],d=!0}else{const y=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);f=y[0],c=y[1]}const m=new ri(f||new ImageData(2,2),Lu,aa,aa,ni,nM,sa,Us,1,No);m.flipY=d,m.needsUpdate=!0;const g=new ri(c,Lu,aa,aa,ni,nM,sa,Us,1,Wa);g.flipY=d,g.needsUpdate=!0,e.width=c.width,e.height=c.height,e.material.gainMap=m,e.material.sdr=g,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Vq extends fU{load([e,t,i],a,s,o){const c=this.prepareQuadRenderer();let f,d,m;const g=async()=>{if(f&&d&&m){try{await this.render(c,m,f,d)}catch(O){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(O),c.disposeOnDemandRenderer();return}typeof a=="function"&&a(c),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),c.disposeOnDemandRenderer()}};let y=!0,_=0,A=0,T=!0,E=0,b=0,R=!0,D=0,B=0;const U=()=>{if(typeof s=="function"){const O=_+E+D,P=A+b+B,Y=y&&T&&R;s(new ProgressEvent("progress",{lengthComputable:Y,loaded:P,total:O}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const L=new Za(this._internalLoadingManager);L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(e,async O=>{if(typeof O=="string")throw new Error("Invalid sdr buffer");f=O,await g()},O=>{y=O.lengthComputable,A=O.loaded,_=O.total,U()},O=>{this.manager.itemError(e),typeof o=="function"&&o(O)});const z=new Za(this._internalLoadingManager);z.setResponseType("arraybuffer"),z.setRequestHeader(this.requestHeader),z.setPath(this.path),z.setWithCredentials(this.withCredentials),z.load(t,async O=>{if(typeof O=="string")throw new Error("Invalid gainmap buffer");d=O,await g()},O=>{T=O.lengthComputable,b=O.loaded,E=O.total,U()},O=>{this.manager.itemError(t),typeof o=="function"&&o(O)});const I=new Za(this._internalLoadingManager);return I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(i,async O=>{if(typeof O!="string")throw new Error("Invalid metadata string");m=JSON.parse(O),await g()},O=>{R=O.lengthComputable,B=O.loaded,D=O.total,U()},O=>{this.manager.itemError(i),typeof o=="function"&&o(O)}),c}}class kq extends fU{load(e,t,i,a){const s=this.prepareQuadRenderer(),o=new Za(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async c=>{if(typeof c=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const f=new Uint8Array(c);let d,m,g;try{const y=await Gq(f);d=y.sdr,m=y.gainMap,g=y.metadata}catch(y){if(y instanceof uU||y instanceof cU)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),g={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},d=f;else throw y}try{await this.render(s,g,d,m)}catch(y){this.manager.itemError(e),typeof a=="function"&&a(y),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,c=>{this.manager.itemError(e),typeof a=="function"&&a(c)}),s}}const _0={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},hU="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",vp=n=>Array.isArray(n),pT=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function qb({files:n=pT,path:e="",preset:t=void 0,colorSpace:i=void 0,extensions:a}={}){t&&(mT(t),n=_0[t],e=hU);const s=vp(n),{extension:o,isCubemap:c}=gT(n),f=vT(o);if(!f)throw new Error("useEnvironment: Unrecognized file extension: "+n);const d=gr(_=>_.gl);G.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function _(){Mc.clear(f,s?[n]:n)}d.domElement.addEventListener("webglcontextlost",_,{once:!0})},[n,d.domElement]);const m=Mc(f,s?[n]:n,_=>{(o==="webp"||o==="jpg"||o==="jpeg")&&_.setRenderer(d),_.setPath==null||_.setPath(e),a&&a(_)});let g=s?m[0]:m;if(o==="jpg"||o==="jpeg"||o==="webp"){var y;g=(y=g.renderTarget)==null?void 0:y.texture}return g.mapping=c?Rl:bp,g.colorSpace=i??(c?"srgb":"srgb-linear"),g}const Xq={files:pT,path:"",preset:void 0,extensions:void 0};qb.preload=n=>{const e={...Xq,...n};let{files:t,path:i=""}=e;const{preset:a,extensions:s}=e;a&&(mT(a),t=_0[a],i=hU);const{extension:o}=gT(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const c=vT(o);if(!c)throw new Error("useEnvironment: Unrecognized file extension: "+t);Mc.preload(c,vp(t)?[t]:t,f=>{f.setPath==null||f.setPath(i),s&&s(f)})};const jq={files:pT,preset:void 0};qb.clear=n=>{const e={...jq,...n};let{files:t}=e;const{preset:i}=e;i&&(mT(i),t=_0[i]);const{extension:a}=gT(t),s=vT(a);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Mc.clear(s,vp(t)?[t]:t)};function mT(n){if(!(n in _0))throw new Error("Preset must be one of: "+Object.keys(_0).join(", "))}function gT(n){var e;const t=vp(n)&&n.length===6,i=vp(n)&&n.length===3&&n.some(o=>o.endsWith("json")),a=vp(n)?n[0]:n;return{extension:t?"cube":i?"webp":a.startsWith("data:application/exr")?"exr":a.startsWith("data:application/hdr")?"hdr":a.startsWith("data:image/jpeg")?"jpg":(e=a.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function vT(n){return n==="cube"?cO:n==="hdr"?Dq:n==="exr"?Bq:n==="jpg"||n==="jpeg"?kq:n==="webp"?Vq:null}const Yq=n=>n.current&&n.current.isScene,qq=n=>Yq(n)?n.current:n;function yT(n,e,t,i,a={}){var s,o,c,f;a={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...a};const d=qq(e||t),m=d.background,g=d.environment,y={backgroundBlurriness:d.backgroundBlurriness,backgroundIntensity:d.backgroundIntensity,backgroundRotation:(s=(o=d.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:d.environmentIntensity,environmentRotation:(c=(f=d.environmentRotation)==null||f.clone==null?void 0:f.clone())!==null&&c!==void 0?c:[0,0,0]};return n!=="only"&&(d.environment=i),n&&(d.background=i),xl(d,a),()=>{n!=="only"&&(d.environment=g),n&&(d.background=m),xl(d,y)}}function xT({scene:n,background:e=!1,map:t,...i}){const a=gr(s=>s.scene);return G.useLayoutEffect(()=>{if(t)return yT(e,n,a,t,i)}),null}function dU({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:a,backgroundRotation:s,environmentIntensity:o,environmentRotation:c,...f}){const d=qb(f),m=gr(g=>g.scene);return G.useLayoutEffect(()=>yT(n,e,m,d,{backgroundBlurriness:t??i,backgroundIntensity:a,backgroundRotation:s,environmentIntensity:o,environmentRotation:c})),G.useEffect(()=>()=>{d.dispose()},[d]),null}function Kq({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:a=1,map:s,background:o=!1,blur:c,backgroundBlurriness:f,backgroundIntensity:d,backgroundRotation:m,environmentIntensity:g,environmentRotation:y,scene:_,files:A,path:T,preset:E=void 0,extensions:b}){const R=gr(I=>I.gl),D=gr(I=>I.scene),B=G.useRef(null),[U]=G.useState(()=>new z0),L=G.useMemo(()=>{const I=new TE(i);return I.texture.type=La,I},[i]);G.useEffect(()=>()=>{L.dispose()},[L]),G.useLayoutEffect(()=>{if(a===1){const I=R.autoClear;R.autoClear=!0,B.current.update(R,U),R.autoClear=I}return yT(o,_,D,L.texture,{backgroundBlurriness:c??f,backgroundIntensity:d,backgroundRotation:m,environmentIntensity:g,environmentRotation:y})},[n,U,L.texture,_,D,o,a,R]);let z=1;return VO(()=>{if(a===1/0||z<a){const I=R.autoClear;R.autoClear=!0,B.current.update(R,U),R.autoClear=I,z++}}),G.createElement(G.Fragment,null,dY(G.createElement(G.Fragment,null,n,G.createElement("cubeCamera",{ref:B,args:[e,t,L]}),A||E?G.createElement(dU,{background:!0,files:A,preset:E,path:T,extensions:b}):s?G.createElement(xT,{background:!0,map:s,extensions:b}):null),U))}function Wq(n){var e,t,i,a;const s=qb(n),o=n.map||s;G.useMemo(()=>jO({GroundProjectedEnvImpl:HY}),[]),G.useEffect(()=>()=>{s.dispose()},[s]);const c=G.useMemo(()=>[o],[o]),f=(e=n.ground)==null?void 0:e.height,d=(t=n.ground)==null?void 0:t.radius,m=(i=(a=n.ground)==null?void 0:a.scale)!==null&&i!==void 0?i:1e3;return G.createElement(G.Fragment,null,G.createElement(xT,Z_({},n,{map:o})),G.createElement("groundProjectedEnvImpl",{args:c,scale:m,height:f,radius:d}))}function Jq(n){return n.ground?G.createElement(Wq,n):n.map?G.createElement(xT,n):n.children?G.createElement(Kq,n):G.createElement(dU,n)}const pU="/Interface-Foundryy/assets/ayakkabi-CrsxHAQ2.glb";function Zq({customColors:n,...e}){const{nodes:t,materials:i}=J0(pU);return ee.jsx("group",{...e,dispose:null,children:ee.jsxs("group",{rotation:[-Math.PI/2,0,0],scale:.268,children:[ee.jsx("mesh",{geometry:t.Object_2.geometry,material:i.model_Material_u1_v1,"material-color":n.ayakkabi}),ee.jsx("mesh",{geometry:t.Object_3.geometry,material:i.model_Material_u1_v1,"material-color":n.ayakkabi})]})})}J0.preload(pU);const Qq=["#ffffff","#ff0000","#00ff00","#0000ff","#ffff00","#000000"];function $q(){const[n,e]=G.useState({ayakkabi:"#ffffff"});return ee.jsxs("div",{className:"relative w-screen h-screen bg-gray-900",children:[ee.jsx("div",{className:"absolute top-0 left-0 z-10 p-4",children:ee.jsx(Tc,{to:"/",className:"px-4 py-2 text-white bg-gray-800 rounded-lg hover:bg-gray-700",children:" Ana Sayfa"})}),ee.jsxs("a",{href:"/Interface-Foundryy/storybook/?path=/docs/sayfalar-rn-yaplandrc-sayfas--docs",target:"_blank",rel:"noopener noreferrer",className:"absolute z-20 flex items-center gap-2 px-4 py-2 text-white transition-colors bg-gray-800 rounded-lg top-6 right-6 md:top-8 md:right-8 hover:bg-gray-700",title:"Storybook'u A",children:[ee.jsx(N0,{className:"text-xl text-pink-500"}),ee.jsx("span",{className:"hidden sm:inline",children:"Storybook"})]}),ee.jsx("div",{className:"absolute bottom-0 z-10 flex flex-wrap justify-center gap-4 p-4 -translate-x-1/2 rounded-t-lg left-1/2 bg-gray-800/50 backdrop-blur-sm",children:Object.keys(n).map(i=>ee.jsxs("div",{className:"flex flex-col items-center gap-2",children:[ee.jsx("span",{className:"text-xs font-bold text-white capitalize",children:i}),ee.jsx("div",{className:"flex gap-1",children:Qq.map(a=>ee.jsx("div",{onClick:()=>e(s=>({...s,[i]:a})),className:`w-6 h-6 rounded-full cursor-pointer border-2 ${n[i]===a?"border-white":"border-transparent"}`,style:{backgroundColor:a}},a))})]},i))}),ee.jsxs(EY,{camera:{position:[0,0,2.5],fov:50},children:[ee.jsxs(G.Suspense,{fallback:null,children:[ee.jsx(Zq,{customColors:n}),ee.jsx(Jq,{preset:"city"})]}),ee.jsx(Uq,{enablePan:!1})]})]})}const mU=G.createContext(),eK=()=>G.useContext(mU),tK=({children:n})=>{const[e,t]=G.useState([]),i=G.useCallback(a=>{const s=Date.now();t(o=>[...o,{id:s,message:a}]),setTimeout(()=>{t(o=>o.filter(c=>c.id!==s))},3e3)},[]);return ee.jsxs(mU.Provider,{value:{addNotification:i},children:[n,ee.jsx(nK,{notifications:e})]})},nK=({notifications:n})=>ee.jsx("div",{className:"fixed top-4 right-4 z-[100] space-y-2",children:ee.jsx(xp,{children:n.map(e=>ee.jsx(Ns.div,{layout:!0,initial:{opacity:0,y:-50,scale:.5},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,x:100,scale:.5},transition:{type:"spring",stiffness:300,damping:25},className:"bg-green-500 text-white font-bold px-6 py-3 rounded-lg shadow-lg",children:e.message},e.id))})}),gU=G.createContext(),_T=()=>G.useContext(gU),iK=({children:n})=>{const[e,t]=G.useState([]),{addNotification:i}=eK(),a=f=>{t(d=>d.find(g=>g.id===f.id)?d.map(g=>g.id===f.id?{...g,quantity:g.quantity+1}:g):[...d,{...f,quantity:1}]),i(`${f.name} sepete eklendi!`)},s=f=>{const d=e.find(m=>m.id===f);d&&i(`${d.name} sepetten karld.`),t(m=>m.filter(g=>g.id!==f))},c={items:e,addToCart:a,removeFromCart:s,updateQuantity:(f,d)=>{d<=0?s(f):t(m=>m.map(g=>g.id===f?{...g,quantity:d}:g))}};return ee.jsx(gU.Provider,{value:c,children:n})},aK=[{id:1,name:"Ftristik Kulaklk",price:250,image:"https://images.unsplash.com/photo-1644938369713-8827e218a2ec?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{id:2,name:"Mekanik Klavye",price:180,image:"https://images.unsplash.com/photo-1618384887929-16ec33fab9ef?q=80&w=2070&auto=format&fit=crop"},{id:3,name:"Akll Saat",price:320,image:"https://images.unsplash.com/photo-1546868871-7041f2a55e12?q=80&w=1964&auto=format&fit=crop"},{id:4,name:"Oyun Faresi",price:90,image:"https://images.unsplash.com/photo-1628832306751-ec751454119c?q=80&w=1245&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}],sK="/Interface-Foundryy/storybook/?path=/story/sayfalar-dinamik-alveri-sepeti--docs",rK=({onCartClick:n})=>{const{items:e}=_T(),t=e.reduce((i,a)=>i+a.quantity,0);return ee.jsxs("nav",{className:"fixed top-0 left-0 w-full bg-black/50 backdrop-blur-sm p-4 flex justify-between items-center z-40",children:[ee.jsx(Tc,{to:"/",className:"bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:" Ana Sayfa"}),ee.jsxs("a",{href:sK,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",title:"Bu Component'in Storybook'unu A",children:[ee.jsx(N0,{className:"text-pink-500 text-xl"}),ee.jsx("span",{className:"hidden sm:inline",children:"Storybook"})]}),ee.jsxs("button",{onClick:n,className:"relative text-white text-2xl",children:[ee.jsx(U3,{}),ee.jsx(xp,{children:t>0&&ee.jsx(Ns.span,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:t})})]})]})},oK=({product:n})=>{const{addToCart:e}=_T();return ee.jsxs(Ns.div,{layout:!0,className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700",children:[ee.jsx("img",{src:n.image,alt:n.name,className:"w-full h-48 object-cover"}),ee.jsxs("div",{className:"p-4",children:[ee.jsx("h3",{className:"text-white font-bold text-lg",children:n.name}),ee.jsxs("p",{className:"text-teal-400 font-semibold mt-1",children:["$",n.price]}),ee.jsx("button",{onClick:()=>e(n),className:"w-full mt-4 bg-teal-600 text-white py-2 rounded-lg hover:bg-teal-700 transition-colors",children:"Sepete Ekle"})]})]})},lK=({isOpen:n,onClose:e})=>{const{items:t,removeFromCart:i,updateQuantity:a}=_T(),s=t.reduce((o,c)=>o+c.price*c.quantity,0).toFixed(2);return ee.jsx(xp,{children:n&&ee.jsxs(ee.Fragment,{children:[ee.jsx(Ns.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/60 z-40"}),ee.jsxs(Ns.div,{initial:{x:"100%"},animate:{x:"0%"},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 w-full max-w-md h-full bg-gray-900 border-l border-gray-700 shadow-lg z-50 flex flex-col",children:[ee.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-gray-700",children:[ee.jsx("h2",{className:"text-white text-xl font-bold",children:"Sepetim"}),ee.jsx("button",{onClick:e,className:"text-white text-2xl",children:ee.jsx(Zw,{})})]}),ee.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:ee.jsx(xp,{children:t.length===0?ee.jsx(Ns.p,{layout:!0,className:"text-gray-400 text-center mt-8",children:"Sepetiniz bo."}):ee.jsx("ul",{className:"space-y-4",children:t.map(o=>ee.jsxs(Ns.li,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-20},className:"flex items-center gap-4 bg-gray-800 p-2 rounded-lg",children:[ee.jsx("img",{src:o.image,alt:o.name,className:"w-16 h-16 object-cover rounded-md"}),ee.jsxs("div",{className:"flex-grow",children:[ee.jsx("h4",{className:"text-white font-semibold",children:o.name}),ee.jsxs("p",{className:"text-gray-400 text-sm",children:["$",o.price]})]}),ee.jsxs("div",{className:"flex items-center gap-2 text-white",children:[ee.jsx("button",{onClick:()=>a(o.id,o.quantity-1),className:"px-2 bg-gray-700 rounded",children:"-"}),ee.jsx("span",{children:o.quantity}),ee.jsx("button",{onClick:()=>a(o.id,o.quantity+1),className:"px-2 bg-gray-700 rounded",children:"+"})]}),ee.jsx("button",{onClick:()=>i(o.id),className:"text-red-500 text-lg ml-2",children:ee.jsx(Zw,{})})]},o.id))})})}),ee.jsxs("div",{className:"p-4 border-t border-gray-700",children:[ee.jsxs("div",{className:"flex justify-between items-center text-white font-bold text-lg",children:[ee.jsx("span",{children:"Toplam:"}),ee.jsxs("span",{children:["$",s]})]}),ee.jsx("button",{className:"w-full mt-4 bg-teal-600 text-white py-3 rounded-lg hover:bg-teal-700 transition-colors",children:"demeye Ge"})]})]})]})})};function cK(){const[n,e]=G.useState(!1);return ee.jsxs("div",{className:"bg-black min-h-screen text-white",children:[ee.jsx(rK,{onCartClick:()=>e(!0)}),ee.jsx(lK,{isOpen:n,onClose:()=>e(!1)}),ee.jsxs("main",{className:"pt-24 p-8",children:[ee.jsx("h1",{className:"text-4xl font-bold text-center mb-12 bg-clip-text text-transparent bg-gradient-to-b from-neutral-50 to-neutral-400",children:"rnler"}),ee.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:aK.map(t=>ee.jsx(oK,{product:t},t.id))})]})]})}const vU=G.forwardRef(({className:n,type:e,...t},i)=>ee.jsx("input",{type:e,className:jr("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","bg-gray-800 text-white border-gray-700 placeholder:text-gray-400 focus:ring-2 focus:ring-teal-500",n),ref:i,...t}));vU.displayName="Input";const uK=n=>{const{id:e,className:t,background:i,particleColor:a,minSize:s=.4,maxSize:o=1,particleDensity:c=1200,speed:f=1}=n,d=G.useRef(null),[m,g]=G.useState([]),[y,_]=G.useState(null);return G.useEffect(()=>{if(d.current){const A=d.current,T=window.devicePixelRatio||1,E=A.getBoundingClientRect();A.width=E.width*T,A.height=E.height*T;const b=A.getContext("2d");b&&(b.scale(T,T),_(b))}},[]),G.useEffect(()=>{if(y&&d.current){const A=[],T=Math.floor(d.current.offsetWidth/100*c/10);for(let E=0;E<T;E++)A.push({x:Math.random()*d.current.offsetWidth,y:Math.random()*d.current.offsetHeight,size:s+Math.random()*(o-s),alpha:Math.random()*.5+.5,speed:Math.random()*2*f+.5*f});g(A)}},[y,c,s,o,f]),G.useEffect(()=>{if(y&&m.length>0){let A;const T=()=>{d.current&&(y.clearRect(0,0,d.current.offsetWidth,d.current.offsetHeight),m.forEach(E=>{E.y-=E.speed,E.y<0&&(E.y=d.current.offsetHeight,E.x=Math.random()*d.current.offsetWidth),y.beginPath(),y.arc(E.x,E.y,E.size,0,2*Math.PI);const b=parseInt(a.slice(1,3),16),R=parseInt(a.slice(3,5),16),D=parseInt(a.slice(5,7),16);y.fillStyle=`rgba(${b}, ${R}, ${D}, ${E.alpha})`,y.fill()}),A=window.requestAnimationFrame(T))};return T(),()=>{window.cancelAnimationFrame(A)}}},[y,m,a]),ee.jsx("div",{className:jr("absolute inset-0 h-full w-full",t),children:ee.jsx("canvas",{id:e,ref:d,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:i}})})};function fK(){const[n,e]=G.useState(""),[t,i]=G.useState(""),[a,s]=G.useState(!1),[o,c]=G.useState(""),f="/Interface-Foundryy/storybook/?path=/docs/sayfalar-ai-destekli-arama-sayfas--docs",d=async m=>{if(m.preventDefault(),!n.trim())return;s(!0),c(""),i("");const y="https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=AIzaSyBa13ZJ_BwneoKsu_XKjsJVG_xGQYfggGY";try{const _=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:n}]}]})});if(!_.ok){const E=await _.json();throw new Error(E.error.message||"Google AI API'sinden bir hata alnd.")}const A=await _.json();if(!A.candidates||A.candidates.length===0)throw new Error("AI uygun bir cevap retemedi veya ierik gvenlik filtrelerine takld.");const T=A.candidates[0].content.parts[0].text;i(T.trim())}catch(_){c(_.message)}finally{s(!1)}};return ee.jsxs("div",{className:"relative w-full h-screen bg-black flex flex-col items-center justify-center overflow-hidden rounded-md",children:[ee.jsx("div",{className:"w-full absolute inset-0 h-screen",children:ee.jsx(uK,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"#FFFFFF"})}),ee.jsx("div",{className:"absolute top-0 left-0 z-20 p-4",children:ee.jsx(Tc,{to:"/",className:"bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:" Ana Sayfa"})}),ee.jsxs("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"absolute top-6 right-6 md:top-8 md:right-8 flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors z-20",title:"Storybook'u A",children:[ee.jsx(N0,{className:"text-pink-500 text-xl"}),ee.jsx("span",{className:"hidden sm:inline",children:"Storybook"})]}),ee.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center w-full max-w-2xl px-4",children:[ee.jsx("h1",{className:"md:text-7xl text-3d/xl lg:text-9xl font-bold text-center text-white relative z-20",children:"AI Destekli Arama"}),ee.jsxs("form",{onSubmit:d,className:"w-full mt-8",children:[ee.jsx(vU,{type:"text",value:n,onChange:m=>e(m.target.value),placeholder:"Doal bir dilde sorunuzu sorun...",className:"w-full h-12 px-4 rounded-lg bg-gray-800 text-white border border-gray-700 focus:ring-2 focus:ring-teal-500",disabled:a}),ee.jsx("button",{type:"submit",disabled:a,className:"w-full mt-4 h-12 rounded-lg bg-teal-600 text-white font-bold hover:bg-teal-700 disabled:bg-gray-600 transition-colors",children:a?"Aranyor...":"Ara"})]}),ee.jsxs("div",{className:"w-full mt-8 text-white p-6 bg-gray-900/50 backdrop-blur-sm rounded-lg border border-gray-700 min-h-[150px]",children:[a&&ee.jsx("p",{className:"text-center",children:"Ltfen bekleyin, AI dnyor..."}),o&&ee.jsx("p",{className:"text-red-500 text-center",children:o}),t&&!a&&ee.jsx("p",{className:"whitespace-pre-wrap font-mono",children:t}),!t&&!a&&!o&&ee.jsx("p",{className:"text-gray-400 text-center",children:"Arama sonucunuz burada grnecektir."})]})]})]})}const oD={columns:{todo:{id:"todo",title:"Yaplacaklar",tagColor:"bg-red-600",tasks:[{id:"1",content:"Komut Paleti UI'n tasarla"},{id:"2",content:"Global state'i bala"}]},inProgress:{id:"inProgress",title:"Yaplanlar",tagColor:"bg-yellow-600",tasks:[{id:"3",content:"API gvenliini aratr"}]},done:{id:"done",title:"Yaplmlar",tagColor:"bg-green-600",tasks:[{id:"4",content:"Alveri sepeti context'ini olutur"}]}},columnOrder:["todo","inProgress","done"]},yU=G.createContext(void 0),hK=({children:n})=>{const[e,t]=G.useState(oD.columns),[i,a]=G.useState(oD.columnOrder),o={columns:e,setColumns:t,columnOrder:i,setColumnOrder:a,addTask:(c,f)=>{const m={id:`${Date.now()}`,content:f};t(g=>{const y=g[c],_=[...y.tasks,m];return{...g,[c]:{...y,tasks:_}}})}};return ee.jsx(yU.Provider,{value:o,children:n})},xU=()=>{const n=G.useContext(yU);if(n===void 0)throw new Error("useKanban, KanbanProvider iinde kullanlmaldr");return n};function dK(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return G.useMemo(()=>i=>{e.forEach(a=>a(i))},e)}const Kb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Wp(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function bT(n){return"nodeType"in n}function Ls(n){var e,t;return n?Wp(n)?n:bT(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function AT(n){const{Document:e}=Ls(n);return n instanceof e}function Z0(n){return Wp(n)?!1:n instanceof Ls(n).HTMLElement}function _U(n){return n instanceof Ls(n).SVGElement}function Jp(n){return n?Wp(n)?n.document:bT(n)?AT(n)?n:Z0(n)||_U(n)?n.ownerDocument:document:document:document}const Oo=Kb?G.useLayoutEffect:G.useEffect;function Wb(n){const e=G.useRef(n);return Oo(()=>{e.current=n}),G.useCallback(function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e.current==null?void 0:e.current(...i)},[])}function pK(){const n=G.useRef(null),e=G.useCallback((i,a)=>{n.current=setInterval(i,a)},[]),t=G.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function b0(n,e){e===void 0&&(e=[n]);const t=G.useRef(n);return Oo(()=>{t.current!==n&&(t.current=n)},e),t}function Q0(n,e){const t=G.useRef();return G.useMemo(()=>{const i=n(t.current);return t.current=i,i},[...e])}function $_(n){const e=Wb(n),t=G.useRef(null),i=G.useCallback(a=>{a!==t.current&&e?.(a,t.current),t.current=a},[]);return[t,i]}function eb(n){const e=G.useRef();return G.useEffect(()=>{e.current=n},[n]),e.current}let b1={};function $0(n,e){return G.useMemo(()=>{if(e)return e;const t=b1[n]==null?0:b1[n]+1;return b1[n]=t,n+"-"+t},[n,e])}function bU(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return i.reduce((s,o)=>{const c=Object.entries(o);for(const[f,d]of c){const m=s[f];m!=null&&(s[f]=m+n*d)}return s},{...e})}}const yp=bU(1),tb=bU(-1);function mK(n){return"clientX"in n&&"clientY"in n}function Jb(n){if(!n)return!1;const{KeyboardEvent:e}=Ls(n.target);return e&&n instanceof e}function gK(n){if(!n)return!1;const{TouchEvent:e}=Ls(n.target);return e&&n instanceof e}function nb(n){if(gK(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return mK(n)?{x:n.clientX,y:n.clientY}:null}const zu=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[zu.Translate.toString(n),zu.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:i}=n;return e+" "+t+"ms "+i}}}),lD="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function vK(n){return n.matches(lD)?n:n.querySelector(lD)}const yK={display:"none"};function xK(n){let{id:e,value:t}=n;return ti.createElement("div",{id:e,style:yK},t)}function _K(n){let{id:e,announcement:t,ariaLiveType:i="assertive"}=n;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ti.createElement("div",{id:e,style:a,role:"status","aria-live":i,"aria-atomic":!0},t)}function bK(){const[n,e]=G.useState("");return{announce:G.useCallback(i=>{i!=null&&e(i)},[]),announcement:n}}const AU=G.createContext(null);function AK(n){const e=G.useContext(AU);G.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function SK(){const[n]=G.useState(()=>new Set),e=G.useCallback(i=>(n.add(i),()=>n.delete(i)),[n]);return[G.useCallback(i=>{let{type:a,event:s}=i;n.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,s)})},[n]),e]}const MK={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},EK={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function TK(n){let{announcements:e=EK,container:t,hiddenTextDescribedById:i,screenReaderInstructions:a=MK}=n;const{announce:s,announcement:o}=bK(),c=$0("DndLiveRegion"),[f,d]=G.useState(!1);if(G.useEffect(()=>{d(!0)},[]),AK(G.useMemo(()=>({onDragStart(g){let{active:y}=g;s(e.onDragStart({active:y}))},onDragMove(g){let{active:y,over:_}=g;e.onDragMove&&s(e.onDragMove({active:y,over:_}))},onDragOver(g){let{active:y,over:_}=g;s(e.onDragOver({active:y,over:_}))},onDragEnd(g){let{active:y,over:_}=g;s(e.onDragEnd({active:y,over:_}))},onDragCancel(g){let{active:y,over:_}=g;s(e.onDragCancel({active:y,over:_}))}}),[s,e])),!f)return null;const m=ti.createElement(ti.Fragment,null,ti.createElement(xK,{id:i,value:a.draggable}),ti.createElement(_K,{id:c,announcement:o}));return t?Bg.createPortal(m,t):m}var Sa;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Sa||(Sa={}));function ib(){}function CK(n,e){return G.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function wK(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return G.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const Uo=Object.freeze({x:0,y:0});function RK(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function DK(n,e){const t=nb(n);if(!t)return"0 0";const i={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return i.x+"% "+i.y+"%"}function BK(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return t-i}function NK(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return i-t}function cD(n){let{left:e,top:t,height:i,width:a}=n;return[{x:e,y:t},{x:e+a,y:t},{x:e,y:t+i},{x:e+a,y:t+i}]}function OK(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}const UK=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const a=cD(e),s=[];for(const o of i){const{id:c}=o,f=t.get(c);if(f){const d=cD(f),m=a.reduce((y,_,A)=>y+RK(d[A],_),0),g=Number((m/4).toFixed(4));s.push({id:c,data:{droppableContainer:o,value:g}})}}return s.sort(BK)};function LK(n,e){const t=Math.max(e.top,n.top),i=Math.max(e.left,n.left),a=Math.min(e.left+e.width,n.left+n.width),s=Math.min(e.top+e.height,n.top+n.height),o=a-i,c=s-t;if(i<a&&t<s){const f=e.width*e.height,d=n.width*n.height,m=o*c,g=m/(f+d-m);return Number(g.toFixed(4))}return 0}const IK=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const a=[];for(const s of i){const{id:o}=s,c=t.get(o);if(c){const f=LK(c,e);f>0&&a.push({id:o,data:{droppableContainer:s,value:f}})}}return a.sort(NK)};function PK(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function SU(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Uo}function FK(n){return function(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return a.reduce((o,c)=>({...o,top:o.top+n*c.y,bottom:o.bottom+n*c.y,left:o.left+n*c.x,right:o.right+n*c.x}),{...t})}}const zK=FK(1);function MU(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function HK(n,e,t){const i=MU(e);if(!i)return n;const{scaleX:a,scaleY:s,x:o,y:c}=i,f=n.left-o-(1-a)*parseFloat(t),d=n.top-c-(1-s)*parseFloat(t.slice(t.indexOf(" ")+1)),m=a?n.width/a:n.width,g=s?n.height/s:n.height;return{width:m,height:g,top:d,right:f+m,bottom:d+g,left:f}}const GK={ignoreTransform:!1};function Zp(n,e){e===void 0&&(e=GK);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:m}=Ls(n).getComputedStyle(n);d&&(t=HK(t,d,m))}const{top:i,left:a,width:s,height:o,bottom:c,right:f}=t;return{top:i,left:a,width:s,height:o,bottom:c,right:f}}function uD(n){return Zp(n,{ignoreTransform:!0})}function VK(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function kK(n,e){return e===void 0&&(e=Ls(n).getComputedStyle(n)),e.position==="fixed"}function XK(n,e){e===void 0&&(e=Ls(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const s=e[a];return typeof s=="string"?t.test(s):!1})}function ST(n,e){const t=[];function i(a){if(e!=null&&t.length>=e||!a)return t;if(AT(a)&&a.scrollingElement!=null&&!t.includes(a.scrollingElement))return t.push(a.scrollingElement),t;if(!Z0(a)||_U(a)||t.includes(a))return t;const s=Ls(n).getComputedStyle(a);return a!==n&&XK(a,s)&&t.push(a),kK(a,s)?t:i(a.parentNode)}return n?i(n):t}function EU(n){const[e]=ST(n,1);return e??null}function A1(n){return!Kb||!n?null:Wp(n)?n:bT(n)?AT(n)||n===Jp(n).scrollingElement?window:Z0(n)?n:null:null}function TU(n){return Wp(n)?n.scrollX:n.scrollLeft}function CU(n){return Wp(n)?n.scrollY:n.scrollTop}function SM(n){return{x:TU(n),y:CU(n)}}var Oa;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Oa||(Oa={}));function wU(n){return!Kb||!n?!1:n===document.scrollingElement}function RU(n){const e={x:0,y:0},t=wU(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},i={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},a=n.scrollTop<=e.y,s=n.scrollLeft<=e.x,o=n.scrollTop>=i.y,c=n.scrollLeft>=i.x;return{isTop:a,isLeft:s,isBottom:o,isRight:c,maxScroll:i,minScroll:e}}const jK={x:.2,y:.2};function YK(n,e,t,i,a){let{top:s,left:o,right:c,bottom:f}=t;i===void 0&&(i=10),a===void 0&&(a=jK);const{isTop:d,isBottom:m,isLeft:g,isRight:y}=RU(n),_={x:0,y:0},A={x:0,y:0},T={height:e.height*a.y,width:e.width*a.x};return!d&&s<=e.top+T.height?(_.y=Oa.Backward,A.y=i*Math.abs((e.top+T.height-s)/T.height)):!m&&f>=e.bottom-T.height&&(_.y=Oa.Forward,A.y=i*Math.abs((e.bottom-T.height-f)/T.height)),!y&&c>=e.right-T.width?(_.x=Oa.Forward,A.x=i*Math.abs((e.right-T.width-c)/T.width)):!g&&o<=e.left+T.width&&(_.x=Oa.Backward,A.x=i*Math.abs((e.left+T.width-o)/T.width)),{direction:_,speed:A}}function qK(n){if(n===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:t,right:i,bottom:a}=n.getBoundingClientRect();return{top:e,left:t,right:i,bottom:a,width:n.clientWidth,height:n.clientHeight}}function DU(n){return n.reduce((e,t)=>yp(e,SM(t)),Uo)}function KK(n){return n.reduce((e,t)=>e+TU(t),0)}function WK(n){return n.reduce((e,t)=>e+CU(t),0)}function BU(n,e){if(e===void 0&&(e=Zp),!n)return;const{top:t,left:i,bottom:a,right:s}=e(n);EU(n)&&(a<=0||s<=0||t>=window.innerHeight||i>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const JK=[["x",["left","right"],KK],["y",["top","bottom"],WK]];class MT{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=ST(t),a=DU(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,c]of JK)for(const f of o)Object.defineProperty(this,f,{get:()=>{const d=c(i),m=a[s]-d;return this.rect[f]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Qg{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var a;(a=this.target)==null||a.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function ZK(n){const{EventTarget:e}=Ls(n);return n instanceof e?n:Jp(n)}function S1(n,e){const t=Math.abs(n.x),i=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var Vr;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Vr||(Vr={}));function fD(n){n.preventDefault()}function QK(n){n.stopPropagation()}var ei;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(ei||(ei={}));const NU={start:[ei.Space,ei.Enter],cancel:[ei.Esc],end:[ei.Space,ei.Enter,ei.Tab]},$K=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case ei.Right:return{...t,x:t.x+25};case ei.Left:return{...t,x:t.x-25};case ei.Down:return{...t,y:t.y+25};case ei.Up:return{...t,y:t.y-25}}};class OU{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Qg(Jp(t)),this.windowListeners=new Qg(Ls(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vr.Resize,this.handleCancel),this.windowListeners.add(Vr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&BU(i),t(Uo)}handleKeyDown(e){if(Jb(e)){const{active:t,context:i,options:a}=this.props,{keyboardCodes:s=NU,coordinateGetter:o=$K,scrollBehavior:c="smooth"}=a,{code:f}=e;if(s.end.includes(f)){this.handleEnd(e);return}if(s.cancel.includes(f)){this.handleCancel(e);return}const{collisionRect:d}=i.current,m=d?{x:d.left,y:d.top}:Uo;this.referenceCoordinates||(this.referenceCoordinates=m);const g=o(e,{active:t,context:i.current,currentCoordinates:m});if(g){const y=tb(g,m),_={x:0,y:0},{scrollableAncestors:A}=i.current;for(const T of A){const E=e.code,{isTop:b,isRight:R,isLeft:D,isBottom:B,maxScroll:U,minScroll:L}=RU(T),z=qK(T),I={x:Math.min(E===ei.Right?z.right-z.width/2:z.right,Math.max(E===ei.Right?z.left:z.left+z.width/2,g.x)),y:Math.min(E===ei.Down?z.bottom-z.height/2:z.bottom,Math.max(E===ei.Down?z.top:z.top+z.height/2,g.y))},O=E===ei.Right&&!R||E===ei.Left&&!D,P=E===ei.Down&&!B||E===ei.Up&&!b;if(O&&I.x!==g.x){const Y=T.scrollLeft+y.x,ie=E===ei.Right&&Y<=U.x||E===ei.Left&&Y>=L.x;if(ie&&!y.y){T.scrollTo({left:Y,behavior:c});return}ie?_.x=T.scrollLeft-Y:_.x=E===ei.Right?T.scrollLeft-U.x:T.scrollLeft-L.x,_.x&&T.scrollBy({left:-_.x,behavior:c});break}else if(P&&I.y!==g.y){const Y=T.scrollTop+y.y,ie=E===ei.Down&&Y<=U.y||E===ei.Up&&Y>=L.y;if(ie&&!y.x){T.scrollTo({top:Y,behavior:c});return}ie?_.y=T.scrollTop-Y:_.y=E===ei.Down?T.scrollTop-U.y:T.scrollTop-L.y,_.y&&T.scrollBy({top:-_.y,behavior:c});break}}this.handleMove(e,yp(tb(g,this.referenceCoordinates),_))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}OU.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:i=NU,onActivation:a}=e,{active:s}=t;const{code:o}=n.nativeEvent;if(i.start.includes(o)){const c=s.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),a?.({event:n.nativeEvent}),!0)}return!1}}];function hD(n){return!!(n&&"distance"in n)}function dD(n){return!!(n&&"delay"in n)}class ET{constructor(e,t,i){var a;i===void 0&&(i=ZK(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:s}=e,{target:o}=s;this.props=e,this.events=t,this.document=Jp(o),this.documentListeners=new Qg(this.document),this.listeners=new Qg(i),this.windowListeners=new Qg(Ls(o)),this.initialCoordinates=(a=nb(s))!=null?a:Uo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Vr.Resize,this.handleCancel),this.windowListeners.add(Vr.DragStart,fD),this.windowListeners.add(Vr.VisibilityChange,this.handleCancel),this.windowListeners.add(Vr.ContextMenu,fD),this.documentListeners.add(Vr.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(dD(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(hD(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:a}=this.props;a(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Vr.Click,QK,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vr.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:a,props:s}=this,{onMove:o,options:{activationConstraint:c}}=s;if(!a)return;const f=(t=nb(e))!=null?t:Uo,d=tb(a,f);if(!i&&c){if(hD(c)){if(c.tolerance!=null&&S1(d,c.tolerance))return this.handleCancel();if(S1(d,c.distance))return this.handleStart()}if(dD(c)&&S1(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}e.cancelable&&e.preventDefault(),o(f)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===ei.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const eW={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class TT extends ET{constructor(e){const{event:t}=e,i=Jp(t.target);super(e,eW,i)}}TT.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const tW={move:{name:"mousemove"},end:{name:"mouseup"}};var MM;(function(n){n[n.RightClick=2]="RightClick"})(MM||(MM={}));class nW extends ET{constructor(e){super(e,tW,Jp(e.event.target))}}nW.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return t.button===MM.RightClick?!1:(i?.({event:t}),!0)}}];const M1={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class iW extends ET{constructor(e){super(e,M1)}static setup(){return window.addEventListener(M1.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(M1.move.name,e)};function e(){}}}iW.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;const{touches:a}=t;return a.length>1?!1:(i?.({event:t}),!0)}}];var $g;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})($g||($g={}));var ab;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(ab||(ab={}));function aW(n){let{acceleration:e,activator:t=$g.Pointer,canScroll:i,draggingRect:a,enabled:s,interval:o=5,order:c=ab.TreeOrder,pointerCoordinates:f,scrollableAncestors:d,scrollableAncestorRects:m,delta:g,threshold:y}=n;const _=rW({delta:g,disabled:!s}),[A,T]=pK(),E=G.useRef({x:0,y:0}),b=G.useRef({x:0,y:0}),R=G.useMemo(()=>{switch(t){case $g.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case $g.DraggableRect:return a}},[t,a,f]),D=G.useRef(null),B=G.useCallback(()=>{const L=D.current;if(!L)return;const z=E.current.x*b.current.x,I=E.current.y*b.current.y;L.scrollBy(z,I)},[]),U=G.useMemo(()=>c===ab.TreeOrder?[...d].reverse():d,[c,d]);G.useEffect(()=>{if(!s||!d.length||!R){T();return}for(const L of U){if(i?.(L)===!1)continue;const z=d.indexOf(L),I=m[z];if(!I)continue;const{direction:O,speed:P}=YK(L,I,R,e,y);for(const Y of["x","y"])_[Y][O[Y]]||(P[Y]=0,O[Y]=0);if(P.x>0||P.y>0){T(),D.current=L,A(B,o),E.current=P,b.current=O;return}}E.current={x:0,y:0},b.current={x:0,y:0},T()},[e,B,i,T,s,o,JSON.stringify(R),JSON.stringify(_),A,d,U,m,JSON.stringify(y)])}const sW={x:{[Oa.Backward]:!1,[Oa.Forward]:!1},y:{[Oa.Backward]:!1,[Oa.Forward]:!1}};function rW(n){let{delta:e,disabled:t}=n;const i=eb(e);return Q0(a=>{if(t||!i||!a)return sW;const s={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[Oa.Backward]:a.x[Oa.Backward]||s.x===-1,[Oa.Forward]:a.x[Oa.Forward]||s.x===1},y:{[Oa.Backward]:a.y[Oa.Backward]||s.y===-1,[Oa.Forward]:a.y[Oa.Forward]||s.y===1}}},[t,e,i])}function oW(n,e){const t=e!=null?n.get(e):void 0,i=t?t.node.current:null;return Q0(a=>{var s;return e==null?null:(s=i??a)!=null?s:null},[i,e])}function lW(n,e){return G.useMemo(()=>n.reduce((t,i)=>{const{sensor:a}=i,s=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,i)}));return[...t,...s]},[]),[n,e])}var A0;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(A0||(A0={}));var EM;(function(n){n.Optimized="optimized"})(EM||(EM={}));const pD=new Map;function cW(n,e){let{dragging:t,dependencies:i,config:a}=e;const[s,o]=G.useState(null),{frequency:c,measure:f,strategy:d}=a,m=G.useRef(n),g=E(),y=b0(g),_=G.useCallback(function(b){b===void 0&&(b=[]),!y.current&&o(R=>R===null?b:R.concat(b.filter(D=>!R.includes(D))))},[y]),A=G.useRef(null),T=Q0(b=>{if(g&&!t)return pD;if(!b||b===pD||m.current!==n||s!=null){const R=new Map;for(let D of n){if(!D)continue;if(s&&s.length>0&&!s.includes(D.id)&&D.rect.current){R.set(D.id,D.rect.current);continue}const B=D.node.current,U=B?new MT(f(B),B):null;D.rect.current=U,U&&R.set(D.id,U)}return R}return b},[n,s,t,g,f]);return G.useEffect(()=>{m.current=n},[n]),G.useEffect(()=>{g||_()},[t,g]),G.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),G.useEffect(()=>{g||typeof c!="number"||A.current!==null||(A.current=setTimeout(()=>{_(),A.current=null},c))},[c,g,_,...i]),{droppableRects:T,measureDroppableContainers:_,measuringScheduled:s!=null};function E(){switch(d){case A0.Always:return!1;case A0.BeforeDragging:return t;default:return!t}}}function CT(n,e){return Q0(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function uW(n,e){return CT(n,e)}function fW(n){let{callback:e,disabled:t}=n;const i=Wb(e),a=G.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(i)},[i,t]);return G.useEffect(()=>()=>a?.disconnect(),[a]),a}function Zb(n){let{callback:e,disabled:t}=n;const i=Wb(e),a=G.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(i)},[t]);return G.useEffect(()=>()=>a?.disconnect(),[a]),a}function hW(n){return new MT(Zp(n),n)}function mD(n,e,t){e===void 0&&(e=hW);const[i,a]=G.useState(null);function s(){a(f=>{if(!n)return null;if(n.isConnected===!1){var d;return(d=f??t)!=null?d:null}const m=e(n);return JSON.stringify(f)===JSON.stringify(m)?f:m})}const o=fW({callback(f){if(n)for(const d of f){const{type:m,target:g}=d;if(m==="childList"&&g instanceof HTMLElement&&g.contains(n)){s();break}}}}),c=Zb({callback:s});return Oo(()=>{s(),n?(c?.observe(n),o?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),o?.disconnect())},[n]),i}function dW(n){const e=CT(n);return SU(n,e)}const gD=[];function pW(n){const e=G.useRef(n),t=Q0(i=>n?i&&i!==gD&&n&&e.current&&n.parentNode===e.current.parentNode?i:ST(n):gD,[n]);return G.useEffect(()=>{e.current=n},[n]),t}function mW(n){const[e,t]=G.useState(null),i=G.useRef(n),a=G.useCallback(s=>{const o=A1(s.target);o&&t(c=>c?(c.set(o,SM(o)),new Map(c)):null)},[]);return G.useEffect(()=>{const s=i.current;if(n!==s){o(s);const c=n.map(f=>{const d=A1(f);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,SM(d)]):null}).filter(f=>f!=null);t(c.length?new Map(c):null),i.current=n}return()=>{o(n),o(s)};function o(c){c.forEach(f=>{const d=A1(f);d?.removeEventListener("scroll",a)})}},[a,n]),G.useMemo(()=>n.length?e?Array.from(e.values()).reduce((s,o)=>yp(s,o),Uo):DU(n):Uo,[n,e])}function vD(n,e){e===void 0&&(e=[]);const t=G.useRef(null);return G.useEffect(()=>{t.current=null},e),G.useEffect(()=>{const i=n!==Uo;i&&!t.current&&(t.current=n),!i&&t.current&&(t.current=null)},[n]),t.current?tb(n,t.current):Uo}function gW(n){G.useEffect(()=>{if(!Kb)return;const e=n.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function vW(n,e){return G.useMemo(()=>n.reduce((t,i)=>{let{eventName:a,handler:s}=i;return t[a]=o=>{s(o,e)},t},{}),[n,e])}function UU(n){return G.useMemo(()=>n?VK(n):null,[n])}const yD=[];function yW(n,e){e===void 0&&(e=Zp);const[t]=n,i=UU(t?Ls(t):null),[a,s]=G.useState(yD);function o(){s(()=>n.length?n.map(f=>wU(f)?i:new MT(e(f),f)):yD)}const c=Zb({callback:o});return Oo(()=>{c?.disconnect(),o(),n.forEach(f=>c?.observe(f))},[n]),a}function LU(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return Z0(e)?e:n}function xW(n){let{measure:e}=n;const[t,i]=G.useState(null),a=G.useCallback(d=>{for(const{target:m}of d)if(Z0(m)){i(g=>{const y=e(m);return g?{...g,width:y.width,height:y.height}:y});break}},[e]),s=Zb({callback:a}),o=G.useCallback(d=>{const m=LU(d);s?.disconnect(),m&&s?.observe(m),i(m?e(m):null)},[e,s]),[c,f]=$_(o);return G.useMemo(()=>({nodeRef:c,rect:t,setRef:f}),[t,c,f])}const _W=[{sensor:TT,options:{}},{sensor:OU,options:{}}],bW={current:{}},Kx={draggable:{measure:uD},droppable:{measure:uD,strategy:A0.WhileDragging,frequency:EM.Optimized},dragOverlay:{measure:Zp}};class e0 extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const AW={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new e0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ib},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Kx,measureDroppableContainers:ib,windowRect:null,measuringScheduled:!1},IU={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ib,draggableNodes:new Map,over:null,measureDroppableContainers:ib},ev=G.createContext(IU),PU=G.createContext(AW);function SW(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new e0}}}function MW(n,e){switch(e.type){case Sa.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Sa.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Sa.DragEnd:case Sa.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Sa.RegisterDroppable:{const{element:t}=e,{id:i}=t,a=new e0(n.droppable.containers);return a.set(i,t),{...n,droppable:{...n.droppable,containers:a}}}case Sa.SetDroppableDisabled:{const{id:t,key:i,disabled:a}=e,s=n.droppable.containers.get(t);if(!s||i!==s.key)return n;const o=new e0(n.droppable.containers);return o.set(t,{...s,disabled:a}),{...n,droppable:{...n.droppable,containers:o}}}case Sa.UnregisterDroppable:{const{id:t,key:i}=e,a=n.droppable.containers.get(t);if(!a||i!==a.key)return n;const s=new e0(n.droppable.containers);return s.delete(t),{...n,droppable:{...n.droppable,containers:s}}}default:return n}}function EW(n){let{disabled:e}=n;const{active:t,activatorEvent:i,draggableNodes:a}=G.useContext(ev),s=eb(i),o=eb(t?.id);return G.useEffect(()=>{if(!e&&!i&&s&&o!=null){if(!Jb(s)||document.activeElement===s.target)return;const c=a.get(o);if(!c)return;const{activatorNode:f,node:d}=c;if(!f.current&&!d.current)return;requestAnimationFrame(()=>{for(const m of[f.current,d.current]){if(!m)continue;const g=vK(m);if(g){g.focus();break}}})}},[i,e,a,o,s]),null}function FU(n,e){let{transform:t,...i}=e;return n!=null&&n.length?n.reduce((a,s)=>s({transform:a,...i}),t):t}function TW(n){return G.useMemo(()=>({draggable:{...Kx.draggable,...n?.draggable},droppable:{...Kx.droppable,...n?.droppable},dragOverlay:{...Kx.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function CW(n){let{activeNode:e,measure:t,initialRect:i,config:a=!0}=n;const s=G.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;Oo(()=>{if(!o&&!c||!e){s.current=!1;return}if(s.current||!i)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const m=t(d),g=SU(m,i);if(o||(g.x=0),c||(g.y=0),s.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const y=EU(d);y&&y.scrollBy({top:g.y,left:g.x})}},[e,o,c,i,t])}const Qb=G.createContext({...Uo,scaleX:1,scaleY:1});var Ru;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Ru||(Ru={}));const wW=G.memo(function(e){var t,i,a,s;let{id:o,accessibility:c,autoScroll:f=!0,children:d,sensors:m=_W,collisionDetection:g=IK,measuring:y,modifiers:_,...A}=e;const T=G.useReducer(MW,void 0,SW),[E,b]=T,[R,D]=SK(),[B,U]=G.useState(Ru.Uninitialized),L=B===Ru.Initialized,{draggable:{active:z,nodes:I,translate:O},droppable:{containers:P}}=E,Y=z!=null?I.get(z):null,ie=G.useRef({initial:null,translated:null}),se=G.useMemo(()=>{var ft;return z!=null?{id:z,data:(ft=Y?.data)!=null?ft:bW,rect:ie}:null},[z,Y]),ue=G.useRef(null),[me,H]=G.useState(null),[W,q]=G.useState(null),ge=b0(A,Object.values(A)),j=$0("DndDescribedBy",o),fe=G.useMemo(()=>P.getEnabled(),[P]),_e=TW(y),{droppableRects:Ae,measureDroppableContainers:De,measuringScheduled:ot}=cW(fe,{dragging:L,dependencies:[O.x,O.y],config:_e.droppable}),ve=oW(I,z),Ne=G.useMemo(()=>W?nb(W):null,[W]),Qe=lt(),bt=uW(ve,_e.draggable.measure);CW({activeNode:z!=null?I.get(z):null,config:Qe.layoutShiftCompensation,initialRect:bt,measure:_e.draggable.measure});const ct=mD(ve,_e.draggable.measure,bt),zt=mD(ve?ve.parentElement:null),Xt=G.useRef({activatorEvent:null,active:null,activeNode:ve,collisionRect:null,collisions:null,droppableRects:Ae,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ae=P.getNodeFor((t=Xt.current.over)==null?void 0:t.id),Ye=xW({measure:_e.dragOverlay.measure}),je=(i=Ye.nodeRef.current)!=null?i:ve,Xe=L?(a=Ye.rect)!=null?a:ct:null,He=!!(Ye.nodeRef.current&&Ye.rect),gt=dW(He?null:ct),st=UU(je?Ls(je):null),rt=pW(L?ae??ve:null),Ot=yW(rt),Gt=FU(_,{transform:{x:O.x-gt.x,y:O.y-gt.y,scaleX:1,scaleY:1},activatorEvent:W,active:se,activeNodeRect:ct,containerNodeRect:zt,draggingNodeRect:Xe,over:Xt.current.over,overlayNodeRect:Ye.rect,scrollableAncestors:rt,scrollableAncestorRects:Ot,windowRect:st}),$=Ne?yp(Ne,O):null,X=mW(rt),Ee=vD(X),Fe=vD(X,[ct]),ke=yp(Gt,Ee),Le=Xe?zK(Xe,Gt):null,xt=se&&Le?g({active:se,collisionRect:Le,droppableRects:Ae,droppableContainers:fe,pointerCoordinates:$}):null,pt=OK(xt,"id"),[St,Rt]=G.useState(null),nt=He?Gt:yp(Gt,Fe),ut=PK(nt,(s=St?.rect)!=null?s:null,ct),Dt=G.useRef(null),re=G.useCallback((ft,it)=>{let{sensor:Ve,options:_t}=it;if(ue.current==null)return;const Mt=I.get(ue.current);if(!Mt)return;const Vt=ft.nativeEvent,jt=new Ve({active:ue.current,activeNode:Mt,event:Vt,options:_t,context:Xt,onAbort(cn){if(!I.get(cn))return;const{onDragAbort:Tn}=ge.current,li={id:cn};Tn?.(li),R({type:"onDragAbort",event:li})},onPending(cn,Xn,Tn,li){if(!I.get(cn))return;const{onDragPending:da}=ge.current,ii={id:cn,constraint:Xn,initialCoordinates:Tn,offset:li};da?.(ii),R({type:"onDragPending",event:ii})},onStart(cn){const Xn=ue.current;if(Xn==null)return;const Tn=I.get(Xn);if(!Tn)return;const{onDragStart:li}=ge.current,Ui={activatorEvent:Vt,active:{id:Xn,data:Tn.data,rect:ie}};Bg.unstable_batchedUpdates(()=>{li?.(Ui),U(Ru.Initializing),b({type:Sa.DragStart,initialCoordinates:cn,active:Xn}),R({type:"onDragStart",event:Ui}),H(Dt.current),q(Vt)})},onMove(cn){b({type:Sa.DragMove,coordinates:cn})},onEnd:oi(Sa.DragEnd),onCancel:oi(Sa.DragCancel)});Dt.current=jt;function oi(cn){return async function(){const{active:Tn,collisions:li,over:Ui,scrollAdjustedTranslate:da}=Xt.current;let ii=null;if(Tn&&da){const{cancelDrop:Yt}=ge.current;ii={activatorEvent:Vt,active:Tn,collisions:li,delta:da,over:Ui},cn===Sa.DragEnd&&typeof Yt=="function"&&await Promise.resolve(Yt(ii))&&(cn=Sa.DragCancel)}ue.current=null,Bg.unstable_batchedUpdates(()=>{b({type:cn}),U(Ru.Uninitialized),Rt(null),H(null),q(null),Dt.current=null;const Yt=cn===Sa.DragEnd?"onDragEnd":"onDragCancel";if(ii){const Xi=ge.current[Yt];Xi?.(ii),R({type:Yt,event:ii})}})}}},[I]),Se=G.useCallback((ft,it)=>(Ve,_t)=>{const Mt=Ve.nativeEvent,Vt=I.get(_t);if(ue.current!==null||!Vt||Mt.dndKit||Mt.defaultPrevented)return;const jt={active:Vt};ft(Ve,it.options,jt)===!0&&(Mt.dndKit={capturedBy:it.sensor},ue.current=_t,re(Ve,it))},[I,re]),tt=lW(m,Se);gW(m),Oo(()=>{ct&&B===Ru.Initializing&&U(Ru.Initialized)},[ct,B]),G.useEffect(()=>{const{onDragMove:ft}=ge.current,{active:it,activatorEvent:Ve,collisions:_t,over:Mt}=Xt.current;if(!it||!Ve)return;const Vt={active:it,activatorEvent:Ve,collisions:_t,delta:{x:ke.x,y:ke.y},over:Mt};Bg.unstable_batchedUpdates(()=>{ft?.(Vt),R({type:"onDragMove",event:Vt})})},[ke.x,ke.y]),G.useEffect(()=>{const{active:ft,activatorEvent:it,collisions:Ve,droppableContainers:_t,scrollAdjustedTranslate:Mt}=Xt.current;if(!ft||ue.current==null||!it||!Mt)return;const{onDragOver:Vt}=ge.current,jt=_t.get(pt),oi=jt&&jt.rect.current?{id:jt.id,rect:jt.rect.current,data:jt.data,disabled:jt.disabled}:null,cn={active:ft,activatorEvent:it,collisions:Ve,delta:{x:Mt.x,y:Mt.y},over:oi};Bg.unstable_batchedUpdates(()=>{Rt(oi),Vt?.(cn),R({type:"onDragOver",event:cn})})},[pt]),Oo(()=>{Xt.current={activatorEvent:W,active:se,activeNode:ve,collisionRect:Le,collisions:xt,droppableRects:Ae,draggableNodes:I,draggingNode:je,draggingNodeRect:Xe,droppableContainers:P,over:St,scrollableAncestors:rt,scrollAdjustedTranslate:ke},ie.current={initial:Xe,translated:Le}},[se,ve,xt,Le,I,je,Xe,Ae,P,St,rt,ke]),aW({...Qe,delta:O,draggingRect:Le,pointerCoordinates:$,scrollableAncestors:rt,scrollableAncestorRects:Ot});const ce=G.useMemo(()=>({active:se,activeNode:ve,activeNodeRect:ct,activatorEvent:W,collisions:xt,containerNodeRect:zt,dragOverlay:Ye,draggableNodes:I,droppableContainers:P,droppableRects:Ae,over:St,measureDroppableContainers:De,scrollableAncestors:rt,scrollableAncestorRects:Ot,measuringConfiguration:_e,measuringScheduled:ot,windowRect:st}),[se,ve,ct,W,xt,zt,Ye,I,P,Ae,St,De,rt,Ot,_e,ot,st]),be=G.useMemo(()=>({activatorEvent:W,activators:tt,active:se,activeNodeRect:ct,ariaDescribedById:{draggable:j},dispatch:b,draggableNodes:I,over:St,measureDroppableContainers:De}),[W,tt,se,ct,b,j,I,St,De]);return ti.createElement(AU.Provider,{value:D},ti.createElement(ev.Provider,{value:be},ti.createElement(PU.Provider,{value:ce},ti.createElement(Qb.Provider,{value:ut},d)),ti.createElement(EW,{disabled:c?.restoreFocus===!1})),ti.createElement(TK,{...c,hiddenTextDescribedById:j}));function lt(){const ft=me?.autoScrollEnabled===!1,it=typeof f=="object"?f.enabled===!1:f===!1,Ve=L&&!ft&&!it;return typeof f=="object"?{...f,enabled:Ve}:{enabled:Ve}}}),RW=G.createContext(null),xD="button",DW="Draggable";function BW(n){let{id:e,data:t,disabled:i=!1,attributes:a}=n;const s=$0(DW),{activators:o,activatorEvent:c,active:f,activeNodeRect:d,ariaDescribedById:m,draggableNodes:g,over:y}=G.useContext(ev),{role:_=xD,roleDescription:A="draggable",tabIndex:T=0}=a??{},E=f?.id===e,b=G.useContext(E?Qb:RW),[R,D]=$_(),[B,U]=$_(),L=vW(o,e),z=b0(t);Oo(()=>(g.set(e,{id:e,key:s,node:R,activatorNode:B,data:z}),()=>{const O=g.get(e);O&&O.key===s&&g.delete(e)}),[g,e]);const I=G.useMemo(()=>({role:_,tabIndex:T,"aria-disabled":i,"aria-pressed":E&&_===xD?!0:void 0,"aria-roledescription":A,"aria-describedby":m.draggable}),[i,_,T,E,A,m.draggable]);return{active:f,activatorEvent:c,activeNodeRect:d,attributes:I,isDragging:E,listeners:i?void 0:L,node:R,over:y,setNodeRef:D,setActivatorNodeRef:U,transform:b}}function zU(){return G.useContext(PU)}const NW="Droppable",OW={timeout:25};function HU(n){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:a}=n;const s=$0(NW),{active:o,dispatch:c,over:f,measureDroppableContainers:d}=G.useContext(ev),m=G.useRef({disabled:t}),g=G.useRef(!1),y=G.useRef(null),_=G.useRef(null),{disabled:A,updateMeasurementsFor:T,timeout:E}={...OW,...a},b=b0(T??i),R=G.useCallback(()=>{if(!g.current){g.current=!0;return}_.current!=null&&clearTimeout(_.current),_.current=setTimeout(()=>{d(Array.isArray(b.current)?b.current:[b.current]),_.current=null},E)},[E]),D=Zb({callback:R,disabled:A||!o}),B=G.useCallback((I,O)=>{D&&(O&&(D.unobserve(O),g.current=!1),I&&D.observe(I))},[D]),[U,L]=$_(B),z=b0(e);return G.useEffect(()=>{!D||!U.current||(D.disconnect(),g.current=!1,D.observe(U.current))},[U,D]),G.useEffect(()=>(c({type:Sa.RegisterDroppable,element:{id:i,key:s,disabled:t,node:U,rect:y,data:z}}),()=>c({type:Sa.UnregisterDroppable,key:s,id:i})),[i]),G.useEffect(()=>{t!==m.current.disabled&&(c({type:Sa.SetDroppableDisabled,id:i,key:s,disabled:t}),m.current.disabled=t)},[i,s,t,c]),{active:o,rect:y,isOver:f?.id===i,node:U,over:f,setNodeRef:L}}function UW(n){let{animation:e,children:t}=n;const[i,a]=G.useState(null),[s,o]=G.useState(null),c=eb(t);return!t&&!i&&c&&a(c),Oo(()=>{if(!s)return;const f=i?.key,d=i?.props.id;if(f==null||d==null){a(null);return}Promise.resolve(e(d,s)).then(()=>{a(null)})},[e,i,s]),ti.createElement(ti.Fragment,null,t,i?G.cloneElement(i,{ref:o}):null)}const LW={x:0,y:0,scaleX:1,scaleY:1};function IW(n){let{children:e}=n;return ti.createElement(ev.Provider,{value:IU},ti.createElement(Qb.Provider,{value:LW},e))}const PW={position:"fixed",touchAction:"none"},FW=n=>Jb(n)?"transform 250ms ease":void 0,zW=G.forwardRef((n,e)=>{let{as:t,activatorEvent:i,adjustScale:a,children:s,className:o,rect:c,style:f,transform:d,transition:m=FW}=n;if(!c)return null;const g=a?d:{...d,scaleX:1,scaleY:1},y={...PW,width:c.width,height:c.height,top:c.top,left:c.left,transform:zu.Transform.toString(g),transformOrigin:a&&i?DK(i,c):void 0,transition:typeof m=="function"?m(i):m,...f};return ti.createElement(t,{className:o,style:y,ref:e},s)}),HW=n=>e=>{let{active:t,dragOverlay:i}=e;const a={},{styles:s,className:o}=n;if(s!=null&&s.active)for(const[c,f]of Object.entries(s.active))f!==void 0&&(a[c]=t.node.style.getPropertyValue(c),t.node.style.setProperty(c,f));if(s!=null&&s.dragOverlay)for(const[c,f]of Object.entries(s.dragOverlay))f!==void 0&&i.node.style.setProperty(c,f);return o!=null&&o.active&&t.node.classList.add(o.active),o!=null&&o.dragOverlay&&i.node.classList.add(o.dragOverlay),function(){for(const[f,d]of Object.entries(a))t.node.style.setProperty(f,d);o!=null&&o.active&&t.node.classList.remove(o.active)}},GW=n=>{let{transform:{initial:e,final:t}}=n;return[{transform:zu.Transform.toString(e)},{transform:zu.Transform.toString(t)}]},VW={duration:250,easing:"ease",keyframes:GW,sideEffects:HW({styles:{active:{opacity:"0"}}})};function kW(n){let{config:e,draggableNodes:t,droppableContainers:i,measuringConfiguration:a}=n;return Wb((s,o)=>{if(e===null)return;const c=t.get(s);if(!c)return;const f=c.node.current;if(!f)return;const d=LU(o);if(!d)return;const{transform:m}=Ls(o).getComputedStyle(o),g=MU(m);if(!g)return;const y=typeof e=="function"?e:XW(e);return BU(f,a.draggable.measure),y({active:{id:s,data:c.data,node:f,rect:a.draggable.measure(f)},draggableNodes:t,dragOverlay:{node:o,rect:a.dragOverlay.measure(d)},droppableContainers:i,measuringConfiguration:a,transform:g})})}function XW(n){const{duration:e,easing:t,sideEffects:i,keyframes:a}={...VW,...n};return s=>{let{active:o,dragOverlay:c,transform:f,...d}=s;if(!e)return;const m={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},g={scaleX:f.scaleX!==1?o.rect.width*f.scaleX/c.rect.width:1,scaleY:f.scaleY!==1?o.rect.height*f.scaleY/c.rect.height:1},y={x:f.x-m.x,y:f.y-m.y,...g},_=a({...d,active:o,dragOverlay:c,transform:{initial:f,final:y}}),[A]=_,T=_[_.length-1];if(JSON.stringify(A)===JSON.stringify(T))return;const E=i?.({active:o,dragOverlay:c,...d}),b=c.node.animate(_,{duration:e,easing:t,fill:"forwards"});return new Promise(R=>{b.onfinish=()=>{E?.(),R()}})}}let _D=0;function jW(n){return G.useMemo(()=>{if(n!=null)return _D++,_D},[n])}const YW=ti.memo(n=>{let{adjustScale:e=!1,children:t,dropAnimation:i,style:a,transition:s,modifiers:o,wrapperElement:c="div",className:f,zIndex:d=999}=n;const{activatorEvent:m,active:g,activeNodeRect:y,containerNodeRect:_,draggableNodes:A,droppableContainers:T,dragOverlay:E,over:b,measuringConfiguration:R,scrollableAncestors:D,scrollableAncestorRects:B,windowRect:U}=zU(),L=G.useContext(Qb),z=jW(g?.id),I=FU(o,{activatorEvent:m,active:g,activeNodeRect:y,containerNodeRect:_,draggingNodeRect:E.rect,over:b,overlayNodeRect:E.rect,scrollableAncestors:D,scrollableAncestorRects:B,transform:L,windowRect:U}),O=CT(y),P=kW({config:i,draggableNodes:A,droppableContainers:T,measuringConfiguration:R}),Y=O?E.setRef:void 0;return ti.createElement(IW,null,ti.createElement(UW,{animation:P},g&&z?ti.createElement(zW,{key:z,id:g.id,ref:Y,as:c,activatorEvent:m,adjustScale:e,className:f,transition:s,rect:O,style:{zIndex:d,...a},transform:I},t):null))});function sb(n,e,t){const i=n.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function qW(n,e){return n.reduce((t,i,a)=>{const s=e.get(i);return s&&(t[a]=s),t},Array(n.length))}function Ux(n){return n!==null&&n>=0}function KW(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function WW(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const Lx={scaleX:1,scaleY:1},JW=n=>{var e;let{rects:t,activeNodeRect:i,activeIndex:a,overIndex:s,index:o}=n;const c=(e=t[a])!=null?e:i;if(!c)return null;const f=ZW(t,o,a);if(o===a){const d=t[s];return d?{x:a<s?d.left+d.width-(c.left+c.width):d.left-c.left,y:0,...Lx}:null}return o>a&&o<=s?{x:-c.width-f,y:0,...Lx}:o<a&&o>=s?{x:c.width+f,y:0,...Lx}:{x:0,y:0,...Lx}};function ZW(n,e,t){const i=n[e],a=n[e-1],s=n[e+1];return!i||!a&&!s?0:t<e?a?i.left-(a.left+a.width):s.left-(i.left+i.width):s?s.left-(i.left+i.width):i.left-(a.left+a.width)}const GU=n=>{let{rects:e,activeIndex:t,overIndex:i,index:a}=n;const s=sb(e,i,t),o=e[a],c=s[a];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},Ix={scaleX:1,scaleY:1},QW=n=>{var e;let{activeIndex:t,activeNodeRect:i,index:a,rects:s,overIndex:o}=n;const c=(e=s[t])!=null?e:i;if(!c)return null;if(a===t){const d=s[o];return d?{x:0,y:t<o?d.top+d.height-(c.top+c.height):d.top-c.top,...Ix}:null}const f=$W(s,a,t);return a>t&&a<=o?{x:0,y:-c.height-f,...Ix}:a<t&&a>=o?{x:0,y:c.height+f,...Ix}:{x:0,y:0,...Ix}};function $W(n,e,t){const i=n[e],a=n[e-1],s=n[e+1];return i?t<e?a?i.top-(a.top+a.height):s?s.top-(i.top+i.height):0:s?s.top-(i.top+i.height):a?i.top-(a.top+a.height):0:0}const VU="Sortable",kU=ti.createContext({activeIndex:-1,containerId:VU,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:GU,disabled:{draggable:!1,droppable:!1}});function XU(n){let{children:e,id:t,items:i,strategy:a=GU,disabled:s=!1}=n;const{active:o,dragOverlay:c,droppableRects:f,over:d,measureDroppableContainers:m}=zU(),g=$0(VU,t),y=c.rect!==null,_=G.useMemo(()=>i.map(L=>typeof L=="object"&&"id"in L?L.id:L),[i]),A=o!=null,T=o?_.indexOf(o.id):-1,E=d?_.indexOf(d.id):-1,b=G.useRef(_),R=!KW(_,b.current),D=E!==-1&&T===-1||R,B=WW(s);Oo(()=>{R&&A&&m(_)},[R,_,A,m]),G.useEffect(()=>{b.current=_},[_]);const U=G.useMemo(()=>({activeIndex:T,containerId:g,disabled:B,disableTransforms:D,items:_,overIndex:E,useDragOverlay:y,sortedRects:qW(_,f),strategy:a}),[T,g,B.draggable,B.droppable,D,_,E,f,y,a]);return ti.createElement(kU.Provider,{value:U},e)}const eJ=n=>{let{id:e,items:t,activeIndex:i,overIndex:a}=n;return sb(t,i,a).indexOf(e)},tJ=n=>{let{containerId:e,isSorting:t,wasDragging:i,index:a,items:s,newIndex:o,previousItems:c,previousContainerId:f,transition:d}=n;return!d||!i||c!==s&&a===o?!1:t?!0:o!==a&&e===f},nJ={duration:200,easing:"ease"},jU="transform",iJ=zu.Transition.toString({property:jU,duration:0,easing:"linear"}),aJ={roleDescription:"sortable"};function sJ(n){let{disabled:e,index:t,node:i,rect:a}=n;const[s,o]=G.useState(null),c=G.useRef(t);return Oo(()=>{if(!e&&t!==c.current&&i.current){const f=a.current;if(f){const d=Zp(i.current,{ignoreTransform:!0}),m={x:f.left-d.left,y:f.top-d.top,scaleX:f.width/d.width,scaleY:f.height/d.height};(m.x||m.y)&&o(m)}}t!==c.current&&(c.current=t)},[e,t,i,a]),G.useEffect(()=>{s&&o(null)},[s]),s}function YU(n){let{animateLayoutChanges:e=tJ,attributes:t,disabled:i,data:a,getNewIndex:s=eJ,id:o,strategy:c,resizeObserverConfig:f,transition:d=nJ}=n;const{items:m,containerId:g,activeIndex:y,disabled:_,disableTransforms:A,sortedRects:T,overIndex:E,useDragOverlay:b,strategy:R}=G.useContext(kU),D=rJ(i,_),B=m.indexOf(o),U=G.useMemo(()=>({sortable:{containerId:g,index:B,items:m},...a}),[g,a,B,m]),L=G.useMemo(()=>m.slice(m.indexOf(o)),[m,o]),{rect:z,node:I,isOver:O,setNodeRef:P}=HU({id:o,data:U,disabled:D.droppable,resizeObserverConfig:{updateMeasurementsFor:L,...f}}),{active:Y,activatorEvent:ie,activeNodeRect:se,attributes:ue,setNodeRef:me,listeners:H,isDragging:W,over:q,setActivatorNodeRef:ge,transform:j}=BW({id:o,data:U,attributes:{...aJ,...t},disabled:D.draggable}),fe=dK(P,me),_e=!!Y,Ae=_e&&!A&&Ux(y)&&Ux(E),De=!b&&W,ot=De&&Ae?j:null,Ne=Ae?ot??(c??R)({rects:T,activeNodeRect:se,activeIndex:y,overIndex:E,index:B}):null,Qe=Ux(y)&&Ux(E)?s({id:o,items:m,activeIndex:y,overIndex:E}):B,bt=Y?.id,ct=G.useRef({activeId:bt,items:m,newIndex:Qe,containerId:g}),zt=m!==ct.current.items,Xt=e({active:Y,containerId:g,isDragging:W,isSorting:_e,id:o,index:B,items:m,newIndex:ct.current.newIndex,previousItems:ct.current.items,previousContainerId:ct.current.containerId,transition:d,wasDragging:ct.current.activeId!=null}),ae=sJ({disabled:!Xt,index:B,node:I,rect:z});return G.useEffect(()=>{_e&&ct.current.newIndex!==Qe&&(ct.current.newIndex=Qe),g!==ct.current.containerId&&(ct.current.containerId=g),m!==ct.current.items&&(ct.current.items=m)},[_e,Qe,g,m]),G.useEffect(()=>{if(bt===ct.current.activeId)return;if(bt!=null&&ct.current.activeId==null){ct.current.activeId=bt;return}const je=setTimeout(()=>{ct.current.activeId=bt},50);return()=>clearTimeout(je)},[bt]),{active:Y,activeIndex:y,attributes:ue,data:U,rect:z,index:B,newIndex:Qe,items:m,isOver:O,isSorting:_e,isDragging:W,listeners:H,node:I,overIndex:E,over:q,setNodeRef:fe,setActivatorNodeRef:ge,setDroppableNodeRef:P,setDraggableNodeRef:me,transform:ae??Ne,transition:Ye()};function Ye(){if(ae||zt&&ct.current.newIndex===B)return iJ;if(!(De&&!Jb(ie)||!d)&&(_e||Xt))return zu.Transition.toString({...d,property:jU})}}function rJ(n,e){var t,i;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(i=n?.droppable)!=null?i:e.droppable}}ei.Down,ei.Right,ei.Up,ei.Left;const qU=({task:n,columnId:e,columnTagColor:t})=>{const{attributes:i,listeners:a,setNodeRef:s,transform:o,transition:c,isDragging:f}=YU({id:n.id,data:{type:"Task",task:n,columnId:e}}),d={transform:zu.Transform.toString(o),transition:c},g=`
    p-3 rounded-lg shadow-sm cursor-grab active:cursor-grabbing
    transition-colors duration-200
    ${e==="done"?"bg-emerald-800 border border-emerald-700 text-emerald-100 hover:bg-emerald-700":"bg-gray-800 border border-gray-700 text-gray-100 hover:bg-gray-700"}
  `;return f?ee.jsx("div",{ref:s,style:d,className:`${g} opacity-50`}):ee.jsx(Ns.div,{ref:s,style:d,...i,...a,layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},className:g,children:ee.jsx("p",{className:"text-sm whitespace-pre-wrap",children:n.content})})};function oJ(...n){return G.useMemo(()=>e=>{n.forEach(t=>{t&&(typeof t=="function"?t(e):t.current=e)})},[n])}const bD=({column:n})=>{const[e,t]=G.useState(!1),[i,a]=G.useState(""),{addTask:s}=xU(),{setNodeRef:o,isOver:c}=HU({id:n.id,data:{type:"Column"}}),{attributes:f,listeners:d,setNodeRef:m,transform:g,transition:y,isDragging:_}=YU({id:n.id,data:{type:"Column",column:n}}),A=oJ(o,m),T={transition:y,transform:g?`translate3d(${g.x}px, 0, 0)`:void 0},E=n.tasks.map(D=>D.id),b=()=>{if(i.trim()==="")return t(!1);s(n.id,i),a(""),t(!1)},R=()=>{a(""),t(!1)};return ee.jsxs("div",{ref:A,style:T,className:`
        flex flex-col max-h-[90vh]
        bg-gray-950 rounded-lg
        
        /* DEKLK: 
          - Kolon genilii mobil iin daraltld ('w-64')
          - Ekran bydke kademeli olarak geniletildi.
        */
        w-64 sm:w-72 md:w-80
        
        ${_?"opacity-50":"opacity-100"}
        ${c?"ring-2 ring-teal-500":""}
      `,children:[ee.jsxs("h3",{...f,...d,className:"flex items-center justify-between p-4 text-lg font-bold text-white cursor-grab active:cursor-grabbing",children:[ee.jsxs("span",{className:"flex items-center gap-2",children:[ee.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium text-white ${n.tagColor}`,children:n.title}),ee.jsx("span",{className:"text-sm font-normal text-gray-400",children:n.tasks.length})]}),ee.jsx(WG,{className:"text-gray-500"})]}),ee.jsx("div",{className:"flex flex-col flex-shrink min-h-0 gap-3 p-4 pt-0 overflow-y-auto",children:ee.jsx(XU,{items:E,strategy:QW,children:ee.jsx(Ns.div,{layout:!0,className:"flex flex-col gap-3",children:ee.jsx(xp,{children:n.tasks.map(D=>ee.jsx(qU,{task:D,columnId:n.id,columnTagColor:n.tagColor},D.id))})})})}),ee.jsx("div",{className:"p-4 pt-2 mt-auto",children:e?ee.jsxs("div",{className:"flex flex-col gap-2",children:[ee.jsx("textarea",{value:i,onChange:D=>a(D.target.value),placeholder:"Grev ieriini girin...",rows:3,autoFocus:!0,className:"w-full p-2 text-sm text-white bg-gray-800 border border-gray-600 rounded-md focus:outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500"}),ee.jsxs("div",{className:"flex items-center gap-2",children:[ee.jsx("button",{onClick:b,className:"flex-grow px-4 py-2 text-sm font-semibold text-white bg-teal-600 rounded-md hover:bg-teal-700",children:"Grevi Kaydet"}),ee.jsx("button",{onClick:R,className:"px-4 py-2 text-sm text-gray-300 bg-gray-600 rounded-md hover:bg-gray-700",children:"ptal"})]})]}):ee.jsx("button",{onClick:()=>t(!0),className:"w-full px-2 py-1 text-sm font-medium text-gray-400 rounded-md hover:text-white",children:"+ Yeni Grev Ekle"})})]})};function lJ(){const{columns:n,setColumns:e,columnOrder:t,setColumnOrder:i}=xU(),[a,s]=G.useState(null),[o,c]=G.useState(null),[f,d]=G.useState(null),[m,g]=G.useState(null),y="/Interface-Foundryy/storybook/?path=/docs/sayfalar-kanban-grev-panosu--docs",_=wK(CK(TT,{activationConstraint:{distance:10}}));function A(b){const{data:R}=b.active,D=R.current?.type;if(D==="Task"){c("Task"),s(R.current?.task);const B=R.current?.columnId;d(B),g(n[B].tagColor)}else D==="Column"&&(c("Column"),s(R.current?.column))}function T(b){const{active:R,over:D}=b;if(!D||!(R.data.current?.type==="Task"))return;const U=D.data.current?.type==="Column",L=D.data.current?.type==="Task";if(U||L){const z=R.id,I=D.id,O=R.data.current.columnId,P=L?D.data.current.columnId:I;O!==P&&e(Y=>{const ie=Y[O].tasks,se=ie.findIndex(q=>q.id===z),ue=ie[se];if(!ue)return Y;const me=ie.filter(q=>q.id!==z),H=Y[P].tasks,W=[...H];if(L){const q=H.findIndex(ge=>ge.id===I);W.splice(q,0,ue)}else W.push(ue);return R.data.current.columnId=P,{...Y,[O]:{...Y[O],tasks:me},[P]:{...Y[P],tasks:W}}})}}function E(b){s(null),c(null),d(null),g(null);const{active:R,over:D}=b;if(D&&R.id!==D.id){if(R.data.current?.type==="Column"){const B=t.findIndex(L=>L===R.id),U=t.findIndex(L=>L===D.id);i(sb(t,B,U));return}if(R.data.current?.type==="Task"){const B=R.data.current.columnId,U=D.data.current?.type==="Task"?D.data.current.columnId:D.data.current?.type==="Column"?D.id:null;if(!U||B!==U)return;const L=n[B].tasks.findIndex(I=>I.id===R.id),z=n[B].tasks.findIndex(I=>I.id===D.id);if(L===-1||z===-1)return;e(I=>{const O=sb(I[B].tasks,L,z);return{...I,[B]:{...I[B],tasks:O}}})}}}return ee.jsxs(wW,{sensors:_,collisionDetection:UK,onDragStart:A,onDragOver:T,onDragEnd:E,children:[ee.jsxs("div",{className:"relative min-h-screen p-4 text-white bg-black md:p-8",children:[ee.jsxs("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"absolute z-20 flex items-center gap-2 px-4 py-2 text-white transition-colors bg-gray-800 rounded-lg top-4 right-4 md:top-8 md:right-8 hover:bg-gray-700",title:"Storybook'u A",children:[ee.jsx(N0,{className:"text-xl text-pink-500"}),ee.jsx("span",{className:"hidden sm:inline",children:"Storybook"})]}),ee.jsx(Tc,{to:"/",className:"inline-block px-4 py-2 mb-8 text-white bg-gray-800 rounded-lg hover:bg-gray-700",children:" Ana Sayfa"}),ee.jsx("h1",{className:"mb-12 text-4xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-b from-neutral-50 to-neutral-400",children:"Kanban Grev Panosu"}),ee.jsx("div",{className:"flex gap-4 p-4 overflow-x-auto md:justify-center",children:ee.jsx(XU,{items:t,strategy:JW,children:t.map(b=>ee.jsx(bD,{column:n[b]},b))})})]}),ee.jsxs(YW,{children:[o==="Column"&&ee.jsx(bD,{column:a}),o==="Task"&&ee.jsx(qU,{task:a,columnId:f,columnTagColor:m})]})]})}const KU=G.createContext(void 0),cJ=({children:n})=>{const[e,t]=G.useState(!1),i=G.useCallback(()=>t(!0),[]),a=G.useCallback(()=>t(!1),[]),s=G.useCallback(()=>t(c=>!c),[]),o={isOpen:e,openPalette:i,closePalette:a,togglePalette:s};return ee.jsx(KU.Provider,{value:o,children:n})},wT=()=>{const n=G.useContext(KU);if(n===void 0)throw new Error("useCommandPalette, CommandPaletteProvider iinde kullanlmaldr");return n},uJ=()=>{const{isOpen:n,closePalette:e}=wT(),t=ND(),i=G.useMemo(()=>[{title:"Ana Sayfa",href:"/",icon:ee.jsx(JG,{})},{title:"3D Kart Bileeni",href:"/component/3d-card",icon:ee.jsx(Jw,{})},{title:"AI Destekli Arama",href:"/component/ai-search",icon:ee.jsx(ZG,{})},{title:"rn Yaplandrc",href:"/component/product-configurator",icon:ee.jsx(Jw,{})},{title:"Alveri Sepeti",href:"/component/shopping-cart",icon:ee.jsx(U3,{})},{title:"Kanban Panosu",href:"/component/kanban-board",icon:ee.jsx(QG,{})}],[]),[a,s]=G.useState(""),[o,c]=G.useState(i),[f,d]=G.useState(0),m=G.useRef(null),g=G.useRef(null),y=A=>{const T=A.target.value;if(s(T),d(0),T.trim()==="")c(i);else{const E=T.toLowerCase().split(" ").filter(Boolean),b=i.filter(R=>{const D=R.title.toLowerCase();return E.every(B=>D.includes(B))});c(b)}};G.useEffect(()=>{if(!n){const A=setTimeout(()=>{s(""),c(i),d(0)},200);return()=>clearTimeout(A)}},[n,i]),G.useEffect(()=>{g.current&&g.current.scrollIntoView({block:"nearest"})},[f]);const _=A=>{if(o.length!==0){if(A.key==="ArrowDown")A.preventDefault(),d(T=>(T+1)%o.length);else if(A.key==="ArrowUp")A.preventDefault(),d(T=>(T-1+o.length)%o.length);else if(A.key==="Enter"){A.preventDefault();const T=o[f];T&&(t(T.href),e())}}};return ee.jsx(xp,{children:n&&ee.jsxs(ee.Fragment,{children:[ee.jsx(Ns.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:e,className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm"}),ee.jsxs(Ns.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{type:"spring",stiffness:400,damping:25},className:"fixed top-[20%] left-1/2 -translate-x-1/2 z-50 w-full max-w-lg rounded-xl bg-gray-900 border border-gray-700 shadow-2xl",children:[ee.jsxs("div",{className:"flex items-center p-4 border-b border-gray-700",children:[ee.jsx(O3,{className:"mr-3 text-gray-400"}),ee.jsx("input",{type:"text",placeholder:"Arayn veya komut yazn...",value:a,onChange:y,onKeyDown:_,className:"w-full text-white bg-transparent placeholder:text-gray-500 focus:outline-none",autoFocus:!0})]}),ee.jsx("ul",{ref:m,className:"p-2 max-h-[300px] overflow-y-auto",children:o.length===0?ee.jsx("li",{className:"p-3 text-center text-gray-400",children:"Sonu bulunamad."}):o.map((A,T)=>ee.jsx("li",{ref:T===f?g:null,className:`rounded-lg
                      ${T===f?"bg-gray-800":"hover:bg-gray-800"}
                    `,onMouseEnter:()=>d(T),children:ee.jsxs(Tc,{to:A.href,onClick:e,className:"flex items-center w-full h-full gap-3 p-3 text-gray-200",children:[ee.jsx("span",{className:"text-gray-400",children:A.icon}),A.title]})},A.href))}),ee.jsx("div",{className:"p-2 text-xs text-center text-gray-500 border-t border-gray-700",children:"Interface Foundry Hzl Gezgin"})]})]})})},fJ=()=>{const{togglePalette:n,closePalette:e,isOpen:t}=wT(),i=G.useCallback(a=>{a.key==="k"&&(a.metaKey||a.ctrlKey)&&(a.preventDefault(),n()),a.key==="Escape"&&t&&(a.preventDefault(),e())},[n,e,t]);G.useEffect(()=>(window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}),[i])},hJ=()=>{const{openPalette:n}=wT();return ee.jsx("button",{onClick:n,className:"fixed z-40 p-4 text-white bg-gray-800 border border-gray-700 rounded-full shadow-lg md:hidden bottom-6 right-6 active:bg-gray-700","aria-label":"Aramay (Komut Paletini) A",children:ee.jsx(O3,{className:"w-5 h-5"})})},dJ=()=>(fJ(),ee.jsxs(tP,{basename:"/Interface-Foundryy/",children:[ee.jsx(uJ,{}),ee.jsx(hJ,{})," ",ee.jsxs(NI,{children:[ee.jsx(eh,{path:"/",element:ee.jsx(IG,{})}),ee.jsx(eh,{path:"/component/3d-card",element:ee.jsx(t6,{})}),ee.jsx(eh,{path:"/component/product-configurator",element:ee.jsx($q,{})}),ee.jsx(eh,{path:"/component/ai-search",element:ee.jsx(fK,{})}),ee.jsx(eh,{path:"/component/shopping-cart",element:ee.jsx(cK,{})}),ee.jsx(eh,{path:"/component/kanban-board",element:ee.jsx(lJ,{})})]})]}));function pJ(){return ee.jsx(tK,{children:ee.jsx(iK,{children:ee.jsx(cJ,{children:ee.jsx(hK,{children:ee.jsx(dJ,{})})})})})}VL.createRoot(document.getElementById("root")).render(ee.jsx(G.StrictMode,{children:ee.jsx(pJ,{})}));
